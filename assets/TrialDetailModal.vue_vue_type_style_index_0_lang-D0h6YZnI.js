import{_ as a}from"./BaseModal.vue_vue_type_style_index_0_lang-D3rbY83j.js";import{d as e,c as t,V as l,Z as r,Y as s,_ as o,a6 as i,a1 as n,k as d,W as p,G as c,a0 as u,F as m}from"./vendor-DImCB_rW.js";const g={class:"trial-overview"},f={class:"overview-section"},v={class:"cost-value"},_={key:0,class:"text-secondary",style:{"margin-left":"8px"}},b={class:"overview-section"},y={class:"progress-details"},h={class:"progress-stats"},k={class:"configurations-section"},w={key:0,class:"model-info"},C={key:0},$={class:"prompt-section"},P={key:0,class:"variables-section"},x=e({__name:"TrialDetailModal",props:{trial:{}},emits:["close","updated"],setup(e){const x=e,S=[{title:"Model",key:"model",width:200},{title:"Parameters",key:"params",width:300},{title:"Cost/Call",key:"cost",width:100,align:"right"}],z=t(()=>0===x.trial.progress.total?0:Math.round(x.trial.progress.completed/x.trial.progress.total*100));function T(a){const e=Object.entries(a).map(([a,e])=>`${a}: ${e}`).join(", ");return e.length>50?e.substring(0,50)+"...":e}function N(){const a=x.trial.variableSnapshots;return a&&0!==a.length?a.map(a=>({variable:a.variableName,listName:a.originalListName,count:a.data.itemCount})):[]}return(e,t)=>{const x=p("a-button"),j=p("a-tag"),E=p("a-descriptions-item"),M=p("a-descriptions"),B=p("a-progress"),D=p("a-typography-text"),F=p("a-table"),I=p("a-typography-paragraph"),R=p("a-list-item-meta"),V=p("a-list-item"),L=p("a-list");return s(),l(a,{"model-value":!0,title:e.trial.name,size:"full","onUpdate:modelValue":t[1]||(t[1]=a=>e.$emit("close"))},{footer:r(()=>[d(x,{onClick:t[0]||(t[0]=a=>e.$emit("close")),size:"large","data-testid":"btn-close-trial-detail","aria-label":"Close trial details"},{default:r(()=>t[2]||(t[2]=[c(" Close ")])),_:1,__:[2]})]),default:r(()=>[o("div",g,[o("div",f,[t[3]||(t[3]=o("h3",null,"Trial Information",-1)),d(M,{column:2,size:"small",bordered:""},{default:r(()=>[d(E,{label:"Status"},{default:r(()=>{return[d(j,{color:(a=e.trial.status,{completed:"success",failed:"error",running:"processing",cancelled:"default",draft:"default",pending:"processing",paused:"warning"}[a]||"default"),"data-testid":"tag-trial-status","data-status":e.trial.status,"aria-label":`Trial status: ${e.trial.status}`},{default:r(()=>[c(u(e.trial.status.toUpperCase()),1)]),_:1},8,["color","data-status","aria-label"])];var a}),_:1}),d(E,{label:"Design"},{default:r(()=>[c(u(e.trial.designSnapshot.originalName),1)]),_:1}),d(E,{label:"Created"},{default:r(()=>{return[c(u((a=e.trial.created,new Date(a).toLocaleString())),1)];var a}),_:1}),d(E,{label:"Estimated Cost"},{default:r(()=>[o("span",v,"$"+u(e.trial.estimatedCost.toFixed(3)),1)]),_:1}),e.trial.repeatConfig?.callsPerPrompt&&e.trial.repeatConfig.callsPerPrompt>1?(s(),l(E,{key:0,label:"Repeat Configuration"},{default:r(()=>[d(j,{color:"purple"},{default:r(()=>[c(u(e.trial.repeatConfig.callsPerPrompt)+"Ã— repeat",1)]),_:1}),e.trial.repeatConfig.delayBetweenRepeats?(s(),i("span",_,u(e.trial.repeatConfig.delayBetweenRepeats)+"ms delay ",1)):n("",!0)]),_:1})):n("",!0)]),_:1})]),o("div",b,[t[4]||(t[4]=o("h3",null,"Progress",-1)),o("div",y,[d(B,{percent:z.value,status:"failed"===e.trial.status?"exception":"active",size:"small","data-testid":"progress-trial-completion","aria-label":`Trial progress: ${z.value}% complete`},null,8,["percent","status","aria-label"]),o("div",h,[d(j,{"data-testid":"tag-progress-completed","aria-label":`${e.trial.progress.completed} of ${e.trial.progress.total} calls completed`},{default:r(()=>[c(u(e.trial.progress.completed)+" / "+u(e.trial.progress.total)+" completed",1)]),_:1},8,["aria-label"]),e.trial.progress.networkErrors>0?(s(),l(j,{key:0,color:"error","data-testid":"tag-network-errors","aria-label":`${e.trial.progress.networkErrors} network errors occurred`},{default:r(()=>[c(u(e.trial.progress.networkErrors)+" network errors ",1)]),_:1},8,["aria-label"])):n("",!0)])])])]),o("div",k,[o("h3",null,"Configurations ("+u(e.trial.configurationSnapshots.length)+")",1),d(F,{columns:S,"data-source":e.trial.configurationSnapshots,pagination:!1,size:"small",scroll:{y:300},"row-key":"id"},{bodyCell:r(({column:a,record:e})=>["model"===a.key?(s(),i("div",w,[o("strong",null,u(e.provider),1),o("small",null,u(e.modelId),1)])):n("",!0),"params"===a.key?(s(),l(D,{key:1,code:"",class:"params-preview"},{default:r(()=>[c(u(T(e.parameters)),1)]),_:2},1024)):n("",!0),"cost"===a.key?(s(),i(m,{key:2},[(s(),i("span",C," $"+u(.001.toFixed(4)),1))],64)):n("",!0)]),_:1},8,["data-source"])]),o("div",$,[t[5]||(t[5]=o("h3",null,"Prompt Template",-1)),d(I,{code:"",class:"prompt-template"},{default:r(()=>[c(u(e.trial.designSnapshot.promptTemplate),1)]),_:1})]),e.trial.variableSnapshots?.length?(s(),i("div",P,[t[6]||(t[6]=o("h3",null,"Variables",-1)),d(L,{"data-source":N(),size:"small",split:!1},{renderItem:r(({item:a})=>[d(V,null,{default:r(()=>[d(R,null,{title:r(()=>[d(j,{color:"blue"},{default:r(()=>[c(u(a.variable),1)]),_:2},1024)]),description:r(()=>[o("span",null,u(a.listName)+" ("+u(a.count)+" values)",1)]),_:2},1024)]),_:2},1024)]),_:1},8,["data-source"])])):n("",!0)]),_:1},8,["title"])}}});export{x as _};
