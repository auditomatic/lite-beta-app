import{k as e,d as a,f as t,o as l,aa as s,Z as n,a0 as i,F as o,ab as r,a2 as c,c as d,$ as u,q as p,ac as v,G as m,a3 as g,u as b,ad as h,ae as f,b as y,Y as w,X as k,_,W as C}from"./vendor-B8IWC-3k.js";import{I as D,e as x,p as T,_ as A,l as S,g as I,i as P,h as E,M as N,B as U,j as R,Q as L}from"./index-GDcAgx-V.js";import{s as M}from"./storage-calculation.service-BQq3qhUR.js";import{p as O,a as j,b as z,c as $,d as V,e as B}from"./import-helpers-R1GGtEJc.js";import"./db-CL8uhZCz.js";var K={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 736c0-111.6-65.4-208-160-252.9V317.3c0-15.1-5.3-29.7-15.1-41.2L536.5 95.4C530.1 87.8 521 84 512 84s-18.1 3.8-24.5 11.4L335.1 276.1a63.97 63.97 0 00-15.1 41.2v165.8C225.4 528 160 624.4 160 736h156.5c-2.3 7.2-3.5 15-3.5 23.8 0 22.1 7.6 43.7 21.4 60.8a97.2 97.2 0 0043.1 30.6c23.1 54 75.6 88.8 134.5 88.8 29.1 0 57.3-8.6 81.4-24.8 23.6-15.8 41.9-37.9 53-64a97 97 0 0043.1-30.5 97.52 97.52 0 0021.4-60.8c0-8.4-1.1-16.4-3.1-23.8H864zM762.3 621.4c9.4 14.6 17 30.3 22.5 46.6H700V558.7a211.6 211.6 0 0162.3 62.7zM388 483.1V318.8l124-147 124 147V668H388V483.1zM239.2 668c5.5-16.3 13.1-32 22.5-46.6 16.3-25.2 37.5-46.5 62.3-62.7V668h-84.8zm388.9 116.2c-5.2 3-11.2 4.2-17.1 3.4l-19.5-2.4-2.8 19.4c-5.4 37.9-38.4 66.5-76.7 66.5-38.3 0-71.3-28.6-76.7-66.5l-2.8-19.5-19.5 2.5a27.7 27.7 0 01-17.1-3.5c-8.7-5-14.1-14.3-14.1-24.4 0-10.6 5.9-19.4 14.6-23.8h231.3c8.8 4.5 14.6 13.3 14.6 23.8-.1 10.2-5.5 19.6-14.2 24.5zM464 400a48 48 0 1096 0 48 48 0 10-96 0z"}}]},name:"rocket",theme:"outlined"};function W(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?Object(arguments[a]):{},l=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(l=l.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),l.forEach(function(a){F(e,a,t[a])})}return e}function F(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}var G=function(a,t){var l=W({},a,t.attrs);return e(D,W({},l,{icon:K}),null)};G.displayName="RocketOutlined",G.inheritAttrs=!1;const H=!1,J={class:"provider-endpoint-configuration"},q={class:"endpoint-grid"},Y=["value","onInput","placeholder","disabled","data-testid","aria-label"],Z=A(a({__name:"ProviderEndpointConfiguration",setup(e){const a=x(),d=t([]);function u(e){const a=d.value.find(a=>a.id===e);return a?.api.baseUrl||""}function p(e){return a.isProviderEnabled(e)}return l(async()=>{await T.waitForReady(),d.value=[...T.getAllProviders()]}),(e,t)=>(n(),s("div",J,[t[0]||(t[0]=i("h3",null,"Provider Endpoints",-1)),t[1]||(t[1]=i("p",{class:"section-desc"},"Configure base URLs for API providers",-1)),i("div",q,[(n(!0),s(o,null,r(d.value,e=>{return n(),s("div",{key:e.id,class:"endpoint-item"},[i("label",null,c(e.name),1),i("input",{value:(t=e.id,a.getBaseUrl(t)||""),onInput:t=>function(e,t){const l=t.target.value;a.setBaseUrl(e,l)}(e.id,t),placeholder:u(e.id),disabled:!p(e.id),class:"endpoint-input","data-testid":`input-endpoint-${e.id}`,"aria-label":`${e.name} endpoint URL`},null,40,Y)]);var t}),128))])]))}}),[["__scopeId","data-v-451d83ee"]]),Q={class:"system-information-panel"},X={class:"info-grid"},ee={class:"info-item"},ae={class:"info-item"},te={class:"info-item"},le={class:"info-item"},se=A(a({__name:"SystemInformationPanel",props:{totalRecords:{}},setup(e){const a=e,o=t(null),r=d(()=>({dbVersion:"1.0.0",totalRecords:a.totalRecords,storageUsed:o.value?o.value.formattedUsed:"Calculating...",lastUpdated:(new Date).toLocaleString()}));return l(async()=>{try{o.value=await M.getStorageInfo()}catch(e){S.warn("Failed to get storage info",{error:e})}}),(e,a)=>(n(),s("div",Q,[a[4]||(a[4]=i("h3",null,"System Information",-1)),i("div",X,[i("div",ee,[a[0]||(a[0]=i("label",null,"Database Version:",-1)),i("span",null,c(r.value.dbVersion),1)]),i("div",ae,[a[1]||(a[1]=i("label",null,"Records Count:",-1)),i("span",null,c(r.value.totalRecords),1)]),i("div",te,[a[2]||(a[2]=i("label",null,"Storage Used:",-1)),i("span",null,c(r.value.storageUsed),1)]),i("div",le,[a[3]||(a[3]=i("label",null,"Last Updated:",-1)),i("span",null,c(r.value.lastUpdated),1)])])]))}}),[["__scopeId","data-v-92906e97"]]),ne={class:"database-table-manager"},ie={class:"table-header"},oe={class:"table-actions"},re=["onClick","data-testid","aria-label"],ce=["onClick","data-testid","aria-label"],de=["onClick","disabled","data-testid","aria-label"],ue={key:0,class:"table-content"},pe={class:"table-controls"},ve=["onUpdate:modelValue","data-testid","aria-label"],me=["onClick","data-testid","aria-label"],ge={class:"table-data"},be=["onClick","data-testid","aria-label","aria-expanded"],he=A(a({__name:"DatabaseTableManager",props:{tableData:{}},emits:["refresh-data"],setup(e,{emit:a}){const l=e,m=a,g=t(new Set),b=t({}),h=t(""),f=t(),y=d(()=>[{name:"designs",count:l.tableData.designs?.length||0},{name:"variableLists",count:l.tableData.variableLists?.length||0},{name:"trials",count:l.tableData.trials?.length||0},{name:"models",count:l.tableData.models?.length||0},{name:"apiCalls",count:l.tableData.apiCalls?.length||0},{name:"settings",count:l.tableData.settings?.length||0},{name:"templatePrompts",count:l.tableData.templatePrompts?.length||0},{name:"spreadsheetPrompts",count:l.tableData.spreadsheetPrompts?.length||0}]);function w(e){const a=l.tableData[e]||[],t=b.value[e]?.toLowerCase()||"";if(!t)return JSON.stringify(a.slice(0,10),null,2);const s=a.filter(e=>JSON.stringify(e).toLowerCase().includes(t));return JSON.stringify(s.slice(0,10),null,2)}function k(e){!function(e,a){const t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),l=URL.createObjectURL(t),s=document.createElement("a");s.href=l,s.download=a,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(l)}(l.tableData[e]||[],`${e}_export.json`)}async function _(e){const a=e.target.files?.[0];if(a){try{const e=await a.text(),t=JSON.parse(e);l.tableData[h.value]&&await async function(e,a){const t=I[e];if(t){let l=a;switch(e){case"trials":l=V(a);break;case"designs":l=$(a);break;case"variableLists":l=z(a);break;case"models":l=j(a);break;case"apiCalls":l=O(a)}await t.bulkPut(l)}}(h.value,t),m("refresh-data"),alert("Import completed successfully!")}catch(t){S.error("Import failed",t),alert("Import failed: "+(t instanceof Error?t.message:"Unknown error"))}f.value&&(f.value.value="")}}return(e,a)=>(n(),s("div",ne,[a[0]||(a[0]=i("h3",null,"Database Tables",-1)),(n(!0),s(o,null,r(y.value,e=>(n(),s("div",{key:e.name,class:"table-section"},[i("div",ie,[i("h4",null,c(e.name)+" ("+c(e.count)+" records)",1),i("div",oe,[i("button",{onClick:a=>k(e.name),class:"export-btn","data-testid":`btn-export-table-${e.name}`,"aria-label":`Export ${e.name} table`},"Export",8,re),i("button",{onClick:a=>{return t=e.name,h.value=t,void f.value?.click();var t},class:"import-btn","data-testid":`btn-import-table-${e.name}`,"aria-label":`Import ${e.name} table`},"Import",8,ce),i("button",{onClick:a=>async function(e){if(!confirm(`Are you sure you want to clear all ${e} data? This cannot be undone.`))return;const a=I[e];a&&(await a.clear(),m("refresh-data"))}(e.name),class:"clear-btn",disabled:0===e.count,"data-testid":`btn-clear-table-${e.name}`,"aria-label":`Clear all ${e.name} data`}," Clear All ",8,de)])]),g.value.has(e.name)?(n(),s("div",ue,[i("div",pe,[p(i("input",{"onUpdate:modelValue":a=>b.value[e.name]=a,placeholder:"Search records...",class:"search-input","data-testid":`input-search-${e.name}`,"aria-label":`Search ${e.name} records`},null,8,ve),[[v,b.value[e.name]]]),i("button",{onClick:a=>(e.name,void m("refresh-data")),class:"refresh-btn","data-testid":`btn-refresh-${e.name}`,"aria-label":`Refresh ${e.name} table`},"Refresh",8,me)]),i("div",ge,[i("pre",null,c(w(e.name)),1)])])):u("",!0),i("button",{onClick:a=>{return t=e.name,void(g.value.has(t)?g.value.delete(t):g.value.add(t));var t},class:"toggle-btn","data-testid":`btn-toggle-${e.name}`,"aria-label":`${g.value.has(e.name)?"Collapse":"Expand"} ${e.name} table`,"aria-expanded":g.value.has(e.name)},c(g.value.has(e.name)?"Collapse":"Expand"),9,be)]))),128)),i("input",{ref_key:"fileInput",ref:f,type:"file",accept:".json",onChange:_,style:{display:"none"},"data-testid":"input-file-import","aria-label":"Select JSON file to import"},null,544)]))}}),[["__scopeId","data-v-f84bffa7"]]),fe={class:"trial-debug-information"},ye={key:0,class:"debug-info"},we={class:"debug-row"},ke={class:"debug-row"},_e={class:"debug-row"},Ce={class:"debug-row"},De={class:"debug-row"},xe={class:"debug-row"},Te={class:"debug-json"},Ae={key:0,class:"debug-row"},Se={class:"native-snapshot-info template"},Ie={key:1,class:"debug-row"},Pe={class:"native-snapshot-info spreadsheet"},Ee={key:2,class:"debug-row"},Ne={key:1,class:"empty-state"},Ue=A(a({__name:"TrialDebugInformation",setup(e){const a=t(null);async function l(){try{const e=await I.trials.toArray();if(e.length>0){const t=e.sort((e,a)=>new Date(a.created).getTime()-new Date(e.created).getTime())[0];a.value=t,P(t)?S.info("Latest trial debug info (Template):",{name:t.name,type:t.type,templateId:t.templateId,templateName:t.templateName}):E(t)&&S.info("Latest trial debug info (Spreadsheet):",{name:t.name,type:t.type,spreadsheetId:t.spreadsheetId,datasetName:t.datasetName})}else a.value=null}catch(e){S.error("Failed to load latest trial",e)}}function o(e){return e?P(e)?"Template":E(e)?"Spreadsheet":"Unknown V2 type":"No trial"}function r(e){return e?P(e)?e.templateId:E(e)?e.spreadsheetId:"Unknown":"N/A"}function d(e){return e?P(e)?e.templateName:E(e)?e.datasetName:"Unknown":"N/A"}function p(e){return e?P(e)?{type:e.type,templateId:e.templateId,templateName:e.templateName,template:e.template?.substring(0,100)+"...",variablesCount:Object.keys(e.variables||{}).length,outputType:e.outputType,configCount:e.configurationSnapshots?.length||0}:E(e)?{type:e.type,spreadsheetId:e.spreadsheetId,datasetName:e.datasetName,promptPattern:e.promptPattern?.substring(0,100)+"...",datasetRowCount:e.datasetSnapshot?.rows?.length||0,outputType:e.outputType,configCount:e.configurationSnapshots?.length||0}:{type:"unknown",raw:e}:null}return l(),(e,t)=>{return n(),s("div",fe,[t[9]||(t[9]=i("h3",null,"Latest Trial Debug Info",-1)),a.value?(n(),s("div",ye,[i("div",we,[t[0]||(t[0]=i("strong",null,"Name:",-1)),m(" "+c(a.value.name),1)]),i("div",ke,[t[1]||(t[1]=i("strong",null,"Created:",-1)),m(" "+c(new Date(a.value.created).toLocaleString()),1)]),i("div",_e,[t[2]||(t[2]=i("strong",null,"Source Type:",-1)),i("span",{class:g(["source-type",(v=a.value,v?P(v)?"template":E(v)?"spreadsheet":"unknown":"none")])},c(o(a.value)),3)]),i("div",Ce,[t[3]||(t[3]=i("strong",null,"Source ID:",-1)),i("code",null,c(r(a.value)),1)]),i("div",De,[t[4]||(t[4]=i("strong",null,"Source Name:",-1)),i("span",null,c(d(a.value)),1)]),i("div",xe,[t[5]||(t[5]=i("strong",null,"V2 Trial Data:",-1)),i("pre",Te,c(JSON.stringify(p(a.value),null,2)),1)]),b(P)(a.value)?(n(),s("div",Ae,[t[6]||(t[6]=i("strong",null,"V2 Template Trial:",-1)),i("div",Se,[i("div",null,"Template Name: "+c(a.value.templateName),1),i("div",null,"Template Length: "+c(a.value.template?.length||0)+" chars",1),i("div",null,"Variables: "+c(Object.keys(a.value.variables||{}).join(", ")||"None"),1),i("div",null,"Output Type: "+c(a.value.outputType),1),i("div",null,"Extract Pattern: "+c(a.value.extractPattern||"None"),1)])])):u("",!0),b(E)(a.value)?(n(),s("div",Ie,[t[7]||(t[7]=i("strong",null,"V2 Spreadsheet Trial:",-1)),i("div",Pe,[i("div",null,"Dataset Name: "+c(a.value.datasetName),1),i("div",null,"Prompt Pattern Length: "+c(a.value.promptPattern?.length||0)+" chars",1),i("div",null,"Dataset Rows: "+c(a.value.datasetSnapshot?.rows?.length||0),1),i("div",null,"Dataset Columns: "+c(a.value.datasetSnapshot?.columns?.join(", ")||"None"),1),i("div",null,"Output Type: "+c(a.value.outputType),1)])])):u("",!0),!a.value||b(P)(a.value)||b(E)(a.value)?u("",!0):(n(),s("div",Ee,t[8]||(t[8]=[i("div",{class:"warning-box"}," ⚠️ Unknown V2 trial type - this trial may be corrupted or from an unsupported version ",-1)])))])):(n(),s("div",Ne," No trials found ")),i("button",{onClick:l,class:"refresh-btn"}," Refresh Latest Trial ")]);var v}}}),[["__scopeId","data-v-d30cff78"]]),Re={class:"import-export-tools"},Le=A(a({__name:"ImportExportTools",props:{tableData:{}},emits:["refresh-data"],setup(e,{emit:a}){const l=e,o=a,r=t(""),c=t();async function d(){k({version:"1.0.0",exported:(new Date).toISOString(),data:l.tableData},`auditomatic_full_export_${Date.now()}.json`)}async function u(){const e=l.tableData.designs||[],a=l.tableData.variableLists||[];k({version:"1.0.0",exported:(new Date).toISOString(),designs:e,variableLists:a},`designs_variables_export_${Date.now()}.json`)}async function p(){const e=l.tableData.trials||[],a=l.tableData.apiCalls||[];k({version:"1.0.0",exported:(new Date).toISOString(),trials:e,apiCalls:a},`trials_export_${Date.now()}.json`)}async function v(){k(l.tableData.models||[],`models_export_${Date.now()}.json`)}async function m(){k((l.tableData.models||[]).map(e=>({id:e.id,provider:e.provider,modelId:e.modelId,enabled:e.enabled})),`model_states_export_${Date.now()}.json`)}function g(){r.value="fullDatabase",c.value?.click()}function b(){r.value="designsAndVariables",c.value?.click()}function h(){r.value="trials",c.value?.click()}function f(){r.value="models",c.value?.click()}function y(){r.value="modelStates",c.value?.click()}async function w(e){const a=e.target.files?.[0];if(a){try{const e=await a.text(),t=JSON.parse(e);switch(r.value){case"fullDatabase":await async function(e){const a=B(e);if(a.data)for(const[t,l]of Object.entries(a.data)){const e=I[t];e&&await e.bulkPut(l)}}(t);break;case"designsAndVariables":await async function(e){if(e.designs){const a=$(e.designs);await I.designs.bulkPut(a)}if(e.variableLists){const a=z(e.variableLists);await I.variableLists.bulkPut(a)}}(t);break;case"trials":await async function(e){if(e.trials){const a=V(e.trials);await I.trials.bulkPut(a)}if(e.apiCalls){const a=O(e.apiCalls);await I.apiCalls.bulkPut(a)}}(t);break;case"models":await async function(e){const a=j(e);await I.models.bulkPut(a)}(t);break;case"modelStates":await async function(e){for(const a of e)await I.models.update(a.id,{enabled:a.enabled})}(t)}o("refresh-data"),alert("Import completed successfully!")}catch(t){S.error("Import failed",t),alert("Import failed: "+(t instanceof Error?t.message:"Unknown error"))}c.value&&(c.value.value="")}}function k(e,a){const t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),l=URL.createObjectURL(t),s=document.createElement("a");s.href=l,s.download=a,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(l)}return(e,a)=>(n(),s("div",Re,[a[6]||(a[6]=i("h3",null,"Import/Export Tools",-1)),i("div",{class:"export-group"},[a[0]||(a[0]=i("h4",null,"Complete Database",-1)),i("div",{class:"export-actions"},[i("button",{onClick:d,class:"export-all-btn","data-testid":"btn-export-full-database","aria-label":"Export complete database"},"Export All Data"),i("button",{onClick:g,class:"import-all-btn","data-testid":"btn-import-full-database","aria-label":"Import complete database"},"Import All Data")])]),i("div",{class:"export-group"},[a[1]||(a[1]=i("h4",null,"Designs & Variables",-1)),a[2]||(a[2]=i("p",{class:"export-desc"},"Exports designs with their linked variable lists",-1)),i("div",{class:"export-actions"},[i("button",{onClick:u,class:"export-btn","data-testid":"btn-export-designs-variables","aria-label":"Export designs and variables"},"Export Designs+Variables"),i("button",{onClick:b,class:"import-btn","data-testid":"btn-import-designs-variables","aria-label":"Import designs and variables"},"Import Designs+Variables")])]),i("div",{class:"export-group"},[a[3]||(a[3]=i("h4",null,"Trials",-1)),a[4]||(a[4]=i("p",{class:"export-desc"},"Exports trials with configuration snapshots and results",-1)),i("div",{class:"export-actions"},[i("button",{onClick:p,class:"export-btn"},"Export Trials"),i("button",{onClick:h,class:"import-btn"},"Import Trials")])]),i("div",{class:"export-group"},[a[5]||(a[5]=i("h4",null,"Models",-1)),i("div",{class:"export-actions"},[i("button",{onClick:v,class:"export-btn"},"Export All Models"),i("button",{onClick:f,class:"import-btn"},"Import All Models")]),i("div",{class:"export-actions"},[i("button",{onClick:m,class:"export-state-btn"},"Export Model States Only"),i("button",{onClick:y,class:"import-state-btn"},"Import Model States Only")])]),i("input",{ref_key:"fileInput",ref:c,type:"file",accept:".json",onChange:w,style:{display:"none"},"data-testid":"input-file-import","aria-label":"Select JSON file to import"},null,544)]))}}),[["__scopeId","data-v-89d2b8b7"]]),Me={class:"developer-tools"},Oe={key:0,class:"section"},je={key:0,class:"migration-status"},ze={class:"status-item"},$e={class:"status-item"},Ve={class:"status-item"},Be={class:"migration-actions"},Ke=["disabled"],We=["disabled"],Fe=["disabled"],Ge={key:0},He={key:0},Je={class:"section"},qe={class:"tokenizer-test"},Ye={class:"test-input-group"},Ze={class:"test-actions"},Qe=["disabled"],Xe=["disabled"],ea=["disabled"],aa={class:"worker-status"},ta={class:"text-secondary"},la={key:0,class:"test-results"},sa={class:"result-grid"},na={class:"result-item"},ia={class:"result-item"},oa={class:"result-item"},ra={class:"result-item"},ca={key:0,class:"error-message"},da={key:1,class:"progress-messages"},ua={class:"section debug-settings-section"},pa={class:"debug-toggle"},va={class:"checkbox-label"},ma={class:"checkbox-text"},ga={key:0,class:"debug-warning"},ba={class:"section deterministic-section"},ha={class:"deterministic-config"},fa={class:"checkbox-label"},ya={class:"checkbox-text"},wa={key:0,class:"deterministic-info"},ka=A(a({__name:"DeveloperTools",emits:["refresh-data"],setup(e,{emit:a}){const d=a,b=t(H),y=t(!1),w=t(!1),k=t(!1),_=t(null),C=t(null),D=t("Hello world! This is a test of tiktoken tokenization."),T=t(!1),A=t(!1),P=t(null),E=t(null),U=x(),R=t(!1),L=t(!1);async function M(){await U.setDebugThrowAllErrors(R.value),S.info("Debug throw all errors flag updated",{enabled:R.value})}async function O(){await U.setProviderEnabled("deterministic",L.value),S.info("Deterministic provider toggled",{enabled:L.value}),L.value&&await U.setApiKey("deterministic","no-key-needed")}async function j(){y.value=!0,C.value=null;try{const e=await I.designs.toArray(),a=await I.templatePrompts.toArray(),t=await I.spreadsheetPrompts.toArray();let l=0;const s=new Set(e.map(e=>e.id)),n=new Set([...a.map(e=>e.id),...t.map(e=>e.id)]);for(const r of s)n.has(r)&&l++;const i=e.length,o=i-l;_.value={total:i,migrated:l,pending:o},0===l&&i>0?C.value={type:"warning",title:"No migrations found",details:`${i} designs are ready to migrate to the new prompt system.`}:l===i&&i>0?C.value={type:"success",title:"Migration complete",details:"All designs have been migrated to the new prompt system."}:l>0&&o>0&&(C.value={type:"warning",title:"Partial migration",details:`${l} of ${i} designs have been migrated. ${o} remaining.`})}catch(e){S.error("Failed to check migration status",e),C.value={type:"error",title:"Failed to check migration status",details:e instanceof Error?e.message:"Unknown error"}}finally{y.value=!1}}async function z(){w.value=!0,C.value=null;try{await N.forceReMigration(),await j();const e=await N.getMigrationStatus();C.value={type:"success",title:"V2 migration completed successfully",details:`Migration completed. Status: ${e.templatePromptsCount} templates, ${e.spreadsheetPromptsCount} spreadsheets. ${e.legacyDesignsCount} legacy designs remaining.`}}catch(e){S.error("Migration failed",e),C.value={type:"error",title:"V2 migration failed",details:e instanceof Error?e.message:"Unknown error"}}finally{w.value=!1}}async function $(){k.value=!0,C.value=null;try{const e=await N.validateMigration();e.valid?C.value={type:"success",title:"Migration validation passed",details:"All designs have been correctly migrated to their respective prompt tables."}:C.value={type:"error",title:"Migration validation failed",details:`Found ${e.errors.length} validation errors.`,errors:e.errors.join("\n")}}catch(e){S.error("Validation failed",e),C.value={type:"error",title:"Validation failed",details:e instanceof Error?e.message:"Unknown error"}}finally{k.value=!1}}async function V(){if(!D.value)return;T.value=!0,E.value=null;const e=Date.now();try{const a=Math.ceil(D.value.length/4),t=Date.now()-e;E.value={method:"Approximate (4 chars/token)",tokens:a,duration:t,isAccurate:!1}}catch(a){E.value={method:"Approximate (4 chars/token)",tokens:0,duration:Date.now()-e,isAccurate:!1,error:a instanceof Error?a.message:"Unknown error"}}finally{T.value=!1}}async function B(){if(!D.value)return;A.value=!0,E.value=null;const e=Date.now(),a=[];try{const t=new Worker(new URL(""+new URL("token-calculation.worker-_TmsjB_5.js",import.meta.url).href,import.meta.url),{type:"module"}),l=`test-${Date.now()}`,s=await new Promise((e,s)=>{const n=setTimeout(()=>{t.terminate(),s(new Error("Worker timeout after 30 seconds"))},3e4);t.onmessage=i=>{const o=i.data;o.id===l&&("progress"===o.type?a.push(`${o.stage}: ${o.message}`):"result"===o.type?(clearTimeout(n),t.terminate(),e(o.result)):"error"===o.type&&(clearTimeout(n),t.terminate(),s(new Error(o.error.message))))},t.onerror=e=>{clearTimeout(n),t.terminate(),s(e)},t.postMessage({id:l,method:"accurate",design:{promptTemplate:D.value,variableBindings:{}}})}),n=Date.now()-e;E.value={method:"Accurate (Reload CDN)",tokens:s.minTokens,duration:n,isAccurate:s.isAccurate,progress:a}}catch(t){E.value={method:"Accurate (Reload CDN)",tokens:0,duration:Date.now()-e,isAccurate:!1,error:t instanceof Error?t.message:"Unknown error",progress:a}}finally{A.value=!1}}async function K(){if(!D.value||!P.value)return;A.value=!0,E.value=null;const e=Date.now(),a=[];try{const t=`test-${Date.now()}`,l=await new Promise((e,l)=>{const s=setTimeout(()=>{l(new Error("Worker timeout after 30 seconds"))},3e4),n=i=>{const o=i.data;o.id===t&&("progress"===o.type?a.push(`${o.stage}: ${o.message}`):"result"===o.type?(clearTimeout(s),P.value?.removeEventListener("message",n),e(o.result)):"error"===o.type&&(clearTimeout(s),P.value?.removeEventListener("message",n),l(new Error(o.error.message))))};P.value?.addEventListener("message",n),P.value?.postMessage({id:t,method:"accurate",design:{promptTemplate:D.value,variableBindings:{}}})}),s=Date.now()-e;E.value={method:"Accurate (Use Cached)",tokens:l.minTokens,duration:s,isAccurate:l.isAccurate,progress:a}}catch(t){E.value={method:"Accurate (Use Cached)",tokens:0,duration:Date.now()-e,isAccurate:!1,error:t instanceof Error?t.message:"Unknown error",progress:a}}finally{A.value=!1}}async function W(){if(!P.value)try{const e=new Worker(new URL(""+new URL("token-calculation.worker-_TmsjB_5.js",import.meta.url).href,import.meta.url),{type:"module"});await new Promise(a=>{const t=setTimeout(()=>a(!1),1e4);e.onmessage=e=>{"result"!==e.data.type&&"error"!==e.data.type||(clearTimeout(t),a(!0))},e.postMessage({id:"prime",method:"accurate",design:{promptTemplate:"test",variableBindings:{}}})})?P.value=e:e.terminate()}catch(e){S.error("Failed to initialize persistent worker",e)}}function F(){P.value&&(P.value.terminate(),P.value=null)}async function G(){confirm("Are you sure you want to clear ALL data? This cannot be undone.")&&(await I.delete(),localStorage.clear(),sessionStorage.clear(),document.cookie.split(";").forEach(e=>{document.cookie=e.replace(/^ +/,"").replace(/=.*/,"=;expires="+(new Date).toUTCString()+";path=/")}),S.info("All data cleared - reloading page"),window.location.reload())}async function J(){confirm("Reset all settings to defaults? This will clear all data.")&&await G()}async function q(){confirm("Regenerate database? This will clear all data and rebuild.")&&(await I.delete(),await I.open(),d("refresh-data"))}return l(async()=>{await U.initialize(),R.value=U.getDebugThrowAllErrors(),L.value=U.isProviderEnabled("deterministic")}),(e,a)=>(n(),s("div",Me,[b.value?(n(),s("div",Oe,[a[6]||(a[6]=i("h3",null,"Design Type Migration",-1)),a[7]||(a[7]=i("p",{class:"section-desc"},"Migrate old designs to new template/spreadsheet prompt types",-1)),_.value?(n(),s("div",je,[i("div",ze,[a[3]||(a[3]=i("label",null,"Total Designs:",-1)),i("span",null,c(_.value.total),1)]),i("div",$e,[a[4]||(a[4]=i("label",null,"Already Migrated:",-1)),i("span",null,c(_.value.migrated),1)]),i("div",Ve,[a[5]||(a[5]=i("label",null,"Pending Migration:",-1)),i("span",null,c(_.value.pending),1)])])):u("",!0),i("div",Be,[i("button",{onClick:j,class:"check-btn",disabled:y.value},c(y.value?"Checking...":"Check Migration Status"),9,Ke),i("button",{onClick:z,class:"migrate-btn",disabled:w.value||null!==_.value&&0===_.value.pending},c(w.value?"Migrating...":"Run Migration"),9,We),i("button",{onClick:$,class:"validate-btn",disabled:k.value},c(k.value?"Validating...":"Validate Migration"),9,Fe)]),C.value?(n(),s("div",{key:1,class:g(["migration-result",C.value.type])},[i("h4",null,c(C.value.title),1),C.value.details?(n(),s("div",Ge,[i("p",null,c(C.value.details),1),C.value.errors?(n(),s("pre",He,c(C.value.errors),1)):u("",!0)])):u("",!0)],2)):u("",!0)])):u("",!0),i("div",Je,[a[15]||(a[15]=i("h3",null,"Tokenizer Testing",-1)),a[16]||(a[16]=i("p",{class:"section-desc"},"Test the CDN-based tiktoken worker implementation",-1)),i("div",qe,[i("div",Ye,[a[8]||(a[8]=i("label",null,"Test Text:",-1)),p(i("textarea",{"onUpdate:modelValue":a[0]||(a[0]=e=>D.value=e),placeholder:"Enter text to tokenize...",class:"test-textarea",rows:"3"},null,512),[[v,D.value]])]),i("div",Ze,[i("button",{onClick:V,class:"test-btn",disabled:!D.value||T.value},c(T.value?"Testing...":"Test Approximate (4 chars/token)"),9,Qe),i("button",{onClick:B,class:"test-btn primary",disabled:!D.value||A.value},c(A.value?"Loading CDN...":"Test Accurate (Reload CDN)"),9,Xe),i("button",{onClick:K,class:"test-btn secondary",disabled:!D.value||A.value||!P.value},c(A.value?"Testing...":"Test Accurate (Use Cached)"),9,ea)]),i("div",aa,[i("small",ta,[m(" Worker Status: "+c(P.value?"✅ Cached (CDN loaded)":"❌ Not initialized")+" ",1),P.value?u("",!0):(n(),s("button",{key:0,onClick:W,class:"init-btn"},"Initialize Cached Worker")),P.value?(n(),s("button",{key:1,onClick:F,class:"terminate-btn"},"Terminate Worker")):u("",!0)])]),E.value?(n(),s("div",la,[a[14]||(a[14]=i("h4",null,"Results:",-1)),i("div",sa,[i("div",na,[a[9]||(a[9]=i("label",null,"Method:",-1)),i("span",null,c(E.value.method),1)]),i("div",ia,[a[10]||(a[10]=i("label",null,"Token Count:",-1)),i("span",null,c(E.value.tokens),1)]),i("div",oa,[a[11]||(a[11]=i("label",null,"Time Taken:",-1)),i("span",null,c(E.value.duration)+"ms",1)]),i("div",ra,[a[12]||(a[12]=i("label",null,"Is Accurate:",-1)),i("span",null,c(E.value.isAccurate?"✅ Yes":"❌ No"),1)])]),E.value.error?(n(),s("div",ca," ❌ Error: "+c(E.value.error),1)):u("",!0),E.value.progress?(n(),s("div",da,[a[13]||(a[13]=i("h5",null,"Progress:",-1)),(n(!0),s(o,null,r(E.value.progress,e=>(n(),s("div",{key:e,class:"progress-msg"},c(e),1))),128))])):u("",!0)])):u("",!0)])]),i("div",ua,[a[18]||(a[18]=i("h3",null,"🚨 Heisenbug Debug Mode",-1)),a[19]||(a[19]=i("p",{class:"section-desc"},"When enabled, all API execution errors will throw immediately instead of being stored, showing full stack traces in DevTools.",-1)),i("div",pa,[i("label",va,[p(i("input",{type:"checkbox","onUpdate:modelValue":a[1]||(a[1]=e=>R.value=e),onChange:M},null,544),[[h,R.value]]),i("span",ma,c(R.value?"🔥 Debug Mode ON - Errors will throw!":"💤 Debug Mode OFF - Errors stored normally"),1)])]),R.value?(n(),s("div",ga,a[17]||(a[17]=[m(" ⚠️ "),i("strong",null,"Warning:",-1),m(" With debug mode enabled, any error during API execution will crash the application and show stack traces in browser DevTools. This is intended for debugging the heisenbug. ")]))):u("",!0)]),i("div",ba,[a[21]||(a[21]=i("h3",null,"🔬 Deterministic Testing Provider",-1)),a[22]||(a[22]=i("p",{class:"section-desc"},[m(" Enable deterministic testing models that return predictable outputs. "),i("strong",null,"WARNING:"),m(" This is for testing only - not for production use. ")],-1)),i("div",ha,[i("label",fa,[p(i("input",{type:"checkbox","onUpdate:modelValue":a[2]||(a[2]=e=>L.value=e),onChange:O},null,544),[[h,L.value]]),i("span",ya,c(L.value?"✅ Deterministic Testing Enabled":"⭕ Deterministic Testing Disabled"),1)]),L.value?(n(),s("div",wa,a[20]||(a[20]=[f('<p data-v-6206ce61>Available deterministic models:</p><ul data-v-6206ce61><li data-v-6206ce61><strong data-v-6206ce61>echo:</strong> Returns the input prompt as-is</li><li data-v-6206ce61><strong data-v-6206ce61>vader:</strong> Returns Darth Vader quotes</li><li data-v-6206ce61><strong data-v-6206ce61>error:</strong> Always returns an error</li><li data-v-6206ce61><strong data-v-6206ce61>json:</strong> Returns structured JSON data</li></ul><p class="warning-note" data-v-6206ce61> ⚠️ These models are for testing workflows without consuming API credits. They do not provide real AI responses. </p>',3)]))):u("",!0)])]),i("div",{class:"section danger-actions-section"},[a[23]||(a[23]=i("h3",null,"Destructive Actions",-1)),i("div",{class:"danger-actions"},[i("button",{onClick:G,class:"danger-btn","data-testid":"btn-clear-all-data","aria-label":"Clear all application data"},"Clear All Data"),i("button",{onClick:J,class:"danger-btn","data-testid":"btn-reset-defaults","aria-label":"Reset application to default settings"},"Reset to Defaults"),i("button",{onClick:q,class:"danger-btn","data-testid":"btn-regenerate-database","aria-label":"Regenerate database structure"},"Regenerate Database")])])]))}}),[["__scopeId","data-v-6206ce61"]]),_a={class:"debug-data-management"},Ca=A(a({__name:"DebugDataManagement",setup(a){const i=t({}),o=d(()=>Object.values(i.value).reduce((e,a)=>e+a.length,0));async function r(){try{const e={designs:await I.designs.toArray(),variableLists:await I.variableLists.toArray(),trials:await I.trials.toArray(),models:await I.models.toArray(),apiCalls:await I.apiCalls.toArray(),settings:await I.settings.toArray(),templatePrompts:await I.templatePrompts.toArray(),spreadsheetPrompts:await I.spreadsheetPrompts.toArray()};i.value=e}catch(e){S.error("Failed to load table data",e)}}return l(async()=>{await r()}),(a,t)=>(n(),s("div",_a,[e(Z),e(se,{"total-records":o.value},null,8,["total-records"]),e(he,{"table-data":i.value,onRefreshData:r},null,8,["table-data"]),e(Ue),e(Le,{"table-data":i.value,onRefreshData:r},null,8,["table-data"]),e(ka,{onRefreshData:r})]))}}),[["__scopeId","data-v-224fee86"]]),Da={class:"background-keep-alive-settings"},xa={class:"setting-row"},Ta={key:1,class:"keep-alive-config"},Aa={class:"setting-row"},Sa={key:0,class:"setting-row"},Ia={class:"method-info"},Pa={class:"methods-grid"},Ea={class:"method-name"},Na={class:"method-description"},Ua={key:0,class:"method-status"},Ra={class:"current-status"},La={class:"status-grid"},Ma={class:"status-item"},Oa={key:0,class:"status-item"},ja={key:1,class:"status-item"},za={class:"status-item"},$a={class:"setting-row"},Va=A(a({__name:"BackgroundKeepAliveSettings",setup(a){const d=x(),p=U.getInstance(),v=t(p.getStatus()),h=t(p.getAvailableMethods()),f=t(p.getBrowserRecommendation());let C=null;l(()=>{C=window.setInterval(()=>{v.value=p.getStatus()},5e3)}),y(()=>{C&&clearInterval(C)});const D=async e=>{await d.setBackgroundKeepAlive(e)},T=e=>{const a=d.backgroundKeepAlive;return a.method===e||"auto"===a.method&&a.fallbackMethods.includes(e)},A=e=>{switch(e){case"open":return"green";case"connecting":return"orange";case"closed":return"red";default:return"gray"}};return(a,t)=>{const l=w("a-alert"),p=w("a-switch"),y=w("a-select-option"),C=w("a-select"),x=w("a-tag");return n(),s("div",Da,[t[24]||(t[24]=i("div",{class:"section-header"},[i("h3",null,"Background Tab Protection"),i("p",{class:"section-desc"}," Prevent browser throttling during long trials by maintaining WebRTC connections ")],-1)),b(d).backgroundKeepAlive.showBrowserWarnings&&f.value?(n(),k(l,{key:0,type:f.value.severity,message:`${f.value.browser} Browser Detected`,description:f.value.recommendation,"show-icon":!0,closable:!0,onClose:t[0]||(t[0]=()=>D({showBrowserWarnings:!1})),style:{"margin-bottom":"16px"}},null,8,["type","message","description"])):u("",!0),i("div",xa,[t[5]||(t[5]=i("div",{class:"setting-label"},[i("label",null,"Enable Background Protection"),i("div",{class:"setting-desc"}," Keep trials running smoothly when browser tab is in background ")],-1)),e(p,{checked:b(d).backgroundKeepAlive.enabled,onChange:t[1]||(t[1]=e=>D({enabled:e}))},null,8,["checked"])]),b(d).backgroundKeepAlive.enabled?(n(),s("div",Ta,[i("div",Aa,[t[11]||(t[11]=i("div",{class:"setting-label"},[i("label",null,"Protection Method"),i("div",{class:"setting-desc"}," Choose how to prevent background throttling ")],-1)),e(C,{value:b(d).backgroundKeepAlive.method,onChange:t[2]||(t[2]=e=>D({method:e})),style:{width:"200px"}},{default:_(()=>[e(y,{value:"auto"},{default:_(()=>t[6]||(t[6]=[i("div",{class:"method-option"},[i("strong",null,"Auto (Recommended)"),i("div",{class:"method-desc"},"Try methods with fallbacks")],-1)])),_:1,__:[6]}),e(y,{value:"self-loopback"},{default:_(()=>t[7]||(t[7]=[i("div",{class:"method-option"},[i("strong",null,"Self-Loopback"),i("div",{class:"method-desc"},"No external servers needed")],-1)])),_:1,__:[7]}),e(y,{value:"open-relay"},{default:_(()=>t[8]||(t[8]=[i("div",{class:"method-option"},[i("strong",null,"Open Relay"),i("div",{class:"method-desc"},"Free public TURN service")],-1)])),_:1,__:[8]}),e(y,{value:"google-stun"},{default:_(()=>t[9]||(t[9]=[i("div",{class:"method-option"},[i("strong",null,"Google STUN"),i("div",{class:"method-desc"},"Google's STUN servers")],-1)])),_:1,__:[9]}),e(y,{value:"disabled"},{default:_(()=>t[10]||(t[10]=[i("div",{class:"method-option"},[i("strong",null,"Disabled"),i("div",{class:"method-desc"},"No background protection")],-1)])),_:1,__:[10]})]),_:1},8,["value"])]),"auto"===b(d).backgroundKeepAlive.method?(n(),s("div",Sa,[t[15]||(t[15]=i("div",{class:"setting-label"},[i("label",null,"Fallback Order"),i("div",{class:"setting-desc"}," Order to try methods if primary fails ")],-1)),e(C,{mode:"multiple",value:b(d).backgroundKeepAlive.fallbackMethods,onChange:t[3]||(t[3]=e=>D({fallbackMethods:e})),style:{width:"300px"},placeholder:"Select fallback methods"},{default:_(()=>[e(y,{value:"self-loopback"},{default:_(()=>t[12]||(t[12]=[m("Self-Loopback")])),_:1,__:[12]}),e(y,{value:"open-relay"},{default:_(()=>t[13]||(t[13]=[m("Open Relay")])),_:1,__:[13]}),e(y,{value:"google-stun"},{default:_(()=>t[14]||(t[14]=[m("Google STUN")])),_:1,__:[14]})]),_:1},8,["value"])])):u("",!0),i("div",Ia,[t[17]||(t[17]=i("h4",null,"Method Details",-1)),i("div",Pa,[(n(!0),s(o,null,r(h.value,(a,l)=>(n(),s("div",{key:l,class:g(["method-card",{active:T(l)}])},[i("div",Ea,c(a.name),1),i("div",Na,c(a.description),1),T(l)?(n(),s("div",Ua,[e(x,{color:"green"},{default:_(()=>t[16]||(t[16]=[m("Currently Selected")])),_:1,__:[16]})])):u("",!0)],2))),128))])])])):u("",!0),i("div",Ra,[t[22]||(t[22]=i("h4",null,"Current Status",-1)),i("div",La,[i("div",Ma,[t[18]||(t[18]=i("label",null,"Protection Active:",-1)),e(x,{color:v.value.isActive?"green":"red"},{default:_(()=>[m(c(v.value.isActive?"Active":"Inactive"),1)]),_:1},8,["color"])]),v.value.method?(n(),s("div",Oa,[t[19]||(t[19]=i("label",null,"Method:",-1)),i("span",null,c(v.value.methodName),1)])):u("",!0),v.value.lastHeartbeat?(n(),s("div",ja,[t[20]||(t[20]=i("label",null,"Last Heartbeat:",-1)),i("span",null,c((S=v.value.lastHeartbeat,new Intl.DateTimeFormat("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(S))),1)])):u("",!0),i("div",za,[t[21]||(t[21]=i("label",null,"Connection State:",-1)),e(x,{color:A(v.value.connectionState)},{default:_(()=>[m(c(v.value.connectionState),1)]),_:1},8,["color"])])])]),i("div",$a,[t[23]||(t[23]=i("div",{class:"setting-label"},[i("label",null,"Show Browser Warnings"),i("div",{class:"setting-desc"}," Display warnings about browser-specific throttling behavior ")],-1)),e(p,{checked:b(d).backgroundKeepAlive.showBrowserWarnings,onChange:t[4]||(t[4]=e=>D({showBrowserWarnings:e}))},null,8,["checked"])])]);var S}}}),[["__scopeId","data-v-1590dacc"]]),Ba={class:"settings-view full-width","data-testid":"page-settings"},Ka={class:"api-key-label"},Wa={class:"provider-info spacing-top-xs"},Fa={class:"text-secondary"},Ga={class:"help-item"},Ha={class:"help-content"},Ja={class:"help-item"},qa={class:"help-content"},Ya={class:"single-line-setting"},Za={key:0,class:"environmental-toggle-section"},Qa={class:"env-toggle-container"},Xa=A(a({__name:"SettingsView",setup(a){const p=x(),v=R(),h=C(),f=t([]),y=t([]),D=d({get:()=>p.financialCostsEnabled,set:e=>p.setFinancialCostsEnabled(e)}),A=t(!0),I=d({get:()=>p.environmentalCostsEnabled,set:e=>p.setEnvironmentalCostsEnabled(e)}),P=t("carbon"),E=t(["cars","phones"]),N=[{title:"Provider Group",dataIndex:"name",key:"name",width:150},{title:"Providers",dataIndex:"providers",key:"providers",width:200},{title:"Value",key:"input",width:100,align:"center"},{title:"Slider (1-6)",key:"slider",width:200,align:"center"}],U=d(()=>{const e=T.getAllGroups(),a=[];for(const t of e){const e=T.getProvidersInGroup(t);if(0===e.length)continue;const l=e.some(e=>p.isProviderEnabled(e.id));let s=1;for(const a of e)a.execution?.defaultConcurrency&&(s=Math.max(s,a.execution.defaultConcurrency));const n=p.getGroupConcurrency(t),i=void 0!==n?n:s;a.push({id:t,name:t.charAt(0).toUpperCase()+t.slice(1),providers:e.map(e=>e.name).join(", "),concurrency:i,enabled:l,defaultConcurrency:s})}return a}),M=d(()=>p.apiKeyGroups);function O(e,a){p.setGroupConcurrency(e,a)}function j(){h.push("/environmental-config")}function z(){v.reset(),h.push("/welcome")}return l(async()=>{S.debug("SettingsView mounted")}),(a,t)=>{const l=w("a-tag"),d=w("a-alert"),v=w("a-input-password"),h=w("a-form-item"),C=w("a-col"),x=w("a-row"),T=w("a-form"),S=w("a-card"),R=w("a-button"),$=w("a-divider"),V=w("a-space"),B=w("a-input-number"),K=w("a-slider"),W=w("a-table"),F=w("a-collapse-panel"),H=w("a-collapse"),J=w("a-switch"),q=w("a-select-option"),Y=w("a-select"),Z=w("a-checkbox"),Q=w("a-checkbox-group");return n(),s("div",Ba,[t[31]||(t[31]=i("div",{class:"settings-header"},[i("h2",null,"Settings"),i("p",{class:"description"},"Configure API keys and provider settings for scientific model testing")],-1)),e(S,{title:"API Keys",class:"settings-card",size:"small"},{extra:_(()=>[e(l,{color:"green",size:"small"},{default:_(()=>[m(c(Object.values(M.value).filter(e=>e.hasKey).length)+" / "+c(Object.keys(M.value).length)+" configured ",1)]),_:1})]),default:_(()=>[e(d,{message:"Local Storage Only: API keys are stored locally in your browser and are never sent to auditomatic.org. API Keys only leave your browser as authentication to external LLM API providers, via encrypted HTTPS.",type:"info","show-icon":"",class:"spacing-bottom-md"}),e(T,{layout:"vertical",size:"small"},{default:_(()=>[e(x,{gutter:[16,16]},{default:_(()=>[(n(!0),s(o,null,r(M.value,a=>(n(),k(C,{key:a.id,span:12},{default:_(()=>[e(h,null,{label:_(()=>[i("div",Ka,[m(c(a.name)+" ",1),a.hasKey?(n(),k(l,{key:0,color:"success",size:"small"},{default:_(()=>t[6]||(t[6]=[m("✓ Configured")])),_:1,__:[6]})):(n(),k(l,{key:1,color:"default",size:"small"},{default:_(()=>t[7]||(t[7]=[m("Not configured")])),_:1,__:[7]}))])]),default:_(()=>{return[e(v,{value:(t=a.id,p.getApiKey(t)||""),onInput:e=>function(e,a){const t=a.target.value;p.setApiKey(e,t)}(a.id,e),placeholder:`Enter ${a.name} API key`,autocomplete:"off",size:"small",visibilityToggle:!0,"data-testid":`input-api-key-${a.id}`,"aria-label":`${a.name} API key input`},null,8,["value","onInput","placeholder","data-testid","aria-label"]),i("div",Wa,[i("small",Fa," Used by: "+c(a.providers.join(", ")),1)])];var t}),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}),e(S,{title:"Getting Started",class:"settings-card",size:"small"},{extra:_(()=>[e(l,{color:"blue",size:"small"},{default:_(()=>t[8]||(t[8]=[m("Help")])),_:1,__:[8]})]),default:_(()=>[e(V,{direction:"vertical",style:{width:"100%"}},{default:_(()=>[i("div",Ga,[e(b(G),{class:"help-icon"}),i("div",Ha,[t[10]||(t[10]=i("h4",null,"Setup Wizard",-1)),t[11]||(t[11]=i("p",null,"New to Auditomatic? Run the setup wizard to configure providers and learn the basics.",-1)),e(R,{onClick:z},{default:_(()=>t[9]||(t[9]=[m(" Run Setup Wizard ")])),_:1,__:[9]})])]),e($,{style:{margin:"12px 0"}}),i("div",Ja,[e(b(L),{class:"help-icon"}),i("div",qa,[t[13]||(t[13]=i("h4",null,"Documentation",-1)),t[14]||(t[14]=i("p",null,"Learn more about using Auditomatic Lite for systematic LLM testing.",-1)),e(R,{type:"link",href:"/docs",target:"_blank"},{default:_(()=>t[12]||(t[12]=[m(" View Documentation → ")])),_:1,__:[12]})])])]),_:1})]),_:1}),e(S,{class:"settings-card",size:"small"},{default:_(()=>[e(H,{activeKey:f.value,"onUpdate:activeKey":t[0]||(t[0]=e=>f.value=e),bordered:!1},{default:_(()=>[e(F,{key:"concurrency"},{header:_(()=>t[15]||(t[15]=[i("div",{class:"collapse-header"},[i("span",{class:"collapse-title"},"Concurrency Settings"),i("small",{class:"text-secondary"},"Request limits per provider group (max 6 due to browser limitations)")],-1)])),default:_(()=>[e(d,{message:"Browser Connection Limit",description:"Modern browsers limit HTTP/1.1 connections to 6 per host. Since all AI providers use HTTP/1.1, setting concurrency above 6 will have no effect.",type:"info","show-icon":"",style:{marginBottom:"16px"}}),e(W,{columns:N,"data-source":U.value,pagination:!1,size:"small",class:"scientific-table","row-key":"id"},{bodyCell:_(({column:e,record:a})=>["input"===e.key?(n(),k(B,{key:0,value:a.concurrency,onChange:e=>O(a.id,e),min:1,max:6,disabled:!a.enabled,size:"small",style:{width:"80px"},"data-testid":`input-concurrency-${a.id}`,"aria-label":`Concurrency limit for ${a.name}`},null,8,["value","onChange","disabled","data-testid","aria-label"])):u("",!0),"slider"===e.key?(n(),k(K,{key:1,value:a.concurrency,onChange:e=>O(a.id,e),min:1,max:6,disabled:!a.enabled,style:{width:"150px",margin:"0 auto"},size:"small"},null,8,["value","onChange","disabled"])):u("",!0)]),_:1},8,["data-source"])]),_:1})]),_:1},8,["activeKey"])]),_:1}),e(S,{title:"Cost Tracking",class:"settings-card",size:"small"},{default:_(()=>[i("div",Ya,[t[16]||(t[16]=i("span",{class:"setting-label"},"Financial:",-1)),t[17]||(t[17]=i("span",{class:"setting-desc"},"Display estimated API costs for model usage",-1)),e(J,{checked:D.value,"onUpdate:checked":t[1]||(t[1]=e=>D.value=e),"data-testid":"switch-financial-costs","aria-label":"Enable or disable financial cost display"},null,8,["checked"])]),A.value?(n(),s("div",Za,[t[20]||(t[20]=i("h3",{class:"settings-subsection-title"},"Environmental Impact Display",-1)),i("div",Qa,[i("div",{class:g(["env-toggle-option",{active:!I.value}])},t[18]||(t[18]=[i("strong",null,'Show "??"',-1),i("span",null,"Display as placeholders",-1)]),2),e(J,{checked:I.value,"onUpdate:checked":t[2]||(t[2]=e=>I.value=e),"data-testid":"switch-environmental-costs","aria-label":"Toggle between ?? placeholders and estimates",size:"default"},null,8,["checked"]),i("div",{class:g(["env-toggle-option",{active:I.value}])},t[19]||(t[19]=[i("strong",null,"Show Estimates",-1),i("span",null,"Beta estimates (not recommended)",-1)]),2)]),I.value?(n(),k(d,{key:0,message:"These environmental estimates are very inaccurate and not currently recommended. They're shown for relative comparison only.",type:"warning","show-icon":"",class:"spacing-top-md",style:{fontSize:"12px"}})):u("",!0)])):u("",!0),I.value?(n(),k(T,{key:1,layout:"vertical",size:"small",class:"spacing-top-lg"},{default:_(()=>[e(h,{label:"Primary Environmental Metric"},{default:_(()=>[e(Y,{value:P.value,"onUpdate:value":t[3]||(t[3]=e=>P.value=e),style:{width:"200px"},size:"small","data-testid":"select-environmental-metric","aria-label":"Select primary environmental metric"},{default:_(()=>[e(q,{value:"carbon"},{default:_(()=>t[21]||(t[21]=[m("Carbon Footprint")])),_:1,__:[21]}),e(q,{value:"water"},{default:_(()=>t[22]||(t[22]=[m("Water Usage")])),_:1,__:[22]}),e(q,{value:"energy"},{default:_(()=>t[23]||(t[23]=[m("Energy Consumption")])),_:1,__:[23]})]),_:1},8,["value"])]),_:1}),e(h,{label:"Show Equivalents"},{default:_(()=>[e(Q,{value:E.value,"onUpdate:value":t[4]||(t[4]=e=>E.value=e),"data-testid":"checkbox-group-equivalents","aria-label":"Select environmental equivalents to display"},{default:_(()=>[e(Z,{value:"cars","data-testid":"checkbox-equiv-cars"},{default:_(()=>t[24]||(t[24]=[m("Car Miles")])),_:1,__:[24]}),e(Z,{value:"trees","data-testid":"checkbox-equiv-trees"},{default:_(()=>t[25]||(t[25]=[m("Trees Needed")])),_:1,__:[25]}),e(Z,{value:"phones","data-testid":"checkbox-equiv-phones"},{default:_(()=>t[26]||(t[26]=[m("Phone Charges")])),_:1,__:[26]}),e(Z,{value:"bottles","data-testid":"checkbox-equiv-bottles"},{default:_(()=>t[27]||(t[27]=[m("Water Bottles")])),_:1,__:[27]})]),_:1},8,["value"])]),_:1}),e(h,null,{default:_(()=>[e(R,{type:"link",onClick:j,size:"small","data-testid":"btn-configure-environmental","aria-label":"Go to environmental cost configuration"},{default:_(()=>t[28]||(t[28]=[m(" Configure Environmental Cost Data → ")])),_:1,__:[28]})]),_:1})]),_:1})):u("",!0)]),_:1}),e(S,{title:"Background Tab Protection",class:"settings-card",size:"small"},{extra:_(()=>[e(l,{color:"blue",size:"small"},{default:_(()=>t[29]||(t[29]=[m("Performance")])),_:1,__:[29]})]),default:_(()=>[e(Va)]),_:1}),e(S,{class:"settings-card danger-zone-card",size:"small"},{default:_(()=>[e(H,{activeKey:y.value,"onUpdate:activeKey":t[5]||(t[5]=e=>y.value=e),bordered:!1},{default:_(()=>[e(F,{key:"danger-zone"},{header:_(()=>t[30]||(t[30]=[i("div",{class:"collapse-header danger-zone-header"},[i("span",{class:"collapse-title danger-zone-title"},"DANGER ZONE SETTINGS"),i("small",{class:"text-danger"},"Data management & destructive actions")],-1)])),default:_(()=>[e(Ca)]),_:1})]),_:1},8,["activeKey"])]),_:1})])}}}),[["__scopeId","data-v-e3b3b92f"]]);export{Xa as default};
