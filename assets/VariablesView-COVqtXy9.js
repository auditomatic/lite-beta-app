import{_ as e,u as t}from"./BaseModal.vue_vue_type_style_index_0_lang-cdfHDDQp.js";import{u as a,v as l}from"./variables-db-CPg65Q8f.js";import{r as s,f as i,c as r,w as o,u as n,n as u,d as c,Z as d,W as m,_ as p,Y as v,G as y,a5 as b,a9 as f,q as g,F as h,a6 as V,aa as k,ab as _,B as w,S as C,X as K,k as x,z as S,ac as I,o as L,U as A}from"./vendor-BiapkIQZ.js";import{_ as U,P as D}from"./index-JPKDQHeA.js";import"./defaultData-DyqJdH2z.js";import{_ as E}from"./BaseButton.vue_vue_type_style_index_0_lang-CQIR86sW.js";import"./db-CL8uhZCz.js";import"./logger.service-_k__GSpu.js";function $(e){const t=a(),c=s({name:"",description:"",category:"simple",values:[],attributeKeys:[],items:[]}),d=i(!1),m=i(!1),p=i([]),v=i(!1),y=i(""),b=i(!1),f=r(()=>"simple"===c.category||"refusal"===c.category?c.values.length:c.items.length),g=r(()=>{const e=[];if(c.name.trim()||e.push("Name is required"),"simple"===c.category||"refusal"===c.category){0===c.values.length&&e.push("At least one value is required");new Set(c.values.map(e=>e.toLowerCase().trim())).size<c.values.length&&e.push("Duplicate values detected")}else if("attributed"===c.category){0===c.attributeKeys.length&&e.push("At least one attribute key is required"),0===c.items.length&&e.push("At least one item is required");const t=l.validateAttributedList(c.items,c.attributeKeys);t.isValid||e.push(...t.errors)}return{isValid:0===e.length,errors:e}}),h=r(()=>"attributed"!==c.category?{}:l.getAttributeStats(c.items));return o(()=>c.category,(e,t)=>{b.value,e===t||void 0===t||b.value||(c.values.splice(0,c.values.length),c.attributeKeys.splice(0,c.attributeKeys.length),c.items.splice(0,c.items.length))}),o(()=>n(e),a=>{a?async function(){const a=n(e);if(a){m.value=!0,b.value=!0;try{const e=await t.getList(a);if(!e)throw new Error("Variable list not found");e.name,c.name=e.name,c.name,e.description,c.description=e.description??"",c.description,e.category,c.category=e.category,c.category,await u(),"simple"===e.category||"refusal"===e.category?(e.values,c.values.splice(0,c.values.length,...e.values||[]),c.values,c.values.length):(e.attributeKeys,c.attributeKeys.splice(0,c.attributeKeys.length,...e.attributeKeys||[]),c.attributeKeys,c.attributeKeys.length,e.items,c.items.splice(0,c.items.length,...e.items?e.items.map(e=>({value:e.value,attributes:{...e.attributes}})):[]),c.items.length),c.name,c.description,c.category,c.values.length,c.attributeKeys.length,c.items.length,await u()}catch(l){console.error("❌ Error loading list:",l)}finally{m.value=!1,b.value=!1}}}():(c.name="",c.description="",c.category="simple",c.values.splice(0,c.values.length),c.attributeKeys.splice(0,c.attributeKeys.length),c.items.splice(0,c.items.length))},{immediate:!0}),{form:c,isSaving:d,isLoading:m,errors:p,showImportDialog:v,importText:y,itemCount:f,validation:g,attributeStats:h,save:async function(){if(!g.value.isValid)throw p.value=g.value.errors,new Error(g.value.errors[0]);d.value=!0,p.value=[];try{const a={name:c.name.trim(),description:c.description.trim()||void 0,category:c.category,values:"simple"===c.category||"refusal"===c.category?[...c.values]:void 0,attributeKeys:"attributed"===c.category?[...c.attributeKeys]:void 0,items:"attributed"===c.category?c.items.map(e=>({value:e.value,attributes:{...e.attributes}})):void 0,itemCount:f.value},l=n(e);return l?(await t.updateList(l,a),l):await t.createList(a)}finally{d.value=!1}},addValue:function(e){const t=e.trim();t&&(c.values.includes(t)||c.values.push(t))},removeValue:function(e){c.values.splice(e,1)},addAttributeKey:function(e){const t=e.trim();t&&(c.attributeKeys.includes(t)||(c.attributeKeys.push(t),c.items.forEach(e=>{t in e.attributes||(e.attributes[t]="")})))},removeAttributeKey:function(e){const t=c.attributeKeys.indexOf(e);-1!==t&&(c.attributeKeys.splice(t,1),c.items.forEach(t=>{delete t.attributes[e]}))},addItem:function(e){const t={value:e.value,attributes:{}};c.attributeKeys.forEach(a=>{t.attributes[a]=e.attributes[a]??""}),c.items.push(t)},removeItem:function(e){c.items.splice(e,1)},importData:async function(){try{const e=y.value.trim();if(!e)return;if(e.startsWith("[")||e.startsWith("{")){const t=l.parseJSON(e);if("simple"===c.category){if(!Array.isArray(t))throw new Error("For simple lists, JSON must be an array");c.values=t.map(e=>"string"==typeof e?e:e.value||e.name||String(e)).filter(Boolean)}else{const e=Array.isArray(t)?t:[t],a=new Set;e.forEach(e=>{Object.keys(e).forEach(e=>{"value"!==e&&"name"!==e&&a.add(e)})}),c.attributeKeys=Array.from(a),c.items=e.map(e=>({value:String(e.value||e.name||""),attributes:c.attributeKeys.reduce((t,a)=>(t[a]=String(e[a]||""),t),{})})).filter(e=>e.value)}}else{const t=l.parseCSV(e);if("simple"===c.category)c.values=t.rows.map(e=>Object.values(e)[0]).filter(Boolean);else{const e=l.csvToAttributedItems(t),a=t.headers.filter(e=>"value"!==e.toLowerCase()&&"name"!==e.toLowerCase());c.attributeKeys=a,c.items=e}}v.value=!1,y.value=""}catch(e){throw console.error("Import failed:",e),e}},exportData:function(){return"simple"===c.category?`value\n${c.values.join("\n")}`:l.exportToCSV(c.items)}}}const j={class:"tag-input"},z={key:0,class:"tag-input-label"},B={key:0,class:"required"},F={class:"tags"},O=["onClick","aria-label"],N=["placeholder","onKeydown"],R={key:1,class:"helper-text"},T=U(c({__name:"TagInput",props:{modelValue:{},label:{},placeholder:{default:"Add a value..."},helperText:{},required:{type:Boolean}},emits:["update:modelValue"],setup(e,{expose:t,emit:a}){const l=e,s=a,r=i(),o=i(""),n=i(!1);function u(){const e=o.value.trim();e&&(l.modelValue.includes(e)||s("update:modelValue",[...l.modelValue,e]),o.value="")}function c(e){const t=[...l.modelValue];t.splice(e,1),s("update:modelValue",t)}function C(){""===o.value&&l.modelValue.length>0&&c(l.modelValue.length-1)}function K(e){","!==e.key&&188!==e.keyCode||(e.preventDefault(),u())}function x(e){e.preventDefault();const t=e.clipboardData?.getData("text");if(!t)return;const a=t.split(/[\n,\t]+/).map(e=>e.trim()).filter(Boolean),i=[...new Set([...l.modelValue,...a])];s("update:modelValue",i),o.value=""}function S(){o.value.trim()&&u(),n.value=!1}return t({focus:()=>r.value?.focus()}),(e,t)=>(m(),d("div",j,[e.label?(m(),d("label",z,[y(b(e.label)+" ",1),e.required?(m(),d("span",B,"*")):p("",!0)])):p("",!0),v("div",{class:f(["tag-input-container",{focused:n.value}])},[v("div",F,[(m(!0),d(h,null,V(e.modelValue,(e,t)=>(m(),d("span",{key:`${e}-${t}`,class:"tag"},[y(b(e)+" ",1),v("button",{type:"button",class:"tag-remove",onClick:e=>c(t),"aria-label":`Remove ${e}`}," × ",8,O)]))),128)),g(v("input",{ref_key:"inputRef",ref:r,"onUpdate:modelValue":t[0]||(t[0]=e=>o.value=e),placeholder:e.placeholder,class:"tag-input-field",onKeydown:[_(w(u,["prevent"]),["enter"]),_(C,["backspace"]),K],onPaste:x,onFocus:t[1]||(t[1]=e=>n.value=!0),onBlur:S},null,40,N),[[k,o.value]])])],2),e.helperText?(m(),d("div",R,b(e.helperText),1)):p("",!0)]))}}),[["__scopeId","data-v-0aee8d44"]]),W={class:"attributed-items-grid"},q={key:0,class:"grid-header"},J={class:"grid-actions"},M=["disabled"],P={key:1,class:"add-row"},G=["onUpdate:modelValue","placeholder"],H={key:2,class:"grid-container"},Y={class:"items-table"},X={key:0,class:"actions-column"},Z={key:0,class:"actions-column"},Q=["onClick"],ee={key:0,class:"placeholder-row"},te={class:"placeholder-text"},ae={key:3,class:"empty-state"},le={key:4,class:"empty-state"},se=U(c({__name:"AttributedItemsGrid",props:{modelValue:{},attributeKeys:{},showStructure:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{emit:t}){const a=e,l=t,r=i(!1),n=s({value:"",attributes:{}});function u(){if(!n.value.trim())return;const e={value:n.value.trim(),attributes:{...n.attributes}};l("update:modelValue",[...a.modelValue,e]),n.value="",a.attributeKeys.forEach(e=>{n.attributes[e]=""}),r.value=!1}function c(){n.value="",a.attributeKeys.forEach(e=>{n.attributes[e]=""}),r.value=!1}function y(e){const t=e.toLowerCase();return t.includes("age")?"25":t.includes("gender")||t.includes("sex")?"Female":t.includes("price")||t.includes("cost")?"$19.99":t.includes("category")||t.includes("type")?"Technology":t.includes("color")||t.includes("colour")?"Blue":t.includes("size")?"Medium":t.includes("country")?"USA":t.includes("city")?"Seattle":"Sample Value"}return o(()=>a.attributeKeys,e=>{n.attributes={},e.forEach(e=>{n.attributes[e]=""})},{immediate:!0}),(e,t)=>(m(),d("div",W,[e.attributeKeys.length>0?(m(),d("div",q,[v("div",J,[v("button",{type:"button",class:"add-button",disabled:0===e.attributeKeys.length,onClick:t[0]||(t[0]=e=>r.value=!0)}," + Add Item ",8,M)])])):p("",!0),r.value?(m(),d("div",P,[g(v("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>n.value=e),placeholder:"Value",class:"grid-input",onKeyup:_(u,["enter"])},null,544),[[k,n.value]]),(m(!0),d(h,null,V(e.attributeKeys,e=>g((m(),d("input",{key:e,"onUpdate:modelValue":t=>n.attributes[e]=t,placeholder:e,class:"grid-input",onKeyup:_(u,["enter"])},null,40,G)),[[k,n.attributes[e]]])),128)),v("div",{class:"row-actions"},[v("button",{type:"button",class:"save-button",onClick:u}," ✓ "),v("button",{type:"button",class:"cancel-button",onClick:c}," × ")])])):p("",!0),e.modelValue.length>0||e.showStructure&&e.attributeKeys.length>0?(m(),d("div",H,[v("table",Y,[v("thead",null,[v("tr",null,[t[2]||(t[2]=v("th",null,"Value",-1)),(m(!0),d(h,null,V(e.attributeKeys,e=>(m(),d("th",{key:e},b(e),1))),128)),e.modelValue.length>0?(m(),d("th",X)):p("",!0)])]),v("tbody",null,[(m(!0),d(h,null,V(e.modelValue,(t,s)=>(m(),d("tr",{key:s},[v("td",null,b(t.value),1),(m(!0),d(h,null,V(e.attributeKeys,e=>(m(),d("td",{key:e},b(t.attributes[e]||"-"),1))),128)),e.modelValue.length>0?(m(),d("td",Z,[v("button",{type:"button",class:"remove-button",onClick:e=>function(e){const t=[...a.modelValue];t.splice(e,1),l("update:modelValue",t)}(s)}," × ",8,Q)])):p("",!0)]))),128)),0===e.modelValue.length&&e.showStructure&&e.attributeKeys.length>0?(m(),d("tr",ee,[t[3]||(t[3]=v("td",{class:"placeholder-cell"},"Sample Name",-1)),(m(!0),d(h,null,V(e.attributeKeys,e=>(m(),d("td",{key:`placeholder-${e}`,class:"placeholder-cell"},[v("span",te,b(y(e)),1)]))),128))])):p("",!0)])])])):0===e.attributeKeys.length?(m(),d("div",ae,t[4]||(t[4]=[v("div",{class:"empty-icon"},"📋",-1),v("p",{class:"empty-title"},"Ready for Attributes",-1),v("p",{class:"empty-subtitle"},"Define attributes above to see the data structure here",-1)]))):(m(),d("div",le,t[5]||(t[5]=[v("div",{class:"empty-icon"},"📝",-1),v("p",{class:"empty-title"},"Ready for Data",-1),v("p",{class:"empty-subtitle"},'Click "Add Item" to start entering your data',-1)])))]))}}),[["__scopeId","data-v-36e4ccae"]]),ie={class:"import-content"},re={class:"import-help"},oe={key:0,class:"format-examples"},ne=["placeholder"],ue=U(c({__name:"ImportDialog",props:{category:{}},emits:["close","import"],setup(t,{emit:a}){const l=t,s=a,o=i(""),n=r(()=>"simple"===l.category?"Apple\nBanana\nCherry\n\nOR\n\nApple, Banana, Cherry":"Paste CSV or JSON data here...");function u(){o.value.trim()?s("import",o.value):alert("Please paste some data to import")}return(t,a)=>(m(),C(e,{"model-value":!0,title:"Import Data","onUpdate:modelValue":a[2]||(a[2]=e=>t.$emit("close"))},{footer:K(()=>[x(E,{variant:"ghost",onClick:a[1]||(a[1]=e=>t.$emit("close"))},{default:K(()=>a[4]||(a[4]=[y(" Cancel ")])),_:1,__:[4]}),x(E,{onClick:u},{default:K(()=>a[5]||(a[5]=[y(" Import ")])),_:1,__:[5]})]),default:K(()=>[v("div",ie,[v("p",re,["simple"===t.category?(m(),d(h,{key:0},[y(" Paste values, one per line or comma-separated. ")],64)):(m(),d(h,{key:1},[y(" Paste CSV or JSON data. For CSV, first row should be headers. ")],64))]),"attributed"===t.category?(m(),d("div",oe,a[3]||(a[3]=[v("details",null,[v("summary",null,"CSV Example"),v("pre",null,"value,race,gender\nJohn Smith,White,Male\nMaria Garcia,Hispanic,Female\nWei Chen,Asian,Male")],-1),v("details",null,[v("summary",null,"JSON Example"),v("pre",null,'[\n  {"value": "John Smith", "race": "White", "gender": "Male"},\n  {"value": "Maria Garcia", "race": "Hispanic", "gender": "Female"}\n]')],-1)]))):p("",!0),g(v("textarea",{"onUpdate:modelValue":a[0]||(a[0]=e=>o.value=e),class:"import-textarea",placeholder:n.value,rows:"15"},null,8,ne),[[k,o.value]])])]),_:1}))}}),[["__scopeId","data-v-f851c3b3"]]),ce={class:"form-container"},de={class:"name-desc-row"},me={class:"form-field"},pe={class:"form-field"},ve={class:"type-row"},ye={class:"radio-group-inline"},be={class:"radio-label-inline"},fe=["disabled"],ge={class:"radio-label-inline"},he=["disabled"],Ve={class:"radio-label-inline"},ke=["disabled"],_e={key:0,class:"form-section"},we={key:1,class:"form-section"},Ce={class:"import-actions"},Ke={key:2,class:"form-section"},xe={class:"attributed-inline"},Se={class:"attributes-content"},Ie={class:"items-section"},Le={class:"items-content"},Ae={key:0,class:"import-actions"},Ue={key:3,class:"error-banner"},De={class:"footer-content"},Ee={class:"stats"},$e={class:"actions"},je=U(c({__name:"VariableListEditor",props:{modelValue:{type:Boolean},listId:{}},emits:["update:modelValue","saved"],setup(t,{emit:a}){const l=a,s=$(S(t,"listId"));async function i(){try{const e=await s.save();l("saved",e),l("update:modelValue",!1)}catch(e){console.error("Failed to save variable list:",e)}}async function r(e){try{s.importText.value=e,await s.importData(),s.showImportDialog.value=!1}catch(t){console.error("Failed to import data:",t),alert("Failed to import: "+(t instanceof Error?t.message:"Unknown error"))}}return o(()=>s.form.name,e=>{}),o(()=>s.form.category,e=>{}),o(()=>s.form.values,e=>{e.length},{deep:!0}),o(()=>s.form.attributeKeys,e=>{e.length},{deep:!0}),o(()=>s.form.items,e=>{e.length},{deep:!0}),(t,a)=>(m(),C(e,{"model-value":t.modelValue,title:t.listId?"Edit Variable List":"Create Variable List",size:"full","onUpdate:modelValue":a[13]||(a[13]=e=>t.$emit("update:modelValue",e))},{footer:K(()=>[v("div",De,[v("div",Ee,b(n(s).itemCount.value)+" items ",1),v("div",$e,[x(E,{variant:"ghost",onClick:a[11]||(a[11]=e=>t.$emit("update:modelValue",!1))},{default:K(()=>a[30]||(a[30]=[y(" Cancel ")])),_:1,__:[30]}),x(E,{type:"submit",loading:n(s).isSaving.value,disabled:!n(s).validation.value.isValid,onClick:i},{default:K(()=>[y(b(t.listId?"Update":"Create"),1)]),_:1},8,["loading","disabled"])])])]),default:K(()=>[v("div",ce,[v("form",{onSubmit:w(i,["prevent"])},[v("div",de,[a[14]||(a[14]=v("label",{class:"inline-field-label"},"Name",-1)),v("div",me,[g(v("input",{id:"name","onUpdate:modelValue":a[0]||(a[0]=e=>n(s).form.name=e),type:"text",class:"form-input large",placeholder:"Enter list name",required:""},null,512),[[k,n(s).form.name]])]),a[15]||(a[15]=v("label",{class:"inline-field-label"},"Description",-1)),v("div",pe,[g(v("input",{id:"description","onUpdate:modelValue":a[1]||(a[1]=e=>n(s).form.description=e),type:"text",class:"form-input large",placeholder:"Optional description"},null,512),[[k,n(s).form.description]])])]),v("div",ve,[a[22]||(a[22]=v("label",{class:"inline-field-label"},"Type",-1)),v("div",ye,[v("label",be,[g(v("input",{"onUpdate:modelValue":a[2]||(a[2]=e=>n(s).form.category=e),type:"radio",value:"simple",disabled:!!t.listId},null,8,fe),[[I,n(s).form.category]]),a[16]||(a[16]=v("span",{class:"radio-text"},"Simple List",-1)),a[17]||(a[17]=v("span",{class:"radio-example"},"(colors, names, countries)",-1))]),v("label",ge,[g(v("input",{"onUpdate:modelValue":a[3]||(a[3]=e=>n(s).form.category=e),type:"radio",value:"attributed",disabled:!!t.listId},null,8,he),[[I,n(s).form.category]]),a[18]||(a[18]=v("span",{class:"radio-text"},"Attributed List",-1)),a[19]||(a[19]=v("span",{class:"radio-example"},"(names with gender/ethnicity, cities with region/size)",-1))]),v("label",Ve,[g(v("input",{"onUpdate:modelValue":a[4]||(a[4]=e=>n(s).form.category=e),type:"radio",value:"refusal",disabled:!!t.listId},null,8,ke),[[I,n(s).form.category]]),a[20]||(a[20]=v("span",{class:"radio-text"},"Refusal Words",-1)),a[21]||(a[21]=v("span",{class:"radio-example"},"(cannot, unable, refuse)",-1))])])]),"simple"===n(s).form.category?(m(),d("div",_e,[a[23]||(a[23]=v("h3",null,"Values",-1)),x(T,{modelValue:n(s).form.values,"onUpdate:modelValue":a[5]||(a[5]=e=>n(s).form.values=e),label:"List Values",placeholder:"Add a value...","helper-text":"Enter values or paste from spreadsheet"},null,8,["modelValue"])])):p("",!0),"refusal"===n(s).form.category?(m(),d("div",we,[a[25]||(a[25]=v("h3",null,"Refusal Words",-1)),x(T,{modelValue:n(s).form.values,"onUpdate:modelValue":a[6]||(a[6]=e=>n(s).form.values=e),label:"Refusal Words",placeholder:"Add a refusal word (e.g., 'cannot', 'unable', 'refuse')...","helper-text":"Words or phrases that indicate model refusal"},null,8,["modelValue"]),v("div",Ce,[x(E,{variant:"secondary",size:"small",onClick:a[7]||(a[7]=e=>n(s).showImportDialog.value=!0)},{default:K(()=>a[24]||(a[24]=[y(" Import CSV ")])),_:1,__:[24]})])])):p("",!0),"attributed"===n(s).form.category?(m(),d("div",Ke,[v("div",xe,[a[26]||(a[26]=v("label",{class:"inline-field-label"},"Attributes",-1)),v("div",Se,[x(T,{modelValue:n(s).form.attributeKeys,"onUpdate:modelValue":a[8]||(a[8]=e=>n(s).form.attributeKeys=e),label:"",placeholder:"Add attribute (e.g., gender, ethnicity, region, size)...","helper-text":"Define properties first, then add data below"},null,8,["modelValue"])])]),v("div",Ie,[a[28]||(a[28]=v("label",{class:"inline-field-label"},"Data",-1)),v("div",Le,[x(se,{modelValue:n(s).form.items,"onUpdate:modelValue":a[9]||(a[9]=e=>n(s).form.items=e),"attribute-keys":n(s).form.attributeKeys,"show-structure":!0},null,8,["modelValue","attribute-keys"]),n(s).form.attributeKeys.length>0?(m(),d("div",Ae,[x(E,{variant:"secondary",size:"small",onClick:a[10]||(a[10]=e=>n(s).showImportDialog.value=!0)},{default:K(()=>a[27]||(a[27]=[y(" Import CSV/JSON ")])),_:1,__:[27]})])):p("",!0)])])])):p("",!0),n(s).errors.value.length>0?(m(),d("div",Ue,[a[29]||(a[29]=v("strong",null,"Please fix the following errors:",-1)),v("ul",null,[(m(!0),d(h,null,V(n(s).errors.value,e=>(m(),d("li",{key:e},b(e),1))),128))])])):p("",!0)],32)]),n(s).showImportDialog.value?(m(),C(ue,{key:0,category:n(s).form.category,onClose:a[12]||(a[12]=e=>n(s).showImportDialog.value=!1),onImport:r},null,8,["category"])):p("",!0)]),_:1},8,["model-value","title"]))}}),[["__scopeId","data-v-a9d518dc"]]),ze={class:"variables-view"},Be={class:"page-header"},Fe={key:3},Oe={class:"scientific-table-container"},Ne={class:"scientific-table-wrapper"},Re={key:0,class:"table-info-cell"},Te={class:"table-info-title"},We={class:"table-info-subtitle"},qe={key:3,class:"table-cell-ellipsis"},Je={key:4,class:"date-cell"},Me={key:5,class:"table-actions-grid"},Pe=U(c({__name:"VariablesView",setup(e){const l=a(),{getVisibleColumns:s,formatDateTime:o,createVariableColumns:u}=t(),c=i(!1),f=i(),g=i("all"),V=s(u()),k=r(()=>{switch(g.value){case"simple":return l.simpleLists;case"attributed":return l.attributedLists;default:return l.lists}});function _(){f.value=void 0,c.value=!1}function w(e){if("simple"===e.category){const t=e.values||[],a=t.slice(0,3).join(", ");return t.length>3?`${a}, ...`:a}const t=e.items||[],a=t.slice(0,2).map(e=>e.name||e.value).join(", ");return t.length>2?`${a}, ...`:a}return L(async()=>{await l.initialize()}),(e,t)=>{const a=A("a-button"),s=A("a-spin"),i=A("a-alert"),r=A("a-empty"),u=A("a-tab-pane"),S=A("a-tabs"),I=A("a-tag"),L=A("a-table");return m(),d("div",ze,[v("div",Be,[t[6]||(t[6]=v("div",{class:"header-content"},[v("h1",null,"Variable Lists"),v("p",{class:"description"},"Manage reusable variable lists for prompt templates")],-1)),x(a,{type:"primary",onClick:t[0]||(t[0]=e=>c.value=!0)},{icon:K(()=>[x(n(D))]),default:K(()=>[t[5]||(t[5]=y(" Create List "))]),_:1,__:[5]})]),n(l).isLoading?(m(),C(s,{key:0,size:"large",tip:"Loading variable lists..."},{default:K(()=>t[7]||(t[7]=[v("div",{style:{"min-height":"200px"}},null,-1)])),_:1,__:[7]})):n(l).error?(m(),C(i,{key:1,type:"error",message:n(l).error,class:"error-alert"},null,8,["message"])):0===n(l).lists.length?(m(),C(r,{key:2,description:"No variable lists yet. Create lists to use in your prompt designs."},{image:K(()=>t[8]||(t[8]=[v("div",{style:{color:"#bfbfbf","font-size":"48px"}},"📃",-1)])),default:K(()=>[x(a,{type:"primary",onClick:t[1]||(t[1]=e=>c.value=!0)},{default:K(()=>t[9]||(t[9]=[y(" Create Your First List ")])),_:1,__:[9]})]),_:1})):(m(),d("div",Fe,[x(S,{activeKey:g.value,"onUpdate:activeKey":t[2]||(t[2]=e=>g.value=e),size:"small",class:"list-tabs"},{default:K(()=>[x(u,{key:"all",tab:`All Lists (${n(l).lists.length})`},null,8,["tab"]),x(u,{key:"simple",tab:`Simple (${n(l).simpleLists.length})`},null,8,["tab"]),x(u,{key:"attributed",tab:`Attributed (${n(l).attributedLists.length})`},null,8,["tab"])]),_:1},8,["activeKey"]),v("div",Oe,[v("div",Ne,[x(L,{columns:n(V),"data-source":k.value,pagination:!1,size:"small",scroll:{y:"calc(100vh - 180px)"},"row-key":"id",class:"scientific-table"},{bodyCell:K(({column:e,record:s})=>{return["name"===e.key?(m(),d("div",Re,[v("span",Te,b(s.name),1),v("span",We,b(s.description||"No description"),1)])):p("",!0),"category"===e.key?(m(),C(I,{key:1,size:"small",color:"simple"===s.category?"blue":"green"},{default:K(()=>[y(b(s.category),1)]),_:2},1032,["color"])):p("",!0),"itemCount"===e.key?(m(),d(h,{key:2},[y(b((r=s,"simple"===r.category?r.values?.length||0:r.items?.length||0)),1)],64)):p("",!0),"description"===e.key?(m(),d("div",qe,b(w(s)),1)):p("",!0),"created"===e.key?(m(),d("div",Je,b((i=s.created,o(i))),1)):p("",!0),"actions"===e.key?(m(),d("div",Me,[x(a,{size:"small",type:"primary",onClick:e=>{return t=s.id,f.value=t,void(c.value=!0);var t}},{default:K(()=>t[10]||(t[10]=[y(" Edit ")])),_:2,__:[10]},1032,["onClick"]),x(a,{size:"small",class:"btn-success",onClick:e=>async function(e){const t=e.id;try{const e=await l.getList(t);if(!e)return;let a,s;"simple"===e.category?(a=`value\n${e.values?.join("\n")??""}`,s=`${e.name.replace(/\s+/g,"-")}-values.csv`):(a=JSON.stringify(e.items,null,2),s=`${e.name.replace(/\s+/g,"-")}-attributed.json`);const i=new Blob([a],{type:"text/plain"}),r=URL.createObjectURL(i),o=document.createElement("a");o.href=r,o.download=s,o.click(),URL.revokeObjectURL(r)}catch(a){console.error("Failed to export list:",a),alert("Failed to export list")}}(s)},{default:K(()=>t[11]||(t[11]=[y(" Export ")])),_:2,__:[11]},1032,["onClick"]),x(a,{size:"small",danger:"",onClick:e=>async function(e){if(confirm("Are you sure you want to delete this list?"))try{await l.deleteList(e)}catch(t){console.error("Failed to delete list:",t),alert(t instanceof Error?t.message:"Failed to delete list")}}(s.id)},{default:K(()=>t[12]||(t[12]=[y(" Delete ")])),_:2,__:[12]},1032,["onClick"])])):p("",!0)];var i,r}),_:1},8,["columns","data-source"])])])])),c.value?(m(),C(je,{key:4,modelValue:c.value,"onUpdate:modelValue":[t[3]||(t[3]=e=>c.value=e),t[4]||(t[4]=e=>{e||(f.value=void 0)})],"list-id":f.value,onSaved:_},null,8,["modelValue","list-id"])):p("",!0)])}}}),[["__scopeId","data-v-e8d09a61"]]);export{Pe as default};
