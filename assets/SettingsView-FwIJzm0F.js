import{k as e,d as a,f as t,c as l,o as s,aa as n,Z as i,a0 as o,F as r,ab as c,a2 as d,$ as u,q as v,ac as p,G as m,_ as b,Y as g,W as f,X as y,u as h,a3 as k}from"./vendor-BKA9Ybw0.js";import{I as w,u as C,a as _,b as x,d as A,p as D,l as E,f as T,_ as S,g as z,Q as I}from"./index-BTLG4nFQ.js";import{s as L}from"./storage-calculation.service-CjQOfDnp.js";import{p as U,a as P,b as $,c as R,d as O,e as j}from"./import-helpers-C7Z5_EcJ.js";import"./db-CL8uhZCz.js";var N={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 736c0-111.6-65.4-208-160-252.9V317.3c0-15.1-5.3-29.7-15.1-41.2L536.5 95.4C530.1 87.8 521 84 512 84s-18.1 3.8-24.5 11.4L335.1 276.1a63.97 63.97 0 00-15.1 41.2v165.8C225.4 528 160 624.4 160 736h156.5c-2.3 7.2-3.5 15-3.5 23.8 0 22.1 7.6 43.7 21.4 60.8a97.2 97.2 0 0043.1 30.6c23.1 54 75.6 88.8 134.5 88.8 29.1 0 57.3-8.6 81.4-24.8 23.6-15.8 41.9-37.9 53-64a97 97 0 0043.1-30.5 97.52 97.52 0 0021.4-60.8c0-8.4-1.1-16.4-3.1-23.8H864zM762.3 621.4c9.4 14.6 17 30.3 22.5 46.6H700V558.7a211.6 211.6 0 0162.3 62.7zM388 483.1V318.8l124-147 124 147V668H388V483.1zM239.2 668c5.5-16.3 13.1-32 22.5-46.6 16.3-25.2 37.5-46.5 62.3-62.7V668h-84.8zm388.9 116.2c-5.2 3-11.2 4.2-17.1 3.4l-19.5-2.4-2.8 19.4c-5.4 37.9-38.4 66.5-76.7 66.5-38.3 0-71.3-28.6-76.7-66.5l-2.8-19.5-19.5 2.5a27.7 27.7 0 01-17.1-3.5c-8.7-5-14.1-14.3-14.1-24.4 0-10.6 5.9-19.4 14.6-23.8h231.3c8.8 4.5 14.6 13.3 14.6 23.8-.1 10.2-5.5 19.6-14.2 24.5zM464 400a48 48 0 1096 0 48 48 0 10-96 0z"}}]},name:"rocket",theme:"outlined"};function V(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?Object(arguments[a]):{},l=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(l=l.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),l.forEach(function(a){M(e,a,t[a])})}return e}function M(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}var K=function(a,t){var l=V({},a,t.attrs);return e(w,V({},l,{icon:N}),null)};K.displayName="RocketOutlined",K.inheritAttrs=!1;const W={class:"debug-data-management"},B={class:"section"},F={class:"endpoint-grid"},q=["value","onInput","placeholder","disabled","data-testid","aria-label"],G={class:"section"},H={class:"info-grid"},J={class:"info-item"},Y={class:"info-item"},Z={class:"info-item"},Q={class:"info-item"},X={class:"section"},ee={class:"table-header"},ae={class:"table-actions"},te=["onClick","data-testid","aria-label"],le=["onClick","data-testid","aria-label"],se=["onClick","disabled","data-testid","aria-label"],ne={key:0,class:"table-content"},ie={class:"table-controls"},oe=["onUpdate:modelValue","data-testid","aria-label"],re=["onClick","data-testid","aria-label"],ce={class:"table-data"},de=["onClick","data-testid","aria-label","aria-expanded"],ue={class:"section"},ve={class:"tokenizer-test"},pe={class:"test-input-group"},me={class:"test-actions"},be=["disabled"],ge=["disabled"],fe=["disabled"],ye={class:"worker-status"},he={class:"text-secondary"},ke={key:0,class:"test-results"},we={class:"result-grid"},Ce={class:"result-item"},_e={class:"result-item"},xe={class:"result-item"},Ae={class:"result-item"},De={key:0,class:"error-message"},Ee={key:1,class:"progress-messages"},Te=S(a({__name:"DebugDataManagement",setup(e){const a=C(),b=_(),g=x(),f=A(),y=t(new Set),h=t({}),k=t({}),w=t(""),S=t(),z=t(null),I=t([]),N=t("Hello world! This is a test of tiktoken tokenization."),V=t(!1),M=t(!1),K=t(null),Te=t(null),Se=l(()=>({dbVersion:"1.0.0",totalRecords:Object.values(k.value).reduce((e,a)=>e+a.length,0),storageUsed:z.value?z.value.formattedUsed:"Calculating...",lastUpdated:(new Date).toLocaleString()})),ze=l(()=>[{name:"designs",count:k.value.designs?.length||0},{name:"variableLists",count:k.value.variableLists?.length||0},{name:"trials",count:k.value.trials?.length||0},{name:"models",count:k.value.models?.length||0},{name:"apiCalls",count:k.value.apiCalls?.length||0},{name:"settings",count:k.value.settings?.length||0}]);async function Ie(){try{k.value={designs:await T.designs.toArray(),variableLists:await T.variableLists.toArray(),trials:await T.trials.toArray(),models:await T.models.toArray(),apiCalls:await T.apiCalls.toArray(),settings:await T.settings.toArray()}}catch(e){E.error("Failed to load table data",e)}}function Le(e){const a=k.value[e]||[],t=h.value[e]?.toLowerCase()||"";if(!t)return JSON.stringify(a.slice(0,10),null,2);const l=a.filter(e=>JSON.stringify(e).toLowerCase().includes(t));return JSON.stringify(l.slice(0,10),null,2)}async function Ue(){He({version:"1.0.0",exported:(new Date).toISOString(),data:k.value},`auditomatic_full_export_${Date.now()}.json`)}async function Pe(){const e=k.value.designs||[],a=k.value.variableLists||[];He({version:"1.0.0",exported:(new Date).toISOString(),designs:e,variableLists:a},`designs_variables_export_${Date.now()}.json`)}async function $e(){const e=k.value.trials||[],a=k.value.apiCalls||[];He({version:"1.0.0",exported:(new Date).toISOString(),trials:e,apiCalls:a},`trials_export_${Date.now()}.json`)}async function Re(){He(k.value.models||[],`models_export_${Date.now()}.json`)}async function Oe(){He((k.value.models||[]).map(e=>({id:e.id,provider:e.provider,modelId:e.modelId,enabled:e.enabled})),`model_states_export_${Date.now()}.json`)}function je(){w.value="fullDatabase",S.value?.click()}function Ne(){w.value="designsAndVariables",S.value?.click()}function Ve(){w.value="trials",S.value?.click()}function Me(){w.value="models",S.value?.click()}function Ke(){w.value="modelStates",S.value?.click()}async function We(e){const a=e.target.files?.[0];if(a){try{const e=await a.text(),t=JSON.parse(e);switch(w.value){case"fullDatabase":await async function(e){const a=U(e);if(a.data)for(const[t,l]of Object.entries(a.data))await Be(t,l)}(t);break;case"designsAndVariables":await async function(e){if(e.designs){const a=P(e.designs);await T.designs.bulkPut(a)}if(e.variableLists){const a=$(e.variableLists);await T.variableLists.bulkPut(a)}}(t);break;case"trials":await async function(e){if(e.trials){const a=R(e.trials);await T.trials.bulkPut(a)}if(e.apiCalls){const a=O(e.apiCalls);await T.apiCalls.bulkPut(a)}}(t);break;case"models":await async function(e){const a=j(e);await T.models.bulkPut(a)}(t);break;case"modelStates":await async function(e){for(const a of e)await T.models.update(a.id,{enabled:a.enabled})}(t);break;default:k.value[w.value]&&await Be(w.value,t)}await Ie(),alert("Import completed successfully!")}catch(t){E.error("Import failed",t),alert("Import failed: "+(t instanceof Error?t.message:"Unknown error"))}S.value&&(S.value.value="")}}async function Be(e,a){const t=T[e];if(t){let l=a;switch(e){case"trials":l=R(a);break;case"designs":l=P(a);break;case"variableLists":l=$(a);break;case"models":l=j(a);break;case"apiCalls":l=O(a)}await t.bulkPut(l)}}async function Fe(){confirm("Are you sure you want to clear ALL data? This cannot be undone.")&&(await T.delete(),await T.open(),await Ie())}async function qe(){confirm("Reset all settings to defaults? This will clear all data.")&&(await Fe(),await Promise.all([a.initialize(),b.initialize(),g.initialize()]))}async function Ge(){confirm("Regenerate database? This will clear all data and rebuild.")&&(await T.delete(),await T.open(),await Ie())}function He(e,a){const t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),l=URL.createObjectURL(t),s=document.createElement("a");s.href=l,s.download=a,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(l)}function Je(e){const a=I.value.find(a=>a.id===e);return a?.api.baseUrl||""}function Ye(e){return f.isProviderEnabled(e)}async function Ze(){if(!N.value)return;V.value=!0,Te.value=null;const e=Date.now();try{const a=Math.ceil(N.value.length/4),t=Date.now()-e;Te.value={method:"Approximate (4 chars/token)",tokens:a,duration:t,isAccurate:!1}}catch(a){Te.value={method:"Approximate (4 chars/token)",tokens:0,duration:Date.now()-e,isAccurate:!1,error:a instanceof Error?a.message:"Unknown error"}}finally{V.value=!1}}async function Qe(){if(!N.value)return;M.value=!0,Te.value=null;const e=Date.now(),a=[];try{const t=new Worker(new URL(""+new URL("token-calculation.worker-CFdscdLl.js",import.meta.url).href,import.meta.url),{type:"module"}),l=`test-${Date.now()}`,s=await new Promise((e,s)=>{const n=setTimeout(()=>{t.terminate(),s(new Error("Worker timeout after 30 seconds"))},3e4);t.onmessage=i=>{const o=i.data;o.id===l&&("progress"===o.type?a.push(`${o.stage}: ${o.message}`):"result"===o.type?(clearTimeout(n),t.terminate(),e(o.result)):"error"===o.type&&(clearTimeout(n),t.terminate(),s(new Error(o.error.message))))},t.onerror=e=>{clearTimeout(n),t.terminate(),s(e)},t.postMessage({id:l,method:"accurate",design:{promptTemplate:N.value,variableBindings:{}}})}),n=Date.now()-e;Te.value={method:"Accurate (Reload CDN)",tokens:s.minTokens,duration:n,isAccurate:s.isAccurate,progress:a}}catch(t){Te.value={method:"Accurate (Reload CDN)",tokens:0,duration:Date.now()-e,isAccurate:!1,error:t instanceof Error?t.message:"Unknown error",progress:a}}finally{M.value=!1}}async function Xe(){if(!N.value||!K.value)return;M.value=!0,Te.value=null;const e=Date.now(),a=[];try{const t=`test-${Date.now()}`,l=await new Promise((e,l)=>{const s=setTimeout(()=>{l(new Error("Worker timeout after 30 seconds"))},3e4),n=i=>{const o=i.data;o.id===t&&("progress"===o.type?a.push(`${o.stage}: ${o.message}`):"result"===o.type?(clearTimeout(s),K.value?.removeEventListener("message",n),e(o.result)):"error"===o.type&&(clearTimeout(s),K.value?.removeEventListener("message",n),l(new Error(o.error.message))))};K.value?.addEventListener("message",n),K.value?.postMessage({id:t,method:"accurate",design:{promptTemplate:N.value,variableBindings:{}}})}),s=Date.now()-e;Te.value={method:"Accurate (Use Cached)",tokens:l.minTokens,duration:s,isAccurate:l.isAccurate,progress:a}}catch(t){Te.value={method:"Accurate (Use Cached)",tokens:0,duration:Date.now()-e,isAccurate:!1,error:t instanceof Error?t.message:"Unknown error",progress:a}}finally{M.value=!1}}async function ea(){if(!K.value)try{const e=new Worker(new URL(""+new URL("token-calculation.worker-CFdscdLl.js",import.meta.url).href,import.meta.url),{type:"module"});await new Promise(a=>{const t=setTimeout(()=>a(!1),1e4);e.onmessage=e=>{"result"!==e.data.type&&"error"!==e.data.type||(clearTimeout(t),a(!0))},e.postMessage({id:"prime",method:"accurate",design:{promptTemplate:"test",variableBindings:{}}})})?K.value=e:e.terminate()}catch(e){E.error("Failed to initialize persistent worker",e)}}function aa(){K.value&&(K.value.terminate(),K.value=null)}return s(async()=>{await Ie(),await D.waitForReady(),I.value=[...D.getAllProviders()];try{z.value=await L.getStorageInfo()}catch(e){E.warn("Failed to get storage info",{error:e})}}),(e,a)=>(i(),n("div",W,[o("div",B,[a[1]||(a[1]=o("h3",null,"Provider Endpoints",-1)),a[2]||(a[2]=o("p",{class:"section-desc"},"Configure base URLs for API providers",-1)),o("div",F,[(i(!0),n(r,null,c(I.value,e=>{return i(),n("div",{key:e.id,class:"endpoint-item"},[o("label",null,d(e.name),1),o("input",{value:(a=e.id,f.getBaseUrl(a)||""),onInput:a=>function(e,a){const t=a.target.value;f.setBaseUrl(e,t)}(e.id,a),placeholder:Je(e.id),disabled:!Ye(e.id),class:"endpoint-input","data-testid":`input-endpoint-${e.id}`,"aria-label":`${e.name} endpoint URL`},null,40,q)]);var a}),128))])]),o("div",G,[a[7]||(a[7]=o("h3",null,"System Information",-1)),o("div",H,[o("div",J,[a[3]||(a[3]=o("label",null,"Database Version:",-1)),o("span",null,d(Se.value.dbVersion),1)]),o("div",Y,[a[4]||(a[4]=o("label",null,"Records Count:",-1)),o("span",null,d(Se.value.totalRecords),1)]),o("div",Z,[a[5]||(a[5]=o("label",null,"Storage Used:",-1)),o("span",null,d(Se.value.storageUsed),1)]),o("div",Q,[a[6]||(a[6]=o("label",null,"Last Updated:",-1)),o("span",null,d(Se.value.lastUpdated),1)])])]),o("div",X,[a[8]||(a[8]=o("h3",null,"Database Tables",-1)),(i(!0),n(r,null,c(ze.value,e=>(i(),n("div",{key:e.name,class:"table-section"},[o("div",ee,[o("h4",null,d(e.name)+" ("+d(e.count)+" records)",1),o("div",ae,[o("button",{onClick:a=>async function(e){He(k.value[e]||[],`${e}_export.json`)}(e.name),class:"export-btn","data-testid":`btn-export-table-${e.name}`,"aria-label":`Export ${e.name} table`},"Export",8,te),o("button",{onClick:a=>{return t=e.name,w.value=t,void S.value?.click();var t},class:"import-btn","data-testid":`btn-import-table-${e.name}`,"aria-label":`Import ${e.name} table`},"Import",8,le),o("button",{onClick:a=>async function(e){if(!confirm(`Are you sure you want to clear all ${e} data? This cannot be undone.`))return;const a=T[e];a&&(await a.clear(),await Ie())}(e.name),class:"clear-btn",disabled:0===e.count,"data-testid":`btn-clear-table-${e.name}`,"aria-label":`Clear all ${e.name} data`}," Clear All ",8,se)])]),y.value.has(e.name)?(i(),n("div",ne,[o("div",ie,[v(o("input",{"onUpdate:modelValue":a=>h.value[e.name]=a,placeholder:"Search records...",class:"search-input","data-testid":`input-search-${e.name}`,"aria-label":`Search ${e.name} records`},null,8,oe),[[p,h.value[e.name]]]),o("button",{onClick:a=>async function(){await Ie()}(e.name),class:"refresh-btn","data-testid":`btn-refresh-${e.name}`,"aria-label":`Refresh ${e.name} table`},"Refresh",8,re)]),o("div",ce,[o("pre",null,d(Le(e.name)),1)])])):u("",!0),o("button",{onClick:a=>{return t=e.name,void(y.value.has(t)?y.value.delete(t):y.value.add(t));var t},class:"toggle-btn","data-testid":`btn-toggle-${e.name}`,"aria-label":`${y.value.has(e.name)?"Collapse":"Expand"} ${e.name} table`,"aria-expanded":y.value.has(e.name)},d(y.value.has(e.name)?"Collapse":"Expand"),9,de)]))),128))]),o("div",{class:"section"},[a[15]||(a[15]=o("h3",null,"Import/Export Tools",-1)),o("div",{class:"export-group"},[a[9]||(a[9]=o("h4",null,"Complete Database",-1)),o("div",{class:"export-actions"},[o("button",{onClick:Ue,class:"export-all-btn","data-testid":"btn-export-full-database","aria-label":"Export complete database"},"Export All Data"),o("button",{onClick:je,class:"import-all-btn","data-testid":"btn-import-full-database","aria-label":"Import complete database"},"Import All Data")])]),o("div",{class:"export-group"},[a[10]||(a[10]=o("h4",null,"Designs & Variables",-1)),a[11]||(a[11]=o("p",{class:"export-desc"},"Exports designs with their linked variable lists",-1)),o("div",{class:"export-actions"},[o("button",{onClick:Pe,class:"export-btn","data-testid":"btn-export-designs-variables","aria-label":"Export designs and variables"},"Export Designs+Variables"),o("button",{onClick:Ne,class:"import-btn","data-testid":"btn-import-designs-variables","aria-label":"Import designs and variables"},"Import Designs+Variables")])]),o("div",{class:"export-group"},[a[12]||(a[12]=o("h4",null,"Trials",-1)),a[13]||(a[13]=o("p",{class:"export-desc"},"Exports trials with configuration snapshots and results",-1)),o("div",{class:"export-actions"},[o("button",{onClick:$e,class:"export-btn"},"Export Trials"),o("button",{onClick:Ve,class:"import-btn"},"Import Trials")])]),o("div",{class:"export-group"},[a[14]||(a[14]=o("h4",null,"Models",-1)),o("div",{class:"export-actions"},[o("button",{onClick:Re,class:"export-btn"},"Export All Models"),o("button",{onClick:Me,class:"import-btn"},"Import All Models")]),o("div",{class:"export-actions"},[o("button",{onClick:Oe,class:"export-state-btn"},"Export Model States Only"),o("button",{onClick:Ke,class:"import-state-btn"},"Import Model States Only")])])]),o("div",ue,[a[23]||(a[23]=o("h3",null,"Tokenizer Testing",-1)),a[24]||(a[24]=o("p",{class:"section-desc"},"Test the CDN-based tiktoken worker implementation",-1)),o("div",ve,[o("div",pe,[a[16]||(a[16]=o("label",null,"Test Text:",-1)),v(o("textarea",{"onUpdate:modelValue":a[0]||(a[0]=e=>N.value=e),placeholder:"Enter text to tokenize...",class:"test-textarea",rows:"3"},null,512),[[p,N.value]])]),o("div",me,[o("button",{onClick:Ze,class:"test-btn",disabled:!N.value||V.value},d(V.value?"Testing...":"Test Approximate (4 chars/token)"),9,be),o("button",{onClick:Qe,class:"test-btn primary",disabled:!N.value||M.value},d(M.value?"Loading CDN...":"Test Accurate (Reload CDN)"),9,ge),o("button",{onClick:Xe,class:"test-btn secondary",disabled:!N.value||M.value||!K.value},d(M.value?"Testing...":"Test Accurate (Use Cached)"),9,fe)]),o("div",ye,[o("small",he,[m(" Worker Status: "+d(K.value?"✅ Cached (CDN loaded)":"❌ Not initialized")+" ",1),K.value?u("",!0):(i(),n("button",{key:0,onClick:ea,class:"init-btn"},"Initialize Cached Worker")),K.value?(i(),n("button",{key:1,onClick:aa,class:"terminate-btn"},"Terminate Worker")):u("",!0)])]),Te.value?(i(),n("div",ke,[a[22]||(a[22]=o("h4",null,"Results:",-1)),o("div",we,[o("div",Ce,[a[17]||(a[17]=o("label",null,"Method:",-1)),o("span",null,d(Te.value.method),1)]),o("div",_e,[a[18]||(a[18]=o("label",null,"Token Count:",-1)),o("span",null,d(Te.value.tokens),1)]),o("div",xe,[a[19]||(a[19]=o("label",null,"Time Taken:",-1)),o("span",null,d(Te.value.duration)+"ms",1)]),o("div",Ae,[a[20]||(a[20]=o("label",null,"Is Accurate:",-1)),o("span",null,d(Te.value.isAccurate?"✅ Yes":"❌ No"),1)])]),Te.value.error?(i(),n("div",De," ❌ Error: "+d(Te.value.error),1)):u("",!0),Te.value.progress?(i(),n("div",Ee,[a[21]||(a[21]=o("h5",null,"Progress:",-1)),(i(!0),n(r,null,c(Te.value.progress,e=>(i(),n("div",{key:e,class:"progress-msg"},d(e),1))),128))])):u("",!0)])):u("",!0)])]),o("div",{class:"section danger-actions-section"},[a[25]||(a[25]=o("h3",null,"Destructive Actions",-1)),o("div",{class:"danger-actions"},[o("button",{onClick:Fe,class:"danger-btn","data-testid":"btn-clear-all-data","aria-label":"Clear all application data"},"Clear All Data"),o("button",{onClick:qe,class:"danger-btn","data-testid":"btn-reset-defaults","aria-label":"Reset application to default settings"},"Reset to Defaults"),o("button",{onClick:Ge,class:"danger-btn","data-testid":"btn-regenerate-database","aria-label":"Regenerate database structure"},"Regenerate Database")])]),o("input",{ref_key:"fileInput",ref:S,type:"file",accept:".json",onChange:We,style:{display:"none"},"data-testid":"input-file-import","aria-label":"Select JSON file to import"},null,544)]))}}),[["__scopeId","data-v-f7417d07"]]),Se={class:"settings-view full-width","data-testid":"page-settings"},ze={class:"api-key-label"},Ie={class:"provider-info spacing-top-xs"},Le={class:"text-secondary"},Ue={class:"help-item"},Pe={class:"help-content"},$e={class:"help-item"},Re={class:"help-content"},Oe={class:"single-line-setting"},je={key:0,class:"environmental-toggle-section"},Ne={class:"env-toggle-container"},Ve=S(a({__name:"SettingsView",setup(a){const v=A(),p=z(),w=f(),C=t([]),_=t([]),x=l({get:()=>v.financialCostsEnabled,set:e=>v.setFinancialCostsEnabled(e)}),T=t(!0),S=l({get:()=>v.environmentalCostsEnabled,set:e=>v.setEnvironmentalCostsEnabled(e)}),L=t("carbon"),U=t(["cars","phones"]),P=[{title:"Provider",dataIndex:"name",key:"name",width:150},{title:"Value",key:"input",width:100,align:"center"},{title:"Slider (1-64)",key:"slider",width:200,align:"center"}],$=l(()=>D.getAllProviders().map(e=>{return{id:e.id,name:e.name,concurrency:(a=e.id,v.getProviderConcurrency(a)||O(a)),enabled:v.isProviderEnabled(e.id)};var a})),R=l(()=>v.apiKeyGroups);function O(e){const a=D.getProvider(e);return a?.execution?.defaultConcurrency||4}function j(e,a){v.setProviderConcurrency(e,a)}function N(){w.push("/environmental-config")}function V(){p.reset(),w.push("/welcome")}return s(async()=>{E.debug("SettingsView mounted")}),(a,t)=>{const l=g("a-tag"),s=g("a-alert"),p=g("a-input-password"),f=g("a-form-item"),w=g("a-col"),A=g("a-row"),D=g("a-form"),E=g("a-card"),z=g("a-button"),O=g("a-divider"),M=g("a-space"),W=g("a-input-number"),B=g("a-slider"),F=g("a-table"),q=g("a-collapse-panel"),G=g("a-collapse"),H=g("a-switch"),J=g("a-select-option"),Y=g("a-select"),Z=g("a-checkbox"),Q=g("a-checkbox-group");return i(),n("div",Se,[t[30]||(t[30]=o("div",{class:"settings-header"},[o("h2",null,"Settings"),o("p",{class:"description"},"Configure API keys and provider settings for scientific model testing")],-1)),e(E,{title:"API Keys",class:"settings-card",size:"small"},{extra:b(()=>[e(l,{color:"green",size:"small"},{default:b(()=>[m(d(Object.values(R.value).filter(e=>e.hasKey).length)+" / "+d(Object.keys(R.value).length)+" configured ",1)]),_:1})]),default:b(()=>[e(s,{message:"Local Storage Only: API keys are stored locally in your browser and are never sent to auditomatic.org. API Keys only leave your browser as authentication to external LLM API providers, via encrypted HTTPS.",type:"info","show-icon":"",class:"spacing-bottom-md"}),e(D,{layout:"vertical",size:"small"},{default:b(()=>[e(A,{gutter:[16,16]},{default:b(()=>[(i(!0),n(r,null,c(R.value,a=>(i(),y(w,{key:a.id,span:12},{default:b(()=>[e(f,null,{label:b(()=>[o("div",ze,[m(d(a.name)+" ",1),a.hasKey?(i(),y(l,{key:0,color:"success",size:"small"},{default:b(()=>t[6]||(t[6]=[m("✓ Configured")])),_:1,__:[6]})):(i(),y(l,{key:1,color:"default",size:"small"},{default:b(()=>t[7]||(t[7]=[m("Not configured")])),_:1,__:[7]}))])]),default:b(()=>{return[e(p,{value:(t=a.id,v.getApiKey(t)||""),onInput:e=>function(e,a){const t=a.target.value;v.setApiKey(e,t)}(a.id,e),placeholder:`Enter ${a.name} API key`,autocomplete:"off",size:"small",visibilityToggle:!0,"data-testid":`input-api-key-${a.id}`,"aria-label":`${a.name} API key input`},null,8,["value","onInput","placeholder","data-testid","aria-label"]),o("div",Ie,[o("small",Le," Used by: "+d(a.providers.join(", ")),1)])];var t}),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}),e(E,{title:"Getting Started",class:"settings-card",size:"small"},{extra:b(()=>[e(l,{color:"blue",size:"small"},{default:b(()=>t[8]||(t[8]=[m("Help")])),_:1,__:[8]})]),default:b(()=>[e(M,{direction:"vertical",style:{width:"100%"}},{default:b(()=>[o("div",Ue,[e(h(K),{class:"help-icon"}),o("div",Pe,[t[10]||(t[10]=o("h4",null,"Setup Wizard",-1)),t[11]||(t[11]=o("p",null,"New to Auditomatic? Run the setup wizard to configure providers and learn the basics.",-1)),e(z,{onClick:V},{default:b(()=>t[9]||(t[9]=[m(" Run Setup Wizard ")])),_:1,__:[9]})])]),e(O,{style:{margin:"12px 0"}}),o("div",$e,[e(h(I),{class:"help-icon"}),o("div",Re,[t[13]||(t[13]=o("h4",null,"Documentation",-1)),t[14]||(t[14]=o("p",null,"Learn more about using Auditomatic Lite for systematic LLM testing.",-1)),e(z,{type:"link",href:"/docs",target:"_blank"},{default:b(()=>t[12]||(t[12]=[m(" View Documentation → ")])),_:1,__:[12]})])])]),_:1})]),_:1}),e(E,{class:"settings-card",size:"small"},{default:b(()=>[e(G,{activeKey:C.value,"onUpdate:activeKey":t[0]||(t[0]=e=>C.value=e),bordered:!1},{default:b(()=>[e(q,{key:"concurrency"},{header:b(()=>t[15]||(t[15]=[o("div",{class:"collapse-header"},[o("span",{class:"collapse-title"},"Concurrency Settings"),o("small",{class:"text-secondary"},"Request limits per provider")],-1)])),default:b(()=>[e(F,{columns:P,"data-source":$.value,pagination:!1,size:"small",class:"scientific-table","row-key":"id"},{bodyCell:b(({column:e,record:a})=>["input"===e.key?(i(),y(W,{key:0,value:a.concurrency,onChange:e=>j(a.id,e),min:1,max:64,disabled:!a.enabled,size:"small",style:{width:"80px"},"data-testid":`input-concurrency-${a.id}`,"aria-label":`Concurrency limit for ${a.name}`},null,8,["value","onChange","disabled","data-testid","aria-label"])):u("",!0),"slider"===e.key?(i(),y(B,{key:1,value:a.concurrency,onChange:e=>j(a.id,e),min:1,max:64,disabled:!a.enabled,style:{width:"150px",margin:"0 auto"},size:"small"},null,8,["value","onChange","disabled"])):u("",!0)]),_:1},8,["data-source"])]),_:1})]),_:1},8,["activeKey"])]),_:1}),e(E,{title:"Cost Tracking",class:"settings-card",size:"small"},{default:b(()=>[o("div",Oe,[t[16]||(t[16]=o("span",{class:"setting-label"},"Financial:",-1)),t[17]||(t[17]=o("span",{class:"setting-desc"},"Display estimated API costs for model usage",-1)),e(H,{checked:x.value,"onUpdate:checked":t[1]||(t[1]=e=>x.value=e),"data-testid":"switch-financial-costs","aria-label":"Enable or disable financial cost display"},null,8,["checked"])]),T.value?(i(),n("div",je,[t[20]||(t[20]=o("h3",{class:"settings-subsection-title"},"Environmental Impact Display",-1)),o("div",Ne,[o("div",{class:k(["env-toggle-option",{active:!S.value}])},t[18]||(t[18]=[o("strong",null,'Show "??"',-1),o("span",null,"Display as placeholders",-1)]),2),e(H,{checked:S.value,"onUpdate:checked":t[2]||(t[2]=e=>S.value=e),"data-testid":"switch-environmental-costs","aria-label":"Toggle between ?? placeholders and estimates",size:"default"},null,8,["checked"]),o("div",{class:k(["env-toggle-option",{active:S.value}])},t[19]||(t[19]=[o("strong",null,"Show Estimates",-1),o("span",null,"Beta estimates (not recommended)",-1)]),2)]),S.value?(i(),y(s,{key:0,message:"These environmental estimates are very inaccurate and not currently recommended. They're shown for relative comparison only.",type:"warning","show-icon":"",class:"spacing-top-md",style:{fontSize:"12px"}})):u("",!0)])):u("",!0),S.value?(i(),y(D,{key:1,layout:"vertical",size:"small",class:"spacing-top-lg"},{default:b(()=>[e(f,{label:"Primary Environmental Metric"},{default:b(()=>[e(Y,{value:L.value,"onUpdate:value":t[3]||(t[3]=e=>L.value=e),style:{width:"200px"},size:"small","data-testid":"select-environmental-metric","aria-label":"Select primary environmental metric"},{default:b(()=>[e(J,{value:"carbon"},{default:b(()=>t[21]||(t[21]=[m("Carbon Footprint")])),_:1,__:[21]}),e(J,{value:"water"},{default:b(()=>t[22]||(t[22]=[m("Water Usage")])),_:1,__:[22]}),e(J,{value:"energy"},{default:b(()=>t[23]||(t[23]=[m("Energy Consumption")])),_:1,__:[23]})]),_:1},8,["value"])]),_:1}),e(f,{label:"Show Equivalents"},{default:b(()=>[e(Q,{value:U.value,"onUpdate:value":t[4]||(t[4]=e=>U.value=e),"data-testid":"checkbox-group-equivalents","aria-label":"Select environmental equivalents to display"},{default:b(()=>[e(Z,{value:"cars","data-testid":"checkbox-equiv-cars"},{default:b(()=>t[24]||(t[24]=[m("Car Miles")])),_:1,__:[24]}),e(Z,{value:"trees","data-testid":"checkbox-equiv-trees"},{default:b(()=>t[25]||(t[25]=[m("Trees Needed")])),_:1,__:[25]}),e(Z,{value:"phones","data-testid":"checkbox-equiv-phones"},{default:b(()=>t[26]||(t[26]=[m("Phone Charges")])),_:1,__:[26]}),e(Z,{value:"bottles","data-testid":"checkbox-equiv-bottles"},{default:b(()=>t[27]||(t[27]=[m("Water Bottles")])),_:1,__:[27]})]),_:1},8,["value"])]),_:1}),e(f,null,{default:b(()=>[e(z,{type:"link",onClick:N,size:"small","data-testid":"btn-configure-environmental","aria-label":"Go to environmental cost configuration"},{default:b(()=>t[28]||(t[28]=[m(" Configure Environmental Cost Data → ")])),_:1,__:[28]})]),_:1})]),_:1})):u("",!0)]),_:1}),e(E,{class:"settings-card danger-zone-card",size:"small"},{default:b(()=>[e(G,{activeKey:_.value,"onUpdate:activeKey":t[5]||(t[5]=e=>_.value=e),bordered:!1},{default:b(()=>[e(q,{key:"danger-zone"},{header:b(()=>t[29]||(t[29]=[o("div",{class:"collapse-header danger-zone-header"},[o("span",{class:"collapse-title danger-zone-title"},"DANGER ZONE SETTINGS"),o("small",{class:"text-danger"},"Data management & destructive actions")],-1)])),default:b(()=>[e(Te)]),_:1})]),_:1},8,["activeKey"])]),_:1})])}}}),[["__scopeId","data-v-d310afb5"]]);export{Ve as default};
