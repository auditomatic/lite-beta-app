const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-BHXEDjmJ.js","assets/index-Rfcl7loQ.css"])))=>i.map(i=>d[i]);
import{b as d,I as Ie,d as Q,az as je,r as E,c as I,p as kt,i as ue,j as y,m as s,k as e,v as T,t as u,x as O,y as B,F as H,A as le,z as f,D as k,q as U,_ as de,a9 as ne,aA as re,ag as ve,J as Ce,aB as Re,a as te,B as ze,w as wt,C as Ae,n as Oe,E as Ne,aC as He,L as Qe,u as qe,aD as Ke,T as $t,al as Mt,s as Fe,aE as zt,aF as Ct,a1 as Ot,o as St,aG as Tt,aH as Ge,aI as Pt,aj as xt,M as Bt}from"./index-BHXEDjmJ.js";import{u as We}from"./useV4Models-CpNVp1kv.js";import{u as Je}from"./useV4ProviderParameters-BMbBHKk2.js";import{F as Et}from"./FilterOutlined-fYtf3iTn.js";import{U as Xe}from"./UnorderedListOutlined-BxIArIQ6.js";import{S as Dt}from"./SaveOutlined-BhZ_vpwR.js";import"./useV4LiveQuery-1pEB3sHw.js";var Lt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 144H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H212V212h200v200zm452-268H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H612V212h200v200zM464 544H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16zm-52 268H212V612h200v200zm452-268H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16zm-52 268H612V612h200v200z"}}]},name:"appstore",theme:"outlined"};function Ve(w){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?Object(arguments[t]):{},i=Object.keys(a);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(a).filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable}))),i.forEach(function(p){At(w,p,a[p])})}return w}function At(w,t,a){return t in w?Object.defineProperty(w,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):w[t]=a,w}var Se=function(t,a){var i=Ve({},t,a.attrs);return d(Ie,Ve({},i,{icon:Lt}),null)};Se.displayName="AppstoreOutlined";Se.inheritAttrs=!1;var Ft={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"};function Ue(w){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?Object(arguments[t]):{},i=Object.keys(a);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(a).filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable}))),i.forEach(function(p){Gt(w,p,a[p])})}return w}function Gt(w,t,a){return t in w?Object.defineProperty(w,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):w[t]=a,w}var Te=function(t,a){var i=Ue({},t,a.attrs);return d(Ie,Ue({},i,{icon:Ft}),null)};Te.displayName="UploadOutlined";Te.inheritAttrs=!1;class Vt{async bulkWrite(t,a,i="put"){a.length!==0&&await Q.transaction("rw",Q[t],async()=>{switch(i){case"put":await Q[t].bulkPut(a);break;case"add":await Q[t].bulkAdd(a);break;case"update":const p=a.map(z=>Q[t].update(z.id,z));await Promise.all(p);break}})}async bulkDelete(t,a){a.length!==0&&await Q.transaction("rw",Q[t],async()=>{await Q[t].bulkDelete(a)})}async conditionalBulkUpdate(t,a,i){let p=0;return await Q.transaction("rw",Q[t],async()=>{await Q[t].toCollection().modify(z=>{a(z)&&(Object.assign(z,i),p++)})}),p}freezeDeep(t){const a=t.map(i=>Object.freeze(i));return Object.freeze(a)}async getAndFreeze(t,a){const i=await Q[t].get(a);return i?Object.freeze(i):null}async getAllAndFreeze(t){const a=await Q[t].toArray();return this.freezeDeep(a)}}const ke=new Vt;class Ut{async bulkUpsertModels(t){t.length!==0&&await Q.transaction("rw",Q.models,async()=>{const a=t.map(i=>Object.freeze({...i,enabled:i.enabled??!1,available:i.available??!0}));await Q.models.bulkPut(a)})}async clearProviderModels(t){return await Q.transaction("rw",Q.models,async()=>{const p=(await Q.models.where("provider").equals(t).toArray()).map(z=>z.id);return p.length>0&&await Q.models.bulkDelete(p),p.length})}async toggleModelEnabled(t,a){return await Q.models.update(t,{enabled:a})===1}async toggleProviderModels(t,a){return await ke.conditionalBulkUpdate("models",i=>i.provider===t,{enabled:a})}async toggleAllModels(t){return await ke.conditionalBulkUpdate("models",()=>!0,{enabled:t})}async getModelStatistics(){const t=await Q.models.toArray(),a={total:t.length,enabled:0,byProvider:{}};for(const i of t)i.enabled&&a.enabled++,a.byProvider[i.provider]||(a.byProvider[i.provider]={total:0,enabled:0}),a.byProvider[i.provider].total++,i.enabled&&a.byProvider[i.provider].enabled++;return Object.freeze(a)}async updateModelAvailability(t,a){return await ke.conditionalBulkUpdate("models",i=>i.provider===t,{available:a})}async searchModels(t){let a=Q.models.toCollection();if(t.provider&&(a=Q.models.where("provider").equals(t.provider)),t.enabled!==void 0&&(a=a.and(p=>p.enabled===t.enabled)),t.available!==void 0&&(a=a.and(p=>p.available===t.available)),t.search){const p=t.search.toLowerCase();a=a.and(z=>z.displayName.toLowerCase().includes(p)||z.modelId.toLowerCase().includes(p))}const i=await a.toArray();return ke.freezeDeep(i)}async clearAllModels(){await Q.models.clear()}}const It=new Ut;function jt(){const w=je(),t=E(!1),a=E(null),i=E(!1),p=E(!1);async function z(g,o){t.value=!0,o&&(o.value=!0),a.value=null;try{return{ok:!0,value:await g()}}catch(l){const r=l instanceof Error?l:new Error(String(l));return a.value=r,{ok:!1,error:r}}finally{t.value=!1,o&&(o.value=!1)}}async function D(g){return z(()=>w.discoverModels(g),i)}async function F(g){return z(()=>w.refreshModelSource(g),i)}async function b(g,o){return z(async()=>{await w.toggleModel(g,o)},p)}async function _(g){return z(async()=>{await w.toggleAllModels(g)},p)}async function n(g,o){return z(async()=>{await w.toggleProviderModels(g,o)},p)}async function C(){return z(async()=>{await w.enableOpenRouterFavorites()},p)}async function V(){return z(async()=>{await w.clearAllModels()})}async function m(g,o){return z(async()=>{await It.updateModelAvailability(g,o)})}return{discoverModels:D,refreshDiscoverySource:F,toggleModel:b,toggleAllModels:_,toggleProviderModels:n,enableOpenRouterFavorites:C,clearAllModels:V,updateModelAvailability:m,isExecuting:t,lastError:a,isDiscovering:i,isTogglingModels:p}}function Ye(){const w=je(),t=E([]),a=E(!1),i=E([]);function p(){const F=w.getDiscoveryStatus();t.value=F.map(b=>({id:b.id,status:b.status==="loading"?"loading":b.status==="idle"?"success":b.status,modelCount:b.modelCount,error:b.error})),a.value=w.isDiscovering(),i.value=w.getDiscoveryErrors()}function z(F){return{litellm:"LiteLLM",openrouter:"OpenRouter",ollama:"Ollama",deterministic:"Deterministic"}[F]||F}function D(F){const b=kt.getProvider(F);return(b==null?void 0:b.name)||F}return p(),{discoveryStatus:I(()=>t.value),isDiscovering:I(()=>a.value),discoveryErrors:I(()=>i.value),getSourceDisplayName:z,getProviderDisplayName:D,refreshStatus:p}}const Rt={class:"search-section"},Nt={class:"search-controls"},Ht={class:"size-filter"},Qt={class:"size-controls"},qt={class:"size-presets"},Kt={key:0,class:"size-filter-indicator"},Wt={class:"quantized-filter"},Jt={class:"filter-description"},Xt={class:"category-filters"},Yt=ue({__name:"OllamaSearchFilters",props:{searchQuery:{},sortBy:{},selectedCategories:{},maxSizeGB:{},showQuantized:{type:Boolean},categories:{}},emits:["update:searchQuery","update:sortBy","update:maxSizeGB","update:showQuantized","toggle-category"],setup(w,{emit:t}){const a=w,i=t,p=I({get:()=>a.searchQuery,set:_=>i("update:searchQuery",_)}),z=I({get:()=>a.sortBy,set:_=>i("update:sortBy",_)}),D=I({get:()=>a.maxSizeGB,set:_=>i("update:maxSizeGB",_)}),F=I({get:()=>a.showQuantized,set:_=>i("update:showQuantized",_)}),b=[{label:"1GB",value:1},{label:"2GB",value:2},{label:"4GB",value:4},{label:"8GB",value:8},{label:"16GB",value:16},{label:"None",value:999}];return(_,n)=>{const C=T("a-input-search"),V=T("a-select-option"),m=T("a-select"),g=T("a-input-number"),o=T("a-button"),l=T("a-tag");return s(),y("div",Rt,[e("div",Nt,[d(C,{value:p.value,"onUpdate:value":n[0]||(n[0]=r=>p.value=r),placeholder:"Search models by name or description...","allow-clear":"",size:"large",class:"search-input"},null,8,["value"]),d(m,{value:z.value,"onUpdate:value":n[1]||(n[1]=r=>z.value=r),placeholder:"Sort by",style:{width:"180px"},size:"large"},{default:u(()=>[d(V,{value:"popularity"},{default:u(()=>n[4]||(n[4]=[O("Popularity")])),_:1,__:[4]}),d(V,{value:"lastUpdated"},{default:u(()=>n[5]||(n[5]=[O("Last Updated")])),_:1,__:[5]}),d(V,{value:"name"},{default:u(()=>n[6]||(n[6]=[O("Name")])),_:1,__:[6]}),d(V,{value:"tagCount"},{default:u(()=>n[7]||(n[7]=[O("Tag Count")])),_:1,__:[7]})]),_:1},8,["value"])]),e("div",Ht,[e("div",Qt,[n[8]||(n[8]=e("span",{class:"filter-label"},"Filter to models smaller than:",-1)),d(g,{value:D.value,"onUpdate:value":n[2]||(n[2]=r=>D.value=r),min:1,max:999,step:1,size:"small",class:"size-input","addon-after":"GB"},null,8,["value"]),e("div",qt,[(s(),y(H,null,le(b,r=>d(o,{key:r.value,size:"small",type:D.value===r.value?"primary":"default",onClick:c=>D.value=r.value,class:"preset-button"},{default:u(()=>[O(f(r.label),1)]),_:2},1032,["type","onClick"])),64))])]),D.value<999?(s(),y("span",Kt," â‰¤"+f(D.value)+"GB filter active ",1)):B("",!0)]),e("div",Wt,[d(o,{type:F.value?"default":"primary",size:"small",onClick:n[3]||(n[3]=r=>F.value=!F.value)},{icon:u(()=>[d(k(Et))]),default:u(()=>[O(" "+f(F.value?"Hide":"Show")+" Quantized Versions ",1)]),_:1},8,["type"]),e("span",Jt,f(F.value?"Showing all versions":"Hiding q2_K, q3_K, q4_0, q5_1, q6_K, q8_0, fp16..."),1)]),e("div",Xt,[(s(!0),y(H,null,le(_.categories,r=>(s(),U(l,{key:r,color:_.selectedCategories.includes(r)?"blue":"default",checkable:!0,checked:_.selectedCategories.includes(r),onClick:c=>_.$emit("toggle-category",r),class:"category-tag"},{default:u(()=>[O(f(r),1)]),_:2},1032,["color","checked","onClick"]))),128))])])}}}),Zt=de(Yt,[["__scopeId","data-v-a03d8794"]]),es={key:0,class:"downloads-section"},ts={class:"download-items"},ss={class:"download-info"},as={class:"download-tag"},ls={class:"download-status"},os=ue({__name:"OllamaDownloadProgress",props:{pullProgress:{}},setup(w){return(t,a)=>{const i=T("a-progress");return Object.keys(t.pullProgress).length>0?(s(),y("div",es,[a[0]||(a[0]=e("h4",null,"Active Downloads",-1)),e("div",ts,[(s(!0),y(H,null,le(t.pullProgress,(p,z)=>(s(),y("div",{key:z,class:"download-item"},[e("div",ss,[e("code",as,f(z),1),e("span",ls,f(p.message),1)]),d(i,{percent:p.percent,status:p.status==="success"?"success":"active",size:"small",class:"download-progress"},null,8,["percent","status"])]))),128))])])):B("",!0)}}}),ns=de(os,[["__scopeId","data-v-88ba3f68"]]),is={class:"model-info"},rs={class:"model-name"},us={key:0},ds={class:"model-description"},cs={class:"model-actions"},ps={key:0,class:"button-size-info"},ms={key:0,class:"tags-preview"},vs={class:"preview-tags"},fs=["onClick","title"],gs={key:1,class:"tag-actual"},ys={class:"tag-size"},_s={key:0,class:"more-tags"},bs={key:1,class:"tags-expanded"},hs={key:0,class:"tag-name"},ks={key:2},ws={key:1,class:"text-secondary"},$s=ue({__name:"OllamaModelCard",props:{model:{},expanded:{type:Boolean},pullingModels:{},pullProgress:{},installedModels:{},maxSizeGB:{},showQuantized:{type:Boolean},isQuantizedTag:{type:Function},parseSizeToGB:{type:Function},getSizeClass:{type:Function},getLatestTagInfo:{type:Function}},emits:["toggle-expand","pull-model"],setup(w){const t=w,a=[{title:"Tag",key:"name",width:200},{title:"Size",key:"size",width:100,align:"right"},{title:"Context",key:"context",width:100,align:"center"},{title:"Status",key:"status",width:80,align:"center"},{title:"Action",key:"actions",width:80,align:"center"}],i=I(()=>t.installedModels.some(r=>r.startsWith(t.model.name))),p=I(()=>t.installedModels.filter(r=>r.startsWith(t.model.name+":")).length),z=I(()=>m(`${t.model.name}:latest`)||m(t.model.name)),D=I(()=>t.pullingModels.has(`${t.model.name}:latest`)),F=I(()=>t.pullProgress[`${t.model.name}:latest`]),b=I(()=>t.getLatestTagInfo(t.model)),_=I(()=>t.maxSizeGB<999||!t.showQuantized),n=I(()=>t.model.tags?Object.entries(t.model.tags).map(([r,c])=>({...c,name:r})).filter(r=>!(t.maxSizeGB<999&&t.parseSizeToGB(r.size||"0GB")>t.maxSizeGB||!t.showQuantized&&t.isQuantizedTag(r.name))).sort((r,c)=>r.name.localeCompare(c.name)):[]),C=I(()=>n.value.length),V=I(()=>n.value.sort((c,M)=>{const P=["latest","instruct","8b","7b","3b","1b"],x=P.indexOf(c.name),$=P.indexOf(M.name);return x!==-1&&$!==-1?x-$:x!==-1?-1:$!==-1?1:c.name.localeCompare(M.name)}).slice(0,5));function m(r){return t.installedModels.includes(r)}function g(r){return t.pullingModels.has(r)}function o(r){return t.pullProgress[r]}const l=I(()=>{const r=b.value;return r?{actualTag:r.actualTag||"",size:r.size||""}:null});return(r,c)=>{const M=T("a-tag"),P=T("a-button"),x=T("a-table");return s(),y("div",{class:ne(["model-item",{expanded:r.expanded}])},[e("div",{class:"model-header",onClick:c[2]||(c[2]=$=>r.$emit("toggle-expand"))},[e("div",is,[e("div",rs,[e("h4",null,f(r.model.name),1),d(M,{size:"small",color:"blue"},{default:u(()=>[O(f(r.model.pullCount||"0")+" pulls",1)]),_:1}),d(M,{size:"small",color:"green"},{default:u(()=>[O(f(C.value)+" ",1),_.value?(s(),y("span",us,"/"+f(r.model.tagCount||0),1)):B("",!0),c[3]||(c[3]=O(" versions "))]),_:1,__:[3]}),i.value?(s(),U(M,{key:0,size:"small",color:"success",class:"installed-tag"},{icon:u(()=>[d(k(re))]),default:u(()=>[O(" "+f(p.value)+" installed ",1)]),_:1})):B("",!0)]),e("p",ds,f(r.model.description||"No description available"),1)]),e("div",cs,[d(P,{type:z.value?"default":"primary",size:"small",onClick:c[0]||(c[0]=ve($=>r.$emit("pull-model",r.model.name,"latest"),["stop"])),loading:D.value,disabled:z.value},{default:u(()=>[F.value?(s(),y(H,{key:0},[O(f(Math.round(F.value.percent))+"% ",1)],64)):z.value?(s(),y(H,{key:1},[d(k(re)),c[4]||(c[4]=O(" Installed "))],64)):(s(),y(H,{key:2},[c[5]||(c[5]=O(" Pull Latest ")),l.value?(s(),y("span",ps," ("+f(l.value.actualTag?l.value.actualTag+", ":"")+f(l.value.size)+") ",1)):B("",!0)],64))]),_:1},8,["type","loading","disabled"]),d(P,{type:"text",size:"small",onClick:c[1]||(c[1]=ve($=>r.$emit("toggle-expand"),["stop"]))},{icon:u(()=>[r.expanded?(s(),U(k(Re),{key:1})):(s(),U(k(Ce),{key:0}))]),default:u(()=>[O(" "+f(r.expanded?"Hide versions":"See all versions"),1)]),_:1})])]),r.expanded?B("",!0):(s(),y("div",ms,[e("div",vs,[(s(!0),y(H,null,le(V.value,$=>(s(),y("span",{key:$.name,class:ne(["tag-chip",[r.getSizeClass($.size),{installed:m($.fullTag)}]]),onClick:S=>m($.fullTag)?null:r.$emit("pull-model",r.model.name,$.name),title:`${$.fullTag} - ${$.size}${m($.fullTag)?" (Installed)":""}`},[m($.fullTag)?(s(),U(k(re),{key:0,class:"installed-icon"})):B("",!0),O(" "+f($.name)+" ",1),$.name==="latest"&&l.value?(s(),y("span",gs," ("+f(l.value.actualTag)+") ",1)):B("",!0),e("span",ys,f($.size),1)],10,fs))),128)),C.value>5?(s(),y("span",_s," +"+f(C.value-5)+" more versions ",1)):B("",!0)])])),r.expanded?(s(),y("div",bs,[d(x,{columns:a,"data-source":n.value,pagination:!1,size:"small",scroll:{y:300},class:"tags-table"},{bodyCell:u(({column:$,record:S})=>[$.key==="name"?(s(),y("code",hs,f(S.name),1)):B("",!0),$.key==="size"?(s(),y("span",{key:1,class:ne(["tag-size",r.getSizeClass(S.size)])},f(S.size),3)):B("",!0),$.key==="context"?(s(),y("span",ks,f(S.contextWindow),1)):B("",!0),$.key==="status"?(s(),y(H,{key:3},[m(S.fullTag)?(s(),U(M,{key:0,size:"small",color:"success"},{default:u(()=>[d(k(re)),c[6]||(c[6]=O(" Installed "))]),_:1,__:[6]})):(s(),y("span",ws,"-"))],64)):B("",!0),$.key==="actions"?(s(),U(P,{key:4,type:m(S.fullTag)?"default":"primary",size:"small",onClick:R=>r.$emit("pull-model",r.model.name,S.name),loading:g(S.fullTag),disabled:m(S.fullTag)},{default:u(()=>[o(S.fullTag)?(s(),y(H,{key:0},[O(f(Math.round(o(S.fullTag).percent))+"% ",1)],64)):m(S.fullTag)?(s(),y(H,{key:1},[d(k(re)),c[7]||(c[7]=O(" Installed "))],64)):(s(),y(H,{key:2},[O(" Pull ")],64))]),_:2},1032,["type","onClick","loading","disabled"])):B("",!0)]),_:1},8,["data-source"])])):B("",!0)],2)}}}),Ms=de($s,[["__scopeId","data-v-83727817"]]),zs={class:"list-view"},Cs={class:"expanded-tags-container"},Os={class:"expanded-tags-grid"},Ss={class:"tag-name"},Ts={key:0,class:"tag-actual"},Ps={class:"tag-size"},xs={class:"tag-context"},Bs={key:0,class:"model-name-cell"},Es={key:1,class:"description-cell"},Ds={key:2,class:"stats-cell"},Ls={class:"stat-item"},As={class:"stat-item"},Fs={key:0},Gs={key:3,class:"size-range"},Vs=ue({__name:"OllamaModelList",props:{models:{},expandedModels:{},pullingModels:{},pullProgress:{},installedModels:{},maxSizeGB:{},showQuantized:{type:Boolean},isQuantizedTag:{type:Function},parseSizeToGB:{type:Function},getSizeClass:{type:Function},getLatestTagInfo:{type:Function},getModelSizeRange:{type:Function}},emits:["toggle-model","pull-model","expand"],setup(w){const t=w,a=[{title:"Model",key:"name",width:200,fixed:"left"},{title:"Description",key:"description",ellipsis:!0},{title:"Stats",key:"stats",width:200},{title:"Size Range",key:"sizeRange",width:120,align:"center"},{title:"Actions",key:"actions",width:220,align:"center",fixed:"right"}];function i(b){return b.tags?Object.entries(b.tags).map(([_,n])=>({...n,name:_})).filter(_=>!(t.maxSizeGB<999&&t.parseSizeToGB(_.size||"0GB")>t.maxSizeGB||!t.showQuantized&&t.isQuantizedTag(_.name))).sort((_,n)=>_.name.localeCompare(n.name)):[]}function p(b){return b.tags?Object.entries(b.tags).filter(([_,n])=>!(t.maxSizeGB<999&&t.parseSizeToGB(n.size||"0GB")>t.maxSizeGB||!t.showQuantized&&t.isQuantizedTag(_))).length:0}function z(b){return t.installedModels.some(_=>_.startsWith(b))}function D(b){return t.installedModels.includes(b)}function F(b){return t.installedModels.filter(_=>_.startsWith(b+":"))}return(b,_)=>{const n=T("a-tag"),C=T("a-button"),V=T("a-space"),m=T("a-table");return s(),y("div",zs,[d(m,{"data-source":b.models,columns:a,pagination:!1,"row-key":g=>g.name,size:"small",scroll:{y:"calc(100% - 48px)"},"expanded-row-keys":b.expandedModels,"expand-row-by-click":!1,onExpand:_[0]||(_[0]=(g,o)=>b.$emit("expand",g,o)),class:"models-list-table"},{expandedRowRender:u(({record:g})=>[e("div",Cs,[e("div",Os,[(s(!0),y(H,null,le(i(g),o=>{var l;return s(),y("div",{key:o.fullTag,class:ne(["expanded-tag-item",b.getSizeClass(o.size)])},[e("span",Ss,f(o.name),1),o.name==="latest"&&b.getLatestTagInfo(g)?(s(),y("span",Ts," ("+f((l=b.getLatestTagInfo(g))==null?void 0:l.actualTag)+") ",1)):B("",!0),e("span",Ps,f(o.size),1),e("span",xs,f(o.contextWindow||"-"),1),D(o.fullTag)?(s(),U(n,{key:1,size:"small",color:"success"},{default:u(()=>[d(k(re)),_[1]||(_[1]=O(" Installed "))]),_:1,__:[1]})):(s(),U(C,{key:2,type:"primary",size:"small",loading:b.pullingModels.has(o.fullTag),onClick:r=>b.$emit("pull-model",g.name,o.name)},{default:u(()=>[b.pullProgress[o.fullTag]?(s(),y(H,{key:0},[O(f(Math.round(b.pullProgress[o.fullTag].percent))+"% ",1)],64)):(s(),y(H,{key:1},[O(" Pull ")],64))]),_:2},1032,["loading","onClick"]))],2)}),128))])])]),bodyCell:u(({column:g,record:o})=>[g.key==="name"?(s(),y("div",Bs,[e("code",null,f(o.name),1),z(o.name)?(s(),U(n,{key:0,size:"small",color:"success"},{default:u(()=>[d(k(re)),O(" "+f(F(o.name).length)+" installed ",1)]),_:2},1024)):B("",!0)])):B("",!0),g.key==="description"?(s(),y("span",Es,f(o.description||"No description"),1)):B("",!0),g.key==="stats"?(s(),y("div",Ds,[e("span",Ls,f(o.pullCount||"0")+" pulls",1),_[3]||(_[3]=e("span",{class:"stat-divider"},"â€¢",-1)),e("span",As,[O(f(p(o))+" ",1),b.maxSizeGB<999||!b.showQuantized?(s(),y("span",Fs,"/"+f(o.tagCount||0),1)):B("",!0),_[2]||(_[2]=O(" versions "))])])):B("",!0),g.key==="sizeRange"?(s(),y("span",Gs,f(b.getModelSizeRange(o)),1)):B("",!0),g.key==="actions"?(s(),U(V,{key:4,size:"small"},{default:u(()=>[d(C,{type:"text",size:"small",onClick:l=>b.$emit("toggle-model",o.name)},{icon:u(()=>[b.expandedModels.includes(o.name)?(s(),U(k(Re),{key:1})):(s(),U(k(Ce),{key:0}))]),default:u(()=>[O(" "+f(b.expandedModels.includes(o.name)?"Hide":"See")+" Versions ",1)]),_:2},1032,["onClick"]),d(C,{type:D(`${o.name}:latest`)||D(o.name)?"default":"primary",size:"small",onClick:l=>b.$emit("pull-model",o.name,"latest"),loading:b.pullingModels.has(`${o.name}:latest`),disabled:D(`${o.name}:latest`)||D(o.name)},{default:u(()=>[b.pullProgress[`${o.name}:latest`]?(s(),y(H,{key:0},[O(f(Math.round(b.pullProgress[`${o.name}:latest`].percent))+"% ",1)],64)):D(`${o.name}:latest`)||D(o.name)?(s(),U(k(re),{key:1})):(s(),y(H,{key:2},[O(" Pull Latest ")],64))]),_:2},1032,["type","onClick","loading","disabled"])]),_:2},1024)):B("",!0)]),_:1},8,["data-source","row-key","expanded-row-keys"])])}}}),Us=de(Vs,[["__scopeId","data-v-7d1c26f3"]]);async function he(w,t={}){var b,_;const i=`http://localhost:11434${w}`,p=window.location.protocol==="https:",z=t.timeout||3e4,D=new AbortController,F=setTimeout(()=>D.abort(),z);try{const n=await fetch(i,{...t,signal:D.signal,headers:{"Content-Type":"application/json",...t.headers}});return clearTimeout(F),n}catch(n){clearTimeout(F);const C=new Error;throw C.isHttps=p,n.name==="AbortError"?(C.type="timeout",C.message="Request to Ollama timed out",C.details=`The request took longer than ${z/1e3} seconds`):(b=n.message)!=null&&b.includes("Failed to fetch")||(_=n.message)!=null&&_.includes("NetworkError")?p?(C.type="cors",C.message="Cannot connect to Ollama from HTTPS site",C.details="Browser security prevents HTTPS sites from accessing local HTTP services. To use Ollama: 1) Download the desktop app, 2) Run Auditomatic locally, or 3) Configure Ollama with OLLAMA_ORIGINS=*"):(C.type="network",C.message="Cannot connect to Ollama",C.details="Make sure Ollama is running on your computer (http://localhost:11434)"):(C.type="unknown",C.message=n.message||"Unknown error connecting to Ollama",C.details=n.stack),te.warn("Ollama fetch error",{type:C.type,endpoint:w,isHttps:p,originalError:n.message}),C}}async function Is(){try{return{available:(await he("/api/tags",{timeout:5e3})).ok}}catch(w){return{available:!1,error:w}}}async function js(){const w=await he("/api/tags");if(!w.ok)throw new Error(`Failed to fetch models: ${w.status} ${w.statusText}`);return w.json()}async function Rs(w){const t=await he("/api/delete",{method:"DELETE",body:JSON.stringify({name:w})});if(!t.ok)throw new Error(`Failed to delete model: ${t.status} ${t.statusText}`)}function Ns(){const w=E(null),t=E(!1),a=E(""),i=E(new Set),p=E({}),z=E([]);async function D(){t.value=!0,a.value="";try{const c=await fetch("https://ollama.models.auditomatic.org/models.json");if(!c.ok)throw new Error(`Failed to fetch models: ${c.statusText}`);w.value=await c.json(),await F()}catch(c){a.value=`Failed to load model library: ${c instanceof Error?c.message:"Unknown error"}`}finally{t.value=!1}}async function F(){try{const c=await he("/api/tags");if(c.ok){const M=await c.json();z.value=(M.models||[]).map(P=>P.name)}}catch(c){const M=c;M.type==="cors"&&M.isHttps&&console.debug("Cannot access Ollama from HTTPS site"),z.value=[]}}async function b(c,M,P){var $;const x=M==="latest"?c:`${c}:${M}`;if(!i.value.has(x)){i.value.add(x),p.value[x]={percent:0,status:"active",message:"Starting download..."};try{const S=await he("/api/pull",{method:"POST",body:JSON.stringify({name:x,stream:!0})});if(!S.ok)throw new Error(`Failed to pull model: ${S.statusText}`);const R=($=S.body)==null?void 0:$.getReader();if(!R)throw new Error("Unable to read response stream");let W=0,j=0;for(;;){const{done:J,value:ce}=await R.read();if(J)break;const ge=new TextDecoder().decode(ce).split(`
`).filter(ie=>ie.trim());for(const ie of ge)try{const A=JSON.parse(ie);A.total&&(W=A.total),A.completed&&(j=A.completed);const L=W>0?Math.round(j/W*100):0;if(p.value[x]={status:A.status==="success"?"success":"active",percent:L,message:A.status||"Downloading..."},A.status==="success"){ze.success(`Successfully pulled ${x}`),await F(),P==null||P(),setTimeout(()=>{delete p.value[x]},3e3);return}}catch{}}}catch(S){const R=S;let W=S instanceof Error?S.message:"Unknown error";R.type==="cors"&&R.isHttps&&(W="Cannot access Ollama from HTTPS site. Please use the desktop app or run locally."),ze.error(`Failed to pull ${x}: ${W}`),p.value[x]={status:"exception",percent:0,message:"Download failed"},setTimeout(()=>{delete p.value[x]},5e3)}finally{i.value.delete(x)}}}function _(c){const M=parseFloat(c.replace(/[^\d.]/g,""))||0,P=c.replace(/[\d.]/g,"").trim().toUpperCase();return P.includes("MB")?M/1e3:P.includes("TB")?M*1e3:(P.includes("GB"),M)}function n(c){return/-q\d{1,2}_|-fp\d+/.test(c)}function C(c){return z.value.some(M=>M.startsWith(c))}function V(c){return z.value.includes(c)}function m(c){return z.value.filter(M=>M.startsWith(c+":"))}function g(c){return c<1?`${Math.round(c*1e3)}MB`:`${c.toFixed(1)}GB`}function o(c){const M=_(c);return M<5?"size-small":M<20?"size-medium":"size-large"}function l(c){if(!c.tags)return"N/A";const M=Object.values(c.tags).map($=>_($.size||"0GB")).filter($=>$>0);if(M.length===0)return"N/A";const P=Math.min(...M),x=Math.max(...M);return P===x?g(P):`${g(P)} - ${g(x)}`}function r(c){if(!c.tags||!c.tags.latest)return null;const M=c.tags.latest,P=Object.entries(c.tags).find(([x,$])=>x!=="latest"&&$.modelHash===M.modelHash);return P?{actualTag:P[0],size:P[1].size||M.size}:{actualTag:"",size:M.size}}return{modelsData:w,loading:t,error:a,pullingModels:i,pullProgress:p,installedModels:z,fetchModels:D,fetchInstalledModels:F,pullModel:b,parseSizeToGB:_,isQuantizedTag:n,isModelInstalled:C,isTagInstalled:V,getInstalledTagsForModel:m,formatSizeGB:g,getSizeClass:o,getModelSizeRange:l,getLatestTagInfo:r}}const Hs={class:"modal-content"},Qs={class:"stats-bar"},qs={class:"view-controls"},Ks={key:0,class:"loading-text"},Ws={class:"models-container"},Js=ue({__name:"OllamaModelLibraryModalV3",props:{modelValue:{type:Boolean}},emits:["update:modelValue","models-updated"],setup(w,{emit:t}){const a=w,i=t,{modelsData:p,loading:z,error:D,pullingModels:F,pullProgress:b,installedModels:_,fetchModels:n,pullModel:C,parseSizeToGB:V,isQuantizedTag:m,getSizeClass:g,getModelSizeRange:o,getLatestTagInfo:l}=Ns(),r=E(""),c=E("popularity"),M=E([]),P=E(8),x=E(!1),$=E("card"),S=E(new Set),R=I({get:()=>a.modelValue,set:A=>i("update:modelValue",A)}),W=I(()=>{var A;return((A=p.value)==null?void 0:A.totalModels)||0}),j=I(()=>{var A;return((A=p.value)==null?void 0:A.categories)||[]}),J=I(()=>{if(!p.value)return[];let A=Object.entries(p.value.models).map(([L,q])=>({...q,name:L}));if(r.value){const L=r.value.toLowerCase();A=A.filter(q=>q.name.toLowerCase().includes(L)||q.description.toLowerCase().includes(L))}switch(M.value.length>0&&(A=A.filter(L=>M.value.some(q=>(L.categories||[]).includes(q)))),P.value<999&&(A=A.filter(L=>L.tags?Object.values(L.tags).some(q=>V(q.size||"0GB")<=P.value):!0)),c.value){case"popularity":A.sort((L,q)=>{const Z=L.pullCount||"0",oe=q.pullCount||"0",ye=parseFloat(Z.replace(/[^\d.]/g,""))||0,_e=parseFloat(oe.replace(/[^\d.]/g,""))||0,K=Z.includes("M")?1e6:Z.includes("K")?1e3:1,fe=oe.includes("M")?1e6:oe.includes("K")?1e3:1;return _e*fe-ye*K});break;case"lastUpdated":A.sort((L,q)=>{const Z=L.lastUpdated?new Date(L.lastUpdated).getTime():0;return(q.lastUpdated?new Date(q.lastUpdated).getTime():0)-Z});break;case"name":A.sort((L,q)=>L.name.localeCompare(q.name));break;case"tagCount":A.sort((L,q)=>(q.tagCount||0)-(L.tagCount||0));break}return A});function ce(A){const L=M.value.indexOf(A);L===-1?M.value.push(A):M.value.splice(L,1)}function pe(A){S.value.has(A)?S.value.delete(A):S.value.add(A)}function ge(A,L){A?S.value.add(L.name):S.value.delete(L.name)}async function ie(A,L){await C(A,L,()=>i("models-updated"))}return wt(R,A=>{A&&!p.value&&n(),A||(S.value.clear(),r.value="",M.value=[],P.value=8,x.value=!1,D.value="")}),(A,L)=>{const q=T("a-button"),Z=T("a-button-group"),oe=T("a-spin"),ye=T("a-alert"),_e=T("a-modal");return s(),U(_e,{open:R.value,"onUpdate:open":L[7]||(L[7]=K=>R.value=K),title:"Ollama Model Library",width:"95vw",footer:null,destroyOnClose:!0,"wrap-class-name":"ollama-library-modal-full",class:"ollama-library-modal"},{default:u(()=>[e("div",Hs,[d(Zt,{"search-query":r.value,"onUpdate:searchQuery":L[0]||(L[0]=K=>r.value=K),"sort-by":c.value,"onUpdate:sortBy":L[1]||(L[1]=K=>c.value=K),"max-size-g-b":P.value,"onUpdate:maxSizeGB":L[2]||(L[2]=K=>P.value=K),"show-quantized":x.value,"onUpdate:showQuantized":L[3]||(L[3]=K=>x.value=K),"selected-categories":M.value,categories:j.value,onToggleCategory:ce},null,8,["search-query","sort-by","max-size-g-b","show-quantized","selected-categories","categories"]),e("div",Qs,[e("span",null,"Showing "+f(J.value.length)+" of "+f(W.value)+" models",1),e("div",qs,[d(Z,{size:"small"},{default:u(()=>[d(q,{type:$.value==="card"?"primary":"default",onClick:L[4]||(L[4]=K=>$.value="card"),icon:Ae(k(Se)),title:"Card View"},null,8,["type","icon"]),d(q,{type:$.value==="list"?"primary":"default",onClick:L[5]||(L[5]=K=>$.value="list"),icon:Ae(k(Xe)),title:"List View"},null,8,["type","icon"])]),_:1}),k(z)?(s(),y("span",Ks,"Loading...")):B("",!0)])]),d(ns,{"pull-progress":k(b)},null,8,["pull-progress"]),e("div",Ws,[d(oe,{spinning:k(z),size:"large"},{default:u(()=>[$.value==="card"?(s(!0),y(H,{key:0},le(J.value,K=>(s(),U(Ms,{key:K.name,model:K,expanded:S.value.has(K.name),"pulling-models":k(F),"pull-progress":k(b),"installed-models":k(_),"max-size-g-b":P.value,"show-quantized":x.value,"is-quantized-tag":k(m),"parse-size-to-g-b":k(V),"get-size-class":k(g),"get-latest-tag-info":k(l),onToggleExpand:fe=>pe(K.name),onPullModel:ie},null,8,["model","expanded","pulling-models","pull-progress","installed-models","max-size-g-b","show-quantized","is-quantized-tag","parse-size-to-g-b","get-size-class","get-latest-tag-info","onToggleExpand"]))),128)):B("",!0),$.value==="list"?(s(),U(Us,{key:1,models:J.value,"expanded-models":Array.from(S.value),"pulling-models":k(F),"pull-progress":k(b),"installed-models":k(_),"max-size-g-b":P.value,"show-quantized":x.value,"is-quantized-tag":k(m),"parse-size-to-g-b":k(V),"get-size-class":k(g),"get-latest-tag-info":k(l),"get-model-size-range":k(o),onToggleModel:pe,onPullModel:ie,onExpand:ge},null,8,["models","expanded-models","pulling-models","pull-progress","installed-models","max-size-g-b","show-quantized","is-quantized-tag","parse-size-to-g-b","get-size-class","get-latest-tag-info","get-model-size-range"])):B("",!0)]),_:1},8,["spinning"])]),k(D)?(s(),U(ye,{key:0,type:"error",message:k(D),closable:"",onClose:L[6]||(L[6]=K=>D.value=""),class:"error-alert"},null,8,["message"])):B("",!0)])]),_:1},8,["open"])}}}),Xs=de(Js,[["__scopeId","data-v-96287dbe"]]),Ys={class:"ollama-model-manager"},Zs={class:"action-bar"},ea={class:"models-section"},ta={key:0,class:"model-name"},sa={key:1,class:"model-size"},aa={key:2,class:"model-date"},la=ue({__name:"OllamaModelManagerV3",setup(w){const t=E([]),a=E(!1),i=E(new Set),p=E(""),z=E(!1),D=[{title:"Model Name",key:"name",width:"40%"},{title:"Size",key:"size",width:"20%",align:"right"},{title:"Modified",key:"modified",width:"25%"},{title:"Actions",key:"actions",width:"15%",align:"center"}];async function F(){const m=await Is();return!m.available&&m.error&&(m.error.type==="cors"&&m.error.isHttps?p.value=m.error.details||"Cannot connect to Ollama from HTTPS site":p.value=m.error.message),m.available}async function b(){try{const m=await js();t.value=m.models||[]}catch(m){const g=m;g.type==="cors"&&g.isHttps?p.value=g.details||"Cannot access Ollama from HTTPS site":p.value=`Failed to fetch models: ${m instanceof Error?m.message:"Unknown error"}`,t.value=[]}}async function _(m){i.value.add(m),p.value="";try{await Rs(m),ze.success(`Successfully removed ${m}`),await n()}catch(g){const o=g;o.type==="cors"&&o.isHttps?p.value=o.details||"Cannot access Ollama from HTTPS site":p.value=`Failed to remove model: ${g instanceof Error?g.message:"Unknown error"}`}finally{i.value.delete(m)}}async function n(){a.value=!0,await b(),a.value=!1}function C(m){if(!m)return"0 B";const g=["B","KB","MB","GB","TB"],o=Math.floor(Math.log(m)/Math.log(1024));return`${(m/Math.pow(1024,o)).toFixed(1)} ${g[o]}`}function V(m){try{return new Date(m).toLocaleDateString()}catch{return"Unknown"}}return Oe(async()=>{await F()?await n():p.value="Cannot connect to Ollama. Make sure Ollama is running on localhost:11434"}),(m,g)=>{const o=T("a-button"),l=T("a-tag"),r=T("a-popconfirm"),c=T("a-table"),M=T("a-empty"),P=T("a-alert");return s(),y("div",Ys,[e("div",Zs,[d(o,{type:"primary",onClick:g[0]||(g[0]=x=>z.value=!0)},{icon:u(()=>[d(k(Ne))]),default:u(()=>[g[3]||(g[3]=O(" Download Ollama Models "))]),_:1,__:[3]}),d(o,{onClick:n,loading:a.value},{icon:u(()=>[d(k(He))]),default:u(()=>[g[4]||(g[4]=O(" Refresh "))]),_:1,__:[4]},8,["loading"])]),e("div",ea,[g[7]||(g[7]=e("h4",{class:"section-title"},"Installed Models",-1)),d(c,{columns:D,"data-source":t.value,pagination:!1,size:"small",loading:a.value,"row-key":"name",class:"models-table"},{bodyCell:u(({column:x,record:$})=>{var S;return[x.key==="name"?(s(),y("div",ta,[e("code",null,f($.name),1),(S=$.details)!=null&&S.family?(s(),U(l,{key:0,size:"small",color:"blue"},{default:u(()=>[O(f($.details.family),1)]),_:2},1024)):B("",!0)])):B("",!0),x.key==="size"?(s(),y("span",sa,f(C($.size)),1)):B("",!0),x.key==="modified"?(s(),y("span",aa,f(V($.modified_at)),1)):B("",!0),x.key==="actions"?(s(),U(r,{key:3,title:"Are you sure you want to delete this model?",description:`This will permanently remove ${$.name} from your system.`,"ok-text":"Delete","cancel-text":"Cancel",onConfirm:R=>_($.name)},{default:u(()=>[d(o,{type:"text",danger:"",size:"small",loading:i.value.has($.name)},{icon:u(()=>[d(k(Qe))]),default:u(()=>[g[5]||(g[5]=O(" Remove "))]),_:2,__:[5]},1032,["loading"])]),_:2},1032,["description","onConfirm"])):B("",!0)]}),_:1},8,["data-source","loading"]),!a.value&&t.value.length===0?(s(),U(M,{key:0,description:"No Ollama models installed",class:"empty-state"},{image:u(()=>g[6]||(g[6]=[e("div",{class:"empty-icon"},"ðŸ“¦",-1)])),_:1})):B("",!0)]),p.value?(s(),U(P,{key:0,type:"error",message:p.value,closable:"",onClose:g[1]||(g[1]=x=>p.value=""),class:"error-alert"},null,8,["message"])):B("",!0),d(Xs,{modelValue:z.value,"onUpdate:modelValue":g[2]||(g[2]=x=>z.value=x),onModelsUpdated:n},null,8,["modelValue"])])}}}),oa=de(la,[["__scopeId","data-v-9a88ecb1"]]),na={class:"model-list"},ia={class:"model-header"},ra={class:"model-table"},ua=["onClick"],da={class:"model-name"},ca={class:"model-source"},pa={class:"model-context"},ma={key:0},va={key:1,class:"text-secondary"},fa={key:0,class:"model-cost-in"},ga={key:0,class:"cost-value"},ya={key:1,class:"text-secondary"},_a={key:1,class:"model-cost-out"},ba={key:0,class:"cost-value"},ha={key:1,class:"text-secondary"},ka={class:"model-enviro-carbon"},wa={class:"enviro-value"},$a={class:"model-enviro-water"},Ma={class:"enviro-value"},za={class:"model-enviro-energy"},Ca={class:"enviro-value"},Oa=ue({__name:"ModelListV3",props:{models:{},providerId:{}},emits:["toggle-model"],setup(w){const t=w,a=qe(),i=E("name"),p=E("asc"),z=I(()=>!t.models||t.models.length===0?[]:[...t.models].sort((C,V)=>{var g,o,l,r,c,M;let m=0;switch(i.value){case"enabled":m=(C.enabled?1:0)-(V.enabled?1:0);break;case"name":m=C.displayName.localeCompare(V.displayName);break;case"source":m=(C.source||"").localeCompare(V.source||"");break;case"context":const P=((g=C.capabilities)==null?void 0:g.contextWindow)||0,x=((o=V.capabilities)==null?void 0:o.contextWindow)||0;m=P-x;break;case"inputCost":const $=((l=C.capabilities)==null?void 0:l.inputCostPerToken)||0,S=((r=V.capabilities)==null?void 0:r.inputCostPerToken)||0;m=$-S;break;case"outputCost":const R=((c=C.capabilities)==null?void 0:c.outputCostPerToken)||0,W=((M=V.capabilities)==null?void 0:M.outputCostPerToken)||0;m=R-W;break}return p.value==="asc"?m:-m}));function D(_){i.value===_?p.value=p.value==="asc"?"desc":"asc":(i.value=_,p.value="asc")}function F(_){return _>=1e6?(_/1e6).toFixed(1)+"M":_>=1e3?(_/1e3).toFixed(0)+"K":_.toString()}function b(_){if(!_||_===0)return"0.00";const n=_*1e6;return n<.01?n.toFixed(4):n<1?n.toFixed(3):n<10?n.toFixed(2):n<100?n.toFixed(1):n.toFixed(0)}return(_,n)=>{const C=T("a-switch"),V=T("a-tag");return s(),y("div",na,[e("div",ia,[e("div",{class:"header-switch sortable",onClick:n[0]||(n[0]=m=>D("enabled"))},[n[7]||(n[7]=e("span",null,"Enabled",-1)),e("span",{class:ne(["sort-indicator",{active:i.value==="enabled"}])},f(i.value==="enabled"&&p.value==="asc"?"â–²":"â–¼"),3)]),e("div",{class:"header-name sortable",onClick:n[1]||(n[1]=m=>D("name"))},[n[8]||(n[8]=e("span",null,"Model",-1)),e("span",{class:ne(["sort-indicator",{active:i.value==="name"}])},f(i.value==="name"&&p.value==="asc"?"â–²":"â–¼"),3)]),e("div",{class:"header-source sortable",onClick:n[2]||(n[2]=m=>D("source"))},[n[9]||(n[9]=e("span",null,"Source",-1)),e("span",{class:ne(["sort-indicator",{active:i.value==="source"}])},f(i.value==="source"&&p.value==="asc"?"â–²":"â–¼"),3)]),e("div",{class:"header-context sortable",onClick:n[3]||(n[3]=m=>D("context"))},[n[10]||(n[10]=e("span",null,"Context",-1)),e("span",{class:ne(["sort-indicator",{active:i.value==="context"}])},f(i.value==="context"&&p.value==="asc"?"â–²":"â–¼"),3)]),k(a).showFinancialCosts.value?(s(),y("div",{key:0,class:"header-cost-in sortable",onClick:n[4]||(n[4]=m=>D("inputCost"))},[n[11]||(n[11]=e("span",null,"Input $/1M",-1)),e("span",{class:ne(["sort-indicator",{active:i.value==="inputCost"}])},f(i.value==="inputCost"&&p.value==="asc"?"â–²":"â–¼"),3)])):B("",!0),k(a).showFinancialCosts.value?(s(),y("div",{key:1,class:"header-cost-out sortable",onClick:n[5]||(n[5]=m=>D("outputCost"))},[n[12]||(n[12]=e("span",null,"Output $/1M",-1)),e("span",{class:ne(["sort-indicator",{active:i.value==="outputCost"}])},f(i.value==="outputCost"&&p.value==="asc"?"â–²":"â–¼"),3)])):B("",!0),n[13]||(n[13]=e("div",{class:"header-enviro-carbon"},[e("span",null,"COâ‚‚")],-1)),n[14]||(n[14]=e("div",{class:"header-enviro-water"},[e("span",null,"ðŸ’§")],-1)),n[15]||(n[15]=e("div",{class:"header-enviro-energy"},[e("span",null,"âš¡")],-1))]),e("div",ra,[(s(!0),y(H,null,le(z.value,m=>{var g,o,l;return s(),y("div",{key:m.id,class:"model-row",onClick:r=>_.$emit("toggle-model",m.id,!m.enabled)},[e("div",{class:"model-switch",onClick:n[6]||(n[6]=ve(()=>{},["stop"]))},[d(C,{checked:m.enabled,size:"small",onChange:r=>_.$emit("toggle-model",m.id,r),"data-testid":"model-toggle","data-provider":m.provider,"data-model":m.modelId,"aria-label":`${m.enabled?"Disable":"Enable"} model ${m.modelId}`},null,8,["checked","onChange","data-provider","data-model","aria-label"])]),e("div",da,[e("code",null,f(m.modelId),1)]),e("div",ca,[m.source?(s(),U(V,{key:0,size:"small",color:"cyan"},{default:u(()=>[O(f(m.source),1)]),_:2},1024)):B("",!0)]),e("div",pa,[(g=m.capabilities)!=null&&g.contextWindow?(s(),y("span",ma,f(F(m.capabilities.contextWindow)),1)):(s(),y("span",va,"-"))]),k(a).showFinancialCosts.value?(s(),y("div",fa,[(o=m.capabilities)!=null&&o.inputCostPerToken?(s(),y("span",ga," $"+f(b(m.capabilities.inputCostPerToken)),1)):(s(),y("span",ya,"-"))])):B("",!0),k(a).showFinancialCosts.value?(s(),y("div",_a,[(l=m.capabilities)!=null&&l.outputCostPerToken?(s(),y("span",ba," $"+f(b(m.capabilities.outputCostPerToken)),1)):(s(),y("span",ha,"-"))])):B("",!0),e("div",ka,[e("span",wa,f(k(a).getEnvironmentalCost(m,"carbon")),1)]),e("div",$a,[e("span",Ma,f(k(a).getEnvironmentalCost(m,"water")),1)]),e("div",za,[e("span",Ca,f(k(a).getEnvironmentalCost(m,"energy")),1)])],8,ua)}),128))])])}}}),Sa=de(Oa,[["__scopeId","data-v-f51d3c44"]]),Ta={class:"model-preference-manager"},Pa={class:"preferences-section"},xa={class:"action-group"},Ba={class:"action-group"},Ea={class:"status-grid"},Da={class:"status-item"},La={class:"status-value"},Aa={class:"status-item"},Fa={class:"status-value"},Ga={class:"status-item"},Va={class:"status-value"},Ua={class:"status-item"},Ia={class:"status-value"},ja={class:"status-item"},Ra={class:"status-value"},Na={class:"status-item"},Ha={class:"status-value"},Qa={class:"action-group"},qa={class:"provider-grid"},Ka={class:"provider-name"},Wa={class:"provider-stats"},Ja={class:"provider-total"},Xa={class:"provider-enabled"},Ya=ue({__name:"ModelPreferenceManagerV3",setup(w){const{models:t,enabledModels:a,modelsByProvider:i,showFinancialCosts:p,showEnvironmentalCosts:z}=We(),{discoveryStatus:D}=Ye(),F=qe(),b=E([]),_=E(!1),n=E(!1),C=E(""),V=E("");async function m(){_.value=!0,C.value="";try{const o=await F.exportModelPreferences();if(o.ok){const l=new Blob([JSON.stringify(o.value,null,2)],{type:"application/json"}),r=URL.createObjectURL(l),c=document.createElement("a");c.href=r,c.download=`model-preferences-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(r),V.value="Model preferences exported successfully!"}else C.value=o.error.message}catch(o){C.value=`Failed to export preferences: ${o instanceof Error?o.message:"Unknown error"}`}finally{_.value=!1}}async function g(o){n.value=!0,C.value="";try{const l=await o.text(),r=JSON.parse(l),c=await F.importModelPreferences(r);c.ok?V.value="Model preferences imported successfully!":C.value=c.error.message}catch(l){l instanceof SyntaxError?C.value="Invalid JSON file format":C.value=`Failed to import preferences: ${l instanceof Error?l.message:"Unknown error"}`}finally{n.value=!1}return!1}return(o,l)=>{const r=T("a-button"),c=T("a-upload"),M=T("a-space"),P=T("a-divider"),x=T("a-alert"),$=T("a-collapse-panel"),S=T("a-collapse");return s(),y("div",Ta,[d(S,{activeKey:b.value,"onUpdate:activeKey":l[2]||(l[2]=R=>b.value=R),bordered:!1,class:"preferences-collapse"},{default:u(()=>[d($,{key:"preferences"},{header:u(()=>l[3]||(l[3]=[e("div",{class:"preferences-header"},[e("strong",null,"ðŸ”§ V3 Enhanced Features"),e("span",{class:"preferences-description"},"Advanced model preference management")],-1)])),default:u(()=>{var R,W,j;return[e("div",Pa,[e("div",xa,[l[6]||(l[6]=e("h5",{class:"action-title"},"Model Preferences",-1)),l[7]||(l[7]=e("p",{class:"action-description"}," Export and import your model enabled/disabled preferences for backup or sharing. ",-1)),d(M,null,{default:u(()=>[d(r,{onClick:m,loading:_.value,type:"primary"},{icon:u(()=>[d(k(Ne))]),default:u(()=>[l[4]||(l[4]=O(" Export Preferences "))]),_:1,__:[4]},8,["loading"]),d(c,{"before-upload":g,"show-upload-list":!1,accept:".json"},{default:u(()=>[d(r,{loading:n.value},{icon:u(()=>[d(k(Te))]),default:u(()=>[l[5]||(l[5]=O(" Import Preferences "))]),_:1,__:[5]},8,["loading"])]),_:1})]),_:1})]),d(P),e("div",Ba,[l[14]||(l[14]=e("h5",{class:"action-title"},"V3 System Information",-1)),l[15]||(l[15]=e("p",{class:"action-description"}," Enhanced V3 backend capabilities and status. ",-1)),e("div",Ea,[e("div",Da,[l[8]||(l[8]=e("span",{class:"status-label"},"Total Models:",-1)),e("span",La,f(((R=k(t))==null?void 0:R.length)||0),1)]),e("div",Aa,[l[9]||(l[9]=e("span",{class:"status-label"},"Enabled Models:",-1)),e("span",Fa,f(((W=k(a))==null?void 0:W.length)||0),1)]),e("div",Ga,[l[10]||(l[10]=e("span",{class:"status-label"},"Active Providers:",-1)),e("span",Va,f(Object.keys(k(i)||{}).length),1)]),e("div",Ua,[l[11]||(l[11]=e("span",{class:"status-label"},"Discovery Sources:",-1)),e("span",Ia,f(((j=k(D))==null?void 0:j.length)||0),1)]),e("div",ja,[l[12]||(l[12]=e("span",{class:"status-label"},"Cost Display:",-1)),e("span",Ra,f(k(p)?"Enabled":"Disabled"),1)]),e("div",Na,[l[13]||(l[13]=e("span",{class:"status-label"},"Environmental Display:",-1)),e("span",Ha,f(k(z)?"Enabled":"Disabled"),1)])])]),d(P),e("div",Qa,[l[16]||(l[16]=e("h5",{class:"action-title"},"Provider Status",-1)),l[17]||(l[17]=e("p",{class:"action-description"}," Real-time provider status and model counts. ",-1)),e("div",qa,[(s(!0),y(H,null,le(k(i),(J,ce)=>(s(),y("div",{key:ce,class:"provider-item"},[e("div",Ka,f(k(F).getProviderDisplayName(ce)),1),e("div",Wa,[e("span",Ja,f(J.length)+" total",1),e("span",Xa,f(J.filter(pe=>pe.enabled).length)+" enabled",1)])]))),128))])])]),C.value?(s(),U(x,{key:0,type:"error",message:C.value,closable:"",onClose:l[0]||(l[0]=J=>C.value=""),class:"error-alert"},null,8,["message"])):B("",!0),V.value?(s(),U(x,{key:1,type:"success",message:V.value,closable:"",onClose:l[1]||(l[1]=J=>V.value=""),class:"success-alert"},null,8,["message"])):B("",!0)]}),_:1})]),_:1},8,["activeKey"])])}}}),Za=de(Ya,[["__scopeId","data-v-65aaac20"]]),el={key:0,class:"loading-state"},tl={key:1,class:"error-state"},sl={class:"error-message"},al=["onClick"],ll={class:"list-header"},ol={class:"list-info"},nl={class:"list-name"},il={class:"list-meta"},rl={class:"list-actions"},ul={class:"list-description"},dl={class:"list-preview"},cl={key:0,class:"more-models"},pl=ue({__name:"ModelListsDropdownV3",props:{currentModels:{},isLoading:{type:Boolean,default:!1}},emits:["apply-list","close"],setup(w,{emit:t}){const a=w,i=t,{getProviderGroup:p}=Je(),z=E([]),D=E(!0),F=E(""),b=E(!1),_=E("");Oe(async()=>{try{D.value=!0,F.value="";const{getModelListManager:o}=await Ke(async()=>{const{getModelListManager:c}=await import("./index-BHXEDjmJ.js").then(M=>M.a_);return{getModelListManager:c}},__vite__mapDeps([0,1])),r=await o().getLists();z.value=r.filter(c=>["openrouter-favorites","cost-efficient","high-performance"].includes(c.id)),te.debug("Model lists loaded:",{lists:z.value.length})}catch(o){console.error("Failed to load model lists:",o),F.value="Failed to load model lists"}finally{D.value=!1}});function n(o){return a.currentModels.some(l=>l.modelId!==o.modelId?!1:o.provider?l.provider===o.provider&&l.enabled:o.providerGroup?p(l.provider)===o.providerGroup&&l.enabled:!1)}function C(o){return o.models.slice(0,3)}function V(o){return o.modelId.replace(/^.*\//,"").replace(/-instruct$/,"").replace(/-preview$/,"")}async function m(o){if(!(b.value||a.isLoading))try{b.value=!0,_.value=o,await new Promise((l,r)=>{i("apply-list",o),setTimeout(()=>{l()},2e3)})}catch(l){console.error("Failed to apply list:",l)}finally{b.value=!1,_.value=""}}function g(o){var l;(l=o.domEvent)==null||l.stopPropagation()}return(o,l)=>{const r=T("a-spin"),c=T("a-button"),M=T("a-menu-item"),P=T("a-menu-divider"),x=T("a-tag"),$=T("a-menu");return s(),U($,{class:"model-lists-menu",onClick:g},{default:u(()=>[D.value?(s(),y("div",el,[d(r,{size:"small"}),l[0]||(l[0]=e("span",null,"Loading model lists...",-1))])):F.value?(s(),y("div",tl,[e("span",sl,f(F.value),1)])):(s(),y(H,{key:2},[l[6]||(l[6]=e("div",{class:"menu-header"},[e("span",null,"Built-in Lists")],-1)),(s(!0),y(H,null,le(z.value,S=>(s(),U(M,{key:S.id,class:"list-menu-item"},{default:u(()=>[e("div",{class:"list-item",onClick:R=>m(S.id)},[e("div",ll,[e("div",ol,[e("span",nl,f(S.name),1),e("span",il,f(S.models.length)+" models",1)]),e("div",rl,[d(c,{type:"primary",size:"small",loading:b.value&&_.value===S.id,onClick:ve(R=>m(S.id),["stop"])},{default:u(()=>l[1]||(l[1]=[O(" Apply ")])),_:2,__:[1]},1032,["loading","onClick"])])]),e("div",ul,f(S.description),1),e("div",dl,[(s(!0),y(H,null,le(C(S),(R,W)=>(s(),y("span",{key:`${R.provider||R.providerGroup}-${R.modelId}`,class:ne(["preview-model",{enabled:n(R)}])},f(V(R))+f(W<C(S).length-1?", ":""),3))),128)),S.models.length>3?(s(),y("span",cl," +"+f(S.models.length-3)+" more ",1)):B("",!0)])],8,al)]),_:2},1024))),128)),d(P),d(M,{disabled:"",class:"future-feature"},{default:u(()=>[d(k(Dt)),l[3]||(l[3]=e("span",null,"Save Current Selection...",-1)),d(x,{color:"blue",size:"small"},{default:u(()=>l[2]||(l[2]=[O("Soon")])),_:1,__:[2]})]),_:1,__:[3]}),d(M,{disabled:"",class:"future-feature"},{default:u(()=>[d(k($t)),l[5]||(l[5]=e("span",null,"Manage Lists...",-1)),d(x,{color:"blue",size:"small"},{default:u(()=>l[4]||(l[4]=[O("Soon")])),_:1,__:[4]})]),_:1,__:[5]})],64))]),_:1})}}}),ml=de(pl,[["__scopeId","data-v-e613a393"]]),vl={class:"models-view","data-testid":"page-models"},fl={class:"page-header"},gl={key:2,class:"discovery-status-bar"},yl={class:"source-name"},_l=["onClick","data-testid","aria-label"],bl={class:"search-filter-bar"},hl={class:"control-bar"},kl={class:"left-controls"},wl={class:"stats"},$l={class:"provider-header"},Ml={class:"provider-info"},zl={key:1,class:"provider-summary"},Cl=ue({__name:"ModelsViewV3",setup(w){const t=Bt(),{models:a,modelsByProvider:i,stats:p}=We(),{getProviderGroup:z,requiresApiKey:D}=Je(),{hasApiKey:F}=Mt(),{discoverModels:b,refreshDiscoverySource:_,toggleModel:n,toggleAllModels:C,toggleProviderModels:V,clearAllModels:m,isDiscovering:g,isTogglingModels:o}=jt(),{discoveryStatus:l,getSourceDisplayName:r,getProviderDisplayName:c,refreshStatus:M}=Ye(),P=E(""),x=E(""),$=E("all"),S=E(!1),R=I(()=>{const h={};return Object.keys(i.value||{}).forEach(v=>{const G=z(v),X=D(v),se=F(G);h[v]={hasKey:se,providerGroup:G,requiresKey:X}}),h}),W=E(!1),j=E(""),J=E([]),ce=E(null),pe=E([]),ge=E(!1),ie=E(!1);let A=null;const L=h=>{A&&clearTimeout(A),A=setTimeout(()=>{x.value=h},300)},q=I(()=>{const h={};for(const[v,G]of Object.entries(i.value))h[v]=G.filter(X=>X.enabled).length;return h}),Z=E([]),oe=I(()=>{const h=x.value.toLowerCase(),v={},G=Object.keys(i.value);if(Z.value.length===0||G.some(X=>!Z.value.includes(X))){const X=Z.value.filter(Y=>G.includes(Y)),se=G.filter(Y=>!Z.value.includes(Y)).sort();Z.value=[...X,...se]}for(const X of Z.value){const se=i.value[X];if(!se)continue;let Y=[...se];h&&(Y=Y.filter(me=>me.displayName.toLowerCase().includes(h)||me.modelId.toLowerCase().includes(h)||X.toLowerCase().includes(h))),$.value==="enabled"?Y=Y.filter(me=>me.enabled):$.value==="disabled"&&(Y=Y.filter(me=>!me.enabled)),Y.length>0&&(v[X]=Y)}return v}),ye=I(()=>{const h=p.value.total;return te.debug("ModelsViewV3 V4 totalCount:",h),h}),_e=I(()=>p.value.enabled),K=I(()=>P.value?`No models found matching "${P.value}"`:$.value!=="all"?`No ${$.value} models found`:'No models available. Click "Refresh Models" to discover models.'),fe=I(()=>{if(!j.value)return!1;const h=j.value.toLowerCase();return h.includes("ollama")&&(h.includes("failed to fetch")||h.includes("networkerror when attempting to fetch"))&&!h.includes("litellm")&&!h.includes("openrouter")}),Ze=I(()=>{var G,X;const h=((G=i.value["ollama-chat"])==null?void 0:G.length)>0||((X=i.value["ollama-generate"])==null?void 0:X.length)>0,v=l.value.some(se=>se.id==="ollama");return h||v||fe.value});I(()=>!!i.value.openrouter);const we=I(()=>{const h=Z.value.length;return J.value.length===h&&h>0}),et=Fe(zt),tt=Fe(Ct);function st(h){return{idle:"default",loading:"processing",success:"success",error:"error"}[h]||"default"}function at(h){return q.value[h]||0}function lt(h){const v=at(h),G=(i.value[h]||[]).length;return v===0?"default":v===G?"success":"warning"}function ot(h){const v=oe.value[h]||[];return v.length>0&&v.every(G=>G.enabled)}function nt(h){const v=oe.value[h]||[];return v.length>0&&v.every(G=>!G.enabled)}function it(h){t.push({path:"/settings",query:h?{provider:h}:void 0})}function rt(){we.value?J.value=[]:J.value=[...Z.value]}async function ut(h,v){const G=await n(h,v);G.ok||(j.value=G.error.message)}async function Pe(h,v){const G=await V(h,v);G.ok||(j.value=G.error.message)}async function dt(){const h=await C(!0);h.ok||(j.value=h.error.message)}async function ct(){const h=await C(!1);h.ok||(j.value=h.error.message)}async function $e(){S.value=!0,j.value="";try{te.debug("V4 DEBUG: Starting discovery...");const h=await b({forceRefresh:!0});te.debug("V4 DEBUG: Discovery result:",h),h.ok?(te.debug("V4 DEBUG: Discovery successful, models found:",h.value.totalModels),te.debug("V4 DEBUG: After discovery, models.value.length =",a.value.length),h.value.errors.length>0&&(j.value=`Some sources failed: ${h.value.errors.join("; ")}`)):(te.debug("V4 DEBUG: Discovery failed:",h.error),j.value=`Discovery failed: ${h.error.message}`),M()}catch(h){console.error("Failed to refresh models",h),j.value="Failed to refresh models. Please check your connection and try again."}finally{S.value=!1}}async function pt(h){ce.value=h,j.value="";try{const v=await _(h);v.ok&&v.value.errors.length>0?j.value=`Failed to refresh ${r(h)}: ${v.value.errors.join("; ")}`:v.ok||(j.value=`Failed to refresh ${r(h)}: ${v.error.message}`),M()}catch(v){console.error("Failed to retry source",v,{sourceId:h}),j.value=`Failed to refresh ${r(h)}: ${v instanceof Error?v.message:"Unknown error"}`}finally{ce.value=null}}async function mt(){try{await _("ollama"),M()}catch(h){console.error("Failed to refresh Ollama models after update",h)}}async function vt(){if(confirm("This will remove all models and re-discover them from scratch. Any custom model configurations will be lost. Continue?")){W.value=!0,j.value="";try{const v=await m();if(!v.ok){j.value=v.error.message;return}const G=await b({forceRefresh:!0});G.ok&&G.value.errors.length>0?j.value=`Some sources failed: ${G.value.errors.join("; ")}`:G.ok||(j.value=`Discovery failed: ${G.error.message}`),M()}catch(v){console.error("Failed to clear and refresh models",v),j.value="Failed to clear and refresh models. Please check your connection and try again."}finally{W.value=!1}}}async function ft(h){try{te.debug("Applying model list:",h);const{getModelListManager:v}=await Ke(async()=>{const{getModelListManager:se}=await import("./index-BHXEDjmJ.js").then(Y=>Y.a_);return{getModelListManager:se}},__vite__mapDeps([0,1])),X=await v().applyList(h);te.debug("Model list applied:",X),await $e()}catch(v){console.error("Failed to apply model list:",v),j.value=`Failed to apply model list: ${v instanceof Error?v.message:"Unknown error"}`}}Ot(()=>{L(P.value)});const ae=I(()=>o.value);return Oe(async()=>{te.debug("V4 DEBUG: models.value.length =",a.value.length),te.debug("V4 DEBUG: models.value =",a.value),te.debug("V4 DEBUG: modelsByProvider.value =",i.value),a.value.length===0&&(te.debug("V4 DEBUG: No models found, refreshing..."),$e()),J.value=[]}),St(()=>{P.value="",J.value=[],j.value=""}),(h,v)=>{const G=T("a-button"),X=T("a-space"),se=T("a-alert"),Y=T("a-tag"),me=T("a-input-search"),Me=T("a-radio-button"),gt=T("a-radio-group"),yt=T("a-divider"),_t=T("a-dropdown"),bt=T("a-tooltip"),xe=T("a-collapse-panel"),Be=T("a-collapse"),ht=T("a-empty");return s(),y("div",vl,[e("div",fl,[v[10]||(v[10]=e("div",{class:"header-content"},[e("h1",null,"Model Management"),e("p",{class:"description"},"Configure and enable LLM models for testing")],-1)),d(X,null,{default:u(()=>[d(G,{type:"primary",onClick:$e,loading:S.value||k(g),"data-testid":"btn-refresh-models","aria-label":"Refresh available models"},{icon:u(()=>[d(k(He))]),default:u(()=>[v[8]||(v[8]=O(" Refresh Models "))]),_:1,__:[8]},8,["loading"]),d(G,{danger:"",onClick:vt,loading:W.value,"data-testid":"btn-clear-refresh-models","aria-label":"Clear all models and refresh"},{icon:u(()=>[d(k(Qe))]),default:u(()=>[v[9]||(v[9]=O(" Clear and Refresh Models "))]),_:1,__:[9]},8,["loading"])]),_:1})]),j.value&&!fe.value?(s(),U(se,{key:0,type:"error",message:j.value,closable:"",onClose:v[0]||(v[0]=N=>j.value=""),class:"error-alert"},null,8,["message"])):B("",!0),fe.value?(s(),U(se,{key:1,type:"info",closable:"",onClose:v[1]||(v[1]=N=>j.value=""),class:"ollama-info-alert"},{message:u(()=>v[11]||(v[11]=[e("div",{class:"ollama-message"},[O(" Ollama is not running on this computer. To audit local LLMs, install "),e("a",{href:"https://ollama.com",target:"_blank",rel:"noopener noreferrer"},"Ollama"),O(". ")],-1)])),_:1})):B("",!0),k(l).length>0?(s(),y("div",gl,[v[12]||(v[12]=e("span",{class:"status-label"},"Sources:",-1)),(s(!0),y(H,null,le(k(l),N=>(s(),y("div",{key:N.id,class:"source-status-compact"},[e("span",yl,f(k(r)(N.id)),1),d(Y,{color:st(N.status),size:"small"},{default:u(()=>[N.status==="success"&&N.modelCount?(s(),y(H,{key:0},[O(f(N.modelCount),1)],64)):N.status==="error"?(s(),y("span",{key:1,onClick:ee=>pt(N.id),style:{cursor:"pointer"},"data-testid":`retry-source-${N.id}`,"aria-label":`Retry loading models from ${k(r)(N.id)}`},"âŸ³ retry",8,_l)):(s(),y(H,{key:2},[O(f(N.status),1)],64))]),_:2},1032,["color"])]))),128))])):B("",!0),e("div",bl,[d(me,{value:P.value,"onUpdate:value":v[2]||(v[2]=N=>P.value=N),placeholder:"Search models by name, provider, or ID...","allow-clear":"",size:"large",class:"search-input","data-testid":"input-model-search","aria-label":"Search models",loading:P.value!==x.value},null,8,["value","loading"]),d(gt,{value:$.value,"onUpdate:value":v[3]||(v[3]=N=>$.value=N),"button-style":"solid",size:"large"},{default:u(()=>[d(Me,{value:"all"},{default:u(()=>v[13]||(v[13]=[O("All")])),_:1,__:[13]}),d(Me,{value:"enabled"},{default:u(()=>v[14]||(v[14]=[O("Enabled")])),_:1,__:[14]}),d(Me,{value:"disabled"},{default:u(()=>v[15]||(v[15]=[O("Disabled")])),_:1,__:[15]})]),_:1},8,["value"])]),e("div",hl,[e("div",kl,[d(G,{type:"text",size:"small",onClick:rt},{icon:u(()=>[(s(),U(Tt(we.value?tt.value:et.value)))]),default:u(()=>[O(" "+f(we.value?"Collapse All":"Expand All"),1)]),_:1}),d(yt,{type:"vertical"}),d(G,{type:"text",size:"small",onClick:dt,loading:ae.value,disabled:ae.value},{icon:u(()=>[d(k(re))]),default:u(()=>[v[16]||(v[16]=O(" Enable All "))]),_:1,__:[16]},8,["loading","disabled"]),d(G,{type:"text",size:"small",onClick:ct,loading:ae.value,disabled:ae.value},{icon:u(()=>[d(k(Ge))]),default:u(()=>[v[17]||(v[17]=O(" Disable All "))]),_:1,__:[17]},8,["loading","disabled"]),d(_t,{open:ie.value,"onUpdate:open":v[5]||(v[5]=N=>ie.value=N),placement:"bottomLeft",disabled:ae.value},{overlay:u(()=>[d(ml,{"current-models":Array.from(k(a)),"is-loading":ae.value,onApplyList:ft,onClose:v[4]||(v[4]=N=>ie.value=!1)},null,8,["current-models","is-loading"])]),default:u(()=>[d(G,{type:"text",size:"small",loading:ae.value,disabled:ae.value},{icon:u(()=>[d(k(Xe))]),default:u(()=>[v[18]||(v[18]=O(" Model Lists ")),d(k(Ce))]),_:1,__:[18]},8,["loading","disabled"])]),_:1},8,["open","disabled"])]),e("div",wl,[e("span",null,f(_e.value)+" of "+f(ye.value)+" models enabled",1)])]),d(Be,{activeKey:J.value,"onUpdate:activeKey":v[6]||(v[6]=N=>J.value=N),bordered:!1,class:"provider-collapse",destroyInactivePanel:!1},{default:u(()=>[(s(!0),y(H,null,le(oe.value,(N,ee)=>(s(),U(xe,{key:`provider-${ee}`},{header:u(()=>{var Ee,De;return[e("div",$l,[e("div",Ml,[e("strong",null,f(k(c)(ee)),1),(Ee=R.value[ee])!=null&&Ee.requiresKey&&!((De=R.value[ee])!=null&&De.hasKey)?(s(),U(bt,{key:0,placement:"top"},{title:u(()=>{var be;return[O(" API key not set for "+f((be=R.value[ee])==null?void 0:be.providerGroup)+". Click to add in settings. ",1)]}),default:u(()=>[d(G,{type:"link",danger:"",size:"small",onClick:ve(be=>{var Le;return it((Le=R.value[ee])==null?void 0:Le.providerGroup)},["stop"])},{icon:u(()=>[d(k(xt))]),default:u(()=>[v[19]||(v[19]=O(" API Key Missing "))]),_:2,__:[19]},1032,["onClick"])]),_:2},1024)):B("",!0),J.value.includes(ee)?(s(),y(H,{key:2},[d(Y,{size:"small",color:"blue"},{default:u(()=>[O(f(N.length)+" models",1)]),_:2},1024),d(Y,{size:"small",color:lt(ee)},{default:u(()=>[O(f(q.value[ee]||0)+" enabled ",1)]),_:2},1032,["color"])],64)):(s(),y("span",zl,f(q.value[ee]||0)+" / "+f((k(i)[ee]||[]).length)+" enabled ",1))]),d(X,{size:"small"},{default:u(()=>[d(G,{type:"text",size:"small",onClick:ve(be=>Pe(ee,!0),["stop"]),disabled:ot(ee)||ae.value,loading:ae.value},{icon:u(()=>[d(k(re))]),default:u(()=>[v[20]||(v[20]=O(" Enable All "))]),_:2,__:[20]},1032,["onClick","disabled","loading"]),d(G,{type:"text",size:"small",onClick:ve(be=>Pe(ee,!1),["stop"]),disabled:nt(ee)||ae.value,loading:ae.value},{icon:u(()=>[d(k(Ge))]),default:u(()=>[v[21]||(v[21]=O(" Disable All "))]),_:2,__:[21]},1032,["onClick","disabled","loading"])]),_:2},1024)])]}),default:u(()=>[(s(),U(Pt,null,[d(Sa,{models:N,"provider-id":ee,onToggleModel:ut},null,8,["models","provider-id"])],1024))]),_:2},1024))),128))]),_:1},8,["activeKey"]),Object.keys(oe.value).length===0?(s(),U(ht,{key:3,description:K.value,class:"empty-state"},null,8,["description"])):B("",!0),Ze.value?(s(),U(Be,{key:4,activeKey:pe.value,"onUpdate:activeKey":v[7]||(v[7]=N=>pe.value=N),bordered:!1,class:"ollama-manager-collapse"},{default:u(()=>[d(xe,{key:"ollama"},{header:u(()=>v[22]||(v[22]=[e("div",{class:"ollama-header"},[e("strong",null,"Ollama Model Management"),e("span",{class:"ollama-description"},"Download and manage local Ollama models")],-1)])),default:u(()=>[d(oa,{onModelsUpdated:mt})]),_:1})]),_:1},8,["activeKey"])):B("",!0),ge.value?(s(),U(Za,{key:5,class:"enhanced-features"})):B("",!0)])}}}),Dl=de(Cl,[["__scopeId","data-v-1b14e4a9"]]);export{Dl as default};
