import{d as e,f as a,c as l,o as s,Z as t,W as o,Y as i,k as n,U as d,X as u,G as r,F as p,a6 as c,S as v,a5 as m,a9 as f,q as k,_ as b,u as C,A as g,B as y,n as h}from"./vendor-BiapkIQZ.js";import{a as P}from"./designs-db-BnxPWGVY.js";import{f as T,a as _}from"./cost-formatting-D-OPWEvg.js";import{u as x}from"./settings-db-B3gFDSc-.js";import{c as w,E as M,e as I,_ as O}from"./index-JPKDQHeA.js";const A={class:"model-selection-panel full-width"},S={class:"model-filters spacing-bottom-sm"},N={key:0,class:"provider-tree"},$=["onClick"],F={class:"provider-name"},L={key:0,class:"api-key-warning"},j={class:"model-count"},W={key:1,class:"provider-avg-cost"},z={class:"models-container"},E={class:"model-grid"},U=["onClick"],D={class:"model-name"},G={class:"model-costs"},K={key:0,class:"trial-cost"},B={class:"cost-breakdown"},R={key:0,class:"input-cost"},Y={key:1,class:"output-cost"},q={key:1,class:"loading-state"},X={key:0,class:"model-details"},Z=O(e({__name:"ModelSelectionTable",props:{models:{},selectedModel:{default:null},isLoading:{type:Boolean,default:!1},totalCalls:{default:0},design:{default:null},modelParams:{default:()=>({})}},emits:["model-selected","model-configured"],setup(e,{emit:O}){const Z=e,H=O,J=a(""),Q=a(""),V=a(!1),ee=a(null),ae=a([]),le=x(),se=l(()=>{const e=new Set(Z.models.map(e=>e.provider));return Array.from(e).sort()});s(()=>{});const te=l(()=>{let e=Z.models;if(J.value){const a=J.value.toLowerCase();e=e.filter(e=>e.displayName.toLowerCase().includes(a)||e.modelId.toLowerCase().includes(a)||e.provider.toLowerCase().includes(a))}return Q.value&&(e=e.filter(e=>e.provider===Q.value)),e}),oe=l(()=>{const e=new Map;return te.value.forEach(a=>{e.has(a.provider)||e.set(a.provider,[]),e.get(a.provider).push(a)}),Array.from(e.entries()).map(([e,a])=>{const l=a.sort((e,a)=>e.displayName.localeCompare(a.displayName)),s=l.map(e=>e.capabilities?.inputCostPerToken).filter(e=>null!=e),t=l.map(e=>e.capabilities?.outputCostPerToken).filter(e=>null!=e),o=s.length>0?s.reduce((e,a)=>e+a,0)/s.length*1e6:null,i=t.length>0?t.reduce((e,a)=>e+a,0)/t.length*1e6:null;return{id:e,name:ie(e),models:l,avgInputCost:o,avgOutputCost:i}})});function ie(e){return{anthropic:"Anthropic","openai-chat":"OpenAI Chat","openai-responses":"OpenAI Responses","ollama-chat":"Ollama Chat","ollama-generate":"Ollama Generate",openrouter:"OpenRouter"}[e]||e}function ne(e){return`${e.avgInputCost?.toFixed(2)||"0"}/${e.avgOutputCost?.toFixed(2)||"0"}/$1M`}function de(e){return e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(0)+"K":e.toString()}function ue(e){if(e.startsWith("ollama"))return!0;const a=le.apiKeyGroups||[];for(const l of a)if(l.providers.includes(e)&&l.hasKey)return!0;return!1}function re(e){if(!e.capabilities?.inputCostPerToken||0===Z.totalCalls)return e.displayName,e.capabilities,e.capabilities,Z.totalCalls,0;if(!Z.design?.tokenEstimate?.avgTokens)return e.displayName,0;const a=Z.design.tokenEstimate.avgTokens,l=P.getOutputTokenLimit(e.provider,e.modelId,Z.modelParams||{});e.displayName,Z.totalCalls,e.capabilities.inputCostPerToken,e.capabilities.outputCostPerToken,Z.design,Z.design;const s=_(a,l,Z.totalCalls,e.capabilities.inputCostPerToken||0,e.capabilities.outputCostPerToken||0);return s.toFixed(6),s}return(e,a)=>{const l=d("a-input-search"),s=d("a-select-option"),P=d("a-select"),_=d("a-spin"),x=d("a-descriptions-item"),O=d("a-tag"),Z=d("a-descriptions"),le=d("a-modal");return o(),t("div",A,[i("div",S,[n(l,{value:J.value,"onUpdate:value":a[0]||(a[0]=e=>J.value=e),placeholder:"Search models (e.g., gpt-4, claude, llama)...",class:"search-input",allowClear:"",size:"small",style:{flex:1}},null,8,["value"]),n(P,{value:Q.value,"onUpdate:value":a[1]||(a[1]=e=>Q.value=e),placeholder:"All Providers",allowClear:"",size:"small",class:"model-search-input"},{default:u(()=>[n(s,{value:""},{default:u(()=>a[3]||(a[3]=[r("All Providers")])),_:1,__:[3]}),(o(!0),t(p,null,c(se.value,e=>(o(),v(s,{key:e,value:e},{default:u(()=>[r(m(ie(e)),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),e.isLoading?(o(),t("div",q,[n(_,{size:"large"})])):(o(),t("div",N,[(o(!0),t(p,null,c(oe.value,l=>(o(),t("div",{key:l.id,class:f(["provider-row",{expanded:ae.value.includes(l.id)}])},[i("div",{class:"provider-header",onClick:e=>function(e){const a=ae.value.indexOf(e);a>=0?ae.value.splice(a,1):ae.value.push(e)}(l.id)},[n(C(w),{class:f(["expand-icon",{expanded:ae.value.includes(l.id)}])},null,8,["class"]),i("span",F,m(l.name),1),ue(l.id)?b("",!0):(o(),t("span",L,[n(C(M)),a[4]||(a[4]=r(" API key not set "))])),i("span",j,m(l.models.length)+" models",1),l.avgInputCost?(o(),t("span",W," avg "+m(ne(l)),1)):b("",!0)],8,$),k(i("div",z,[i("div",E,[(o(!0),t(p,null,c(l.models,l=>(o(),t("div",{key:l.id,class:f(["model-card",{selected:e.selectedModel?.id===l.id,disabled:!l.enabled}]),onClick:e=>l.enabled&&function(e){H("model-selected",e),h(()=>{H("model-configured",e,{})})}(l)},[i("div",D,m(l.displayName),1),i("div",G,[e.totalCalls>0&&l.capabilities?.inputCostPerToken?(o(),t("span",K," $"+m(re(l).toFixed(4)),1)):b("",!0),i("span",B,[l.capabilities?.inputCostPerToken?(o(),t("span",R," in: $"+m(C(T)(l.capabilities.inputCostPerToken)),1)):b("",!0),l.capabilities?.outputCostPerToken?(o(),t("span",Y," out: $"+m(C(T)(l.capabilities.outputCostPerToken)),1)):b("",!0),a[5]||(a[5]=i("span",{class:"cost-unit"},"/1M",-1))])]),n(C(I),{onClick:y(e=>function(e){ee.value=e,V.value=!0}(l),["stop"]),class:"info-icon"},null,8,["onClick"])],10,U))),128))])],512),[[g,ae.value.includes(l.id)]])],2))),128))])),n(le,{open:V.value,"onUpdate:open":a[2]||(a[2]=e=>V.value=e),title:`Model Details: ${ee.value?.displayName}`,footer:null,width:"600px"},{default:u(()=>[ee.value?(o(),t("div",X,[n(Z,{column:2,size:"small",bordered:""},{default:u(()=>[n(x,{label:"Provider"},{default:u(()=>[r(m(ie(ee.value.provider)),1)]),_:1}),n(x,{label:"Model ID"},{default:u(()=>[i("code",null,m(ee.value.modelId),1)]),_:1}),n(x,{label:"Status"},{default:u(()=>[n(O,{color:ee.value.enabled?"green":"red"},{default:u(()=>[r(m(ee.value.enabled?"Available":"Disabled"),1)]),_:1},8,["color"])]),_:1}),ee.value.capabilities?.inputCostPerToken?(o(),v(x,{key:0,label:"Input Cost"},{default:u(()=>[r(" $"+m(C(T)(ee.value.capabilities.inputCostPerToken))+"/1M tokens ",1)]),_:1})):b("",!0),ee.value.capabilities?.outputCostPerToken?(o(),v(x,{key:1,label:"Output Cost"},{default:u(()=>[r(" $"+m(C(T)(ee.value.capabilities.outputCostPerToken))+"/1M tokens ",1)]),_:1})):b("",!0),ee.value.capabilities?.contextWindow?(o(),v(x,{key:2,label:"Context Window"},{default:u(()=>[r(m(de(ee.value.capabilities.contextWindow))+" tokens ",1)]),_:1})):b("",!0),ee.value.capabilities?.maxTokens?(o(),v(x,{key:3,label:"Max Output"},{default:u(()=>[r(m(de(ee.value.capabilities.maxTokens))+" tokens ",1)]),_:1})):b("",!0),void 0!==ee.value.capabilities?.supportsStreaming?(o(),v(x,{key:4,label:"Supports Streaming"},{default:u(()=>[r(m(ee.value.capabilities.supportsStreaming?"Yes":"No"),1)]),_:1})):b("",!0)]),_:1})])):b("",!0)]),_:1},8,["open","title"])])}}}),[["__scopeId","data-v-521224f5"]]);export{Z as M};
