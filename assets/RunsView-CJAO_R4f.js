const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./PythonExportService-Cr8DU2nV.js","./index-D607EoCk.js","./vendor-DdqHZeTC.js","./db-ftwlfnxb.js","./index-zWy5gnVS.css"])))=>i.map(i=>d[i]);
var e=Object.defineProperty,t=(t,s,a)=>((t,s,a)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a)(t,"symbol"!=typeof s?s+"":s,a);import{d as s,r as a,i as n,B as l,b as o,e as i,f as r,g as c,F as u,D as d,t as p,m as v,V as m,n as g,w as h,o as b,q as y,I as f,k,u as _,_ as x,$ as C,X as w,p as M}from"./vendor-DdqHZeTC.js";import{D as E,_ as S,a as P,u as D,b as O,c as T}from"./index-D607EoCk.js";import{u as I}from"./variableLists-BVXQuepA.js";import"./db-ftwlfnxb.js";function A(e,t){let s=e;for(const[a,n]of Object.entries(t)){const e=new RegExp(`{{\\s*${a}\\s*}}`,"g"),t=Array.isArray(n)?n.join(", "):String(n);s=s.replace(e,t)}return function(e){const t=e.split(/\s+/);let s=0;for(const n of t)0!==n.length&&(n.length<=4?s+=1:n.length<=8?s+=Math.ceil(n.length/4):s+=Math.ceil(n.length/3.5));const a=e.match(/[.,!?;:'"()\[\]{}<>@#$%^&*+=|\\\/~`-]/g);return a&&(s+=.5*a.length),Math.ceil(s)}(s)}const $=class e{constructor(){t(this,"dbService"),this.dbService=E.getInstance()}static getInstance(){return e.instance||(e.instance=new e),e.instance}async calculateExperimentMetrics(e,t=[]){let s=1,a=0,n=0;const l=e.variables||{};for(const[i,r]of Object.entries(l))Array.isArray(r)&&r.length>0&&(s*=r.length,a++);const o=e.variable_list_refs||{};for(const[i,r]of Object.entries(o)){let e=t.find(e=>e.id===r);if(!e){const t=await this.dbService.read("variable_lists",r);t.success&&t.data&&(e=t.data)}e&&e.values&&e.values.length>0&&(s*=e.values.length,n++)}return{totalCombinations:s,variableCount:a+n,simpleVariables:a,compoundVariables:n,estimatedTasks:s}}async estimateExperimentCost(e,t,s=[],a={}){const n=await this.calculateExperimentMetrics(e,s),l=n.totalCombinations*t.length,{estimatedInputTokens:o=100,estimatedOutputTokens:i=50}=a;let r=0;const c={};for(const u of t){const e="openrouter"===u.provider?u.input_cost||0:(u.input_cost||0)/1e6,t="openrouter"===u.provider?u.output_cost||0:(u.output_cost||0)/1e6;console.log(`DEBUG: Model ${u.id}, provider: ${u.provider}`),console.log(`DEBUG: Raw costs - input: ${u.input_cost}, output: ${u.output_cost}`),console.log(`DEBUG: Per-token costs - input: ${e}, output: ${t}`);const s=e*o*n.totalCombinations,a=t*i*n.totalCombinations,l=s+a;console.log(`DEBUG: Final costs - input: ${s}, output: ${a}, total: ${l}`),c[u.id]=l,r+=l}return{totalCost:r,costPerModel:c,costPerTask:l>0?r/l:0,breakdown:{inputTokens:o*l,outputTokens:i*l,requests:l}}}validateExperimentSize(e,t){const s=e.totalCombinations*t,a=[],n=[];return s>1e3&&a.push(`Large experiment: ${s} tasks may take significant time`),s>1e4&&a.push("Very large experiment: Consider running in batches"),s>5e4&&n.push(`Experiment too large: ${s} tasks exceeds maximum of 50,000`),e.totalCombinations>1e5&&n.push(`Too many variable combinations: ${e.totalCombinations} exceeds maximum of 100,000`),{valid:0===n.length,warnings:a,errors:n}}};t($,"instance");let F=$;const L={class:"basics-step"},R={class:"form-section"},B={class:"form-group"},j=["value"],V={class:"form-group"},U=["value"],N=["value"],q={class:"form-group"},Q={class:"execution-type-options"},H={class:"radio-option"},G=["checked"],W={class:"radio-option"},z=["checked"],J={key:0,class:"design-preview"},K={class:"preview-card"},Z={class:"preview-header"},X={class:"variable-count"},Y={class:"prompt-preview"},ee={class:"prompt-header"},te={key:0,class:"prompt-controls"},se=["disabled"],ae={class:"prompt-counter"},ne=["disabled"],le={class:"prompt-content"},oe={key:0,class:"preview-note"},ie={key:0,class:"variables-preview"},re={class:"variables-list"},ce={class:"variable-name"},ue={class:"current-value"},de={class:"variable-count"},pe={class:"variable-name"},ve={class:"current-value"},me={class:"variable-count"},ge={class:"combinations-info"},he={class:"info-value"},be={key:1,class:"empty-state"},ye=100,fe=S(s({__name:"RunBasicsStep",props:{name:{},designId:{},designs:{},selectedDesign:{},executionType:{}},emits:["update:name","update:design-id","update:execution-type"],setup(e,{emit:t}){const s=e,v=t,m=I(),g=a(0),h=n(()=>{if(!s.selectedDesign)return 0;return Object.keys(s.selectedDesign.variables||{}).length+Object.keys(s.selectedDesign.variable_list_refs||{}).length}),b=a(0);l(()=>[s.selectedDesign,m.variableLists],async()=>{if(!s.selectedDesign)return void(b.value=0);const e=F.getInstance(),t=await e.calculateExperimentMetrics(s.selectedDesign,m.variableLists);b.value=t.totalCombinations},{immediate:!0,deep:!0});const y=n(()=>{if(!s.selectedDesign)return[];const e=s.selectedDesign.variables||{},t=s.selectedDesign.variable_list_refs||{},a={};for(const[s,i]of Object.entries(e))a[s]=Array.isArray(i)?i:[String(i)];for(const[s,i]of Object.entries(t)){const e=m.variableLists.find(e=>e.id===i);e&&e.values&&(a[s]=e.values)}const n=Object.keys(a);if(0===n.length)return[{}];const l=[],o=Math.min(b.value,ye);!function e(t,s){if(l.length>=o)return;if(t>=n.length)return void l.push({...s});const i=n[t],r=a[i];for(const a of r){if(l.length>=o)return;s[i]=a,e(t+1,s)}}(0,{});for(let s=l.length-1;s>0;s--){const e=Math.floor(Math.random()*(s+1));[l[s],l[e]]=[l[e],l[s]]}return l}),f=n(()=>{if(!s.selectedDesign||0===y.value.length)return s.selectedDesign?.prompt_template||"";const e=y.value[g.value]||{};let t=s.selectedDesign.prompt_template;for(const[s,a]of Object.entries(e)){const e=new RegExp(`{{\\s*${s}\\s*}}`,"g");t=t.replace(e,a)}return t}),k=n(()=>s.selectedDesign&&0!==y.value.length&&y.value[g.value]||{});function _(){g.value>0&&g.value--}function x(){const e=Math.min(b.value,ye)-1;g.value<e&&g.value++}function C(e){const t="string"==typeof e?parseInt(e):e,s=m.variableLists.find(e=>e.id===t);return s?.values?.length||0}return l(()=>s.selectedDesign?.id,()=>{g.value=0}),(e,t)=>(i(),o("div",L,[t[18]||(t[18]=r("div",{class:"step-header"},[r("h3",null,"Run Basics"),r("p",null,"Give your run a name and choose the design to evaluate.")],-1)),r("div",R,[r("div",B,[t[4]||(t[4]=r("label",{for:"run-name"},"Run Name",-1)),r("input",{id:"run-name",value:e.name,type:"text",class:"form-control",placeholder:"e.g., Product Review Analysis - V1",required:"",onInput:t[0]||(t[0]=e=>v("update:name",e.target.value))},null,40,j),t[5]||(t[5]=r("span",{class:"form-hint"},"Choose a descriptive name to identify this run later",-1))]),r("div",V,[t[7]||(t[7]=r("label",{for:"design-select"},"Design",-1)),r("select",{id:"design-select",value:e.designId,class:"form-control",required:"",onChange:t[1]||(t[1]=e=>v("update:design-id",Number(e.target.value)||null))},[t[6]||(t[6]=r("option",{value:null}," Select a design... ",-1)),(i(!0),o(u,null,d(e.designs,e=>(i(),o("option",{key:e.id,value:e.id},p(e.name),9,N))),128))],40,U),t[8]||(t[8]=r("span",{class:"form-hint"},"The prompt template and variables to evaluate",-1))]),r("div",q,[t[11]||(t[11]=r("label",null,"Execution Type",-1)),r("div",Q,[r("label",H,[r("input",{type:"radio",value:"browser",checked:"browser"===e.executionType,name:"execution-type",onChange:t[2]||(t[2]=e=>v("update:execution-type","browser"))},null,40,G),t[9]||(t[9]=r("span",{class:"radio-label"},[r("strong",null,"Run in Browser"),r("small",null,"Execute immediately using your browser")],-1))]),r("label",W,[r("input",{type:"radio",value:"python_export",checked:"python_export"===e.executionType,name:"execution-type",onChange:t[3]||(t[3]=e=>v("update:execution-type","python_export"))},null,40,z),t[10]||(t[10]=r("span",{class:"radio-label"},[r("strong",null,"Export Python Package"),r("small",null,"Download a standalone Python script for external execution")],-1))])])])]),e.selectedDesign?(i(),o("div",J,[t[16]||(t[16]=r("h4",null,"Design Preview",-1)),r("div",K,[r("div",Z,[r("h5",null,p(e.selectedDesign.name),1),r("span",X,p(h.value)+" variables",1)]),r("div",Y,[r("div",ee,[t[12]||(t[12]=r("label",null,"Prompt Preview:",-1)),b.value>1?(i(),o("div",te,[r("button",{disabled:0===g.value,class:"nav-btn",onClick:_}," â† ",8,se),r("span",ae,p(g.value+1)+" of "+p(Math.min(b.value,ye)),1),r("button",{disabled:g.value>=Math.min(b.value,ye)-1,class:"nav-btn",onClick:x}," â†’ ",8,ne)])):c("",!0)]),r("div",le,[r("pre",null,p(f.value),1)]),b.value>ye?(i(),o("div",oe," Showing first "+p(ye)+" of "+p(b.value.toLocaleString())+" combinations ",1)):c("",!0)]),h.value>0?(i(),o("div",ie,[t[14]||(t[14]=r("label",null,"Variables:",-1)),r("div",re,[(i(!0),o(u,null,d(e.selectedDesign.variables,(e,t)=>(i(),o("div",{key:t,class:"variable-summary"},[r("span",ce,p(t),1),r("span",ue,"("+p(k.value[t]||"N/A")+")",1),r("span",de,p(Array.isArray(e)?e.length:1)+" values",1)]))),128)),(i(!0),o(u,null,d(e.selectedDesign.variable_list_refs,(e,s)=>(i(),o("div",{key:`list-${s}`,class:"variable-summary"},[r("span",pe,p(s),1),r("span",ve,"("+p(k.value[s]||"N/A")+")",1),r("span",me,p(C(e))+" values",1),t[13]||(t[13]=r("span",{class:"variable-source"},"(from list)",-1))]))),128))])])):c("",!0),r("div",ge,[t[15]||(t[15]=r("span",{class:"info-label"},"Total Combinations:",-1)),r("span",he,p(b.value),1)])])])):0===e.designs.length?(i(),o("div",be,t[17]||(t[17]=[r("div",{class:"empty-icon"}," ðŸ“ ",-1),r("h4",null,"No Designs Available",-1),r("p",null,"You need to create a design first before you can create a run.",-1),r("button",{class:"btn btn-outline"}," Create Design ",-1)]))):c("",!0)]))}}),[["__scopeId","data-v-6cc4fabc"]]);const ke=class e{static getInstance(){return e.instance||(e.instance=new e),e.instance}getQuickFilters(){return[{id:"all",label:"All Models",filterFn:()=>!0},{id:"openai",label:"OpenAI",filterFn:e=>e.provider.toLowerCase().includes("openai")},{id:"anthropic",label:"Anthropic",filterFn:e=>e.provider.toLowerCase().includes("anthropic")},{id:"budget",label:"Budget",filterFn:e=>(e.input_cost||0)<.001},{id:"premium",label:"Premium",filterFn:e=>(e.input_cost||0)>=.001},{id:"ollama",label:"Ollama",filterFn:e=>e.provider.toLowerCase().includes("ollama")},{id:"openrouter",label:"OpenRouter",filterFn:e=>e.provider.toLowerCase().includes("openrouter")}]}filterModels(e,t={}){const{searchQuery:s="",activeFilterId:a="",sortByProvider:n=!0}=t;let l=[...e];if(s.trim()){const e=s.toLowerCase();l=l.filter(t=>t.name.toLowerCase().includes(e)||t.provider.toLowerCase().includes(e))}if(a&&"all"!==a){const e=this.getQuickFilters().find(e=>e.id===a);e&&(l=l.filter(e.filterFn))}return{models:l,modelsByProvider:this.groupModelsByProvider(l,n),totalCount:e.length,filteredCount:l.length}}groupModelsByProvider(e,t=!0){const s={};if(e.forEach(e=>{s[e.provider]||(s[e.provider]=[]),s[e.provider].push(e)}),Object.keys(s).forEach(e=>{s[e].sort((e,t)=>e.name.localeCompare(t.name))}),t){const e={};return Object.keys(s).sort().forEach(t=>{e[t]=s[t]}),e}return s}smartSort(e){return e.every(e=>!isNaN(Number(e))&&""!==e.trim())?e.sort((e,t)=>Number(e)-Number(t)):e.sort()}getProviderStats(e){const t={},s={};return e.forEach(e=>{t[e.provider]||(t[e.provider]={count:0,avgCost:0},s[e.provider]=[]),t[e.provider].count++,void 0!==e.input_cost&&s[e.provider].push(e.input_cost)}),Object.keys(t).forEach(e=>{const a=s[e];a.length>0&&(t[e].avgCost=a.reduce((e,t)=>e+t,0)/a.length)}),t}filterByCapabilities(e,t){return e.filter(e=>(void 0===t.supportsFunctionCalling||e.supports_function_calling===t.supportsFunctionCalling)&&((void 0===t.supportsJsonMode||e.supports_json_mode===t.supportsJsonMode)&&(!(void 0!==t.minContextWindow&&(e.context_window||0)<t.minContextWindow)&&!(void 0!==t.maxContextWindow&&(e.context_window||0)>t.maxContextWindow))))}getSuggestedModels(e,t){let s=[...e];return"json"===t?.output_format&&(s=s.filter(e=>e.supports_json_mode||e.supports_function_calling)),t?.estimated_cost_budget&&(s=s.filter(e=>(e.input_cost||0)<=t.estimated_cost_budget)),s.sort((e,t)=>{const s={OpenAI:1,Anthropic:2,OpenRouter:3,Ollama:4},a=s[e.provider]||999,n=s[t.provider]||999;return a!==n?a-n:e.name.localeCompare(t.name)}),s.slice(0,10)}};t(ke,"instance");let _e=ke;const xe=class e{constructor(){t(this,"experimentService"),this.experimentService=F.getInstance()}static getInstance(){return e.instance||(e.instance=new e),e.instance}async estimateRunCost(e,t,s,a={}){if(0===t.length)return this.createEmptyResult();const n=await this.experimentService.calculateExperimentMetrics(e,s),l=await this.calculateInputTokens(e,a),o=a.estimatedOutputTokens||25,i=a.repetitionsPerPrompt||1,r=[];let c=0;for(const d of t){const e=this.calculateModelCost(d,l,o,n.totalCombinations,i);r.push(e),c+=e.totalCost}const u=n.totalCombinations*t.length*i;return{totalCost:c,averageCostPerTask:u>0?c/u:0,totalTasks:u,totalCombinations:n.totalCombinations,breakdown:r}}estimateQuickCost(e,t,s,a,n=1){let l=0;for(const o of e){l+=this.calculateModelCost(o,s,a,t,n).totalCost}return l}calculateModelCost(e,t,s,a,n){const l=this.getInputCostPerToken(e)*t+this.getOutputCostPerToken(e)*s,o=l*a*n;return{model:e.name,modelId:e.id,inputTokens:t,outputTokens:s,costPerTask:l,totalCost:o}}getInputCostPerToken(e){return e.input_cost?"openrouter"===e.provider?e.input_cost:e.input_cost/1e6:0}getOutputCostPerToken(e){return e.output_cost?"openrouter"===e.provider?e.output_cost:e.output_cost/1e6:0}async calculateInputTokens(e,t){if(t.estimatedInputTokens)return t.estimatedInputTokens;if(!e.prompt_template)return 100;const s=t.sampleVariables||this.createSampleVariables(e);return A(e.prompt_template,s)}createSampleVariables(e){const t={},s=e.variables||{};for(const[a,n]of Object.entries(s))Array.isArray(n)&&n.length>0?t[a]=n[0]:t[a]="string"==typeof n?n:"sample";return t}createEmptyResult(){return{totalCost:0,averageCostPerTask:0,totalTasks:0,totalCombinations:0,breakdown:[]}}formatCost(e){return e<.001?e.toFixed(6):e<.01?e.toFixed(4):e<1?e.toFixed(3):e.toFixed(2)}formatModelCost(e,t){const s="input"===t?e.input_cost:e.output_cost;if(void 0===s)return"?";const a="openrouter"===e.provider?1e6*s:s;return a<.01?a.toFixed(4):a<1?a.toFixed(3):a<10?a.toFixed(2):a.toFixed(1)}};t(xe,"instance");let Ce=xe;const we={class:"model-search-and-filters"},Me={class:"search-and-filters"},Ee={class:"search-box"},Se={class:"quick-filters"},Pe=["onClick"],De={class:"selection-summary"},Oe={class:"selected-count"},Te={key:0,class:"filter-info"},Ie=s({__name:"ModelSearchAndFilters",props:{searchQuery:{},activeFilter:{},selectedModels:{},allModels:{}},emits:["update:search-query","update:active-filter","clear-selection","expand-providers"],setup(e,{emit:t}){const s=e,h=t,b=_e.getInstance(),y=a(s.searchQuery),f=n(()=>b.getQuickFilters()),k=n(()=>{const e=b.filterModels(s.allModels,{searchQuery:s.searchQuery,activeFilterId:s.activeFilter});return{totalCount:e.totalCount,filteredCount:e.filteredCount}});function _(){h("update:search-query",y.value)}function x(e){h("update:active-filter",e.id);const t=function(e){switch(e){case"openai":return["OpenAI"];case"anthropic":return["Anthropic"];case"ollama":return["Ollama"];case"openrouter":return["OpenRouter"];case"all":return Object.keys(b.filterModels(s.allModels,{activeFilterId:"all"}).modelsByProvider);default:return[]}}(e.id);t.length>0&&h("expand-providers",t)}return l(()=>s.searchQuery,e=>{y.value=e}),(e,t)=>(i(),o("div",we,[r("div",Me,[r("div",Ee,[v(r("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>y.value=e),type:"text",class:"search-input",placeholder:"Search models...",onInput:_},null,544),[[m,y.value]])]),r("div",Se,[(i(!0),o(u,null,d(f.value,t=>(i(),o("button",{key:t.id,class:g(["filter-btn",{active:e.activeFilter===t.id}]),onClick:e=>x(t)},p(t.label),11,Pe))),128))])]),r("div",De,[r("span",Oe,p(e.selectedModels.length)+" models selected",1),e.selectedModels.length>0?(i(),o("button",{key:0,class:"clear-btn",onClick:t[1]||(t[1]=t=>e.$emit("clear-selection"))}," Clear All ")):c("",!0)]),k.value.filteredCount!==k.value.totalCount?(i(),o("div",Te," Showing "+p(k.value.filteredCount)+" of "+p(k.value.totalCount)+" models ",1)):c("",!0)]))}}),Ae=S(Ie,[["__scopeId","data-v-c5ed8196"]]),$e={class:"parameters-panel"},Fe={class:"parameters-grid"},Le={class:"parameter-item"},Re=["value"],Be={class:"parameter-item"},je=["value"],Ve={class:"parameter-item"},Ue=["value"],Ne={class:"parameter-item"},qe=["value"],Qe={class:"parameter-presets"},He={class:"presets-grid"},Ge=["onClick"],We={class:"preset-name"},ze={class:"preset-description"},Je={key:0,class:"parameter-warnings"},Ke=S(s({__name:"ModelParametersPanel",props:{parameters:{}},emits:["update:parameters"],setup(e,{emit:t}){const s=e,a=t,l=[{name:"Conservative",description:"Low temperature, safe concurrency",values:{temperature:.3,max_tokens:25,concurrency:2,repetitions_per_prompt:1}},{name:"Balanced",description:"Moderate settings for most use cases",values:{temperature:.7,max_tokens:50,concurrency:3,repetitions_per_prompt:1}},{name:"Creative",description:"Higher temperature for creative tasks",values:{temperature:1.2,max_tokens:100,concurrency:3,repetitions_per_prompt:1}},{name:"Variability Study",description:"Multiple repetitions for analysis",values:{temperature:.8,max_tokens:50,concurrency:2,repetitions_per_prompt:3}},{name:"High Throughput",description:"Fast execution with higher concurrency",values:{temperature:.7,max_tokens:25,concurrency:5,repetitions_per_prompt:1}}],v=n(()=>{const e=[];return s.parameters.concurrency>5&&e.push("High concurrency may trigger rate limits with some providers"),s.parameters.max_tokens>200&&e.push("Large token limits will significantly increase costs"),s.parameters.repetitions_per_prompt>3&&e.push("Multiple repetitions will multiply total cost and execution time"),s.parameters.temperature>1.5&&e.push("Very high temperature may produce inconsistent results"),s.parameters.temperature<.1&&e.push("Very low temperature may produce repetitive results"),e});function m(e,t){const n=function(e,t){switch(e){case"temperature":return Math.max(0,Math.min(2,t));case"max_tokens":return Math.max(1,Math.min(4e3,t));case"concurrency":case"repetitions_per_prompt":return Math.max(1,Math.min(10,t));default:return t}}(e,t);a("update:parameters",{...s.parameters,[e]:n})}return(e,t)=>(i(),o("div",$e,[t[13]||(t[13]=r("h4",null,"Parameters",-1)),r("div",Fe,[r("div",Le,[r("label",null,"Temperature: "+p(e.parameters.temperature),1),r("input",{value:e.parameters.temperature,type:"range",min:"0",max:"2",step:"0.1",class:"parameter-slider",onInput:t[0]||(t[0]=e=>m("temperature",parseFloat(e.target.value)))},null,40,Re),t[4]||(t[4]=r("div",{class:"parameter-help"}," Controls randomness (0 = deterministic, 2 = very creative) ",-1))]),r("div",Be,[t[5]||(t[5]=r("label",null,"Max Output Tokens",-1)),r("input",{value:e.parameters.max_tokens,type:"number",min:"1",max:"4000",class:"parameter-input",onInput:t[1]||(t[1]=e=>m("max_tokens",parseInt(e.target.value)))},null,40,je),t[6]||(t[6]=r("div",{class:"parameter-help"}," Maximum tokens in the response ",-1))]),r("div",Ve,[t[7]||(t[7]=r("label",null,"Concurrency",-1)),r("input",{value:e.parameters.concurrency,type:"number",min:"1",max:"10",class:"parameter-input",onInput:t[2]||(t[2]=e=>m("concurrency",parseInt(e.target.value)))},null,40,Ue),t[8]||(t[8]=r("div",{class:"parameter-help"}," Parallel requests (higher = faster, but may hit rate limits) ",-1))]),r("div",Ne,[t[9]||(t[9]=r("label",null,"Repetitions per Prompt",-1)),r("input",{value:e.parameters.repetitions_per_prompt,type:"number",min:"1",max:"10",class:"parameter-input",onInput:t[3]||(t[3]=e=>m("repetitions_per_prompt",parseInt(e.target.value)))},null,40,qe),t[10]||(t[10]=r("div",{class:"parameter-help"}," Run each prompt multiple times for variability analysis ",-1))])]),r("div",Qe,[t[11]||(t[11]=r("h5",null,"Quick Presets",-1)),r("div",He,[(i(),o(u,null,d(l,e=>r("button",{key:e.name,class:"preset-btn",onClick:t=>function(e){a("update:parameters",{...e.values})}(e)},[r("span",We,p(e.name),1),r("span",ze,p(e.description),1)],8,Ge)),64))])]),v.value.length>0?(i(),o("div",Je,[t[12]||(t[12]=r("h5",null,"âš ï¸ Parameter Considerations",-1)),r("ul",null,[(i(!0),o(u,null,d(v.value,e=>(i(),o("li",{key:e},p(e),1))),128))])])):c("",!0)]))}}),[["__scopeId","data-v-c30df2de"]]),Ze={class:"python-export-options"},Xe={class:"config-section"},Ye={class:"export-options-grid"},et={class:"option-group"},tt=["value"],st={class:"option-group"},at=["value"],nt={class:"config-section"},lt={class:"export-options-grid"},ot={class:"option-group"},it=["value"],rt={class:"option-group"},ct=["value"],ut={class:"option-group"},dt=["value"],pt={class:"config-section"},vt={class:"option-checkboxes"},mt={class:"checkbox-option"},gt=["checked"],ht={class:"checkbox-option"},bt=["checked"],yt={class:"checkbox-option"},ft=["checked"],kt={class:"checkbox-option"},_t=["checked"],xt={class:"checkbox-option"},Ct=["checked"],wt={class:"config-section"},Mt={class:"presets-grid"},Et=["onClick"],St={class:"preset-name"},Pt={class:"preset-description"},Dt={class:"config-summary"},Ot={class:"summary-items"},Tt={class:"summary-item"},It={class:"value"},At={class:"summary-item"},$t={class:"value"},Ft={class:"summary-item"},Lt={class:"value"},Rt={class:"summary-item"},Bt={class:"value"},jt=S(s({__name:"PythonExportOptions",props:{options:{}},emits:["update:options"],setup(e,{emit:t}){const s=e,a=t,l=[{name:"Quick & Simple",description:"Fast execution with minimal logging",values:{outputFormat:"json",enableProgressBar:!0,verboseLogging:!1,enableCheckpointing:!1,maxRetries:2,retryBackoffMultiplier:2,continueOnError:!0,pythonVersion:"3.9+",includeApiLogs:!1}},{name:"Research Quality",description:"Full logging and error recovery",values:{outputFormat:"both",enableProgressBar:!0,verboseLogging:!0,enableCheckpointing:!0,maxRetries:3,retryBackoffMultiplier:2,continueOnError:!0,pythonVersion:"3.9+",includeApiLogs:!0}},{name:"Production Ready",description:"Robust settings for important runs",values:{outputFormat:"both",enableProgressBar:!0,verboseLogging:!1,enableCheckpointing:!0,maxRetries:5,retryBackoffMultiplier:2.5,continueOnError:!1,pythonVersion:"3.10+",includeApiLogs:!1}},{name:"Debug Mode",description:"Maximum logging for troubleshooting",values:{outputFormat:"both",enableProgressBar:!0,verboseLogging:!0,enableCheckpointing:!0,maxRetries:3,retryBackoffMultiplier:1.5,continueOnError:!0,pythonVersion:"3.9+",includeApiLogs:!0}}],c=n(()=>()=>{const e=[];return s.options.enableProgressBar&&e.push("Progress"),s.options.verboseLogging&&e.push("Verbose"),s.options.enableCheckpointing&&e.push("Checkpoints"),s.options.continueOnError&&e.push("Continue on Error"),s.options.includeApiLogs&&e.push("API Logs"),e});function v(e,t){a("update:options",{...s.options,[e]:t})}return(e,t)=>(i(),o("div",Ze,[t[41]||(t[41]=r("h4",null,"Python Export Options",-1)),r("div",Xe,[t[16]||(t[16]=r("h5",null,"Basic Configuration",-1)),r("div",Ye,[r("div",et,[t[11]||(t[11]=r("label",null,"Output Format",-1)),r("select",{value:e.options.outputFormat,class:"option-select",onChange:t[0]||(t[0]=e=>v("outputFormat",e.target.value))},t[10]||(t[10]=[r("option",{value:"json"}," JSON only ",-1),r("option",{value:"csv"}," CSV only ",-1),r("option",{value:"both"}," Both JSON and CSV ",-1)]),40,tt),t[12]||(t[12]=r("div",{class:"option-help"}," Choose output format for results ",-1))]),r("div",st,[t[14]||(t[14]=r("label",null,"Python Version",-1)),r("select",{value:e.options.pythonVersion,class:"option-select",onChange:t[1]||(t[1]=e=>v("pythonVersion",e.target.value))},t[13]||(t[13]=[r("option",{value:"3.8+"}," Python 3.8+ ",-1),r("option",{value:"3.9+"}," Python 3.9+ ",-1),r("option",{value:"3.10+"}," Python 3.10+ ",-1)]),40,at),t[15]||(t[15]=r("div",{class:"option-help"}," Minimum Python version requirement ",-1))])])]),r("div",nt,[t[23]||(t[23]=r("h5",null,"Error Handling & Resilience",-1)),r("div",lt,[r("div",ot,[t[17]||(t[17]=r("label",null,"Max Retries",-1)),r("input",{value:e.options.maxRetries,type:"number",min:"1",max:"10",class:"option-input",onInput:t[2]||(t[2]=e=>v("maxRetries",parseInt(e.target.value)))},null,40,it),t[18]||(t[18]=r("div",{class:"option-help"}," Number of retry attempts for failed requests ",-1))]),r("div",rt,[t[19]||(t[19]=r("label",null,"Retry Backoff Multiplier",-1)),r("input",{value:e.options.retryBackoffMultiplier,type:"number",min:"1",max:"5",step:"0.1",class:"option-input",onInput:t[3]||(t[3]=e=>v("retryBackoffMultiplier",parseFloat(e.target.value)))},null,40,ct),t[20]||(t[20]=r("div",{class:"option-help"}," Multiplier for exponential backoff between retries ",-1))]),r("div",ut,[t[21]||(t[21]=r("label",null,"Timeout Override (seconds)",-1)),r("input",{value:e.options.timeoutOverride||"",type:"number",min:"10",max:"300",placeholder:"Default",class:"option-input",onInput:t[4]||(t[4]=e=>v("timeoutOverride",e.target.value?parseInt(e.target.value):void 0))},null,40,dt),t[22]||(t[22]=r("div",{class:"option-help"}," Override default request timeout (optional) ",-1))])])]),r("div",pt,[t[34]||(t[34]=r("h5",null,"Execution Options",-1)),r("div",vt,[r("label",mt,[r("input",{type:"checkbox",checked:e.options.enableProgressBar,onChange:t[5]||(t[5]=e=>v("enableProgressBar",e.target.checked))},null,40,gt),t[24]||(t[24]=r("span",null,"Enable progress bar",-1)),t[25]||(t[25]=r("div",{class:"checkbox-help"},"Show progress during execution",-1))]),r("label",ht,[r("input",{type:"checkbox",checked:e.options.verboseLogging,onChange:t[6]||(t[6]=e=>v("verboseLogging",e.target.checked))},null,40,bt),t[26]||(t[26]=r("span",null,"Verbose logging",-1)),t[27]||(t[27]=r("div",{class:"checkbox-help"},"Detailed debug information",-1))]),r("label",yt,[r("input",{type:"checkbox",checked:e.options.enableCheckpointing,onChange:t[7]||(t[7]=e=>v("enableCheckpointing",e.target.checked))},null,40,ft),t[28]||(t[28]=r("span",null,"Enable checkpointing",-1)),t[29]||(t[29]=r("div",{class:"checkbox-help"},"Save progress for resuming interrupted runs",-1))]),r("label",kt,[r("input",{type:"checkbox",checked:e.options.continueOnError,onChange:t[8]||(t[8]=e=>v("continueOnError",e.target.checked))},null,40,_t),t[30]||(t[30]=r("span",null,"Continue on error",-1)),t[31]||(t[31]=r("div",{class:"checkbox-help"},"Keep running even if some tasks fail",-1))]),r("label",xt,[r("input",{type:"checkbox",checked:e.options.includeApiLogs,onChange:t[9]||(t[9]=e=>v("includeApiLogs",e.target.checked))},null,40,Ct),t[32]||(t[32]=r("span",null,"Include API logs for debugging",-1)),t[33]||(t[33]=r("div",{class:"checkbox-help"},"Save detailed API call information",-1))])])]),r("div",wt,[t[35]||(t[35]=r("h5",null,"Quick Presets",-1)),r("div",Mt,[(i(),o(u,null,d(l,e=>r("button",{key:e.name,class:"preset-btn",onClick:t=>function(e){a("update:options",{...e.values})}(e)},[r("span",St,p(e.name),1),r("span",Pt,p(e.description),1)],8,Et)),64))])]),r("div",Dt,[t[40]||(t[40]=r("h5",null,"Export Summary",-1)),r("div",Ot,[r("div",Tt,[t[36]||(t[36]=r("span",{class:"label"},"Output:",-1)),r("span",It,p(e.options.outputFormat.toUpperCase()),1)]),r("div",At,[t[37]||(t[37]=r("span",{class:"label"},"Python:",-1)),r("span",$t,p(e.options.pythonVersion),1)]),r("div",Ft,[t[38]||(t[38]=r("span",{class:"label"},"Retries:",-1)),r("span",Lt,p(e.options.maxRetries)+" Ã— "+p(e.options.retryBackoffMultiplier),1)]),r("div",Rt,[t[39]||(t[39]=r("span",{class:"label"},"Features:",-1)),r("span",Bt,p(c.value().join(", ")||"None"),1)])])])]))}}),[["__scopeId","data-v-bab79438"]]),Vt={class:"model-provider-grid"},Ut=["onClick"],Nt={class:"provider-controls"},qt={class:"model-count"},Qt={key:0,class:"selection-indicator"},Ht={class:"selected-count"},Gt=["onClick"],Wt={key:0,class:"models-list"},zt=["onClick"],Jt={class:"model-info"},Kt={class:"model-details"},Zt={key:0,class:"cost-info"},Xt={key:1,class:"context-info"},Yt={key:2,class:"capabilities"},es={key:0,class:"capability"},ts={key:1,class:"capability"},ss={class:"selection-indicator"},as={key:0},ns=S(s({__name:"ModelProviderGrid",props:{modelsByProvider:{},selectedModels:{},expandedProviders:{},getProviderSelectionStats:{type:Function}},emits:["toggle-model","toggle-provider","select-all-provider"],setup(e){const t=e,s=Ce.getInstance(),a=n(()=>{const e={};return Object.entries(t.modelsByProvider).forEach(([s,a])=>{const n=t.getProviderSelectionStats(a);e[s]={selected:n.selected,total:n.total}}),e});function l(e){const t=a.value[e];return t?0===t.selected?"Select All":t.selected===t.total?"Deselect All":"Select All":"Select All"}function v(e,t){return s.formatModelCost(e,t)}return(e,t)=>(i(),o("div",Vt,[(i(!0),o(u,null,d(e.modelsByProvider,(t,s)=>(i(),o("div",{key:s,class:"provider-section"},[r("div",{class:"provider-header",onClick:t=>e.$emit("toggle-provider",s)},[r("h4",null,p(s),1),r("div",Nt,[r("span",qt,p(t.length)+" models",1),a.value[s]?(i(),o("div",Qt,[r("span",Ht,p(a.value[s].selected)+"/"+p(a.value[s].total),1)])):c("",!0),r("button",{class:"select-all-btn",onClick:h(a=>e.$emit("select-all-provider",s,t),["stop"])},p(l(s)),9,Gt),r("span",{class:g(["expand-icon",{expanded:e.expandedProviders.has(s)}])}," â–¼ ",2)])],8,Ut),e.expandedProviders.has(s)?(i(),o("div",Wt,[(i(!0),o(u,null,d(t,t=>{return i(),o("div",{key:t.id,class:g(["model-card",{selected:e.selectedModels.includes(t.id),"cost-available":void 0!==t.input_cost}]),onClick:s=>e.$emit("toggle-model",t.id)},[r("div",Jt,[r("h5",null,p(t.name),1),r("div",Kt,[void 0!==t.input_cost?(i(),o("span",Zt," $"+p(v(t,"input"))+"/$"+p(v(t,"output")),1)):c("",!0),t.context_window?(i(),o("span",Xt,p((s=t.context_window,s>=1e6?`${(s/1e6).toFixed(1)}M`:s>=1e3?`${(s/1e3).toFixed(0)}K`:s.toString()))+" context ",1)):c("",!0),t.supports_function_calling||t.supports_json_mode?(i(),o("div",Yt,[t.supports_function_calling?(i(),o("span",es,"Functions")):c("",!0),t.supports_json_mode?(i(),o("span",ts,"JSON")):c("",!0)])):c("",!0)])]),r("div",ss,[r("div",{class:g(["checkbox",{checked:e.selectedModels.includes(t.id)}])},[e.selectedModels.includes(t.id)?(i(),o("span",as,"âœ“")):c("",!0)],2)])],10,zt);var s}),128))])):c("",!0)]))),128))]))}}),[["__scopeId","data-v-095a4d24"]]),ls={key:0,class:"cost-estimation-display"},os={class:"cost-summary"},is={class:"cost-overview"},rs={class:"overview-item"},cs={class:"value"},us={class:"overview-item"},ds={class:"value"},ps={class:"overview-item"},vs={class:"value"},ms={class:"overview-item total"},gs={class:"value"},hs={key:0,class:"cost-breakdown"},bs={class:"breakdown-header"},ys={class:"breakdown-table-container"},fs={class:"breakdown-table"},ks={class:"model-name"},_s={class:"token-count"},xs={class:"token-count"},Cs={class:"cost-value"},ws={class:"cost-value total-cost"},Ms={class:"percentage"},Es={key:0},Ss={class:"total-row"},Ps={key:1,class:"show-breakdown"},Ds={key:0,class:"cost-warnings"},Os={key:1,class:"time-estimate"},Ts={class:"time-details"},Is={class:"time-value"},As={class:"time-note"},$s=S(s({__name:"CostEstimationDisplay",props:{costEstimation:{},selectedModels:{},parameters:{}},setup(e){const t=e,s=Ce.getInstance(),l=a(!1),v=n(()=>t.costEstimation?t.costEstimation.breakdown.reduce((e,t)=>e+t.inputTokens,0):0),m=n(()=>t.costEstimation?t.costEstimation.breakdown.reduce((e,t)=>e+t.outputTokens,0):0),g=n(()=>{if(!t.costEstimation)return[];const e=[];return t.costEstimation.totalCost>10&&e.push("High cost experiment - consider reducing scope or using cheaper models"),t.costEstimation.totalCost>50&&e.push("Very expensive experiment - strongly recommend reviewing parameters"),t.costEstimation.totalTasks>1e4&&e.push("Large number of tasks may take significant time and cost"),t.parameters.max_tokens>200&&e.push("High token limit significantly increases costs"),t.parameters.repetitions_per_prompt>3&&e.push("Multiple repetitions multiply total costs"),e}),h=n(()=>{if(!t.costEstimation||0===t.costEstimation.totalTasks)return null;const e=3*t.costEstimation.totalTasks/t.parameters.concurrency;if(e<60)return{display:`${Math.round(e)} seconds`,seconds:e};if(e<3600)return{display:`${Math.round(e/60)} minutes`,seconds:e};return{display:`${Math.floor(e/3600)}h ${Math.round(e%3600/60)}m`,seconds:e}});function b(e){return s.formatCost(e)}return(e,t)=>e.costEstimation&&e.selectedModels.length>0?(i(),o("div",ls,[t[12]||(t[12]=r("h4",null,"Cost Estimate",-1)),r("div",os,[r("div",is,[r("div",rs,[t[2]||(t[2]=r("span",{class:"label"},"Variable combinations:",-1)),r("span",cs,p(e.costEstimation.totalCombinations.toLocaleString()),1)]),r("div",us,[t[3]||(t[3]=r("span",{class:"label"},"Selected models:",-1)),r("span",ds,p(e.selectedModels.length),1)]),r("div",ps,[t[4]||(t[4]=r("span",{class:"label"},"Total tasks:",-1)),r("span",vs,p(e.costEstimation.totalTasks.toLocaleString()),1)]),r("div",ms,[t[5]||(t[5]=r("span",{class:"label"},"Estimated cost:",-1)),r("span",gs,"$"+p(b(e.costEstimation.totalCost)),1)])]),l.value&&e.costEstimation.breakdown.length>0?(i(),o("div",hs,[r("div",bs,[t[6]||(t[6]=r("h5",null,"Cost Breakdown by Model",-1)),r("button",{class:"toggle-breakdown-btn",onClick:t[0]||(t[0]=e=>l.value=!1)}," Hide Details ")]),r("div",ys,[r("table",fs,[t[9]||(t[9]=r("thead",null,[r("tr",null,[r("th",null,"Model"),r("th",null,"Input Tokens"),r("th",null,"Output Tokens"),r("th",null,"Cost per Task"),r("th",null,"Total Cost"),r("th",null,"% of Total")])],-1)),r("tbody",null,[(i(!0),o(u,null,d(e.costEstimation.breakdown,t=>(i(),o("tr",{key:t.modelId,class:"breakdown-row"},[r("td",ks,p(t.model),1),r("td",_s,p(t.inputTokens.toLocaleString()),1),r("td",xs,p(t.outputTokens.toLocaleString()),1),r("td",Cs," $"+p(b(t.costPerTask)),1),r("td",ws," $"+p(b(t.totalCost)),1),r("td",Ms,p((t.totalCost/e.costEstimation.totalCost*100).toFixed(1))+"% ",1)]))),128))]),e.costEstimation.breakdown.length>1?(i(),o("tfoot",Es,[r("tr",Ss,[t[7]||(t[7]=r("td",null,[r("strong",null,"Total")],-1)),r("td",null,p(v.value.toLocaleString()),1),r("td",null,p(m.value.toLocaleString()),1),r("td",null,"$"+p(b(e.costEstimation.averageCostPerTask)),1),r("td",null,[r("strong",null,"$"+p(b(e.costEstimation.totalCost)),1)]),t[8]||(t[8]=r("td",null,[r("strong",null,"100%")],-1))])])):c("",!0)])])])):e.costEstimation.breakdown.length>0?(i(),o("div",Ps,[r("button",{class:"toggle-breakdown-btn primary",onClick:t[1]||(t[1]=e=>l.value=!0)}," Show Cost Breakdown ("+p(e.costEstimation.breakdown.length)+" models) ",1)])):c("",!0)]),g.value.length>0?(i(),o("div",Ds,[t[10]||(t[10]=r("h5",null,"ðŸ’° Cost Considerations",-1)),r("ul",null,[(i(!0),o(u,null,d(g.value,e=>(i(),o("li",{key:e,class:"warning-item"},p(e),1))),128))])])):c("",!0),h.value?(i(),o("div",Os,[t[11]||(t[11]=r("h5",null,"â±ï¸ Estimated Execution Time",-1)),r("div",Ts,[r("span",Is,p(h.value.display),1),r("span",As,"Based on "+p(e.parameters.concurrency)+" concurrent requests",1)])])):c("",!0)])):c("",!0)}}),[["__scopeId","data-v-1333cb51"]]),Fs={class:"model-selection-step"},Ls={key:2,class:"task-estimate"},Rs={class:"estimate-card"},Bs={class:"estimate-details"},js={class:"estimate-item"},Vs={class:"value"},Us={class:"estimate-item"},Ns={class:"value"},qs={class:"estimate-item total"},Qs={class:"value"},Hs={key:0,class:"calculation-error"},Gs=S(s({__name:"ModelSelectionStep",props:{selectedModels:{},allModels:{},design:{},parameters:{},executionType:{},pythonExportOptions:{}},emits:["update:selected-models","update:parameters","update:python-export-options"],setup(e,{emit:t}){const s=e,u=t,d=_e.getInstance(),v=Ce.getInstance(),m=F.getInstance(),g=I(),h=a(""),_=a(""),x=a({...s.parameters}),C=a({...s.pythonExportOptions}),{selectedModels:w,expandedProviders:M,toggleModel:E,toggleProvider:S,selectAllProvider:P,clearSelection:D,expandAllProviders:O,getProviderSelectionStats:T,setOnSelectionChange:A}=function(e={}){const{initialSelectedModels:t=[],initialExpandedProviders:s=[],autoExpandOnFilter:o=!0}=e,i=a([...t]),r=a(new Set(s)),c=n(()=>i.value.length),u=n(()=>i.value.length>0),d=e=>e.filter(e=>i.value.includes(e.id)),p=e=>{const t=e.filter(e=>i.value.includes(e.id)).length;return{selected:t,total:e.length,percentage:e.length>0?t/e.length*100:0,isFullySelected:t===e.length&&e.length>0,isPartiallySelected:t>0&&t<e.length}},v={toggleModel:e=>{const t=i.value.indexOf(e);t>-1?i.value.splice(t,1):i.value.push(e)},toggleProvider:e=>{r.value.has(e)?r.value.delete(e):r.value.add(e)},selectAllProvider:(e,t)=>{const s=t.map(e=>e.id);if(p(t).isFullySelected)i.value=i.value.filter(e=>!s.includes(e));else{const e=s.filter(e=>!i.value.includes(e));i.value.push(...e)}},clearSelection:()=>{i.value=[]},expandProvider:e=>{r.value.add(e)},collapseProvider:e=>{r.value.delete(e)},expandAllProviders:e=>{e.forEach(e=>{r.value.add(e)})},collapseAllProviders:()=>{r.value.clear()},selectSuggested:e=>{i.value=[...e]}},m=a(null),g=a(null);l(i,e=>{m.value&&m.value([...e])},{deep:!0}),l(r,(e,t)=>{if(g.value){const s=Array.from(e),a=Array.from(t||new Set),n=s.find(e=>!a.includes(e)),l=a.find(e=>!s.includes(e));n?g.value(n,!0):l&&g.value(l,!1)}},{deep:!0});const h={selectedModels:i.value,expandedProviders:r.value,selectionCount:c.value,hasSelection:u.value};return{selectedModels:i,expandedProviders:r,selectionCount:c,hasSelection:u,getSelectedModelObjects:d,isModelSelected:e=>i.value.includes(e),isProviderExpanded:e=>r.value.has(e),isProviderFullySelected:e=>e.length>0&&e.every(e=>i.value.includes(e.id)),getProviderSelectionStats:p,getSelectionSummary:e=>{const t=d(e),s={};return t.forEach(e=>{s[e.provider]=(s[e.provider]||0)+1}),{total:i.value.length,byProvider:s,models:t}},...v,selectByFilter:(e,t)=>{const s=e.filter(t).map(e=>e.id);i.value=[...new Set([...i.value,...s])]},deselectByFilter:(e,t)=>{const s=e.filter(t).map(e=>e.id);i.value=i.value.filter(e=>!s.includes(e))},autoExpandProvidersWithSelection:e=>{o&&Object.entries(e).forEach(([e,t])=>{p(t).selected>0&&r.value.add(e)})},setOnSelectionChange:e=>{m.value=e},setOnProviderToggle:e=>{g.value=e},state:h}}({initialSelectedModels:s.selectedModels,autoExpandOnFilter:!0}),$=a(0),L=a(null),R=a(null),B=n(()=>d.filterModels(s.allModels,{searchQuery:h.value,activeFilterId:_.value,sortByProvider:!0}).modelsByProvider),j=n(()=>$.value*w.value.length*x.value.repetitions_per_prompt),V=n(()=>s.allModels.filter(e=>w.value.includes(e.id)));function U(e){O(e)}return l(()=>s.selectedModels,e=>{w.value=[...e]},{immediate:!0}),l(()=>s.parameters,e=>{x.value={...e}},{immediate:!0,deep:!0}),l(()=>s.pythonExportOptions,e=>{C.value={...e}},{immediate:!0,deep:!0}),l(()=>[s.design,g.variableLists],async function(){if(s.design)try{L.value=null;const e=await m.calculateExperimentMetrics(s.design,g.variableLists);$.value=e.totalCombinations}catch(e){L.value=`Calculation error: ${e instanceof Error?e.message:"Unknown error"}`,$.value=0}else $.value=0},{immediate:!0,deep:!0}),l(()=>[s.design,V.value,x.value.max_tokens,x.value.repetitions_per_prompt,g.variableLists],async function(){if(s.design&&0!==V.value.length)try{const e=await v.estimateRunCost(s.design,V.value,g.variableLists,{estimatedOutputTokens:x.value.max_tokens,repetitionsPerPrompt:x.value.repetitions_per_prompt});R.value=e}catch(e){console.error("Cost calculation error:",e),R.value=null}else R.value=null},{immediate:!0,deep:!0}),l(x,e=>{u("update:parameters",{...e})},{deep:!0}),l(C,e=>{u("update:python-export-options",{...e})},{deep:!0}),A(e=>{u("update:selected-models",e)}),b(()=>{if(w.value.length>0){const e=new Set;V.value.forEach(t=>{e.add(t.provider)}),O(Array.from(e))}}),(e,t)=>(i(),o("div",Fs,[t[8]||(t[8]=r("div",{class:"step-header"},[r("h3",null,"Select Models"),r("p",null,"Choose which models to evaluate with your design.")],-1)),y(Ae,{"search-query":h.value,"onUpdate:searchQuery":t[0]||(t[0]=e=>h.value=e),"active-filter":_.value,"onUpdate:activeFilter":t[1]||(t[1]=e=>_.value=e),"selected-models":k(w),"all-models":s.allModels,onClearSelection:k(D),onExpandProviders:U},null,8,["search-query","active-filter","selected-models","all-models","onClearSelection"]),y(Ke,{parameters:x.value,"onUpdate:parameters":t[2]||(t[2]=e=>x.value=e)},null,8,["parameters"]),"python_export"===s.executionType?(i(),f(jt,{key:0,options:C.value,"onUpdate:options":t[3]||(t[3]=e=>C.value=e)},null,8,["options"])):c("",!0),y(ns,{"models-by-provider":B.value,"selected-models":k(w),"expanded-providers":k(M),"get-provider-selection-stats":k(T),onToggleModel:k(E),onToggleProvider:k(S),onSelectAllProvider:k(P)},null,8,["models-by-provider","selected-models","expanded-providers","get-provider-selection-stats","onToggleModel","onToggleProvider","onSelectAllProvider"]),e.design?(i(),f($s,{key:1,"cost-estimation":R.value,"selected-models":k(w),parameters:x.value},null,8,["cost-estimation","selected-models","parameters"])):c("",!0),e.design?(i(),o("div",Ls,[r("div",Rs,[t[7]||(t[7]=r("h4",null,"Task Estimate",-1)),r("div",Bs,[r("div",js,[t[4]||(t[4]=r("span",{class:"label"},"Variable combinations:",-1)),r("span",Vs,p($.value.toLocaleString()),1)]),r("div",Us,[t[5]||(t[5]=r("span",{class:"label"},"Selected models:",-1)),r("span",Ns,p(k(w).length),1)]),r("div",qs,[t[6]||(t[6]=r("span",{class:"label"},"Total tasks:",-1)),r("span",Qs,p(j.value.toLocaleString()),1)])]),L.value?(i(),o("div",Hs,p(L.value),1)):c("",!0)])])):c("",!0)]))}}),[["__scopeId","data-v-58593dd0"]]),Ws={class:"review-step"},zs={class:"review-sections"},Js={class:"review-section"},Ks={class:"summary-grid"},Zs={class:"summary-card"},Xs={class:"summary-card"},Ys={class:"summary-card"},ea={class:"summary-card tokens"},ta={class:"summary-card cost"},sa={key:0},aa={key:1},na={key:0,class:"review-section"},la={class:"cost-breakdown"},oa={class:"model-name"},ia={class:"task-count"},ra={class:"model-cost"},ca={key:1,class:"review-section"},ua={class:"variables-compact"},da={class:"var-name"},pa={class:"var-values"},va={class:"var-name"},ma={class:"var-values"},ga={class:"review-section"},ha={class:"config-summary"},ba={class:"config-grid"},ya={class:"config-item"},fa={class:"config-value"},ka={class:"config-description"},_a={class:"config-item"},xa={class:"config-value"},Ca={class:"config-description"},wa={class:"config-item"},Ma={class:"config-value"},Ea={class:"config-description"},Sa={class:"review-section"},Pa={class:"models-summary"},Da={class:"models-by-provider"},Oa={class:"provider-models"},Ta={class:"model-name"},Ia={class:"model-details"},Aa={key:0,class:"cost-info"},$a={key:1,class:"cost-info"},Fa={key:2,class:"context-info"},La={key:2,class:"review-section"},Ra={key:0,class:"warnings"},Ba={key:1,class:"recommendations"},ja=S(s({__name:"RunReviewStep",props:{formData:{},selectedDesign:{},selectedModels:{},taskCount:{},estimatedCost:{}},setup(e){const t=e,s=I(),v=n(()=>{if(!t.selectedDesign)return 0;return Object.keys(t.selectedDesign.variables||{}).length+Object.keys(t.selectedDesign.variable_list_refs||{}).length}),m=a(1),g=a(null);l(()=>[t.selectedDesign,s.variableLists],async()=>{if(t.selectedDesign)try{g.value=null;const e=F.getInstance(),a=await e.calculateExperimentMetrics(t.selectedDesign,s.variableLists);m.value=a.totalCombinations}catch(e){g.value=`Calculation error: ${e instanceof Error?e.message:"Unknown error"}`,m.value=1}else m.value=1},{immediate:!0,deep:!0});const h=e=>{const t="string"==typeof e?parseInt(e):e,a=s.variableLists.find(e=>e.id===t);return a?.values?.length||0},b=n(()=>{if(!t.selectedDesign)return{input:0,output:0};const e=t.selectedDesign.variables||{},s={};for(const[t,o]of Object.entries(e))s[t]=Array.isArray(o)?o[0]:o;const a=A(t.selectedDesign.prompt_template,s),n=t.formData.parameters.max_tokens,l=m.value*t.selectedModels.length;return{input:a*l,output:n*l}}),y=n(()=>{if(!t.selectedDesign)return[];const e=t.selectedDesign.variables||{},s={};for(const[t,l]of Object.entries(e))s[t]=Array.isArray(l)?l[0]:l;const a=A(t.selectedDesign.prompt_template,s),n=t.formData.parameters.max_tokens;return t.selectedModels.filter(e=>void 0!==e.input_cost&&void 0!==e.output_cost).map(e=>{const t=m.value,s="openrouter"===e.provider?e.input_cost:e.input_cost/1e6,l="openrouter"===e.provider?e.output_cost:e.output_cost/1e6,o=(s*a+l*n)*t;return{name:e.name,tasks:t,cost:o,inputTokens:a,outputTokens:n}}).sort((e,t)=>t.cost-e.cost)}),f=n(()=>{const e={};return t.selectedModels.forEach(t=>{e[t.provider]||(e[t.provider]=[]),e[t.provider].push(t)}),e}),k=n(()=>{const e=[];t.taskCount>1e3&&e.push(`Large run with ${t.taskCount} tasks will take significant time to complete`),t.estimatedCost>10&&e.push(`Estimated cost of $${t.estimatedCost.toFixed(2)} is quite high`);const s=t.selectedModels.filter(e=>void 0===e.input_cost||void 0===e.output_cost);return s.length>0&&e.push(`Cost data unavailable for ${s.length} model${s.length>1?"s":""}`),t.formData.parameters.concurrency>5&&t.selectedModels.some(e=>e.provider.includes("OpenAI"))&&e.push("High concurrency with OpenAI models may hit rate limits"),e}),_=n(()=>{const e=[];return t.taskCount>100&&1===t.formData.parameters.concurrency&&e.push("Consider increasing concurrency to speed up large runs"),t.formData.parameters.temperature>1.5&&e.push("Very high temperature may produce inconsistent results"),1===t.selectedModels.length&&e.push("Consider testing with multiple models for comparison"),e}),x=e=>void 0===e?"?":0===e?"0":e<1e-5?e.toExponential(2):e<.001?e.toFixed(6):e<.01?e.toFixed(4):e.toFixed(3),C=e=>e>=1e6?`${(e/1e6).toFixed(1)}M`:e>=1e3?`${(e/1e3).toFixed(1)}K`:e.toString();return(e,t)=>{return i(),o("div",Ws,[t[14]||(t[14]=r("div",{class:"step-header"},[r("h3",null,"Review")],-1)),r("div",zs,[r("div",Js,[r("div",Ks,[r("div",Zs,[r("h4",null,p(e.taskCount),1),t[0]||(t[0]=r("span",null,"Total Tasks",-1))]),r("div",Xs,[r("h4",null,p(m.value),1),t[1]||(t[1]=r("span",null,"Variable Combinations",-1))]),r("div",Ys,[r("h4",null,p(e.selectedModels.length),1),t[2]||(t[2]=r("span",null,"Models",-1))]),r("div",ea,[r("h4",null,p(C(b.value.input))+" / "+p(C(b.value.output)),1),t[3]||(t[3]=r("span",null,"Input / Output Tokens",-1))]),r("div",ta,[e.estimatedCost>0?(i(),o("h4",sa," $"+p(e.estimatedCost.toFixed(4)),1)):(i(),o("h4",aa," Unknown ")),t[4]||(t[4]=r("span",null,"Est. Cost",-1))])])]),y.value.length>0?(i(),o("div",na,[t[5]||(t[5]=r("h4",null,"Cost by Model",-1)),r("div",la,[(i(!0),o(u,null,d(y.value,e=>(i(),o("div",{key:e.name,class:"cost-item"},[r("span",oa,p(e.name),1),r("span",ia,p(e.tasks)+" tasks Ã— "+p(e.inputTokens)+"+"+p(e.outputTokens)+" tokens",1),r("span",ra,"$"+p(e.cost.toFixed(4)),1)]))),128))])])):c("",!0),e.selectedDesign&&(e.selectedDesign.variables||e.selectedDesign.variable_list_refs)?(i(),o("div",ca,[r("h4",null,"Variables ("+p(v.value)+")",1),r("div",ua,[(i(!0),o(u,null,d(e.selectedDesign.variables||{},(e,t)=>(i(),o("div",{key:t,class:"variable-item"},[r("span",da,p(t)+":",1),r("span",pa,p(Array.isArray(e)?e.length:1)+" values",1)]))),128)),(i(!0),o(u,null,d(e.selectedDesign.variable_list_refs||{},(e,t)=>(i(),o("div",{key:`list_${t}`,class:"variable-item"},[r("span",va,p(t)+":",1),r("span",ma,p(h(e))+" values",1)]))),128))])])):c("",!0),r("div",ga,[t[9]||(t[9]=r("div",{class:"section-header"},[r("h4",null,"Configuration")],-1)),r("div",ha,[r("div",ba,[r("div",ya,[t[6]||(t[6]=r("span",{class:"config-label"},"Temperature:",-1)),r("span",fa,p(e.formData.parameters.temperature),1),r("span",ka,p((n=e.formData.parameters.temperature,n<=.2?"Very deterministic":n<=.5?"Focused responses":n<=.8?"Balanced creativity":n<=1.2?"Creative responses":"Highly variable")),1)]),r("div",_a,[t[7]||(t[7]=r("span",{class:"config-label"},"Max Tokens:",-1)),r("span",xa,p(e.formData.parameters.max_tokens),1),r("span",Ca,p((a=e.formData.parameters.max_tokens,a<=200?"Brief answers":a<=500?"Short responses":a<=1e3?"Medium length":a<=2e3?"Long responses":"Very detailed")),1)]),r("div",wa,[t[8]||(t[8]=r("span",{class:"config-label"},"Concurrency:",-1)),r("span",Ma,p(e.formData.parameters.concurrency),1),r("span",Ea,p((s=e.formData.parameters.concurrency,s<=2?"Conservative pace":s<=4?"Balanced speed":s<=6?"Fast execution":"Maximum speed")),1)])])])]),r("div",Sa,[t[10]||(t[10]=r("div",{class:"section-header"},[r("h4",null,"Selected Models")],-1)),r("div",Pa,[r("div",Da,[(i(!0),o(u,null,d(f.value,(e,t)=>(i(),o("div",{key:t,class:"provider-group"},[r("h5",null,p(t),1),r("div",Oa,[(i(!0),o(u,null,d(e,e=>{return i(),o("div",{key:e.id,class:"model-summary-item"},[r("span",Ta,p(e.name),1),r("div",Ia,[void 0!==e.input_cost&&void 0!==e.output_cost?(i(),o("span",Aa," $"+p(x(e.input_cost))+"/$"+p(x(e.output_cost)),1)):(i(),o("span",$a," Cost N/A ")),e.context_window?(i(),o("span",Fa,p((t=e.context_window,t>=1e6?`${(t/1e6).toFixed(1)}M`:t>=1e3?`${(t/1e3).toFixed(0)}K`:t.toString()))+" ctx ",1)):c("",!0)])]);var t}),128))])]))),128))])])]),k.value.length>0||_.value.length>0?(i(),o("div",La,[t[13]||(t[13]=r("div",{class:"section-header"},[r("h4",null,"Recommendations")],-1)),k.value.length>0?(i(),o("div",Ra,[t[11]||(t[11]=r("h5",null,"âš ï¸ Warnings",-1)),r("ul",null,[(i(!0),o(u,null,d(k.value,e=>(i(),o("li",{key:e},p(e),1))),128))])])):c("",!0),_.value.length>0?(i(),o("div",Ba,[t[12]||(t[12]=r("h5",null,"ðŸ’¡ Recommendations",-1)),r("ul",null,[(i(!0),o(u,null,d(_.value,e=>(i(),o("li",{key:e},p(e),1))),128))])])):c("",!0)])):c("",!0)])]);var s,a,n}}}),[["__scopeId","data-v-13d7f55d"]]),Va={class:"wizard-modal"},Ua={class:"wizard-header"},Na={class:"header-left"},qa={class:"progress-steps"},Qa={class:"step-circle"},Ha={class:"step-label"},Ga={class:"wizard-content"},Wa={class:"step-content"},za={class:"wizard-footer"},Ja={class:"footer-buttons"},Ka=["disabled"],Za={class:"primary-actions"},Xa=["disabled"],Ya=["disabled"],en=S(s({__name:"RunCreationWizard",props:{run:{},preselectedModelIds:{},preselectedDesignId:{}},emits:["close","saved"],setup(e,{emit:t}){const s=e,v=t,m=P(),y=D(),k=O(),_=I(),x=a(0),C=[{id:"basics",title:"Basics"},{id:"models",title:"Models & Configuration"},{id:"review",title:"Review"}],w=a({name:"",design_id:null,models:[],parameters:{temperature:.7,max_tokens:25,concurrency:3,repetitions_per_prompt:1},executionType:"browser",pythonExportOptions:{outputFormat:"both",enableProgressBar:!0,verboseLogging:!1,enableCheckpointing:!0,maxRetries:3,retryBackoffMultiplier:2,continueOnError:!0,pythonVersion:"3.9+",includeApiLogs:!1}}),M=n(()=>m.designs),E=n(()=>y.enabledModels),S=n(()=>w.value.design_id&&M.value.find(e=>e.id===w.value.design_id)||null),$=n(()=>E.value.filter(e=>w.value.models.includes(e.id))),L=a(0),R=a(null);l(()=>[S.value,$.value,w.value.parameters.repetitions_per_prompt,_.variableLists],async()=>{if(console.log("=== COMPUTING TASK COUNT ==="),console.log("selectedDesign.value:",!!S.value),console.log("selectedModels.value.length:",$.value.length),!S.value||0===$.value.length)return console.log("Returning 0 because no design or no models selected"),void(L.value=0);try{R.value=null;const e=S.value.variables||{},t=S.value.variable_list_refs||{};console.log("=== TASK COUNT CALCULATION ==="),console.log("Selected Design:",S.value),console.log("Design name:",S.value.name),console.log("Design variables:",e),console.log("Design variable_list_refs:",t),console.log("Variable keys:",Object.keys(e)),console.log("Variable list ref keys:",Object.keys(t)),console.log("Available variable lists in store:",_.variableLists),console.log("Store lists with details:",_.variableLists.map(e=>({id:e.id,name:e.name,valueCount:e.values?.length,hasValues:!!e.values,firstFewValues:e.values?.slice(0,3)})));const s=F.getInstance(),a=await s.calculateExperimentMetrics(S.value,_.variableLists);console.log("Service calculation result:",a);for(const[l,o]of Object.entries(e))Array.isArray(o)&&console.log(`Simple variable ${l}: ${o.length} values`);for(const[l,o]of Object.entries(t)){const e=_.variableLists.find(e=>e.id===o);e&&e.values?console.log(`Compound variable ${l}: ${e.values.length} values from list ${e.name}`):console.log(`Compound variable ${l}: list ${o} not found or has no values`)}const n=a.totalCombinations*$.value.length*w.value.parameters.repetitions_per_prompt;console.log(`Total task count: ${a.totalCombinations} combinations Ã— ${$.value.length} models Ã— ${w.value.parameters.repetitions_per_prompt} repetitions = ${n}`),L.value=n}catch(e){R.value=`Task count calculation error: ${e instanceof Error?e.message:"Unknown error"}`,L.value=0,console.error("Task count calculation failed:",e)}},{immediate:!0,deep:!0});const B=n(()=>{if(!S.value||0===$.value.length)return 0;const e=S.value.variables||{},t=S.value.variable_list_refs||{};let s=1;for(const[i,r]of Object.entries(e))Array.isArray(r)?s*=r.length:r&&(s*=1);for(const[i,r]of Object.entries(t)){const e=_.variableLists.find(e=>e.id===r);e&&e.values&&(s*=e.values.length)}if(1===s&&0===Object.keys(e).length&&0===Object.keys(t).length)return 0;const a={};for(const[i,r]of Object.entries(e))a[i]=Array.isArray(r)?r[0]:r;const n=A(S.value.prompt_template,a),l=w.value.parameters.max_tokens;let o=0;for(const i of $.value)if(void 0!==i.input_cost&&void 0!==i.output_cost){o+=(("openrouter"===i.provider?i.input_cost:i.input_cost/1e6)*n+("openrouter"===i.provider?i.output_cost:i.output_cost/1e6)*l)*s*w.value.parameters.repetitions_per_prompt}return o}),j=n(()=>{switch(x.value){case 0:return!(!w.value.name.trim()||!w.value.design_id);case 1:return w.value.models.length>0;default:return!0}}),V=n(()=>w.value.name.trim()&&w.value.design_id&&w.value.models.length>0);b(async()=>{console.log("ðŸ”¥ðŸ”¥ðŸ”¥ RUN CREATION WIZARD MOUNTED ðŸ”¥ðŸ”¥ðŸ”¥"),console.log("Loading data..."),await Promise.all([m.loadDesigns(),y.loadModels(),_.loadVariableLists()]),console.log("âœ… Data loaded!"),console.log("Designs:",m.designs),console.log("Variable lists:",_.variableLists),l(()=>w.value.design_id,e=>{if(console.log("ðŸŽ¯ DESIGN ID CHANGED:",e),e){const t=M.value.find(t=>t.id===e);console.log("Selected design:",t),console.log("variable_list_refs:",t?.variable_list_refs),console.log("Forcing taskCount calculation...");const s=L.value;console.log("Task count result:",s)}}),s.run?w.value={name:s.run.name,design_id:s.run.design_id,models:s.run.models||[],parameters:{...s.run.parameters,repetitions_per_prompt:s.run.parameters.repetitions_per_prompt??1},executionType:"browser",pythonExportOptions:w.value.pythonExportOptions}:(s.preselectedDesignId&&(w.value.design_id=s.preselectedDesignId,w.value.name=await(async e=>{const t=M.value.find(t=>t.id===e);if(!t)return"New Run";const s=k.runs.filter(t=>t.design_id===e).length+1,a=(new Date).toISOString().split("T")[0];return`${t.name} - ${a} #${s}`})(s.preselectedDesignId)),s.preselectedModelIds&&(w.value.models=[...s.preselectedModelIds],s.preselectedDesignId||(x.value=1)))});const U=()=>{x.value<C.length-1&&x.value++},N=()=>{x.value>0&&x.value--},q=async()=>{try{if(!w.value.design_id)return void console.error("Design ID is required");if("python_export"===w.value.executionType){const{PythonExportService:e}=await T(async()=>{const{PythonExportService:e}=await import("./PythonExportService-Cr8DU2nV.js");return{PythonExportService:e}},__vite__mapDeps([0,1,2,3,4]),import.meta.url),{downloadBlob:t}=await T(async()=>{const{downloadBlob:e}=await import("./fileDownload-C1JQo-y2.js");return{downloadBlob:e}},[],import.meta.url),s=e.getInstance(),a=await s.exportRunConfiguration(w.value,w.value.pythonExportOptions);a.success&&a.blob?(t(a.blob,a.filename),v("close")):console.error("Export failed:",a.error)}else{const e={name:w.value.name,design_id:w.value.design_id,models:w.value.models,parameters:w.value.parameters,status:"draft"};let t;t=s.run?await k.updateRun(s.run.id,e):await k.createRun(e),v("saved",t),v("close")}}catch(e){console.error("Error saving/exporting run:",e)}};return(e,t)=>(i(),o("div",{class:"modal-overlay",onClick:t[8]||(t[8]=h(t=>e.$emit("close"),["self"]))},[r("div",Va,[r("div",Ua,[r("div",Na,[r("h3",null,p(e.run?"Edit":"Create")+" Run",1),r("div",qa,[(i(),o(u,null,d(C,(e,t)=>r("div",{key:e.id,class:g(["progress-step",{active:x.value===t,completed:t<x.value}])},[r("div",Qa,p(t<x.value?"âœ“":t+1),1),r("span",Ha,p(e.title),1)],2)),64))])]),r("button",{class:"close-btn",onClick:t[0]||(t[0]=t=>e.$emit("close"))}," Ã— ")]),r("div",Ga,[r("div",Wa,[0===x.value?(i(),f(fe,{key:0,name:w.value.name,"onUpdate:name":t[1]||(t[1]=e=>w.value.name=e),"design-id":w.value.design_id,"onUpdate:designId":t[2]||(t[2]=e=>w.value.design_id=e),"execution-type":w.value.executionType,"onUpdate:executionType":t[3]||(t[3]=e=>w.value.executionType=e),designs:M.value,"selected-design":S.value},null,8,["name","design-id","execution-type","designs","selected-design"])):c("",!0),1===x.value?(i(),f(Gs,{key:1,"selected-models":w.value.models,"onUpdate:selectedModels":t[4]||(t[4]=e=>w.value.models=e),parameters:w.value.parameters,"onUpdate:parameters":t[5]||(t[5]=e=>w.value.parameters=e),"python-export-options":w.value.pythonExportOptions,"onUpdate:pythonExportOptions":t[6]||(t[6]=e=>w.value.pythonExportOptions=e),"all-models":E.value,design:S.value,"task-count":L.value,"execution-type":w.value.executionType},null,8,["selected-models","parameters","python-export-options","all-models","design","task-count","execution-type"])):c("",!0),2===x.value?(i(),f(ja,{key:2,"form-data":w.value,"selected-design":S.value,"selected-models":$.value,"task-count":L.value,"estimated-cost":B.value},null,8,["form-data","selected-design","selected-models","task-count","estimated-cost"])):c("",!0)])]),r("div",za,[r("div",Ja,[r("button",{class:"btn btn-secondary",disabled:0===x.value,onClick:N}," Back ",8,Ka),r("div",Za,[r("button",{class:"btn btn-outline",onClick:t[7]||(t[7]=t=>e.$emit("close"))}," Cancel "),x.value<C.length-1?(i(),o("button",{key:0,class:"btn btn-primary",disabled:!j.value,onClick:U}," Next ",8,Xa)):(i(),o("button",{key:1,class:"btn btn-primary",disabled:!V.value,onClick:q},p(s.run?"Update Run":"python_export"===w.value.executionType?"Export Python Package":"Create Run"),9,Ya))])])])])]))}}),[["__scopeId","data-v-51170cfe"]]),tn=s({__name:"RunEditorModal",props:{run:{},preselectedModelIds:{},preselectedDesignId:{}},emits:["close","saved"],setup:e=>(e,t)=>(i(),f(en,{run:e.run,"preselected-model-ids":e.preselectedModelIds,"preselected-design-id":e.preselectedDesignId,onClose:t[0]||(t[0]=t=>e.$emit("close")),onSaved:t[1]||(t[1]=t=>e.$emit("saved",t))},null,8,["run","preselected-model-ids","preselected-design-id"]))}),sn={class:"runs-view"},an={class:"header"},nn={key:0,class:"loading"},ln={key:1,class:"empty-state"},on={key:2,class:"runs-container"},rn={class:"sort-controls"},cn={class:"runs-table"},un={class:"run-main"},dn={class:"run-info"},pn={class:"run-header"},vn={class:"run-name"},mn={class:"run-meta"},gn={key:0},hn={key:1},bn={class:"run-actions"},yn=["onClick"],fn=["onClick"],kn=["onClick"],_n=["onClick"],xn=["onClick"],Cn=["onClick"],wn=S(s({__name:"RunsView",setup(e){const t=_(),s=x(),l=O(),{runs:m,loading:h}=C(l),y=a(!1),E=a(null),S=a("updated_at"),P=a("desc"),D=n(()=>[...m.value].sort((e,t)=>{let s,a;switch(S.value){case"name":s=e.name.toLowerCase(),a=t.name.toLowerCase();break;case"created_at":s=new Date(e.created_at||0).getTime(),a=new Date(t.created_at||0).getTime();break;case"updated_at":s=new Date(e.updated_at||e.created_at||0).getTime(),a=new Date(t.updated_at||t.created_at||0).getTime();break;case"status":const n={pending:0,running:1,completed:2,failed:3};s=n[e.status]??999,a=n[t.status]??999;break;default:return 0}return s<a?"asc"===P.value?-1:1:s>a?"asc"===P.value?1:-1:0})),T=n(()=>{const e=s.query.create;return e?parseInt(e):null});async function I(e){if(E.value)await l.updateRun(E.value.id,e);else{const s=await l.createRun(e);await l.startRun(s.id),t.push("/active")}A()}function A(){y.value=!1,E.value=null,s.query.create&&("designs"===s.query.from?t.push({name:"designs"}):t.replace({name:"runs"}))}function $(){}function F(){P.value="asc"===P.value?"desc":"asc"}function L(e){return e?new Date(e).toLocaleDateString():"N/A"}return b(()=>{l.loadRuns(),T.value&&(y.value=!0)}),(e,s)=>(i(),o("div",sn,[r("div",an,[s[3]||(s[3]=r("h2",null,"Runs",-1)),r("button",{class:"btn btn-primary",onClick:s[0]||(s[0]=e=>y.value=!0)}," Create Run ")]),k(h)?(i(),o("div",nn," Loading runs... ")):0===k(m).length?(i(),o("div",ln,[s[4]||(s[4]=r("p",null,"No runs created yet",-1)),r("button",{class:"btn btn-primary",onClick:s[1]||(s[1]=e=>y.value=!0)}," Create your first run ")])):(i(),o("div",on,[r("div",rn,[s[6]||(s[6]=r("label",null,"Sort by:",-1)),v(r("select",{"onUpdate:modelValue":s[2]||(s[2]=e=>S.value=e),onChange:$},s[5]||(s[5]=[r("option",{value:"updated_at"}," Last Updated ",-1),r("option",{value:"name"}," Name ",-1),r("option",{value:"created_at"}," Created Date ",-1),r("option",{value:"status"}," Status ",-1)]),544),[[w,S.value]]),r("button",{class:"sort-toggle",onClick:F},p("desc"===P.value?"â†“":"â†‘"),1)]),r("div",cn,[(i(!0),o(u,null,d(D.value,e=>(i(),o("div",{key:e.id,class:"run-row"},[r("div",un,[r("div",dn,[r("div",pn,[r("h3",vn,p(e.name),1),r("span",{class:g(["run-status",`status-${e.status}`])},p(e.status),3)]),r("p",mn,[M(p(e.total_tasks||0)+" tasks ("+p(e.completed_tasks||0)+" processed",1),e.error_count?(i(),o("span",gn,", "+p(e.error_count)+" errors",1)):c("",!0),M(") â€¢ Created "+p(L(e.created_at))+" ",1),e.updated_at&&e.updated_at!==e.created_at?(i(),o("span",hn," â€¢ Updated "+p(L(e.updated_at)),1)):c("",!0)])]),r("div",bn,["pending"===e.status?(i(),o("button",{key:0,class:"btn btn-primary btn-small",onClick:s=>async function(e){await l.startRun(e.id),t.push("/active")}(e)}," Start ",8,yn)):c("",!0),"running"===e.status?(i(),o("button",{key:1,class:"btn btn-danger btn-small",onClick:t=>async function(e){await l.stopRun(e.id)}(e)}," Stop ",8,fn)):c("",!0),r("button",{class:"btn btn-secondary btn-small",onClick:s=>function(e){t.push(`/results/${e.id}`)}(e)}," Results ",8,kn),r("button",{class:"btn btn-secondary btn-small",onClick:t=>async function(e){if(e.id){const t=await l.getRunById(e.id);E.value=t||e}else E.value=e}(e)}," Edit ",8,_n),r("button",{class:"btn btn-secondary btn-small",onClick:t=>function(e){const t={version:"1.0",exportDate:(new Date).toISOString(),run:e},s=JSON.stringify(t,null,2),a=new Blob([s],{type:"application/json"}),n=URL.createObjectURL(a),l=document.createElement("a");l.href=n,l.download=`run_${e.name.replace(/[^a-zA-Z0-9]/g,"_")}_${(new Date).toISOString().split("T")[0]}.json`,l.click(),URL.revokeObjectURL(n)}(e)}," Export ",8,xn),r("button",{class:"btn btn-danger btn-small",onClick:t=>async function(e){confirm(`Delete run "${e.name}"? This action cannot be undone.`)&&await l.deleteRun(e.id)}(e)}," Delete ",8,Cn)])])]))),128))])])),y.value||E.value?(i(),f(tn,{key:3,run:E.value||void 0,"preselected-design-id":T.value||void 0,onSaved:I,onClose:A},null,8,["run","preselected-design-id"])):c("",!0)]))}}),[["__scopeId","data-v-06de330d"]]);export{wn as default};
