import{u as e}from"./useLiveDataSingle-BXJl31e-.js";import{l as t,d as s,n as o,_ as n}from"./index-DiVikgh0.js";import{a}from"./cost-formatting-DSpbVMtV.js";import{d as i,c as u,ab as l,a4 as r,F as p,a0 as c,a1 as d,G as m,a3 as k,_ as v}from"./vendor-CdfxntmD.js";const f={key:0,class:"cost-group"},T={class:"cost-item"},b={class:"cost-value"},x={class:"cost-value"},g={key:1,class:"cost-group"},C={class:"enviro-group"},$={class:"enviro-item"},F={class:"enviro-item"},y={class:"enviro-item"},h={key:0,class:"cost-group"},O={class:"cost-item"},P={class:"cost-value"},L={class:"cost-value"},w={class:"enviro-group"},M={class:"enviro-item"},W={class:"enviro-item"},I={class:"enviro-item"},D={key:0,class:"cost-item financial"},E={key:0,class:"cost-value"},_={key:1,class:"cost-value"},j={class:"cost-item environmental"},z={class:"enviro-item"},R={class:"enviro-value"},U={class:"enviro-item"},K={class:"enviro-value"},N={class:"enviro-item"},G={class:"enviro-value"},S={key:0,class:"cost-unit"},V=n(i({__name:"ModelCostDisplayV2",props:{model:{},mode:{default:"per-thousand"},inputTokens:{default:1e3},outputTokens:{default:1e3},minOutputTokens:{default:10},maxOutputTokens:{},layout:{default:"inline"},size:{default:"medium"}},setup(n){const i=n,{data:V,loading:q}=e(()=>s.settings.get("main"),{debounce:100}),A=u(()=>{if(!V.value||q.value)return!0;const e=V.value.financialCostsEnabled??!0;return t.debug("ModelCostDisplay showFinancial check",{financialCostsEnabled:e,settingsReady:!q.value,mode:i.mode,model:i.model?.displayName}),e}),B=u(()=>!(!V.value||q.value)&&(V.value.environmentalCostsEnabled??!1));function H(){if(!i.model.capabilities)return"â€”";const e=i.model.capabilities.inputCostPerToken||0,t=i.model.capabilities.outputCostPerToken||0;if("per-thousand"===i.mode){return a(1e3*(e+t))}if("total"===i.mode){const s=e*i.inputTokens+t*i.outputTokens;return a(s)}return"â€”"}function J(e){if(0===e)return"0";if(e>=.01)return e.toFixed(2).replace(/\.?0+$/,"");const t=e.toFixed(10).match(/^0\.0*[1-9]/);if(t){const s=t[0].length-2;return e.toFixed(s)}return e.toFixed(4)}function Q(){if(!i.model.capabilities)return"0";return J(1e3*(i.model.capabilities.inputCostPerToken||0))}function X(){if(!i.model.capabilities)return"0";return J(1e3*(i.model.capabilities.outputCostPerToken||0))}function Y(){if(!i.model.capabilities)return"?";const e=i.model.capabilities.inputCostPerToken||0,s=i.model.capabilities.outputCostPerToken||0,o=e*i.inputTokens+s*i.minOutputTokens;return t.debug("formatRangeMin",{inputTokens:i.inputTokens,minOutputTokens:i.minOutputTokens,inputCost:e,outputCost:s,minCost:o}),J(o)}function Z(){if(!i.model.capabilities||!i.maxOutputTokens)return"?";const e=i.model.capabilities.inputCostPerToken||0,s=i.model.capabilities.outputCostPerToken||0,o=e*i.inputTokens+s*i.maxOutputTokens;return t.debug("formatRangeMax",{inputTokens:i.inputTokens,maxOutputTokens:i.maxOutputTokens,inputCost:e,outputCost:s,maxCost:o}),J(o)}function ee(e){if(!B.value)return"??";if(!o.hasDataForModel(i.model.provider,i.model.modelId))return"-";const t="total"===i.mode?i.inputTokens+i.outputTokens:1e3,s=o.calculateEnvironmentalCostUnsafe(i.model.provider,i.model.modelId,t)[e];if(0===s)return"-";switch(e){case"carbon":return s<.001?"<1Î¼g":s<1?`${(1e3*s).toFixed(0)}Î¼g`:s<1e3?`${s.toFixed(1)}mg`:`${(s/1e3).toFixed(1)}g`;case"water":return s<.001?"<1nL":s<1?`${(1e3*s).toFixed(0)}nL`:s<1e3?`${s.toFixed(1)}Î¼L`:`${(s/1e3).toFixed(1)}mL`;case"energy":return s<.001?"<1Î¼Wh":s<1?`${(1e3*s).toFixed(0)}Î¼Wh`:s<1e3?`${s.toFixed(1)}mWh`:`${(s/1e3).toFixed(1)}Wh`;default:return"-"}}function te(e){if(!B.value)return"??";if(!o.hasDataForModel(i.model.provider,i.model.modelId))return"-";if(!i.maxOutputTokens)return"?";const t=i.inputTokens+i.minOutputTokens,s=i.inputTokens+i.maxOutputTokens,n=o.calculateEnvironmentalCostUnsafe(i.model.provider,i.model.modelId,t),a=o.calculateEnvironmentalCostUnsafe(i.model.provider,i.model.modelId,s),u=n[e],l=a[e];if(0===u&&0===l)return"-";const r=t=>{switch(e){case"carbon":return t<.001?"<1Î¼g":t<1?`${(1e3*t).toFixed(0)}Î¼g`:t<1e3?`${t.toFixed(0)}mg`:`${(t/1e3).toFixed(1)}g`;case"water":return t<.001?"<1nL":t<1?`${(1e3*t).toFixed(0)}nL`:t<1e3?`${t.toFixed(0)}Î¼L`:`${(t/1e3).toFixed(1)}mL`;case"energy":return t<.001?"<1Î¼Wh":t<1?`${(1e3*t).toFixed(0)}Î¼Wh`:t<1e3?`${t.toFixed(0)}mWh`:`${(t/1e3).toFixed(1)}Wh`;default:return"-"}};return`${r(u)}-${r(l)}`}return t.debug("ModelCostDisplay props received",{model:i.model?.displayName,mode:i.mode,inputTokens:i.inputTokens,outputTokens:i.outputTokens,minOutputTokens:i.minOutputTokens,maxOutputTokens:i.maxOutputTokens,modelCapabilities:!!i.model?.capabilities,inputCostPerToken:i.model?.capabilities?.inputCostPerToken,outputCostPerToken:i.model?.capabilities?.outputCostPerToken}),(e,t)=>(v(),l("div",{class:r(["model-cost-display",[`layout-${e.layout}`,`size-${e.size}`]])},["range"===e.mode?(v(),l(p,{key:0},[A.value&&e.maxOutputTokens?(v(),l("span",f,[d("span",T,[d("span",b,"$"+k(Y()),1),t[0]||(t[0]=m(" - ")),d("span",x,"$"+k(Z()),1)])])):A.value?(v(),l("span",g,t[1]||(t[1]=[d("span",{class:"cost-item"},[d("span",{class:"cost-value"},"Cost: ??")],-1)]))):c("",!0),t[4]||(t[4]=d("span",{class:"cost-tab"},null,-1)),d("span",C,[d("span",$,"COâ‚‚ "+k(te("carbon")),1),t[2]||(t[2]=d("span",{class:"cost-tab"},null,-1)),d("span",F,"ðŸ’§"+k(te("water")),1),t[3]||(t[3]=d("span",{class:"cost-tab"},null,-1)),d("span",y,"âš¡"+k(te("energy")),1)])],64)):"input-output"===e.mode?(v(),l(p,{key:1},[A.value?(v(),l("span",h,[d("span",O,[d("span",P,"$"+k(Q()),1),t[5]||(t[5]=m("/1K input + ")),d("span",L,"$"+k(X()),1),t[6]||(t[6]=m("/1K output "))])])):c("",!0),t[9]||(t[9]=d("span",{class:"cost-tab"},null,-1)),d("span",w,[d("span",M,"COâ‚‚ "+k(ee("carbon")),1),t[7]||(t[7]=d("span",{class:"cost-tab"},null,-1)),d("span",W,"ðŸ’§"+k(ee("water")),1),t[8]||(t[8]=d("span",{class:"cost-tab"},null,-1)),d("span",I,"âš¡"+k(ee("energy")),1)])],64)):(v(),l(p,{key:2},[A.value?(v(),l("div",D,["per-thousand"===e.mode?(v(),l("span",E,[m(k(H())+" ",1),t[10]||(t[10]=d("span",{class:"cost-unit"},"/ 1,000 tokens",-1))])):"total"===e.mode?(v(),l("span",_,k(H()),1)):c("",!0)])):c("",!0),d("div",j,[d("span",z,[t[11]||(t[11]=d("span",{class:"enviro-icon"},"COâ‚‚",-1)),d("span",R,k(ee("carbon")),1)]),d("span",U,[t[12]||(t[12]=d("span",{class:"enviro-icon"},"ðŸ’§",-1)),d("span",K,k(ee("water")),1)]),d("span",N,[t[13]||(t[13]=d("span",{class:"enviro-icon"},"âš¡",-1)),d("span",G,k(ee("energy")),1)]),"per-thousand"===e.mode?(v(),l("span",S,"/ 1,000")):c("",!0)])],64))],2))}}),[["__scopeId","data-v-f85cd410"]]);export{V as M};
