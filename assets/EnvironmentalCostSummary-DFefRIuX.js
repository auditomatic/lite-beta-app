import{x as e,_ as a}from"./index-B_4MOQZM.js";import{a as t}from"./designs-db-gRa2_N1v.js";import{f as n,c as r,d as o,h as s,a6 as l,a1 as i,Y as c,aa as u,_ as m,a0 as d}from"./vendor-AtAbR8ZE.js";function g(){const a=n(!1),o=n(null);return{calculateEnvironmentalCost:async(t,n,r)=>{try{a.value=!0,o.value=null;return await e.calculateEnvironmentalCost(t,n,r)}catch(s){throw o.value=s instanceof Error?s.message:"Calculation failed",s}finally{a.value=!1}},calculateEnvironmentalCostForDesign:async(e,n,r={})=>{try{a.value=!0,o.value=null;return await t.calculateEnvironmentalCostEstimate(e,n,r)}catch(s){throw o.value=s instanceof Error?s.message:"Calculation failed",s}finally{a.value=!1}},hasDataForModel:(a,t)=>e.hasDataForModel(a,t),formatEnvironmentalCost:(e,a)=>{if(0===e)return"â€”";switch(a){case"carbon":return e<.001?"<1mg COâ‚‚e":e<1?`${(1e3*e).toFixed(0)}mg COâ‚‚e`:`${e.toFixed(3)}g COâ‚‚e`;case"water":return e<.1?"<0.1mL":`${e.toFixed(1)}mL`;case"energy":return e<.001?"<1mWh":e<1?`${(1e3*e).toFixed(0)}mWh`:`${e.toFixed(3)}Wh`;default:return e.toString()}},formatCarbonEquivalent:e=>{if(0===e)return"â€”";const a=e/251,t=e/3.75,n=e/21800;return a<.01?"<10m car drive":a<1?`${(1e3*a).toFixed(0)}m car drive`:a<100?`${a.toFixed(1)} car miles`:t<100?`${t.toFixed(0)} phone charges`:`${n.toFixed(3)} trees needed`},formatWaterEquivalent:e=>{if(0===e)return"â€”";const a=e/500,t=e/250,n=e/3e5;return t<.1?"<0.1 glass":t<1?`${t.toFixed(1)} glass`:a<10?`${a.toFixed(1)} bottles`:n<.1?`${(1e3*n).toFixed(0)}mL of bath`:`${n.toFixed(2)} baths`},formatEnergyEquivalent:e=>{if(0===e)return"â€”";const a=e/5,t=e/1e3,n=e/130;return a<.01?"<1% phone charge":a<1?`${(100*a).toFixed(0)}% phone charge`:a<10?`${a.toFixed(1)} phone charges`:n<1?`${(60*n).toFixed(0)}min TV`:n<24?`${n.toFixed(1)}h TV`:`${t.toFixed(2)}h home power`},getConfidenceBadgeClass:e=>{switch(e){case"high":return"bg-green-100 text-green-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}},getImpactLevel:(e,a)=>{if(0===e)return"low";const t={carbon:{medium:.01,high:.1},water:{medium:.1,high:1},energy:{medium:.01,high:.1}}[a];return e<t.medium?"low":e<t.high?"medium":"high"},isCalculating:r(()=>a.value),error:r(()=>o.value)}}const v={class:"summary-item carbon"},h={class:"summary-value"},y={class:"summary-item water"},f={class:"summary-value"},x={class:"summary-item energy"},p={class:"summary-value"},F={key:0,class:"summary-total"},w={class:"total-label"},$={class:"total-confidence"},b=a(o({__name:"EnvironmentalCostSummary",props:{model:{},design:{},layout:{default:"compact"},showTotal:{type:Boolean,default:!1},totalCalls:{},totalTokens:{}},setup(e){const a=e,{calculateEnvironmentalCost:t,calculateEnvironmentalCostForDesign:o,hasDataForModel:b}=g(),C=n({carbon:0,water:0,energy:0,confidence:"none",source:"no-data"});s(async()=>{if(a.totalTokens)try{C.value=await t(a.model.provider,a.model.modelId,a.totalTokens)}catch{C.value={carbon:0,water:0,energy:0,confidence:"none",source:"no-data"}}else if(a.design)try{C.value=await o(a.design,a.model,{})}catch{C.value={carbon:0,water:0,energy:0,confidence:"none",source:"no-data"}}else C.value={carbon:0,water:0,energy:0,confidence:"none",source:"no-data"}});const E=r(()=>b(a.model.provider,a.model.modelId)||"no-data"!==C.value.source);function W(e,a){if(0===e)return"â€”";switch(a){case"carbon":return e<.001?"<1mg":e<1?`${(1e3*e).toFixed(0)}mg`:`${e.toFixed(1)}g`;case"water":return e<.1?"<0.1mL":`${e.toFixed(1)}mL`;case"energy":return e<.001?"<1mWh":e<1?`${(1e3*e).toFixed(0)}mWh`:`${e.toFixed(1)}Wh`;default:return e.toString()}}return(e,a)=>E.value?(c(),l("div",{key:0,class:u(["environmental-summary",[`layout-${e.layout}`]])},[m("div",v,[a[0]||(a[0]=m("span",{class:"summary-icon"},"ðŸŒ±",-1)),m("span",h,d(W(C.value.carbon,"carbon")),1),a[1]||(a[1]=m("span",{class:"summary-unit"},"COâ‚‚e",-1))]),m("div",y,[a[2]||(a[2]=m("span",{class:"summary-icon"},"ðŸ’§",-1)),m("span",f,d(W(C.value.water,"water")),1),a[3]||(a[3]=m("span",{class:"summary-unit"},"Hâ‚‚O",-1))]),m("div",x,[a[4]||(a[4]=m("span",{class:"summary-icon"},"âš¡",-1)),m("span",p,d(W(C.value.energy,"energy")),1),a[5]||(a[5]=m("span",{class:"summary-unit"},"Wh",-1))]),e.showTotal&&e.totalCalls?(c(),l("div",F,[m("div",w,d(e.totalCalls)+" calls",1),m("div",$,d(C.value.confidence),1)])):i("",!0)],2)):i("",!0)}}),[["__scopeId","data-v-3c3b67dc"]]);export{b as E,g as u};
