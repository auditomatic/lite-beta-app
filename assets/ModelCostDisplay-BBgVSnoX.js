import{e,l as t,v as s,_ as o}from"./index-C6frMIbt.js";import{a as n}from"./cost-formatting-Bv_drrqY.js";import{d as a,c as i,aa as u,a3 as l,F as r,$ as p,a0 as c,G as d,a2 as m,Z as k}from"./vendor-B8IWC-3k.js";const v={key:0,class:"cost-group"},T={class:"cost-item"},f={class:"cost-value"},b={class:"cost-value"},x={key:1,class:"cost-group"},C={class:"enviro-group"},g={class:"enviro-item"},$={class:"enviro-item"},F={class:"enviro-item"},y={key:0,class:"cost-group"},h={class:"cost-item"},O={class:"cost-value"},P={class:"cost-value"},L={class:"enviro-group"},w={class:"enviro-item"},E={class:"enviro-item"},M={class:"enviro-item"},W={key:0,class:"cost-item financial"},I={key:0,class:"cost-value"},D={key:1,class:"cost-value"},_={class:"cost-item environmental"},j={class:"enviro-item"},z={class:"enviro-value"},R={class:"enviro-item"},U={class:"enviro-value"},K={class:"enviro-item"},N={class:"enviro-value"},G={key:0,class:"cost-unit"},S=o(a({__name:"ModelCostDisplay",props:{model:{},mode:{default:"per-thousand"},inputTokens:{default:1e3},outputTokens:{default:1e3},minOutputTokens:{default:10},maxOutputTokens:{},layout:{default:"inline"},size:{default:"medium"}},setup(o){const a=o,S=e(),Z=i(()=>{const e=S.financialCostsEnabled;return t.debug("ModelCostDisplay showFinancial check",{financialCostsEnabled:e,settingsStoreReady:!S.isLoading,mode:a.mode,model:a.model?.displayName}),e});function q(){if(!a.model.capabilities)return"â€”";const e=a.model.capabilities.inputCostPerToken||0,t=a.model.capabilities.outputCostPerToken||0;if("per-thousand"===a.mode){return n(1e3*(e+t))}if("total"===a.mode){const s=e*a.inputTokens+t*a.outputTokens;return n(s)}return"â€”"}function A(e){if(0===e)return"0";if(e>=.01)return e.toFixed(2).replace(/\.?0+$/,"");const t=e.toFixed(10).match(/^0\.0*[1-9]/);if(t){const s=t[0].length-2;return e.toFixed(s)}return e.toFixed(4)}function B(){if(!a.model.capabilities)return"0";return A(1e3*(a.model.capabilities.inputCostPerToken||0))}function H(){if(!a.model.capabilities)return"0";return A(1e3*(a.model.capabilities.outputCostPerToken||0))}function J(){if(!a.model.capabilities)return"?";const e=a.model.capabilities.inputCostPerToken||0,s=a.model.capabilities.outputCostPerToken||0,o=e*a.inputTokens+s*a.minOutputTokens;return t.debug("formatRangeMin",{inputTokens:a.inputTokens,minOutputTokens:a.minOutputTokens,inputCost:e,outputCost:s,minCost:o}),A(o)}function Q(){if(!a.model.capabilities||!a.maxOutputTokens)return"?";const e=a.model.capabilities.inputCostPerToken||0,s=a.model.capabilities.outputCostPerToken||0,o=e*a.inputTokens+s*a.maxOutputTokens;return t.debug("formatRangeMax",{inputTokens:a.inputTokens,maxOutputTokens:a.maxOutputTokens,inputCost:e,outputCost:s,maxCost:o}),A(o)}function V(e){if(!S.environmentalCostsEnabled)return"??";if(!s.hasDataForModel(a.model.provider,a.model.modelId))return"-";const t="total"===a.mode?a.inputTokens+a.outputTokens:1e3,o=s.calculateEnvironmentalCostUnsafe(a.model.provider,a.model.modelId,t)[e];if(0===o)return"-";switch(e){case"carbon":return o<.001?"<1Î¼g":o<1?`${(1e3*o).toFixed(0)}Î¼g`:o<1e3?`${o.toFixed(1)}mg`:`${(o/1e3).toFixed(1)}g`;case"water":return o<.001?"<1nL":o<1?`${(1e3*o).toFixed(0)}nL`:o<1e3?`${o.toFixed(1)}Î¼L`:`${(o/1e3).toFixed(1)}mL`;case"energy":return o<.001?"<1Î¼Wh":o<1?`${(1e3*o).toFixed(0)}Î¼Wh`:o<1e3?`${o.toFixed(1)}mWh`:`${(o/1e3).toFixed(1)}Wh`;default:return"-"}}function X(e){if(!S.environmentalCostsEnabled)return"??";if(!s.hasDataForModel(a.model.provider,a.model.modelId))return"-";if(!a.maxOutputTokens)return"?";const t=a.inputTokens+a.minOutputTokens,o=a.inputTokens+a.maxOutputTokens,n=s.calculateEnvironmentalCostUnsafe(a.model.provider,a.model.modelId,t),i=s.calculateEnvironmentalCostUnsafe(a.model.provider,a.model.modelId,o),u=n[e],l=i[e];if(0===u&&0===l)return"-";const r=t=>{switch(e){case"carbon":return t<.001?"<1Î¼g":t<1?`${(1e3*t).toFixed(0)}Î¼g`:t<1e3?`${t.toFixed(0)}mg`:`${(t/1e3).toFixed(1)}g`;case"water":return t<.001?"<1nL":t<1?`${(1e3*t).toFixed(0)}nL`:t<1e3?`${t.toFixed(0)}Î¼L`:`${(t/1e3).toFixed(1)}mL`;case"energy":return t<.001?"<1Î¼Wh":t<1?`${(1e3*t).toFixed(0)}Î¼Wh`:t<1e3?`${t.toFixed(0)}mWh`:`${(t/1e3).toFixed(1)}Wh`;default:return"-"}};return`${r(u)}-${r(l)}`}return t.debug("ModelCostDisplay props received",{model:a.model?.displayName,mode:a.mode,inputTokens:a.inputTokens,outputTokens:a.outputTokens,minOutputTokens:a.minOutputTokens,maxOutputTokens:a.maxOutputTokens,modelCapabilities:!!a.model?.capabilities,inputCostPerToken:a.model?.capabilities?.inputCostPerToken,outputCostPerToken:a.model?.capabilities?.outputCostPerToken}),(e,t)=>(k(),u("div",{class:l(["model-cost-display",[`layout-${e.layout}`,`size-${e.size}`]])},["range"===e.mode?(k(),u(r,{key:0},[Z.value&&e.maxOutputTokens?(k(),u("span",v,[c("span",T,[c("span",f,"$"+m(J()),1),t[0]||(t[0]=d(" - ")),c("span",b,"$"+m(Q()),1)])])):Z.value?(k(),u("span",x,t[1]||(t[1]=[c("span",{class:"cost-item"},[c("span",{class:"cost-value"},"Cost: ??")],-1)]))):p("",!0),t[4]||(t[4]=c("span",{class:"cost-tab"},null,-1)),c("span",C,[c("span",g,"COâ‚‚ "+m(X("carbon")),1),t[2]||(t[2]=c("span",{class:"cost-tab"},null,-1)),c("span",$,"ðŸ’§"+m(X("water")),1),t[3]||(t[3]=c("span",{class:"cost-tab"},null,-1)),c("span",F,"âš¡"+m(X("energy")),1)])],64)):"input-output"===e.mode?(k(),u(r,{key:1},[Z.value?(k(),u("span",y,[c("span",h,[c("span",O,"$"+m(B()),1),t[5]||(t[5]=d("/1K input + ")),c("span",P,"$"+m(H()),1),t[6]||(t[6]=d("/1K output "))])])):p("",!0),t[9]||(t[9]=c("span",{class:"cost-tab"},null,-1)),c("span",L,[c("span",w,"COâ‚‚ "+m(V("carbon")),1),t[7]||(t[7]=c("span",{class:"cost-tab"},null,-1)),c("span",E,"ðŸ’§"+m(V("water")),1),t[8]||(t[8]=c("span",{class:"cost-tab"},null,-1)),c("span",M,"âš¡"+m(V("energy")),1)])],64)):(k(),u(r,{key:2},[Z.value?(k(),u("div",W,["per-thousand"===e.mode?(k(),u("span",I,[d(m(q())+" ",1),t[10]||(t[10]=c("span",{class:"cost-unit"},"/ 1,000 tokens",-1))])):"total"===e.mode?(k(),u("span",D,m(q()),1)):p("",!0)])):p("",!0),c("div",_,[c("span",j,[t[11]||(t[11]=c("span",{class:"enviro-icon"},"COâ‚‚",-1)),c("span",z,m(V("carbon")),1)]),c("span",R,[t[12]||(t[12]=c("span",{class:"enviro-icon"},"ðŸ’§",-1)),c("span",U,m(V("water")),1)]),c("span",K,[t[13]||(t[13]=c("span",{class:"enviro-icon"},"âš¡",-1)),c("span",N,m(V("energy")),1)]),"per-thousand"===e.mode?(k(),u("span",G,"/ 1,000")):p("",!0)])],64))],2))}}),[["__scopeId","data-v-0e44d7ba"]]);export{S as M};
