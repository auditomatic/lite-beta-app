const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-CL-lquVN.js","assets/index-DIMppNNZ.css"])))=>i.map(i=>d[i]);
import{b as c,I as je,d as K,aA as Ne,r as x,c as R,p as $t,i as ue,j as _,m as s,k as e,v as T,t as u,x as z,y as B,F as Q,A as oe,z as g,D as k,q as U,_ as de,aa as ie,aB as re,ah as fe,J as Oe,aC as He,a as W,B as ze,w as Ct,C as Fe,n as Se,E as Qe,aD as qe,L as Ke,u as We,aE as Je,U as Mt,am as zt,s as Ie,aF as Ot,aG as St,a2 as Tt,o as Pt,aH as xt,aI as Ue,aJ as Bt,ak as Et,M as Dt}from"./index-CL-lquVN.js";import{u as Xe}from"./useV4Models-D0fp-NVp.js";import{u as Ye}from"./useV4ProviderParameters-DZpEmQaT.js";import{F as Lt}from"./FilterOutlined-Bt14e7LM.js";import{U as Ze}from"./UnorderedListOutlined-qh29IQWg.js";import{S as At}from"./SaveOutlined-CGjFSSpC.js";import"./useV4LiveQuery-DdsIQn5B.js";var Gt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 144H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H212V212h200v200zm452-268H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H612V212h200v200zM464 544H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16zm-52 268H212V612h200v200zm452-268H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16zm-52 268H612V612h200v200z"}}]},name:"appstore",theme:"outlined"};function Ve(w){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?Object(arguments[t]):{},i=Object.keys(a);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(a).filter(function(m){return Object.getOwnPropertyDescriptor(a,m).enumerable}))),i.forEach(function(m){Ft(w,m,a[m])})}return w}function Ft(w,t,a){return t in w?Object.defineProperty(w,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):w[t]=a,w}var Te=function(t,a){var i=Ve({},t,a.attrs);return c(je,Ve({},i,{icon:Gt}),null)};Te.displayName="AppstoreOutlined";Te.inheritAttrs=!1;var It={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"};function Re(w){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?Object(arguments[t]):{},i=Object.keys(a);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(a).filter(function(m){return Object.getOwnPropertyDescriptor(a,m).enumerable}))),i.forEach(function(m){Ut(w,m,a[m])})}return w}function Ut(w,t,a){return t in w?Object.defineProperty(w,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):w[t]=a,w}var Pe=function(t,a){var i=Re({},t,a.attrs);return c(je,Re({},i,{icon:It}),null)};Pe.displayName="UploadOutlined";Pe.inheritAttrs=!1;class Vt{async bulkWrite(t,a,i="put"){a.length!==0&&await K.transaction("rw",K[t],async()=>{switch(i){case"put":await K[t].bulkPut(a);break;case"add":await K[t].bulkAdd(a);break;case"update":const m=a.map(M=>K[t].update(M.id,M));await Promise.all(m);break}})}async bulkDelete(t,a){a.length!==0&&await K.transaction("rw",K[t],async()=>{await K[t].bulkDelete(a)})}async conditionalBulkUpdate(t,a,i){let m=0;return await K.transaction("rw",K[t],async()=>{await K[t].toCollection().modify(M=>{a(M)&&(Object.assign(M,i),m++)})}),m}freezeDeep(t){const a=t.map(i=>Object.freeze(i));return Object.freeze(a)}async getAndFreeze(t,a){const i=await K[t].get(a);return i?Object.freeze(i):null}async getAllAndFreeze(t){const a=await K[t].toArray();return this.freezeDeep(a)}}const we=new Vt;class Rt{async bulkUpsertModels(t){t.length!==0&&await K.transaction("rw",K.models,async()=>{const a=t.map(i=>Object.freeze({...i,enabled:i.enabled??!1,available:i.available??!0}));await K.models.bulkPut(a)})}async clearProviderModels(t){return await K.transaction("rw",K.models,async()=>{const m=(await K.models.where("provider").equals(t).toArray()).map(M=>M.id);return m.length>0&&await K.models.bulkDelete(m),m.length})}async toggleModelEnabled(t,a){return await K.models.update(t,{enabled:a})===1}async toggleProviderModels(t,a){return await we.conditionalBulkUpdate("models",i=>i.provider===t,{enabled:a})}async toggleAllModels(t){return await we.conditionalBulkUpdate("models",()=>!0,{enabled:t})}async getModelStatistics(){const t=await K.models.toArray(),a={total:t.length,enabled:0,byProvider:{}};for(const i of t)i.enabled&&a.enabled++,a.byProvider[i.provider]||(a.byProvider[i.provider]={total:0,enabled:0}),a.byProvider[i.provider].total++,i.enabled&&a.byProvider[i.provider].enabled++;return Object.freeze(a)}async updateModelAvailability(t,a){return await we.conditionalBulkUpdate("models",i=>i.provider===t,{available:a})}async searchModels(t){let a=K.models.toCollection();if(t.provider&&(a=K.models.where("provider").equals(t.provider)),t.enabled!==void 0&&(a=a.and(m=>m.enabled===t.enabled)),t.available!==void 0&&(a=a.and(m=>m.available===t.available)),t.search){const m=t.search.toLowerCase();a=a.and(M=>M.displayName.toLowerCase().includes(m)||M.modelId.toLowerCase().includes(m))}const i=await a.toArray();return we.freezeDeep(i)}async clearAllModels(){await K.models.clear()}}const jt=new Rt;function Nt(){const w=Ne(),t=x(!1),a=x(null),i=x(!1),m=x(!1);async function M(f,o){t.value=!0,o&&(o.value=!0),a.value=null;try{return{ok:!0,value:await f()}}catch(l){const r=l instanceof Error?l:new Error(String(l));return a.value=r,{ok:!1,error:r}}finally{t.value=!1,o&&(o.value=!1)}}async function L(f){return M(()=>w.discoverModels(f),i)}async function I(f){return M(()=>w.refreshModelSource(f),i)}async function h(f,o){return M(async()=>{await w.toggleModel(f,o)},m)}async function y(f){return M(async()=>{await w.toggleAllModels(f)},m)}async function n(f,o){return M(async()=>{await w.toggleProviderModels(f,o)},m)}async function O(){return M(async()=>{await w.enableOpenRouterFavorites()},m)}async function A(){return M(async()=>{await w.clearAllModels()})}async function d(f,o){return M(async()=>{await jt.updateModelAvailability(f,o)})}return{discoverModels:L,refreshDiscoverySource:I,toggleModel:h,toggleAllModels:y,toggleProviderModels:n,enableOpenRouterFavorites:O,clearAllModels:A,updateModelAvailability:d,isExecuting:t,lastError:a,isDiscovering:i,isTogglingModels:m}}function et(){const w=Ne(),t=x([]),a=x(!1),i=x([]);function m(){const I=w.getDiscoveryStatus();t.value=I.map(h=>({id:h.id,status:h.status==="loading"?"loading":h.status==="idle"?"success":h.status,modelCount:h.modelCount,error:h.error})),a.value=w.isDiscovering(),i.value=w.getDiscoveryErrors()}function M(I){return{litellm:"LiteLLM",openrouter:"OpenRouter",ollama:"Ollama",deterministic:"Deterministic"}[I]||I}function L(I){const h=$t.getProvider(I);return(h==null?void 0:h.name)||I}return m(),{discoveryStatus:R(()=>t.value),isDiscovering:R(()=>a.value),discoveryErrors:R(()=>i.value),getSourceDisplayName:M,getProviderDisplayName:L,refreshStatus:m}}const Ht={class:"search-section"},Qt={class:"search-controls"},qt={class:"size-filter"},Kt={class:"size-controls"},Wt={class:"size-presets"},Jt={key:0,class:"size-filter-indicator"},Xt={class:"quantized-filter"},Yt={class:"filter-description"},Zt={class:"category-filters"},es=ue({__name:"OllamaSearchFilters",props:{searchQuery:{},sortBy:{},selectedCategories:{},maxSizeGB:{},showQuantized:{type:Boolean},categories:{}},emits:["update:searchQuery","update:sortBy","update:maxSizeGB","update:showQuantized","toggle-category"],setup(w,{emit:t}){const a=w,i=t,m=R({get:()=>a.searchQuery,set:y=>i("update:searchQuery",y)}),M=R({get:()=>a.sortBy,set:y=>i("update:sortBy",y)}),L=R({get:()=>a.maxSizeGB,set:y=>i("update:maxSizeGB",y)}),I=R({get:()=>a.showQuantized,set:y=>i("update:showQuantized",y)}),h=[{label:"1GB",value:1},{label:"2GB",value:2},{label:"4GB",value:4},{label:"8GB",value:8},{label:"16GB",value:16},{label:"None",value:999}];return(y,n)=>{const O=T("a-input-search"),A=T("a-select-option"),d=T("a-select"),f=T("a-input-number"),o=T("a-button"),l=T("a-tag");return s(),_("div",Ht,[e("div",Qt,[c(O,{value:m.value,"onUpdate:value":n[0]||(n[0]=r=>m.value=r),placeholder:"Search models by name or description...","allow-clear":"",size:"large",class:"search-input"},null,8,["value"]),c(d,{value:M.value,"onUpdate:value":n[1]||(n[1]=r=>M.value=r),placeholder:"Sort by",style:{width:"180px"},size:"large"},{default:u(()=>[c(A,{value:"popularity"},{default:u(()=>n[4]||(n[4]=[z("Popularity")])),_:1,__:[4]}),c(A,{value:"lastUpdated"},{default:u(()=>n[5]||(n[5]=[z("Last Updated")])),_:1,__:[5]}),c(A,{value:"name"},{default:u(()=>n[6]||(n[6]=[z("Name")])),_:1,__:[6]}),c(A,{value:"tagCount"},{default:u(()=>n[7]||(n[7]=[z("Tag Count")])),_:1,__:[7]})]),_:1},8,["value"])]),e("div",qt,[e("div",Kt,[n[8]||(n[8]=e("span",{class:"filter-label"},"Filter to models smaller than:",-1)),c(f,{value:L.value,"onUpdate:value":n[2]||(n[2]=r=>L.value=r),min:1,max:999,step:1,size:"small",class:"size-input","addon-after":"GB"},null,8,["value"]),e("div",Wt,[(s(),_(Q,null,oe(h,r=>c(o,{key:r.value,size:"small",type:L.value===r.value?"primary":"default",onClick:p=>L.value=r.value,class:"preset-button"},{default:u(()=>[z(g(r.label),1)]),_:2},1032,["type","onClick"])),64))])]),L.value<999?(s(),_("span",Jt," â‰¤"+g(L.value)+"GB filter active ",1)):B("",!0)]),e("div",Xt,[c(o,{type:I.value?"default":"primary",size:"small",onClick:n[3]||(n[3]=r=>I.value=!I.value)},{icon:u(()=>[c(k(Lt))]),default:u(()=>[z(" "+g(I.value?"Hide":"Show")+" Quantized Versions ",1)]),_:1},8,["type"]),e("span",Yt,g(I.value?"Showing all versions":"Hiding q2_K, q3_K, q4_0, q5_1, q6_K, q8_0, fp16..."),1)]),e("div",Zt,[(s(!0),_(Q,null,oe(y.categories,r=>(s(),U(l,{key:r,color:y.selectedCategories.includes(r)?"blue":"default",checkable:!0,checked:y.selectedCategories.includes(r),onClick:p=>y.$emit("toggle-category",r),class:"category-tag"},{default:u(()=>[z(g(r),1)]),_:2},1032,["color","checked","onClick"]))),128))])])}}}),ts=de(es,[["__scopeId","data-v-a03d8794"]]),ss={key:0,class:"downloads-section"},as={class:"download-items"},ls={class:"download-info"},os={class:"download-tag"},ns={class:"download-status"},is=ue({__name:"OllamaDownloadProgress",props:{pullProgress:{}},setup(w){return(t,a)=>{const i=T("a-progress");return Object.keys(t.pullProgress).length>0?(s(),_("div",ss,[a[0]||(a[0]=e("h4",null,"Active Downloads",-1)),e("div",as,[(s(!0),_(Q,null,oe(t.pullProgress,(m,M)=>(s(),_("div",{key:M,class:"download-item"},[e("div",ls,[e("code",os,g(M),1),e("span",ns,g(m.message),1)]),c(i,{percent:m.percent,status:m.status==="success"?"success":"active",size:"small",class:"download-progress"},null,8,["percent","status"])]))),128))])])):B("",!0)}}}),rs=de(is,[["__scopeId","data-v-88ba3f68"]]),us={class:"model-info"},ds={class:"model-name"},cs={key:0},ps={class:"model-description"},ms={class:"model-actions"},vs={key:0,class:"button-size-info"},fs={key:0,class:"tags-preview"},gs={class:"preview-tags"},ys=["onClick","title"],_s={key:1,class:"tag-actual"},bs={class:"tag-size"},hs={key:0,class:"more-tags"},ks={key:1,class:"tags-expanded"},ws={key:0,class:"tag-name"},$s={key:2},Cs={key:1,class:"text-secondary"},Ms=ue({__name:"OllamaModelCard",props:{model:{},expanded:{type:Boolean},pullingModels:{},pullProgress:{},installedModels:{},maxSizeGB:{},showQuantized:{type:Boolean},isQuantizedTag:{type:Function},parseSizeToGB:{type:Function},getSizeClass:{type:Function},getLatestTagInfo:{type:Function}},emits:["toggle-expand","pull-model"],setup(w){const t=w,a=[{title:"Tag",key:"name",width:200},{title:"Size",key:"size",width:100,align:"right"},{title:"Context",key:"context",width:100,align:"center"},{title:"Status",key:"status",width:80,align:"center"},{title:"Action",key:"actions",width:80,align:"center"}],i=R(()=>t.installedModels.some(r=>r.startsWith(t.model.name))),m=R(()=>t.installedModels.filter(r=>r.startsWith(t.model.name+":")).length),M=R(()=>d(`${t.model.name}:latest`)||d(t.model.name)),L=R(()=>t.pullingModels.has(`${t.model.name}:latest`)),I=R(()=>t.pullProgress[`${t.model.name}:latest`]),h=R(()=>t.getLatestTagInfo(t.model)),y=R(()=>t.maxSizeGB<999||!t.showQuantized),n=R(()=>t.model.tags?Object.entries(t.model.tags).map(([r,p])=>({...p,name:r})).filter(r=>!(t.maxSizeGB<999&&t.parseSizeToGB(r.size||"0GB")>t.maxSizeGB||!t.showQuantized&&t.isQuantizedTag(r.name))).sort((r,p)=>r.name.localeCompare(p.name)):[]),O=R(()=>n.value.length),A=R(()=>n.value.sort((p,C)=>{const P=["latest","instruct","8b","7b","3b","1b"],E=P.indexOf(p.name),$=P.indexOf(C.name);return E!==-1&&$!==-1?E-$:E!==-1?-1:$!==-1?1:p.name.localeCompare(C.name)}).slice(0,5));function d(r){return t.installedModels.includes(r)}function f(r){return t.pullingModels.has(r)}function o(r){return t.pullProgress[r]}const l=R(()=>{const r=h.value;return r?{actualTag:r.actualTag||"",size:r.size||""}:null});return(r,p)=>{const C=T("a-tag"),P=T("a-button"),E=T("a-table");return s(),_("div",{class:ie(["model-item",{expanded:r.expanded}])},[e("div",{class:"model-header",onClick:p[2]||(p[2]=$=>r.$emit("toggle-expand"))},[e("div",us,[e("div",ds,[e("h4",null,g(r.model.name),1),c(C,{size:"small",color:"blue"},{default:u(()=>[z(g(r.model.pullCount||"0")+" pulls",1)]),_:1}),c(C,{size:"small",color:"green"},{default:u(()=>[z(g(O.value)+" ",1),y.value?(s(),_("span",cs,"/"+g(r.model.tagCount||0),1)):B("",!0),p[3]||(p[3]=z(" versions "))]),_:1,__:[3]}),i.value?(s(),U(C,{key:0,size:"small",color:"success",class:"installed-tag"},{icon:u(()=>[c(k(re))]),default:u(()=>[z(" "+g(m.value)+" installed ",1)]),_:1})):B("",!0)]),e("p",ps,g(r.model.description||"No description available"),1)]),e("div",ms,[c(P,{type:M.value?"default":"primary",size:"small",onClick:p[0]||(p[0]=fe($=>r.$emit("pull-model",r.model.name,"latest"),["stop"])),loading:L.value,disabled:M.value},{default:u(()=>[I.value?(s(),_(Q,{key:0},[z(g(Math.round(I.value.percent))+"% ",1)],64)):M.value?(s(),_(Q,{key:1},[c(k(re)),p[4]||(p[4]=z(" Installed "))],64)):(s(),_(Q,{key:2},[p[5]||(p[5]=z(" Pull Latest ")),l.value?(s(),_("span",vs," ("+g(l.value.actualTag?l.value.actualTag+", ":"")+g(l.value.size)+") ",1)):B("",!0)],64))]),_:1},8,["type","loading","disabled"]),c(P,{type:"text",size:"small",onClick:p[1]||(p[1]=fe($=>r.$emit("toggle-expand"),["stop"]))},{icon:u(()=>[r.expanded?(s(),U(k(He),{key:1})):(s(),U(k(Oe),{key:0}))]),default:u(()=>[z(" "+g(r.expanded?"Hide versions":"See all versions"),1)]),_:1})])]),r.expanded?B("",!0):(s(),_("div",fs,[e("div",gs,[(s(!0),_(Q,null,oe(A.value,$=>(s(),_("span",{key:$.name,class:ie(["tag-chip",[r.getSizeClass($.size),{installed:d($.fullTag)}]]),onClick:S=>d($.fullTag)?null:r.$emit("pull-model",r.model.name,$.name),title:`${$.fullTag} - ${$.size}${d($.fullTag)?" (Installed)":""}`},[d($.fullTag)?(s(),U(k(re),{key:0,class:"installed-icon"})):B("",!0),z(" "+g($.name)+" ",1),$.name==="latest"&&l.value?(s(),_("span",_s," ("+g(l.value.actualTag)+") ",1)):B("",!0),e("span",bs,g($.size),1)],10,ys))),128)),O.value>5?(s(),_("span",hs," +"+g(O.value-5)+" more versions ",1)):B("",!0)])])),r.expanded?(s(),_("div",ks,[c(E,{columns:a,"data-source":n.value,pagination:!1,size:"small",scroll:{y:300},class:"tags-table"},{bodyCell:u(({column:$,record:S})=>[$.key==="name"?(s(),_("code",ws,g(S.name),1)):B("",!0),$.key==="size"?(s(),_("span",{key:1,class:ie(["tag-size",r.getSizeClass(S.size)])},g(S.size),3)):B("",!0),$.key==="context"?(s(),_("span",$s,g(S.contextWindow),1)):B("",!0),$.key==="status"?(s(),_(Q,{key:3},[d(S.fullTag)?(s(),U(C,{key:0,size:"small",color:"success"},{default:u(()=>[c(k(re)),p[6]||(p[6]=z(" Installed "))]),_:1,__:[6]})):(s(),_("span",Cs,"-"))],64)):B("",!0),$.key==="actions"?(s(),U(P,{key:4,type:d(S.fullTag)?"default":"primary",size:"small",onClick:j=>r.$emit("pull-model",r.model.name,S.name),loading:f(S.fullTag),disabled:d(S.fullTag)},{default:u(()=>[o(S.fullTag)?(s(),_(Q,{key:0},[z(g(Math.round(o(S.fullTag).percent))+"% ",1)],64)):d(S.fullTag)?(s(),_(Q,{key:1},[c(k(re)),p[7]||(p[7]=z(" Installed "))],64)):(s(),_(Q,{key:2},[z(" Pull ")],64))]),_:2},1032,["type","onClick","loading","disabled"])):B("",!0)]),_:1},8,["data-source"])])):B("",!0)],2)}}}),zs=de(Ms,[["__scopeId","data-v-83727817"]]),Os={class:"list-view"},Ss={class:"expanded-tags-container"},Ts={class:"expanded-tags-grid"},Ps={class:"tag-name"},xs={key:0,class:"tag-actual"},Bs={class:"tag-size"},Es={class:"tag-context"},Ds={key:0,class:"model-name-cell"},Ls={key:1,class:"description-cell"},As={key:2,class:"stats-cell"},Gs={class:"stat-item"},Fs={class:"stat-item"},Is={key:0},Us={key:3,class:"size-range"},Vs=ue({__name:"OllamaModelList",props:{models:{},expandedModels:{},pullingModels:{},pullProgress:{},installedModels:{},maxSizeGB:{},showQuantized:{type:Boolean},isQuantizedTag:{type:Function},parseSizeToGB:{type:Function},getSizeClass:{type:Function},getLatestTagInfo:{type:Function},getModelSizeRange:{type:Function}},emits:["toggle-model","pull-model","expand"],setup(w){const t=w,a=[{title:"Model",key:"name",width:200,fixed:"left"},{title:"Description",key:"description",ellipsis:!0},{title:"Stats",key:"stats",width:200},{title:"Size Range",key:"sizeRange",width:120,align:"center"},{title:"Actions",key:"actions",width:220,align:"center",fixed:"right"}];function i(h){return h.tags?Object.entries(h.tags).map(([y,n])=>({...n,name:y})).filter(y=>!(t.maxSizeGB<999&&t.parseSizeToGB(y.size||"0GB")>t.maxSizeGB||!t.showQuantized&&t.isQuantizedTag(y.name))).sort((y,n)=>y.name.localeCompare(n.name)):[]}function m(h){return h.tags?Object.entries(h.tags).filter(([y,n])=>!(t.maxSizeGB<999&&t.parseSizeToGB(n.size||"0GB")>t.maxSizeGB||!t.showQuantized&&t.isQuantizedTag(y))).length:0}function M(h){return t.installedModels.some(y=>y.startsWith(h))}function L(h){return t.installedModels.includes(h)}function I(h){return t.installedModels.filter(y=>y.startsWith(h+":"))}return(h,y)=>{const n=T("a-tag"),O=T("a-button"),A=T("a-space"),d=T("a-table");return s(),_("div",Os,[c(d,{"data-source":h.models,columns:a,pagination:!1,"row-key":f=>f.name,size:"small",scroll:{y:"calc(100% - 48px)"},"expanded-row-keys":h.expandedModels,"expand-row-by-click":!1,onExpand:y[0]||(y[0]=(f,o)=>h.$emit("expand",f,o)),class:"models-list-table"},{expandedRowRender:u(({record:f})=>[e("div",Ss,[e("div",Ts,[(s(!0),_(Q,null,oe(i(f),o=>{var l;return s(),_("div",{key:o.fullTag,class:ie(["expanded-tag-item",h.getSizeClass(o.size)])},[e("span",Ps,g(o.name),1),o.name==="latest"&&h.getLatestTagInfo(f)?(s(),_("span",xs," ("+g((l=h.getLatestTagInfo(f))==null?void 0:l.actualTag)+") ",1)):B("",!0),e("span",Bs,g(o.size),1),e("span",Es,g(o.contextWindow||"-"),1),L(o.fullTag)?(s(),U(n,{key:1,size:"small",color:"success"},{default:u(()=>[c(k(re)),y[1]||(y[1]=z(" Installed "))]),_:1,__:[1]})):(s(),U(O,{key:2,type:"primary",size:"small",loading:h.pullingModels.has(o.fullTag),onClick:r=>h.$emit("pull-model",f.name,o.name)},{default:u(()=>[h.pullProgress[o.fullTag]?(s(),_(Q,{key:0},[z(g(Math.round(h.pullProgress[o.fullTag].percent))+"% ",1)],64)):(s(),_(Q,{key:1},[z(" Pull ")],64))]),_:2},1032,["loading","onClick"]))],2)}),128))])])]),bodyCell:u(({column:f,record:o})=>[f.key==="name"?(s(),_("div",Ds,[e("code",null,g(o.name),1),M(o.name)?(s(),U(n,{key:0,size:"small",color:"success"},{default:u(()=>[c(k(re)),z(" "+g(I(o.name).length)+" installed ",1)]),_:2},1024)):B("",!0)])):B("",!0),f.key==="description"?(s(),_("span",Ls,g(o.description||"No description"),1)):B("",!0),f.key==="stats"?(s(),_("div",As,[e("span",Gs,g(o.pullCount||"0")+" pulls",1),y[3]||(y[3]=e("span",{class:"stat-divider"},"â€¢",-1)),e("span",Fs,[z(g(m(o))+" ",1),h.maxSizeGB<999||!h.showQuantized?(s(),_("span",Is,"/"+g(o.tagCount||0),1)):B("",!0),y[2]||(y[2]=z(" versions "))])])):B("",!0),f.key==="sizeRange"?(s(),_("span",Us,g(h.getModelSizeRange(o)),1)):B("",!0),f.key==="actions"?(s(),U(A,{key:4,size:"small"},{default:u(()=>[c(O,{type:"text",size:"small",onClick:l=>h.$emit("toggle-model",o.name)},{icon:u(()=>[h.expandedModels.includes(o.name)?(s(),U(k(He),{key:1})):(s(),U(k(Oe),{key:0}))]),default:u(()=>[z(" "+g(h.expandedModels.includes(o.name)?"Hide":"See")+" Versions ",1)]),_:2},1032,["onClick"]),c(O,{type:L(`${o.name}:latest`)||L(o.name)?"default":"primary",size:"small",onClick:l=>h.$emit("pull-model",o.name,"latest"),loading:h.pullingModels.has(`${o.name}:latest`),disabled:L(`${o.name}:latest`)||L(o.name)},{default:u(()=>[h.pullProgress[`${o.name}:latest`]?(s(),_(Q,{key:0},[z(g(Math.round(h.pullProgress[`${o.name}:latest`].percent))+"% ",1)],64)):L(`${o.name}:latest`)||L(o.name)?(s(),U(k(re),{key:1})):(s(),_(Q,{key:2},[z(" Pull Latest ")],64))]),_:2},1032,["type","onClick","loading","disabled"])]),_:2},1024)):B("",!0)]),_:1},8,["data-source","row-key","expanded-row-keys"])])}}}),Rs=de(Vs,[["__scopeId","data-v-7d1c26f3"]]);async function he(w,t={}){var h,y;const i=`http://localhost:11434${w}`,m=window.location.protocol==="https:",M=t.timeout||3e4,L=new AbortController,I=setTimeout(()=>L.abort(),M);try{const n=await fetch(i,{...t,signal:L.signal,headers:{"Content-Type":"application/json",...t.headers}});return clearTimeout(I),n}catch(n){clearTimeout(I);const O=new Error;throw O.isHttps=m,n.name==="AbortError"?(O.type="timeout",O.message="Request to Ollama timed out",O.details=`The request took longer than ${M/1e3} seconds`):(h=n.message)!=null&&h.includes("Failed to fetch")||(y=n.message)!=null&&y.includes("NetworkError")?m?(O.type="cors",O.message="Cannot connect to Ollama from HTTPS site",O.details="Browser security prevents HTTPS sites from accessing local HTTP services. To use Ollama: 1) Download the desktop app, 2) Run Auditomatic locally, or 3) Configure Ollama with OLLAMA_ORIGINS=*"):(O.type="network",O.message="Cannot connect to Ollama",O.details="Make sure Ollama is running on your computer (http://localhost:11434)"):(O.type="unknown",O.message=n.message||"Unknown error connecting to Ollama",O.details=n.stack),W.warn("Ollama fetch error",{type:O.type,endpoint:w,isHttps:m,originalError:n.message}),O}}async function js(){try{return{available:(await he("/api/tags",{timeout:5e3})).ok}}catch(w){return{available:!1,error:w}}}async function Ns(){try{const t=await fetch("http://localhost:11434/api/tags",{method:"GET",headers:{Accept:"application/json"}});return{hasIssue:!1}}catch{return{hasIssue:!0,error:"Either Ollama is not running or CORS is not properly configured. Ensure Ollama is running and add OLLAMA_ORIGINS=* to your Ollama service configuration."}}}async function Hs(){const w=await he("/api/tags");if(!w.ok)throw new Error(`Failed to fetch models: ${w.status} ${w.statusText}`);return w.json()}async function Qs(w){const t=await he("/api/delete",{method:"DELETE",body:JSON.stringify({name:w})});if(!t.ok)throw new Error(`Failed to delete model: ${t.status} ${t.statusText}`)}function qs(){const w=x(null),t=x(!1),a=x(""),i=x(new Set),m=x({}),M=x([]);async function L(){t.value=!0,a.value="";try{const p=await fetch("https://ollama.models.auditomatic.org/models.json");if(!p.ok)throw new Error(`Failed to fetch models: ${p.statusText}`);w.value=await p.json(),await I()}catch(p){a.value=`Failed to load model library: ${p instanceof Error?p.message:"Unknown error"}`}finally{t.value=!1}}async function I(){try{const p=await he("/api/tags");if(p.ok){const C=await p.json();M.value=(C.models||[]).map(P=>P.name)}}catch(p){const C=p;C.type==="cors"&&C.isHttps&&W.debug("Cannot access Ollama from HTTPS site"),M.value=[]}}async function h(p,C,P){var $;const E=C==="latest"?p:`${p}:${C}`;if(!i.value.has(E)){i.value.add(E),m.value[E]={percent:0,status:"active",message:"Starting download..."};try{const S=await he("/api/pull",{method:"POST",body:JSON.stringify({name:E,stream:!0})});if(!S.ok)throw new Error(`Failed to pull model: ${S.statusText}`);const j=($=S.body)==null?void 0:$.getReader();if(!j)throw new Error("Unable to read response stream");let Z=0,V=0;for(;;){const{done:ee,value:ce}=await j.read();if(ee)break;const ge=new TextDecoder().decode(ce).split(`
`).filter(ne=>ne.trim());for(const ne of ge)try{const G=JSON.parse(ne);G.total&&(Z=G.total),G.completed&&(V=G.completed);const D=Z>0?Math.round(V/Z*100):0;if(m.value[E]={status:G.status==="success"?"success":"active",percent:D,message:G.status||"Downloading..."},G.status==="success"){ze.success(`Successfully pulled ${E}`),await I(),P==null||P(),setTimeout(()=>{delete m.value[E]},3e3);return}}catch{}}}catch(S){const j=S;let Z=S instanceof Error?S.message:"Unknown error";j.type==="cors"&&j.isHttps&&(Z="Cannot access Ollama from HTTPS site. Please use the desktop app or run locally."),ze.error(`Failed to pull ${E}: ${Z}`),m.value[E]={status:"exception",percent:0,message:"Download failed"},setTimeout(()=>{delete m.value[E]},5e3)}finally{i.value.delete(E)}}}function y(p){const C=parseFloat(p.replace(/[^\d.]/g,""))||0,P=p.replace(/[\d.]/g,"").trim().toUpperCase();return P.includes("MB")?C/1e3:P.includes("TB")?C*1e3:(P.includes("GB"),C)}function n(p){return/-q\d{1,2}_|-fp\d+/.test(p)}function O(p){return M.value.some(C=>C.startsWith(p))}function A(p){return M.value.includes(p)}function d(p){return M.value.filter(C=>C.startsWith(p+":"))}function f(p){return p<1?`${Math.round(p*1e3)}MB`:`${p.toFixed(1)}GB`}function o(p){const C=y(p);return C<5?"size-small":C<20?"size-medium":"size-large"}function l(p){if(!p.tags)return"N/A";const C=Object.values(p.tags).map($=>y($.size||"0GB")).filter($=>$>0);if(C.length===0)return"N/A";const P=Math.min(...C),E=Math.max(...C);return P===E?f(P):`${f(P)} - ${f(E)}`}function r(p){if(!p.tags||!p.tags.latest)return null;const C=p.tags.latest,P=Object.entries(p.tags).find(([E,$])=>E!=="latest"&&$.modelHash===C.modelHash);return P?{actualTag:P[0],size:P[1].size||C.size}:{actualTag:"",size:C.size}}return{modelsData:w,loading:t,error:a,pullingModels:i,pullProgress:m,installedModels:M,fetchModels:L,fetchInstalledModels:I,pullModel:h,parseSizeToGB:y,isQuantizedTag:n,isModelInstalled:O,isTagInstalled:A,getInstalledTagsForModel:d,formatSizeGB:f,getSizeClass:o,getModelSizeRange:l,getLatestTagInfo:r}}const Ks={class:"modal-content"},Ws={class:"stats-bar"},Js={class:"view-controls"},Xs={key:0,class:"loading-text"},Ys={class:"models-container"},Zs=ue({__name:"OllamaModelLibraryModalV3",props:{modelValue:{type:Boolean}},emits:["update:modelValue","models-updated"],setup(w,{emit:t}){const a=w,i=t,{modelsData:m,loading:M,error:L,pullingModels:I,pullProgress:h,installedModels:y,fetchModels:n,pullModel:O,parseSizeToGB:A,isQuantizedTag:d,getSizeClass:f,getModelSizeRange:o,getLatestTagInfo:l}=qs(),r=x(""),p=x("popularity"),C=x([]),P=x(8),E=x(!1),$=x("card"),S=x(new Set),j=R({get:()=>a.modelValue,set:G=>i("update:modelValue",G)}),Z=R(()=>{var G;return((G=m.value)==null?void 0:G.totalModels)||0}),V=R(()=>{var G;return((G=m.value)==null?void 0:G.categories)||[]}),ee=R(()=>{if(!m.value)return[];let G=Object.entries(m.value.models).map(([D,J])=>({...J,name:D}));if(r.value){const D=r.value.toLowerCase();G=G.filter(J=>J.name.toLowerCase().includes(D)||J.description.toLowerCase().includes(D))}switch(C.value.length>0&&(G=G.filter(D=>C.value.some(J=>(D.categories||[]).includes(J)))),P.value<999&&(G=G.filter(D=>D.tags?Object.values(D.tags).some(J=>A(J.size||"0GB")<=P.value):!0)),p.value){case"popularity":G.sort((D,J)=>{const ae=D.pullCount||"0",se=J.pullCount||"0",ve=parseFloat(ae.replace(/[^\d.]/g,""))||0,ye=parseFloat(se.replace(/[^\d.]/g,""))||0,X=ae.includes("M")?1e6:ae.includes("K")?1e3:1,ke=se.includes("M")?1e6:se.includes("K")?1e3:1;return ye*ke-ve*X});break;case"lastUpdated":G.sort((D,J)=>{const ae=D.lastUpdated?new Date(D.lastUpdated).getTime():0;return(J.lastUpdated?new Date(J.lastUpdated).getTime():0)-ae});break;case"name":G.sort((D,J)=>D.name.localeCompare(J.name));break;case"tagCount":G.sort((D,J)=>(J.tagCount||0)-(D.tagCount||0));break}return G});function ce(G){const D=C.value.indexOf(G);D===-1?C.value.push(G):C.value.splice(D,1)}function me(G){S.value.has(G)?S.value.delete(G):S.value.add(G)}function ge(G,D){G?S.value.add(D.name):S.value.delete(D.name)}async function ne(G,D){await O(G,D,()=>i("models-updated"))}return Ct(j,G=>{G&&!m.value&&n(),G||(S.value.clear(),r.value="",C.value=[],P.value=8,E.value=!1,L.value="")}),(G,D)=>{const J=T("a-button"),ae=T("a-button-group"),se=T("a-spin"),ve=T("a-alert"),ye=T("a-modal");return s(),U(ye,{open:j.value,"onUpdate:open":D[7]||(D[7]=X=>j.value=X),title:"Ollama Model Library",width:"95vw",footer:null,destroyOnClose:!0,"wrap-class-name":"ollama-library-modal-full",class:"ollama-library-modal"},{default:u(()=>[e("div",Ks,[c(ts,{"search-query":r.value,"onUpdate:searchQuery":D[0]||(D[0]=X=>r.value=X),"sort-by":p.value,"onUpdate:sortBy":D[1]||(D[1]=X=>p.value=X),"max-size-g-b":P.value,"onUpdate:maxSizeGB":D[2]||(D[2]=X=>P.value=X),"show-quantized":E.value,"onUpdate:showQuantized":D[3]||(D[3]=X=>E.value=X),"selected-categories":C.value,categories:V.value,onToggleCategory:ce},null,8,["search-query","sort-by","max-size-g-b","show-quantized","selected-categories","categories"]),e("div",Ws,[e("span",null,"Showing "+g(ee.value.length)+" of "+g(Z.value)+" models",1),e("div",Js,[c(ae,{size:"small"},{default:u(()=>[c(J,{type:$.value==="card"?"primary":"default",onClick:D[4]||(D[4]=X=>$.value="card"),icon:Fe(k(Te)),title:"Card View"},null,8,["type","icon"]),c(J,{type:$.value==="list"?"primary":"default",onClick:D[5]||(D[5]=X=>$.value="list"),icon:Fe(k(Ze)),title:"List View"},null,8,["type","icon"])]),_:1}),k(M)?(s(),_("span",Xs,"Loading...")):B("",!0)])]),c(rs,{"pull-progress":k(h)},null,8,["pull-progress"]),e("div",Ys,[c(se,{spinning:k(M),size:"large"},{default:u(()=>[$.value==="card"?(s(!0),_(Q,{key:0},oe(ee.value,X=>(s(),U(zs,{key:X.name,model:X,expanded:S.value.has(X.name),"pulling-models":k(I),"pull-progress":k(h),"installed-models":k(y),"max-size-g-b":P.value,"show-quantized":E.value,"is-quantized-tag":k(d),"parse-size-to-g-b":k(A),"get-size-class":k(f),"get-latest-tag-info":k(l),onToggleExpand:ke=>me(X.name),onPullModel:ne},null,8,["model","expanded","pulling-models","pull-progress","installed-models","max-size-g-b","show-quantized","is-quantized-tag","parse-size-to-g-b","get-size-class","get-latest-tag-info","onToggleExpand"]))),128)):B("",!0),$.value==="list"?(s(),U(Rs,{key:1,models:ee.value,"expanded-models":Array.from(S.value),"pulling-models":k(I),"pull-progress":k(h),"installed-models":k(y),"max-size-g-b":P.value,"show-quantized":E.value,"is-quantized-tag":k(d),"parse-size-to-g-b":k(A),"get-size-class":k(f),"get-latest-tag-info":k(l),"get-model-size-range":k(o),onToggleModel:me,onPullModel:ne,onExpand:ge},null,8,["models","expanded-models","pulling-models","pull-progress","installed-models","max-size-g-b","show-quantized","is-quantized-tag","parse-size-to-g-b","get-size-class","get-latest-tag-info","get-model-size-range"])):B("",!0)]),_:1},8,["spinning"])]),k(L)?(s(),U(ve,{key:0,type:"error",message:k(L),closable:"",onClose:D[6]||(D[6]=X=>L.value=""),class:"error-alert"},null,8,["message"])):B("",!0)])]),_:1},8,["open"])}}}),ea=de(Zs,[["__scopeId","data-v-96287dbe"]]),ta={class:"ollama-model-manager"},sa={class:"action-bar"},aa={class:"models-section"},la={key:0,class:"model-name"},oa={key:1,class:"model-size"},na={key:2,class:"model-date"},ia=ue({__name:"OllamaModelManagerV3",setup(w){const t=x([]),a=x(!1),i=x(new Set),m=x(""),M=x(!1),L=[{title:"Model Name",key:"name",width:"40%"},{title:"Size",key:"size",width:"20%",align:"right"},{title:"Modified",key:"modified",width:"25%"},{title:"Actions",key:"actions",width:"15%",align:"center"}];async function I(){const d=await js();return!d.available&&d.error&&(d.error.type==="cors"&&d.error.isHttps?m.value=d.error.details||"Cannot connect to Ollama from HTTPS site":m.value=d.error.message),d.available}async function h(){try{const d=await Hs();t.value=d.models||[]}catch(d){const f=d;f.type==="cors"&&f.isHttps?m.value=f.details||"Cannot access Ollama from HTTPS site":m.value=`Failed to fetch models: ${d instanceof Error?d.message:"Unknown error"}`,t.value=[]}}async function y(d){i.value.add(d),m.value="";try{await Qs(d),ze.success(`Successfully removed ${d}`),await n()}catch(f){const o=f;o.type==="cors"&&o.isHttps?m.value=o.details||"Cannot access Ollama from HTTPS site":m.value=`Failed to remove model: ${f instanceof Error?f.message:"Unknown error"}`}finally{i.value.delete(d)}}async function n(){a.value=!0,await h(),a.value=!1}function O(d){if(!d)return"0 B";const f=["B","KB","MB","GB","TB"],o=Math.floor(Math.log(d)/Math.log(1024));return`${(d/Math.pow(1024,o)).toFixed(1)} ${f[o]}`}function A(d){try{return new Date(d).toLocaleDateString()}catch{return"Unknown"}}return Se(async()=>{await I()?await n():m.value="Cannot connect to Ollama. Make sure Ollama is running on localhost:11434"}),(d,f)=>{const o=T("a-button"),l=T("a-tag"),r=T("a-popconfirm"),p=T("a-table"),C=T("a-empty"),P=T("a-alert");return s(),_("div",ta,[e("div",sa,[c(o,{type:"primary",onClick:f[0]||(f[0]=E=>M.value=!0)},{icon:u(()=>[c(k(Qe))]),default:u(()=>[f[3]||(f[3]=z(" Download Ollama Models "))]),_:1,__:[3]}),c(o,{onClick:n,loading:a.value},{icon:u(()=>[c(k(qe))]),default:u(()=>[f[4]||(f[4]=z(" Refresh "))]),_:1,__:[4]},8,["loading"])]),e("div",aa,[f[7]||(f[7]=e("h4",{class:"section-title"},"Installed Models",-1)),c(p,{columns:L,"data-source":t.value,pagination:!1,size:"small",loading:a.value,"row-key":"name",class:"models-table"},{bodyCell:u(({column:E,record:$})=>{var S;return[E.key==="name"?(s(),_("div",la,[e("code",null,g($.name),1),(S=$.details)!=null&&S.family?(s(),U(l,{key:0,size:"small",color:"blue"},{default:u(()=>[z(g($.details.family),1)]),_:2},1024)):B("",!0)])):B("",!0),E.key==="size"?(s(),_("span",oa,g(O($.size)),1)):B("",!0),E.key==="modified"?(s(),_("span",na,g(A($.modified_at)),1)):B("",!0),E.key==="actions"?(s(),U(r,{key:3,title:"Are you sure you want to delete this model?",description:`This will permanently remove ${$.name} from your system.`,"ok-text":"Delete","cancel-text":"Cancel",onConfirm:j=>y($.name)},{default:u(()=>[c(o,{type:"text",danger:"",size:"small",loading:i.value.has($.name)},{icon:u(()=>[c(k(Ke))]),default:u(()=>[f[5]||(f[5]=z(" Remove "))]),_:2,__:[5]},1032,["loading"])]),_:2},1032,["description","onConfirm"])):B("",!0)]}),_:1},8,["data-source","loading"]),!a.value&&t.value.length===0?(s(),U(C,{key:0,description:"No Ollama models installed",class:"empty-state"},{image:u(()=>f[6]||(f[6]=[e("div",{class:"empty-icon"},"ðŸ“¦",-1)])),_:1})):B("",!0)]),m.value?(s(),U(P,{key:0,type:"error",message:m.value,closable:"",onClose:f[1]||(f[1]=E=>m.value=""),class:"error-alert"},null,8,["message"])):B("",!0),c(ea,{modelValue:M.value,"onUpdate:modelValue":f[2]||(f[2]=E=>M.value=E),onModelsUpdated:n},null,8,["modelValue"])])}}}),ra=de(ia,[["__scopeId","data-v-9a88ecb1"]]),ua={class:"model-list"},da={class:"model-header"},ca={class:"model-table"},pa=["onClick"],ma={class:"model-name"},va={class:"model-source"},fa={class:"model-context"},ga={key:0},ya={key:1,class:"text-secondary"},_a={key:0,class:"model-cost-in"},ba={key:0,class:"cost-value"},ha={key:1,class:"text-secondary"},ka={key:1,class:"model-cost-out"},wa={key:0,class:"cost-value"},$a={key:1,class:"text-secondary"},Ca={class:"model-enviro-carbon"},Ma={class:"enviro-value"},za={class:"model-enviro-water"},Oa={class:"enviro-value"},Sa={class:"model-enviro-energy"},Ta={class:"enviro-value"},Pa=ue({__name:"ModelListV3",props:{models:{},providerId:{}},emits:["toggle-model"],setup(w){const t=w,a=We(),i=x("name"),m=x("asc"),M=R(()=>{if(!t.models||t.models.length===0)return[];const y=t.models.filter(A=>{var d,f;return((d=A.capabilities)==null?void 0:d.inputCostPerToken)||((f=A.capabilities)==null?void 0:f.outputCostPerToken)});return y.length>0?W.info("MODEL_LIST_DEBUG: Models with pricing:",y.map(A=>{var d,f;return{id:A.id,provider:A.provider,modelId:A.modelId,inputCost:(d=A.capabilities)==null?void 0:d.inputCostPerToken,outputCost:(f=A.capabilities)==null?void 0:f.outputCostPerToken}})):W.info("MODEL_LIST_DEBUG: No models have pricing data. Sample model:",t.models[0]),[...t.models].sort((A,d)=>{var o,l,r,p,C,P;let f=0;switch(i.value){case"enabled":f=(A.enabled?1:0)-(d.enabled?1:0);break;case"name":f=A.displayName.localeCompare(d.displayName);break;case"source":f=(A.source||"").localeCompare(d.source||"");break;case"context":const E=((o=A.capabilities)==null?void 0:o.contextWindow)||0,$=((l=d.capabilities)==null?void 0:l.contextWindow)||0;f=E-$;break;case"inputCost":const S=((r=A.capabilities)==null?void 0:r.inputCostPerToken)||0,j=((p=d.capabilities)==null?void 0:p.inputCostPerToken)||0;f=S-j;break;case"outputCost":const Z=((C=A.capabilities)==null?void 0:C.outputCostPerToken)||0,V=((P=d.capabilities)==null?void 0:P.outputCostPerToken)||0;f=Z-V;break}return m.value==="asc"?f:-f})});function L(y){i.value===y?m.value=m.value==="asc"?"desc":"asc":(i.value=y,m.value="asc")}function I(y){return y>=1e6?(y/1e6).toFixed(1)+"M":y>=1e3?(y/1e3).toFixed(0)+"K":y.toString()}function h(y){if(!y||y===0)return"0.00";const n=y*1e6;return n<.01?n.toFixed(4):n<1?n.toFixed(3):n<10?n.toFixed(2):n<100?n.toFixed(1):n.toFixed(0)}return(y,n)=>{const O=T("a-switch"),A=T("a-tag");return s(),_("div",ua,[e("div",da,[e("div",{class:"header-switch sortable",onClick:n[0]||(n[0]=d=>L("enabled"))},[n[7]||(n[7]=e("span",null,"Enabled",-1)),e("span",{class:ie(["sort-indicator",{active:i.value==="enabled"}])},g(i.value==="enabled"&&m.value==="asc"?"â–²":"â–¼"),3)]),e("div",{class:"header-name sortable",onClick:n[1]||(n[1]=d=>L("name"))},[n[8]||(n[8]=e("span",null,"Model",-1)),e("span",{class:ie(["sort-indicator",{active:i.value==="name"}])},g(i.value==="name"&&m.value==="asc"?"â–²":"â–¼"),3)]),e("div",{class:"header-source sortable",onClick:n[2]||(n[2]=d=>L("source"))},[n[9]||(n[9]=e("span",null,"Source",-1)),e("span",{class:ie(["sort-indicator",{active:i.value==="source"}])},g(i.value==="source"&&m.value==="asc"?"â–²":"â–¼"),3)]),e("div",{class:"header-context sortable",onClick:n[3]||(n[3]=d=>L("context"))},[n[10]||(n[10]=e("span",null,"Context",-1)),e("span",{class:ie(["sort-indicator",{active:i.value==="context"}])},g(i.value==="context"&&m.value==="asc"?"â–²":"â–¼"),3)]),k(a).showFinancialCosts.value?(s(),_("div",{key:0,class:"header-cost-in sortable",onClick:n[4]||(n[4]=d=>L("inputCost"))},[n[11]||(n[11]=e("span",null,"Input $/1M",-1)),e("span",{class:ie(["sort-indicator",{active:i.value==="inputCost"}])},g(i.value==="inputCost"&&m.value==="asc"?"â–²":"â–¼"),3)])):B("",!0),k(a).showFinancialCosts.value?(s(),_("div",{key:1,class:"header-cost-out sortable",onClick:n[5]||(n[5]=d=>L("outputCost"))},[n[12]||(n[12]=e("span",null,"Output $/1M",-1)),e("span",{class:ie(["sort-indicator",{active:i.value==="outputCost"}])},g(i.value==="outputCost"&&m.value==="asc"?"â–²":"â–¼"),3)])):B("",!0),n[13]||(n[13]=e("div",{class:"header-enviro-carbon"},[e("span",null,"COâ‚‚")],-1)),n[14]||(n[14]=e("div",{class:"header-enviro-water"},[e("span",null,"ðŸ’§")],-1)),n[15]||(n[15]=e("div",{class:"header-enviro-energy"},[e("span",null,"âš¡")],-1))]),e("div",ca,[(s(!0),_(Q,null,oe(M.value,d=>{var f,o,l;return s(),_("div",{key:d.id,class:"model-row",onClick:r=>y.$emit("toggle-model",d.id,!d.enabled)},[e("div",{class:"model-switch",onClick:n[6]||(n[6]=fe(()=>{},["stop"]))},[c(O,{checked:d.enabled,size:"small",onChange:r=>y.$emit("toggle-model",d.id,r),"data-testid":"model-toggle","data-provider":d.provider,"data-model":d.modelId,"aria-label":`${d.enabled?"Disable":"Enable"} model ${d.modelId}`},null,8,["checked","onChange","data-provider","data-model","aria-label"])]),e("div",ma,[e("code",null,g(d.modelId),1)]),e("div",va,[d.source?(s(),U(A,{key:0,size:"small",color:"cyan"},{default:u(()=>[z(g(d.source),1)]),_:2},1024)):B("",!0)]),e("div",fa,[(f=d.capabilities)!=null&&f.contextWindow?(s(),_("span",ga,g(I(d.capabilities.contextWindow)),1)):(s(),_("span",ya,"-"))]),k(a).showFinancialCosts.value?(s(),_("div",_a,[(o=d.capabilities)!=null&&o.inputCostPerToken?(s(),_("span",ba," $"+g(h(d.capabilities.inputCostPerToken)),1)):(s(),_("span",ha,"-"))])):B("",!0),k(a).showFinancialCosts.value?(s(),_("div",ka,[(l=d.capabilities)!=null&&l.outputCostPerToken?(s(),_("span",wa," $"+g(h(d.capabilities.outputCostPerToken)),1)):(s(),_("span",$a,"-"))])):B("",!0),e("div",Ca,[e("span",Ma,g(k(a).getEnvironmentalCost(d,"carbon")),1)]),e("div",za,[e("span",Oa,g(k(a).getEnvironmentalCost(d,"water")),1)]),e("div",Sa,[e("span",Ta,g(k(a).getEnvironmentalCost(d,"energy")),1)])],8,pa)}),128))])])}}}),xa=de(Pa,[["__scopeId","data-v-2b840b1b"]]),Ba={class:"model-preference-manager"},Ea={class:"preferences-section"},Da={class:"action-group"},La={class:"action-group"},Aa={class:"status-grid"},Ga={class:"status-item"},Fa={class:"status-value"},Ia={class:"status-item"},Ua={class:"status-value"},Va={class:"status-item"},Ra={class:"status-value"},ja={class:"status-item"},Na={class:"status-value"},Ha={class:"status-item"},Qa={class:"status-value"},qa={class:"status-item"},Ka={class:"status-value"},Wa={class:"action-group"},Ja={class:"provider-grid"},Xa={class:"provider-name"},Ya={class:"provider-stats"},Za={class:"provider-total"},el={class:"provider-enabled"},tl=ue({__name:"ModelPreferenceManagerV3",setup(w){const{models:t,enabledModels:a,modelsByProvider:i,showFinancialCosts:m,showEnvironmentalCosts:M}=Xe(),{discoveryStatus:L}=et(),I=We(),h=x([]),y=x(!1),n=x(!1),O=x(""),A=x("");async function d(){y.value=!0,O.value="";try{const o=await I.exportModelPreferences();if(o.ok){const l=new Blob([JSON.stringify(o.value,null,2)],{type:"application/json"}),r=URL.createObjectURL(l),p=document.createElement("a");p.href=r,p.download=`model-preferences-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(p),p.click(),document.body.removeChild(p),URL.revokeObjectURL(r),A.value="Model preferences exported successfully!"}else O.value=o.error.message}catch(o){O.value=`Failed to export preferences: ${o instanceof Error?o.message:"Unknown error"}`}finally{y.value=!1}}async function f(o){n.value=!0,O.value="";try{const l=await o.text(),r=JSON.parse(l),p=await I.importModelPreferences(r);p.ok?A.value="Model preferences imported successfully!":O.value=p.error.message}catch(l){l instanceof SyntaxError?O.value="Invalid JSON file format":O.value=`Failed to import preferences: ${l instanceof Error?l.message:"Unknown error"}`}finally{n.value=!1}return!1}return(o,l)=>{const r=T("a-button"),p=T("a-upload"),C=T("a-space"),P=T("a-divider"),E=T("a-alert"),$=T("a-collapse-panel"),S=T("a-collapse");return s(),_("div",Ba,[c(S,{activeKey:h.value,"onUpdate:activeKey":l[2]||(l[2]=j=>h.value=j),bordered:!1,class:"preferences-collapse"},{default:u(()=>[c($,{key:"preferences"},{header:u(()=>l[3]||(l[3]=[e("div",{class:"preferences-header"},[e("strong",null,"ðŸ”§ V3 Enhanced Features"),e("span",{class:"preferences-description"},"Advanced model preference management")],-1)])),default:u(()=>{var j,Z,V;return[e("div",Ea,[e("div",Da,[l[6]||(l[6]=e("h5",{class:"action-title"},"Model Preferences",-1)),l[7]||(l[7]=e("p",{class:"action-description"}," Export and import your model enabled/disabled preferences for backup or sharing. ",-1)),c(C,null,{default:u(()=>[c(r,{onClick:d,loading:y.value,type:"primary"},{icon:u(()=>[c(k(Qe))]),default:u(()=>[l[4]||(l[4]=z(" Export Preferences "))]),_:1,__:[4]},8,["loading"]),c(p,{"before-upload":f,"show-upload-list":!1,accept:".json"},{default:u(()=>[c(r,{loading:n.value},{icon:u(()=>[c(k(Pe))]),default:u(()=>[l[5]||(l[5]=z(" Import Preferences "))]),_:1,__:[5]},8,["loading"])]),_:1})]),_:1})]),c(P),e("div",La,[l[14]||(l[14]=e("h5",{class:"action-title"},"V3 System Information",-1)),l[15]||(l[15]=e("p",{class:"action-description"}," Enhanced V3 backend capabilities and status. ",-1)),e("div",Aa,[e("div",Ga,[l[8]||(l[8]=e("span",{class:"status-label"},"Total Models:",-1)),e("span",Fa,g(((j=k(t))==null?void 0:j.length)||0),1)]),e("div",Ia,[l[9]||(l[9]=e("span",{class:"status-label"},"Enabled Models:",-1)),e("span",Ua,g(((Z=k(a))==null?void 0:Z.length)||0),1)]),e("div",Va,[l[10]||(l[10]=e("span",{class:"status-label"},"Active Providers:",-1)),e("span",Ra,g(Object.keys(k(i)||{}).length),1)]),e("div",ja,[l[11]||(l[11]=e("span",{class:"status-label"},"Discovery Sources:",-1)),e("span",Na,g(((V=k(L))==null?void 0:V.length)||0),1)]),e("div",Ha,[l[12]||(l[12]=e("span",{class:"status-label"},"Cost Display:",-1)),e("span",Qa,g(k(m)?"Enabled":"Disabled"),1)]),e("div",qa,[l[13]||(l[13]=e("span",{class:"status-label"},"Environmental Display:",-1)),e("span",Ka,g(k(M)?"Enabled":"Disabled"),1)])])]),c(P),e("div",Wa,[l[16]||(l[16]=e("h5",{class:"action-title"},"Provider Status",-1)),l[17]||(l[17]=e("p",{class:"action-description"}," Real-time provider status and model counts. ",-1)),e("div",Ja,[(s(!0),_(Q,null,oe(k(i),(ee,ce)=>(s(),_("div",{key:ce,class:"provider-item"},[e("div",Xa,g(k(I).getProviderDisplayName(ce)),1),e("div",Ya,[e("span",Za,g(ee.length)+" total",1),e("span",el,g(ee.filter(me=>me.enabled).length)+" enabled",1)])]))),128))])])]),O.value?(s(),U(E,{key:0,type:"error",message:O.value,closable:"",onClose:l[0]||(l[0]=ee=>O.value=""),class:"error-alert"},null,8,["message"])):B("",!0),A.value?(s(),U(E,{key:1,type:"success",message:A.value,closable:"",onClose:l[1]||(l[1]=ee=>A.value=""),class:"success-alert"},null,8,["message"])):B("",!0)]}),_:1})]),_:1},8,["activeKey"])])}}}),sl=de(tl,[["__scopeId","data-v-65aaac20"]]),al={key:0,class:"loading-state"},ll={key:1,class:"error-state"},ol={class:"error-message"},nl=["onClick"],il={class:"list-header"},rl={class:"list-info"},ul={class:"list-name"},dl={class:"list-meta"},cl={class:"list-actions"},pl={class:"list-description"},ml={class:"list-preview"},vl={key:0,class:"more-models"},fl=ue({__name:"ModelListsDropdownV3",props:{currentModels:{},isLoading:{type:Boolean,default:!1}},emits:["apply-list","close"],setup(w,{emit:t}){const a=w,i=t,{getProviderGroup:m}=Ye(),M=x([]),L=x(!0),I=x(""),h=x(!1),y=x("");Se(async()=>{try{L.value=!0,I.value="";const{getModelListManager:o}=await Je(async()=>{const{getModelListManager:p}=await import("./index-CL-lquVN.js").then(C=>C.a$);return{getModelListManager:p}},__vite__mapDeps([0,1])),r=await o().getLists();M.value=r.filter(p=>["openrouter-favorites","cost-efficient","high-performance"].includes(p.id)),W.info("Model lists loaded:",{lists:M.value.length})}catch(o){W.error("Failed to load model lists:",o),I.value="Failed to load model lists"}finally{L.value=!1}});function n(o){return a.currentModels.some(l=>l.modelId!==o.modelId?!1:o.provider?l.provider===o.provider&&l.enabled:o.providerGroup?m(l.provider)===o.providerGroup&&l.enabled:!1)}function O(o){return o.models.slice(0,3)}function A(o){return o.modelId.replace(/^.*\//,"").replace(/-instruct$/,"").replace(/-preview$/,"")}async function d(o){if(!(h.value||a.isLoading))try{h.value=!0,y.value=o,await new Promise((l,r)=>{i("apply-list",o),setTimeout(()=>{l()},2e3)})}catch(l){W.error("Failed to apply list:",l)}finally{h.value=!1,y.value=""}}function f(o){var l;(l=o.domEvent)==null||l.stopPropagation()}return(o,l)=>{const r=T("a-spin"),p=T("a-button"),C=T("a-menu-item"),P=T("a-menu-divider"),E=T("a-tag"),$=T("a-menu");return s(),U($,{class:"model-lists-menu",onClick:f},{default:u(()=>[L.value?(s(),_("div",al,[c(r,{size:"small"}),l[0]||(l[0]=e("span",null,"Loading model lists...",-1))])):I.value?(s(),_("div",ll,[e("span",ol,g(I.value),1)])):(s(),_(Q,{key:2},[l[6]||(l[6]=e("div",{class:"menu-header"},[e("span",null,"Built-in Lists")],-1)),(s(!0),_(Q,null,oe(M.value,S=>(s(),U(C,{key:S.id,class:"list-menu-item"},{default:u(()=>[e("div",{class:"list-item",onClick:j=>d(S.id)},[e("div",il,[e("div",rl,[e("span",ul,g(S.name),1),e("span",dl,g(S.models.length)+" models",1)]),e("div",cl,[c(p,{type:"primary",size:"small",loading:h.value&&y.value===S.id,onClick:fe(j=>d(S.id),["stop"])},{default:u(()=>l[1]||(l[1]=[z(" Apply ")])),_:2,__:[1]},1032,["loading","onClick"])])]),e("div",pl,g(S.description),1),e("div",ml,[(s(!0),_(Q,null,oe(O(S),(j,Z)=>(s(),_("span",{key:`${j.provider||j.providerGroup}-${j.modelId}`,class:ie(["preview-model",{enabled:n(j)}])},g(A(j))+g(Z<O(S).length-1?", ":""),3))),128)),S.models.length>3?(s(),_("span",vl," +"+g(S.models.length-3)+" more ",1)):B("",!0)])],8,nl)]),_:2},1024))),128)),c(P),c(C,{disabled:"",class:"future-feature"},{default:u(()=>[c(k(At)),l[3]||(l[3]=e("span",null,"Save Current Selection...",-1)),c(E,{color:"blue",size:"small"},{default:u(()=>l[2]||(l[2]=[z("Soon")])),_:1,__:[2]})]),_:1,__:[3]}),c(C,{disabled:"",class:"future-feature"},{default:u(()=>[c(k(Mt)),l[5]||(l[5]=e("span",null,"Manage Lists...",-1)),c(E,{color:"blue",size:"small"},{default:u(()=>l[4]||(l[4]=[z("Soon")])),_:1,__:[4]})]),_:1,__:[5]})],64))]),_:1})}}}),gl=de(fl,[["__scopeId","data-v-e613a393"]]),yl={class:"models-view","data-testid":"page-models"},_l={class:"page-header"},bl={key:3,class:"discovery-status-bar"},hl={class:"source-name"},kl=["onClick","data-testid","aria-label"],wl={class:"search-filter-bar"},$l={class:"control-bar"},Cl={class:"left-controls"},Ml={class:"stats"},zl={class:"provider-header"},Ol={class:"provider-info"},Sl={key:1,class:"provider-summary"},Tl=ue({__name:"ModelsViewV3",setup(w){const t=Dt(),{models:a,modelsByProvider:i,stats:m}=Xe(),{getProviderGroup:M,requiresApiKey:L}=Ye(),{hasApiKey:I}=zt(),{discoverModels:h,refreshDiscoverySource:y,toggleModel:n,toggleAllModels:O,toggleProviderModels:A,clearAllModels:d,isDiscovering:f,isTogglingModels:o}=Nt(),{discoveryStatus:l,getSourceDisplayName:r,getProviderDisplayName:p,refreshStatus:C}=et(),P=x(""),E=x(""),$=x("all"),S=x(!1),j=R(()=>{const b={};return Object.keys(i.value||{}).forEach(v=>{const F=M(v),q=L(v),Y=I(F);b[v]={hasKey:Y,providerGroup:F,requiresKey:q}}),b}),Z=x(!1),V=x(""),ee=x([]),ce=x(null),me=x([]),ge=x(!1),ne=x(null),G=x(!1);let D=null;const J=b=>{D&&clearTimeout(D),D=setTimeout(()=>{E.value=b},300)},ae=R(()=>{const b={};for(const[v,F]of Object.entries(i.value))b[v]=F.filter(q=>q.enabled).length;return b}),se=x([]),ve=R(()=>{const b=E.value.toLowerCase(),v={},F=Object.keys(i.value);if(se.value.length===0||F.some(q=>!se.value.includes(q))){const q=se.value.filter(N=>F.includes(N)),Y=F.filter(N=>!se.value.includes(N)).sort();se.value=[...q,...Y]}for(const q of se.value){const Y=i.value[q];if(!Y)continue;let N=[...Y];b&&(N=N.filter(pe=>pe.displayName.toLowerCase().includes(b)||pe.modelId.toLowerCase().includes(b)||q.toLowerCase().includes(b))),$.value==="enabled"?N=N.filter(pe=>pe.enabled):$.value==="disabled"&&(N=N.filter(pe=>!pe.enabled)),N.length>0&&(v[q]=N)}return v}),ye=R(()=>{const b=m.value.total;return W.info("ModelsViewV3 V4 totalCount:",b),b}),X=R(()=>m.value.enabled),ke=R(()=>P.value?`No models found matching "${P.value}"`:$.value!=="all"?`No ${$.value} models found`:'No models available. Click "Refresh Models" to discover models.'),$e=R(()=>{if(!V.value)return!1;const b=V.value.toLowerCase();return b.includes("ollama")&&(b.includes("failed to fetch")||b.includes("networkerror when attempting to fetch"))&&!b.includes("litellm")&&!b.includes("openrouter")}),tt=R(()=>{var F,q;const b=((F=i.value["ollama-chat"])==null?void 0:F.length)>0||((q=i.value["ollama-generate"])==null?void 0:q.length)>0,v=l.value.some(Y=>Y.id==="ollama");return b||v||$e.value});R(()=>!!i.value.openrouter);const Ce=R(()=>{const b=se.value.length;return ee.value.length===b&&b>0}),st=Ie(Ot),at=Ie(St);function lt(b){return{idle:"default",loading:"processing",success:"success",error:"error"}[b]||"default"}function ot(b){return ae.value[b]||0}function nt(b){const v=ot(b),F=(i.value[b]||[]).length;return v===0?"default":v===F?"success":"warning"}function it(b){const v=ve.value[b]||[];return v.length>0&&v.every(F=>F.enabled)}function rt(b){const v=ve.value[b]||[];return v.length>0&&v.every(F=>!F.enabled)}function ut(b){t.push({path:"/settings",query:b?{provider:b}:void 0})}function dt(){Ce.value?ee.value=[]:ee.value=[...se.value]}async function ct(b,v){const F=await n(b,v);F.ok||(V.value=F.error.message)}async function xe(b,v){const F=await A(b,v);F.ok||(V.value=F.error.message)}async function pt(){const b=await O(!0);b.ok||(V.value=b.error.message)}async function mt(){const b=await O(!1);b.ok||(V.value=b.error.message)}async function Me(){S.value=!0,V.value="";try{W.info("V4 DEBUG: Starting discovery...");const b=await h({forceRefresh:!0});if(W.info("V4 DEBUG: Discovery result:",b),b.ok){W.info("V4 DEBUG: Discovery successful, models found:",b.value.totalModels),W.info("V4 DEBUG: After discovery, models.value.length =",a.value.length);const v=b.value.errors.filter(F=>!(F.includes("ollama")&&F.includes("not detected")));v.length>0&&(V.value=`Some sources failed: ${v.join("; ")}`)}else W.info("V4 DEBUG: Discovery failed:",b.error),V.value=`Discovery failed: ${b.error.message}`;C()}catch(b){W.error("Failed to refresh models",b),V.value="Failed to refresh models. Please check your connection and try again."}finally{S.value=!1}}async function vt(b){var v,F,q,Y;ce.value=b,V.value="";try{const N=await y(b);b==="ollama"&&(((F=(v=N.value)==null?void 0:v.errors)==null?void 0:F.some(_e=>_e.includes("not detected")))||((Y=(q=N.error)==null?void 0:q.message)==null?void 0:Y.includes("not detected")))||(N.ok&&N.value.errors.length>0?V.value=`Failed to refresh ${r(b)}: ${N.value.errors.join("; ")}`:N.ok||(V.value=`Failed to refresh ${r(b)}: ${N.error.message}`)),C()}catch(N){W.error("Failed to retry source",N,{sourceId:b}),V.value=`Failed to refresh ${r(b)}: ${N instanceof Error?N.message:"Unknown error"}`}finally{ce.value=null}}async function ft(){try{await y("ollama"),C(),Be()}catch(b){W.error("Failed to refresh Ollama models after update",b)}}async function Be(){try{(await Ns()).hasIssue?ne.value="not-detected":ne.value=null}catch{}}async function gt(){if(confirm("This will remove all models and re-discover them from scratch. Any custom model configurations will be lost. Continue?")){Z.value=!0,V.value="";try{const v=await d();if(!v.ok){V.value=v.error.message;return}const F=await h({forceRefresh:!0});if(F.ok&&F.value.errors.length>0){const q=F.value.errors.filter(Y=>!(Y.includes("ollama")&&Y.includes("not detected")));q.length>0&&(V.value=`Some sources failed: ${q.join("; ")}`)}else F.ok||(V.value=`Discovery failed: ${F.error.message}`);C()}catch(v){W.error("Failed to clear and refresh models",v),V.value="Failed to clear and refresh models. Please check your connection and try again."}finally{Z.value=!1}}}async function yt(b){try{W.info("Applying model list:",b);const{getModelListManager:v}=await Je(async()=>{const{getModelListManager:Y}=await import("./index-CL-lquVN.js").then(N=>N.a$);return{getModelListManager:Y}},__vite__mapDeps([0,1])),q=await v().applyList(b);W.info("Model list applied:",q),await Me()}catch(v){W.error("Failed to apply model list:",v),V.value=`Failed to apply model list: ${v instanceof Error?v.message:"Unknown error"}`}}Tt(()=>{J(P.value)});const le=R(()=>o.value);return Se(async()=>{W.info("V4 DEBUG: models.value.length =",a.value.length),W.info("V4 DEBUG: models.value =",a.value),W.info("V4 DEBUG: modelsByProvider.value =",i.value),a.value.length===0&&(W.info("V4 DEBUG: No models found, refreshing..."),Me()),ee.value=[],Be()}),Pt(()=>{P.value="",ee.value=[],V.value=""}),(b,v)=>{const F=T("a-button"),q=T("a-space"),Y=T("a-alert"),N=T("a-tag"),pe=T("a-input-search"),_e=T("a-radio-button"),_t=T("a-radio-group"),bt=T("a-divider"),ht=T("a-dropdown"),kt=T("a-tooltip"),Ee=T("a-collapse-panel"),De=T("a-collapse"),wt=T("a-empty");return s(),_("div",yl,[e("div",_l,[v[11]||(v[11]=e("div",{class:"header-content"},[e("h1",null,"Model Management"),e("p",{class:"description"},"Configure and enable LLM models for testing")],-1)),c(q,null,{default:u(()=>[c(F,{type:"primary",onClick:Me,loading:S.value||k(f),"data-testid":"btn-refresh-models","aria-label":"Refresh available models"},{icon:u(()=>[c(k(qe))]),default:u(()=>[v[9]||(v[9]=z(" Refresh Models "))]),_:1,__:[9]},8,["loading"]),c(F,{danger:"",onClick:gt,loading:Z.value,"data-testid":"btn-clear-refresh-models","aria-label":"Clear all models and refresh"},{icon:u(()=>[c(k(Ke))]),default:u(()=>[v[10]||(v[10]=z(" Clear and Refresh Models "))]),_:1,__:[10]},8,["loading"])]),_:1})]),V.value&&!$e.value?(s(),U(Y,{key:0,type:"error",message:V.value,closable:"",onClose:v[0]||(v[0]=H=>V.value=""),class:"error-alert"},null,8,["message"])):B("",!0),$e.value?(s(),U(Y,{key:1,type:"info",closable:"",onClose:v[1]||(v[1]=H=>V.value=""),class:"ollama-info-alert"},{message:u(()=>v[12]||(v[12]=[e("div",{class:"ollama-message"},[z(" Ollama is not running on this computer. To audit local LLMs, install "),e("a",{href:"https://ollama.com",target:"_blank",rel:"noopener noreferrer"},"Ollama"),z(". ")],-1)])),_:1})):B("",!0),ne.value?(s(),U(Y,{key:2,type:"info",closable:"",onClose:v[2]||(v[2]=H=>ne.value=null),class:"ollama-cors-alert"},{message:u(()=>v[13]||(v[13]=[e("div",{class:"ollama-cors-message"},[e("strong",null,"Ollama not detected: "),e("a",{href:"https://ollama.com",target:"_blank",rel:"noopener noreferrer"},"Ollama"),z(" is an external program for running LLMs on your computer. If Ollama is installed, you must "),e("a",{href:"https://objectgraph.com/blog/ollama-cors/",target:"_blank",rel:"noopener noreferrer"},"configure CORS"),z(' by setting OLLAMA_ORIGINS to "*" or "auditomatic.org". If you do not wish to use Ollama, close and ignore this message. ')],-1)])),_:1})):B("",!0),k(l).length>0?(s(),_("div",bl,[v[14]||(v[14]=e("span",{class:"status-label"},"Sources:",-1)),(s(!0),_(Q,null,oe(k(l),H=>(s(),_("div",{key:H.id,class:"source-status-compact"},[e("span",hl,g(k(r)(H.id)),1),c(N,{color:lt(H.status),size:"small"},{default:u(()=>[H.status==="success"&&H.modelCount?(s(),_(Q,{key:0},[z(g(H.modelCount),1)],64)):H.status==="error"?(s(),_("span",{key:1,onClick:te=>vt(H.id),style:{cursor:"pointer"},"data-testid":`retry-source-${H.id}`,"aria-label":`Retry loading models from ${k(r)(H.id)}`},"âŸ³ retry",8,kl)):(s(),_(Q,{key:2},[z(g(H.status),1)],64))]),_:2},1032,["color"])]))),128))])):B("",!0),e("div",wl,[c(pe,{value:P.value,"onUpdate:value":v[3]||(v[3]=H=>P.value=H),placeholder:"Search models by name, provider, or ID...","allow-clear":"",size:"large",class:"search-input","data-testid":"input-model-search","aria-label":"Search models",loading:P.value!==E.value},null,8,["value","loading"]),c(_t,{value:$.value,"onUpdate:value":v[4]||(v[4]=H=>$.value=H),"button-style":"solid",size:"large"},{default:u(()=>[c(_e,{value:"all"},{default:u(()=>v[15]||(v[15]=[z("All")])),_:1,__:[15]}),c(_e,{value:"enabled"},{default:u(()=>v[16]||(v[16]=[z("Enabled")])),_:1,__:[16]}),c(_e,{value:"disabled"},{default:u(()=>v[17]||(v[17]=[z("Disabled")])),_:1,__:[17]})]),_:1},8,["value"])]),e("div",$l,[e("div",Cl,[c(F,{type:"text",size:"small",onClick:dt},{icon:u(()=>[(s(),U(xt(Ce.value?at.value:st.value)))]),default:u(()=>[z(" "+g(Ce.value?"Collapse All":"Expand All"),1)]),_:1}),c(bt,{type:"vertical"}),c(F,{type:"text",size:"small",onClick:pt,loading:le.value,disabled:le.value},{icon:u(()=>[c(k(re))]),default:u(()=>[v[18]||(v[18]=z(" Enable All "))]),_:1,__:[18]},8,["loading","disabled"]),c(F,{type:"text",size:"small",onClick:mt,loading:le.value,disabled:le.value},{icon:u(()=>[c(k(Ue))]),default:u(()=>[v[19]||(v[19]=z(" Disable All "))]),_:1,__:[19]},8,["loading","disabled"]),c(ht,{open:G.value,"onUpdate:open":v[6]||(v[6]=H=>G.value=H),placement:"bottomLeft",disabled:le.value},{overlay:u(()=>[c(gl,{"current-models":Array.from(k(a)),"is-loading":le.value,onApplyList:yt,onClose:v[5]||(v[5]=H=>G.value=!1)},null,8,["current-models","is-loading"])]),default:u(()=>[c(F,{type:"text",size:"small",loading:le.value,disabled:le.value},{icon:u(()=>[c(k(Ze))]),default:u(()=>[v[20]||(v[20]=z(" Model Lists ")),c(k(Oe))]),_:1,__:[20]},8,["loading","disabled"])]),_:1},8,["open","disabled"])]),e("div",Ml,[e("span",null,g(X.value)+" of "+g(ye.value)+" models enabled",1)])]),c(De,{activeKey:ee.value,"onUpdate:activeKey":v[7]||(v[7]=H=>ee.value=H),bordered:!1,class:"provider-collapse",destroyInactivePanel:!1},{default:u(()=>[(s(!0),_(Q,null,oe(ve.value,(H,te)=>(s(),U(Ee,{key:`provider-${te}`},{header:u(()=>{var Le,Ae;return[e("div",zl,[e("div",Ol,[e("strong",null,g(k(p)(te)),1),(Le=j.value[te])!=null&&Le.requiresKey&&!((Ae=j.value[te])!=null&&Ae.hasKey)?(s(),U(kt,{key:0,placement:"top"},{title:u(()=>{var be;return[z(" API key not set for "+g((be=j.value[te])==null?void 0:be.providerGroup)+". Click to add in settings. ",1)]}),default:u(()=>[c(F,{type:"link",danger:"",size:"small",onClick:fe(be=>{var Ge;return ut((Ge=j.value[te])==null?void 0:Ge.providerGroup)},["stop"])},{icon:u(()=>[c(k(Et))]),default:u(()=>[v[21]||(v[21]=z(" API Key Missing "))]),_:2,__:[21]},1032,["onClick"])]),_:2},1024)):B("",!0),ee.value.includes(te)?(s(),_(Q,{key:2},[c(N,{size:"small",color:"blue"},{default:u(()=>[z(g(H.length)+" models",1)]),_:2},1024),c(N,{size:"small",color:nt(te)},{default:u(()=>[z(g(ae.value[te]||0)+" enabled ",1)]),_:2},1032,["color"])],64)):(s(),_("span",Sl,g(ae.value[te]||0)+" / "+g((k(i)[te]||[]).length)+" enabled ",1))]),c(q,{size:"small"},{default:u(()=>[c(F,{type:"text",size:"small",onClick:fe(be=>xe(te,!0),["stop"]),disabled:it(te)||le.value,loading:le.value},{icon:u(()=>[c(k(re))]),default:u(()=>[v[22]||(v[22]=z(" Enable All "))]),_:2,__:[22]},1032,["onClick","disabled","loading"]),c(F,{type:"text",size:"small",onClick:fe(be=>xe(te,!1),["stop"]),disabled:rt(te)||le.value,loading:le.value},{icon:u(()=>[c(k(Ue))]),default:u(()=>[v[23]||(v[23]=z(" Disable All "))]),_:2,__:[23]},1032,["onClick","disabled","loading"])]),_:2},1024)])]}),default:u(()=>[(s(),U(Bt,null,[c(xa,{models:H,"provider-id":te,onToggleModel:ct},null,8,["models","provider-id"])],1024))]),_:2},1024))),128))]),_:1},8,["activeKey"]),Object.keys(ve.value).length===0?(s(),U(wt,{key:4,description:ke.value,class:"empty-state"},null,8,["description"])):B("",!0),tt.value?(s(),U(De,{key:5,activeKey:me.value,"onUpdate:activeKey":v[8]||(v[8]=H=>me.value=H),bordered:!1,class:"ollama-manager-collapse"},{default:u(()=>[c(Ee,{key:"ollama"},{header:u(()=>v[24]||(v[24]=[e("div",{class:"ollama-header"},[e("strong",null,"Ollama Model Management"),e("span",{class:"ollama-description"},"Download and manage local Ollama models")],-1)])),default:u(()=>[c(ra,{onModelsUpdated:ft})]),_:1})]),_:1},8,["activeKey"])):B("",!0),ge.value?(s(),U(sl,{key:6,class:"enhanced-features"})):B("",!0)])}}}),Gl=de(Tl,[["__scopeId","data-v-bc48e3fa"]]);export{Gl as default};
