import{d as e,f as a,c as l,w as t,aa as r,a0 as s,a3 as o,q as n,ac as i,Z as d,n as u}from"./vendor-B8IWC-3k.js";import{_ as c}from"./index-C6frMIbt.js";const p={class:"template-editor"},v=["innerHTML"],f=["placeholder","rows","data-testid","aria-label"],m=c(e({__name:"TemplateEditor",props:{modelValue:{},label:{},placeholder:{default:"Enter your prompt template..."},required:{type:Boolean},rows:{default:4},variables:{default:()=>[]},variableColors:{default:()=>({})}},emits:["update:modelValue"],setup(e,{expose:c,emit:m}){const b=e,h=m,g=a(),x=a(),w=a(!1),T=l({get:()=>b.modelValue,set:e=>h("update:modelValue",e)}),$=l(()=>{let e=_(T.value);return e=e.replace(/\{\{(\w+)\}\}/g,(e,a)=>{const l=/^\w+$/.test(a),t=b.variableColors[a];return l&&t?`<span class="variable-highlight" style="background-color: ${t.bg}; box-shadow: 0 0 0 1px ${t.bg};">${_(e)}</span>`:l?`<span class="variable-highlight">${_(e)}</span>`:`<span class="variable-error">${_(e)}</span>`}),e=e.replace(/\n/g,"<br>"),e=e.replace(/  /g," &nbsp;"),e.endsWith("<br>")||(e+="<br>"),e});function _(e){const a=document.createElement("div");return a.textContent=e,a.innerHTML}function y(){g.value&&x.value&&(x.value.scrollTop=g.value.scrollTop,x.value.scrollLeft=g.value.scrollLeft)}return t(T,async()=>{await u(),y()}),c({focus:()=>g.value?.focus()}),(e,a)=>(d(),r("div",p,[s("div",{class:o(["editor-container",{focused:w.value}])},[s("div",{ref_key:"highlightRef",ref:x,class:"editor-highlight",innerHTML:$.value,"aria-hidden":"true"},null,8,v),n(s("textarea",{ref_key:"textareaRef",ref:g,"onUpdate:modelValue":a[0]||(a[0]=e=>T.value=e),class:"editor-textarea",placeholder:e.placeholder,rows:e.rows,"data-testid":e.$attrs["data-testid"]||"textarea-template-editor","aria-label":e.$attrs["aria-label"]||"Template editor textarea",onFocus:a[1]||(a[1]=e=>w.value=!0),onBlur:a[2]||(a[2]=e=>w.value=!1),onScroll:y},null,40,f),[[i,T.value]])],2)]))}}),[["__scopeId","data-v-10eaa4b2"]]);export{m as T};
