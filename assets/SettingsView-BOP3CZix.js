import{k as e,d as a,f as t,o as l,aa as s,Z as n,a0 as o,F as i,ab as r,a2 as c,c as d,$ as u,q as p,ac as v,G as m,a3 as g,u as b,ad as h,b as f,Y as y,X as w,_ as k,W as _}from"./vendor-BsQOyEiA.js";import{I as C,e as x,p as D,_ as T,l as A,g as S,i as I,h as P,M as E,B as U,j as N,Q as L}from"./index-B0lyZ-Of.js";import{s as R}from"./storage-calculation.service-BPgoUUni.js";import{p as M,a as O,b as z,c as $,d as j,e as V}from"./import-helpers-R1GGtEJc.js";import"./db-CL8uhZCz.js";var B={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 736c0-111.6-65.4-208-160-252.9V317.3c0-15.1-5.3-29.7-15.1-41.2L536.5 95.4C530.1 87.8 521 84 512 84s-18.1 3.8-24.5 11.4L335.1 276.1a63.97 63.97 0 00-15.1 41.2v165.8C225.4 528 160 624.4 160 736h156.5c-2.3 7.2-3.5 15-3.5 23.8 0 22.1 7.6 43.7 21.4 60.8a97.2 97.2 0 0043.1 30.6c23.1 54 75.6 88.8 134.5 88.8 29.1 0 57.3-8.6 81.4-24.8 23.6-15.8 41.9-37.9 53-64a97 97 0 0043.1-30.5 97.52 97.52 0 0021.4-60.8c0-8.4-1.1-16.4-3.1-23.8H864zM762.3 621.4c9.4 14.6 17 30.3 22.5 46.6H700V558.7a211.6 211.6 0 0162.3 62.7zM388 483.1V318.8l124-147 124 147V668H388V483.1zM239.2 668c5.5-16.3 13.1-32 22.5-46.6 16.3-25.2 37.5-46.5 62.3-62.7V668h-84.8zm388.9 116.2c-5.2 3-11.2 4.2-17.1 3.4l-19.5-2.4-2.8 19.4c-5.4 37.9-38.4 66.5-76.7 66.5-38.3 0-71.3-28.6-76.7-66.5l-2.8-19.5-19.5 2.5a27.7 27.7 0 01-17.1-3.5c-8.7-5-14.1-14.3-14.1-24.4 0-10.6 5.9-19.4 14.6-23.8h231.3c8.8 4.5 14.6 13.3 14.6 23.8-.1 10.2-5.5 19.6-14.2 24.5zM464 400a48 48 0 1096 0 48 48 0 10-96 0z"}}]},name:"rocket",theme:"outlined"};function K(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?Object(arguments[a]):{},l=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(l=l.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),l.forEach(function(a){W(e,a,t[a])})}return e}function W(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}var F=function(a,t){var l=K({},a,t.attrs);return e(C,K({},l,{icon:B}),null)};F.displayName="RocketOutlined",F.inheritAttrs=!1;const G=!1,H={class:"provider-endpoint-configuration"},J={class:"endpoint-grid"},q=["value","onInput","placeholder","disabled","data-testid","aria-label"],Y=T(a({__name:"ProviderEndpointConfiguration",setup(e){const a=x(),d=t([]);function u(e){const a=d.value.find(a=>a.id===e);return a?.api.baseUrl||""}function p(e){return a.isProviderEnabled(e)}return l(async()=>{await D.waitForReady(),d.value=[...D.getAllProviders()]}),(e,t)=>(n(),s("div",H,[t[0]||(t[0]=o("h3",null,"Provider Endpoints",-1)),t[1]||(t[1]=o("p",{class:"section-desc"},"Configure base URLs for API providers",-1)),o("div",J,[(n(!0),s(i,null,r(d.value,e=>{return n(),s("div",{key:e.id,class:"endpoint-item"},[o("label",null,c(e.name),1),o("input",{value:(t=e.id,a.getBaseUrl(t)||""),onInput:t=>function(e,t){const l=t.target.value;a.setBaseUrl(e,l)}(e.id,t),placeholder:u(e.id),disabled:!p(e.id),class:"endpoint-input","data-testid":`input-endpoint-${e.id}`,"aria-label":`${e.name} endpoint URL`},null,40,q)]);var t}),128))])]))}}),[["__scopeId","data-v-451d83ee"]]),Z={class:"system-information-panel"},Q={class:"info-grid"},X={class:"info-item"},ee={class:"info-item"},ae={class:"info-item"},te={class:"info-item"},le=T(a({__name:"SystemInformationPanel",props:{totalRecords:{}},setup(e){const a=e,i=t(null),r=d(()=>({dbVersion:"1.0.0",totalRecords:a.totalRecords,storageUsed:i.value?i.value.formattedUsed:"Calculating...",lastUpdated:(new Date).toLocaleString()}));return l(async()=>{try{i.value=await R.getStorageInfo()}catch(e){A.warn("Failed to get storage info",{error:e})}}),(e,a)=>(n(),s("div",Z,[a[4]||(a[4]=o("h3",null,"System Information",-1)),o("div",Q,[o("div",X,[a[0]||(a[0]=o("label",null,"Database Version:",-1)),o("span",null,c(r.value.dbVersion),1)]),o("div",ee,[a[1]||(a[1]=o("label",null,"Records Count:",-1)),o("span",null,c(r.value.totalRecords),1)]),o("div",ae,[a[2]||(a[2]=o("label",null,"Storage Used:",-1)),o("span",null,c(r.value.storageUsed),1)]),o("div",te,[a[3]||(a[3]=o("label",null,"Last Updated:",-1)),o("span",null,c(r.value.lastUpdated),1)])])]))}}),[["__scopeId","data-v-92906e97"]]),se={class:"database-table-manager"},ne={class:"table-header"},oe={class:"table-actions"},ie=["onClick","data-testid","aria-label"],re=["onClick","data-testid","aria-label"],ce=["onClick","disabled","data-testid","aria-label"],de={key:0,class:"table-content"},ue={class:"table-controls"},pe=["onUpdate:modelValue","data-testid","aria-label"],ve=["onClick","data-testid","aria-label"],me={class:"table-data"},ge=["onClick","data-testid","aria-label","aria-expanded"],be=T(a({__name:"DatabaseTableManager",props:{tableData:{}},emits:["refresh-data"],setup(e,{emit:a}){const l=e,m=a,g=t(new Set),b=t({}),h=t(""),f=t(),y=d(()=>[{name:"designs",count:l.tableData.designs?.length||0},{name:"variableLists",count:l.tableData.variableLists?.length||0},{name:"trials",count:l.tableData.trials?.length||0},{name:"models",count:l.tableData.models?.length||0},{name:"apiCalls",count:l.tableData.apiCalls?.length||0},{name:"settings",count:l.tableData.settings?.length||0},{name:"templatePrompts",count:l.tableData.templatePrompts?.length||0},{name:"spreadsheetPrompts",count:l.tableData.spreadsheetPrompts?.length||0}]);function w(e){const a=l.tableData[e]||[],t=b.value[e]?.toLowerCase()||"";if(!t)return JSON.stringify(a.slice(0,10),null,2);const s=a.filter(e=>JSON.stringify(e).toLowerCase().includes(t));return JSON.stringify(s.slice(0,10),null,2)}function k(e){!function(e,a){const t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),l=URL.createObjectURL(t),s=document.createElement("a");s.href=l,s.download=a,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(l)}(l.tableData[e]||[],`${e}_export.json`)}async function _(e){const a=e.target.files?.[0];if(a){try{const e=await a.text(),t=JSON.parse(e);l.tableData[h.value]&&await async function(e,a){const t=S[e];if(t){let l=a;switch(e){case"trials":l=j(a);break;case"designs":l=$(a);break;case"variableLists":l=z(a);break;case"models":l=O(a);break;case"apiCalls":l=M(a)}await t.bulkPut(l)}}(h.value,t),m("refresh-data"),alert("Import completed successfully!")}catch(t){A.error("Import failed",t),alert("Import failed: "+(t instanceof Error?t.message:"Unknown error"))}f.value&&(f.value.value="")}}return(e,a)=>(n(),s("div",se,[a[0]||(a[0]=o("h3",null,"Database Tables",-1)),(n(!0),s(i,null,r(y.value,e=>(n(),s("div",{key:e.name,class:"table-section"},[o("div",ne,[o("h4",null,c(e.name)+" ("+c(e.count)+" records)",1),o("div",oe,[o("button",{onClick:a=>k(e.name),class:"export-btn","data-testid":`btn-export-table-${e.name}`,"aria-label":`Export ${e.name} table`},"Export",8,ie),o("button",{onClick:a=>{return t=e.name,h.value=t,void f.value?.click();var t},class:"import-btn","data-testid":`btn-import-table-${e.name}`,"aria-label":`Import ${e.name} table`},"Import",8,re),o("button",{onClick:a=>async function(e){if(!confirm(`Are you sure you want to clear all ${e} data? This cannot be undone.`))return;const a=S[e];a&&(await a.clear(),m("refresh-data"))}(e.name),class:"clear-btn",disabled:0===e.count,"data-testid":`btn-clear-table-${e.name}`,"aria-label":`Clear all ${e.name} data`}," Clear All ",8,ce)])]),g.value.has(e.name)?(n(),s("div",de,[o("div",ue,[p(o("input",{"onUpdate:modelValue":a=>b.value[e.name]=a,placeholder:"Search records...",class:"search-input","data-testid":`input-search-${e.name}`,"aria-label":`Search ${e.name} records`},null,8,pe),[[v,b.value[e.name]]]),o("button",{onClick:a=>(e.name,void m("refresh-data")),class:"refresh-btn","data-testid":`btn-refresh-${e.name}`,"aria-label":`Refresh ${e.name} table`},"Refresh",8,ve)]),o("div",me,[o("pre",null,c(w(e.name)),1)])])):u("",!0),o("button",{onClick:a=>{return t=e.name,void(g.value.has(t)?g.value.delete(t):g.value.add(t));var t},class:"toggle-btn","data-testid":`btn-toggle-${e.name}`,"aria-label":`${g.value.has(e.name)?"Collapse":"Expand"} ${e.name} table`,"aria-expanded":g.value.has(e.name)},c(g.value.has(e.name)?"Collapse":"Expand"),9,ge)]))),128)),o("input",{ref_key:"fileInput",ref:f,type:"file",accept:".json",onChange:_,style:{display:"none"},"data-testid":"input-file-import","aria-label":"Select JSON file to import"},null,544)]))}}),[["__scopeId","data-v-f84bffa7"]]),he={class:"trial-debug-information"},fe={key:0,class:"debug-info"},ye={class:"debug-row"},we={class:"debug-row"},ke={class:"debug-row"},_e={class:"debug-row"},Ce={class:"debug-row"},xe={class:"debug-row"},De={class:"debug-json"},Te={key:0,class:"debug-row"},Ae={class:"native-snapshot-info template"},Se={key:1,class:"debug-row"},Ie={class:"native-snapshot-info spreadsheet"},Pe={key:2,class:"debug-row"},Ee={key:1,class:"empty-state"},Ue=T(a({__name:"TrialDebugInformation",setup(e){const a=t(null);async function l(){try{const e=await S.trials.toArray();if(e.length>0){const t=e.sort((e,a)=>new Date(a.created).getTime()-new Date(e.created).getTime())[0];a.value=t,I(t)?A.info("Latest trial debug info (Template):",{name:t.name,type:t.type,templateId:t.templateId,templateName:t.templateName}):P(t)&&A.info("Latest trial debug info (Spreadsheet):",{name:t.name,type:t.type,spreadsheetId:t.spreadsheetId,datasetName:t.datasetName})}else a.value=null}catch(e){A.error("Failed to load latest trial",e)}}function i(e){return e?I(e)?"Template":P(e)?"Spreadsheet":"Unknown V2 type":"No trial"}function r(e){return e?I(e)?e.templateId:P(e)?e.spreadsheetId:"Unknown":"N/A"}function d(e){return e?I(e)?e.templateName:P(e)?e.datasetName:"Unknown":"N/A"}function p(e){return e?I(e)?{type:e.type,templateId:e.templateId,templateName:e.templateName,template:e.template?.substring(0,100)+"...",variablesCount:Object.keys(e.variables||{}).length,outputType:e.outputType,configCount:e.configurationSnapshots?.length||0}:P(e)?{type:e.type,spreadsheetId:e.spreadsheetId,datasetName:e.datasetName,promptPattern:e.promptPattern?.substring(0,100)+"...",datasetRowCount:e.datasetSnapshot?.rows?.length||0,outputType:e.outputType,configCount:e.configurationSnapshots?.length||0}:{type:"unknown",raw:e}:null}return l(),(e,t)=>{return n(),s("div",he,[t[9]||(t[9]=o("h3",null,"Latest Trial Debug Info",-1)),a.value?(n(),s("div",fe,[o("div",ye,[t[0]||(t[0]=o("strong",null,"Name:",-1)),m(" "+c(a.value.name),1)]),o("div",we,[t[1]||(t[1]=o("strong",null,"Created:",-1)),m(" "+c(new Date(a.value.created).toLocaleString()),1)]),o("div",ke,[t[2]||(t[2]=o("strong",null,"Source Type:",-1)),o("span",{class:g(["source-type",(v=a.value,v?I(v)?"template":P(v)?"spreadsheet":"unknown":"none")])},c(i(a.value)),3)]),o("div",_e,[t[3]||(t[3]=o("strong",null,"Source ID:",-1)),o("code",null,c(r(a.value)),1)]),o("div",Ce,[t[4]||(t[4]=o("strong",null,"Source Name:",-1)),o("span",null,c(d(a.value)),1)]),o("div",xe,[t[5]||(t[5]=o("strong",null,"V2 Trial Data:",-1)),o("pre",De,c(JSON.stringify(p(a.value),null,2)),1)]),b(I)(a.value)?(n(),s("div",Te,[t[6]||(t[6]=o("strong",null,"V2 Template Trial:",-1)),o("div",Ae,[o("div",null,"Template Name: "+c(a.value.templateName),1),o("div",null,"Template Length: "+c(a.value.template?.length||0)+" chars",1),o("div",null,"Variables: "+c(Object.keys(a.value.variables||{}).join(", ")||"None"),1),o("div",null,"Output Type: "+c(a.value.outputType),1),o("div",null,"Extract Pattern: "+c(a.value.extractPattern||"None"),1)])])):u("",!0),b(P)(a.value)?(n(),s("div",Se,[t[7]||(t[7]=o("strong",null,"V2 Spreadsheet Trial:",-1)),o("div",Ie,[o("div",null,"Dataset Name: "+c(a.value.datasetName),1),o("div",null,"Prompt Pattern Length: "+c(a.value.promptPattern?.length||0)+" chars",1),o("div",null,"Dataset Rows: "+c(a.value.datasetSnapshot?.rows?.length||0),1),o("div",null,"Dataset Columns: "+c(a.value.datasetSnapshot?.columns?.join(", ")||"None"),1),o("div",null,"Output Type: "+c(a.value.outputType),1)])])):u("",!0),!a.value||b(I)(a.value)||b(P)(a.value)?u("",!0):(n(),s("div",Pe,t[8]||(t[8]=[o("div",{class:"warning-box"}," âš ï¸ Unknown V2 trial type - this trial may be corrupted or from an unsupported version ",-1)])))])):(n(),s("div",Ee," No trials found ")),o("button",{onClick:l,class:"refresh-btn"}," Refresh Latest Trial ")]);var v}}}),[["__scopeId","data-v-d30cff78"]]),Ne={class:"import-export-tools"},Le=T(a({__name:"ImportExportTools",props:{tableData:{}},emits:["refresh-data"],setup(e,{emit:a}){const l=e,i=a,r=t(""),c=t();async function d(){k({version:"1.0.0",exported:(new Date).toISOString(),data:l.tableData},`auditomatic_full_export_${Date.now()}.json`)}async function u(){const e=l.tableData.designs||[],a=l.tableData.variableLists||[];k({version:"1.0.0",exported:(new Date).toISOString(),designs:e,variableLists:a},`designs_variables_export_${Date.now()}.json`)}async function p(){const e=l.tableData.trials||[],a=l.tableData.apiCalls||[];k({version:"1.0.0",exported:(new Date).toISOString(),trials:e,apiCalls:a},`trials_export_${Date.now()}.json`)}async function v(){k(l.tableData.models||[],`models_export_${Date.now()}.json`)}async function m(){k((l.tableData.models||[]).map(e=>({id:e.id,provider:e.provider,modelId:e.modelId,enabled:e.enabled})),`model_states_export_${Date.now()}.json`)}function g(){r.value="fullDatabase",c.value?.click()}function b(){r.value="designsAndVariables",c.value?.click()}function h(){r.value="trials",c.value?.click()}function f(){r.value="models",c.value?.click()}function y(){r.value="modelStates",c.value?.click()}async function w(e){const a=e.target.files?.[0];if(a){try{const e=await a.text(),t=JSON.parse(e);switch(r.value){case"fullDatabase":await async function(e){const a=V(e);if(a.data)for(const[t,l]of Object.entries(a.data)){const e=S[t];e&&await e.bulkPut(l)}}(t);break;case"designsAndVariables":await async function(e){if(e.designs){const a=$(e.designs);await S.designs.bulkPut(a)}if(e.variableLists){const a=z(e.variableLists);await S.variableLists.bulkPut(a)}}(t);break;case"trials":await async function(e){if(e.trials){const a=j(e.trials);await S.trials.bulkPut(a)}if(e.apiCalls){const a=M(e.apiCalls);await S.apiCalls.bulkPut(a)}}(t);break;case"models":await async function(e){const a=O(e);await S.models.bulkPut(a)}(t);break;case"modelStates":await async function(e){for(const a of e)await S.models.update(a.id,{enabled:a.enabled})}(t)}i("refresh-data"),alert("Import completed successfully!")}catch(t){A.error("Import failed",t),alert("Import failed: "+(t instanceof Error?t.message:"Unknown error"))}c.value&&(c.value.value="")}}function k(e,a){const t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),l=URL.createObjectURL(t),s=document.createElement("a");s.href=l,s.download=a,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(l)}return(e,a)=>(n(),s("div",Ne,[a[6]||(a[6]=o("h3",null,"Import/Export Tools",-1)),o("div",{class:"export-group"},[a[0]||(a[0]=o("h4",null,"Complete Database",-1)),o("div",{class:"export-actions"},[o("button",{onClick:d,class:"export-all-btn","data-testid":"btn-export-full-database","aria-label":"Export complete database"},"Export All Data"),o("button",{onClick:g,class:"import-all-btn","data-testid":"btn-import-full-database","aria-label":"Import complete database"},"Import All Data")])]),o("div",{class:"export-group"},[a[1]||(a[1]=o("h4",null,"Designs & Variables",-1)),a[2]||(a[2]=o("p",{class:"export-desc"},"Exports designs with their linked variable lists",-1)),o("div",{class:"export-actions"},[o("button",{onClick:u,class:"export-btn","data-testid":"btn-export-designs-variables","aria-label":"Export designs and variables"},"Export Designs+Variables"),o("button",{onClick:b,class:"import-btn","data-testid":"btn-import-designs-variables","aria-label":"Import designs and variables"},"Import Designs+Variables")])]),o("div",{class:"export-group"},[a[3]||(a[3]=o("h4",null,"Trials",-1)),a[4]||(a[4]=o("p",{class:"export-desc"},"Exports trials with configuration snapshots and results",-1)),o("div",{class:"export-actions"},[o("button",{onClick:p,class:"export-btn"},"Export Trials"),o("button",{onClick:h,class:"import-btn"},"Import Trials")])]),o("div",{class:"export-group"},[a[5]||(a[5]=o("h4",null,"Models",-1)),o("div",{class:"export-actions"},[o("button",{onClick:v,class:"export-btn"},"Export All Models"),o("button",{onClick:f,class:"import-btn"},"Import All Models")]),o("div",{class:"export-actions"},[o("button",{onClick:m,class:"export-state-btn"},"Export Model States Only"),o("button",{onClick:y,class:"import-state-btn"},"Import Model States Only")])]),o("input",{ref_key:"fileInput",ref:c,type:"file",accept:".json",onChange:w,style:{display:"none"},"data-testid":"input-file-import","aria-label":"Select JSON file to import"},null,544)]))}}),[["__scopeId","data-v-89d2b8b7"]]),Re={class:"developer-tools"},Me={key:0,class:"section"},Oe={key:0,class:"migration-status"},ze={class:"status-item"},$e={class:"status-item"},je={class:"status-item"},Ve={class:"migration-actions"},Be=["disabled"],Ke=["disabled"],We=["disabled"],Fe={key:0},Ge={key:0},He={class:"section"},Je={class:"tokenizer-test"},qe={class:"test-input-group"},Ye={class:"test-actions"},Ze=["disabled"],Qe=["disabled"],Xe=["disabled"],ea={class:"worker-status"},aa={class:"text-secondary"},ta={key:0,class:"test-results"},la={class:"result-grid"},sa={class:"result-item"},na={class:"result-item"},oa={class:"result-item"},ia={class:"result-item"},ra={key:0,class:"error-message"},ca={key:1,class:"progress-messages"},da={class:"section debug-settings-section"},ua={class:"debug-toggle"},pa={class:"checkbox-label"},va={class:"checkbox-text"},ma={key:0,class:"debug-warning"},ga=T(a({__name:"DeveloperTools",emits:["refresh-data"],setup(e,{emit:a}){const d=a,b=t(G),f=t(!1),y=t(!1),w=t(!1),k=t(null),_=t(null),C=t("Hello world! This is a test of tiktoken tokenization."),D=t(!1),T=t(!1),I=t(null),P=t(null),U=x(),N=t(!1);async function L(){await U.setDebugThrowAllErrors(N.value),A.info("Debug throw all errors flag updated",{enabled:N.value})}async function R(){f.value=!0,_.value=null;try{const e=await S.designs.toArray(),a=await S.templatePrompts.toArray(),t=await S.spreadsheetPrompts.toArray();let l=0;const s=new Set(e.map(e=>e.id)),n=new Set([...a.map(e=>e.id),...t.map(e=>e.id)]);for(const r of s)n.has(r)&&l++;const o=e.length,i=o-l;k.value={total:o,migrated:l,pending:i},0===l&&o>0?_.value={type:"warning",title:"No migrations found",details:`${o} designs are ready to migrate to the new prompt system.`}:l===o&&o>0?_.value={type:"success",title:"Migration complete",details:"All designs have been migrated to the new prompt system."}:l>0&&i>0&&(_.value={type:"warning",title:"Partial migration",details:`${l} of ${o} designs have been migrated. ${i} remaining.`})}catch(e){A.error("Failed to check migration status",e),_.value={type:"error",title:"Failed to check migration status",details:e instanceof Error?e.message:"Unknown error"}}finally{f.value=!1}}async function M(){y.value=!0,_.value=null;try{await E.forceReMigration(),await R();const e=await E.getMigrationStatus();_.value={type:"success",title:"V2 migration completed successfully",details:`Migration completed. Status: ${e.templatePromptsCount} templates, ${e.spreadsheetPromptsCount} spreadsheets. ${e.legacyDesignsCount} legacy designs remaining.`}}catch(e){A.error("Migration failed",e),_.value={type:"error",title:"V2 migration failed",details:e instanceof Error?e.message:"Unknown error"}}finally{y.value=!1}}async function O(){w.value=!0,_.value=null;try{const e=await E.validateMigration();e.valid?_.value={type:"success",title:"Migration validation passed",details:"All designs have been correctly migrated to their respective prompt tables."}:_.value={type:"error",title:"Migration validation failed",details:`Found ${e.errors.length} validation errors.`,errors:e.errors.join("\n")}}catch(e){A.error("Validation failed",e),_.value={type:"error",title:"Validation failed",details:e instanceof Error?e.message:"Unknown error"}}finally{w.value=!1}}async function z(){if(!C.value)return;D.value=!0,P.value=null;const e=Date.now();try{const a=Math.ceil(C.value.length/4),t=Date.now()-e;P.value={method:"Approximate (4 chars/token)",tokens:a,duration:t,isAccurate:!1}}catch(a){P.value={method:"Approximate (4 chars/token)",tokens:0,duration:Date.now()-e,isAccurate:!1,error:a instanceof Error?a.message:"Unknown error"}}finally{D.value=!1}}async function $(){if(!C.value)return;T.value=!0,P.value=null;const e=Date.now(),a=[];try{const t=new Worker(new URL(""+new URL("token-calculation.worker-_TmsjB_5.js",import.meta.url).href,import.meta.url),{type:"module"}),l=`test-${Date.now()}`,s=await new Promise((e,s)=>{const n=setTimeout(()=>{t.terminate(),s(new Error("Worker timeout after 30 seconds"))},3e4);t.onmessage=o=>{const i=o.data;i.id===l&&("progress"===i.type?a.push(`${i.stage}: ${i.message}`):"result"===i.type?(clearTimeout(n),t.terminate(),e(i.result)):"error"===i.type&&(clearTimeout(n),t.terminate(),s(new Error(i.error.message))))},t.onerror=e=>{clearTimeout(n),t.terminate(),s(e)},t.postMessage({id:l,method:"accurate",design:{promptTemplate:C.value,variableBindings:{}}})}),n=Date.now()-e;P.value={method:"Accurate (Reload CDN)",tokens:s.minTokens,duration:n,isAccurate:s.isAccurate,progress:a}}catch(t){P.value={method:"Accurate (Reload CDN)",tokens:0,duration:Date.now()-e,isAccurate:!1,error:t instanceof Error?t.message:"Unknown error",progress:a}}finally{T.value=!1}}async function j(){if(!C.value||!I.value)return;T.value=!0,P.value=null;const e=Date.now(),a=[];try{const t=`test-${Date.now()}`,l=await new Promise((e,l)=>{const s=setTimeout(()=>{l(new Error("Worker timeout after 30 seconds"))},3e4),n=o=>{const i=o.data;i.id===t&&("progress"===i.type?a.push(`${i.stage}: ${i.message}`):"result"===i.type?(clearTimeout(s),I.value?.removeEventListener("message",n),e(i.result)):"error"===i.type&&(clearTimeout(s),I.value?.removeEventListener("message",n),l(new Error(i.error.message))))};I.value?.addEventListener("message",n),I.value?.postMessage({id:t,method:"accurate",design:{promptTemplate:C.value,variableBindings:{}}})}),s=Date.now()-e;P.value={method:"Accurate (Use Cached)",tokens:l.minTokens,duration:s,isAccurate:l.isAccurate,progress:a}}catch(t){P.value={method:"Accurate (Use Cached)",tokens:0,duration:Date.now()-e,isAccurate:!1,error:t instanceof Error?t.message:"Unknown error",progress:a}}finally{T.value=!1}}async function V(){if(!I.value)try{const e=new Worker(new URL(""+new URL("token-calculation.worker-_TmsjB_5.js",import.meta.url).href,import.meta.url),{type:"module"});await new Promise(a=>{const t=setTimeout(()=>a(!1),1e4);e.onmessage=e=>{"result"!==e.data.type&&"error"!==e.data.type||(clearTimeout(t),a(!0))},e.postMessage({id:"prime",method:"accurate",design:{promptTemplate:"test",variableBindings:{}}})})?I.value=e:e.terminate()}catch(e){A.error("Failed to initialize persistent worker",e)}}function B(){I.value&&(I.value.terminate(),I.value=null)}async function K(){confirm("Are you sure you want to clear ALL data? This cannot be undone.")&&(await S.delete(),localStorage.clear(),sessionStorage.clear(),document.cookie.split(";").forEach(e=>{document.cookie=e.replace(/^ +/,"").replace(/=.*/,"=;expires="+(new Date).toUTCString()+";path=/")}),A.info("All data cleared - reloading page"),window.location.reload())}async function W(){confirm("Reset all settings to defaults? This will clear all data.")&&await K()}async function F(){confirm("Regenerate database? This will clear all data and rebuild.")&&(await S.delete(),await S.open(),d("refresh-data"))}return l(async()=>{await U.initialize(),N.value=U.getDebugThrowAllErrors()}),(e,a)=>(n(),s("div",Re,[b.value?(n(),s("div",Me,[a[5]||(a[5]=o("h3",null,"Design Type Migration",-1)),a[6]||(a[6]=o("p",{class:"section-desc"},"Migrate old designs to new template/spreadsheet prompt types",-1)),k.value?(n(),s("div",Oe,[o("div",ze,[a[2]||(a[2]=o("label",null,"Total Designs:",-1)),o("span",null,c(k.value.total),1)]),o("div",$e,[a[3]||(a[3]=o("label",null,"Already Migrated:",-1)),o("span",null,c(k.value.migrated),1)]),o("div",je,[a[4]||(a[4]=o("label",null,"Pending Migration:",-1)),o("span",null,c(k.value.pending),1)])])):u("",!0),o("div",Ve,[o("button",{onClick:R,class:"check-btn",disabled:f.value},c(f.value?"Checking...":"Check Migration Status"),9,Be),o("button",{onClick:M,class:"migrate-btn",disabled:y.value||null!==k.value&&0===k.value.pending},c(y.value?"Migrating...":"Run Migration"),9,Ke),o("button",{onClick:O,class:"validate-btn",disabled:w.value},c(w.value?"Validating...":"Validate Migration"),9,We)]),_.value?(n(),s("div",{key:1,class:g(["migration-result",_.value.type])},[o("h4",null,c(_.value.title),1),_.value.details?(n(),s("div",Fe,[o("p",null,c(_.value.details),1),_.value.errors?(n(),s("pre",Ge,c(_.value.errors),1)):u("",!0)])):u("",!0)],2)):u("",!0)])):u("",!0),o("div",He,[a[14]||(a[14]=o("h3",null,"Tokenizer Testing",-1)),a[15]||(a[15]=o("p",{class:"section-desc"},"Test the CDN-based tiktoken worker implementation",-1)),o("div",Je,[o("div",qe,[a[7]||(a[7]=o("label",null,"Test Text:",-1)),p(o("textarea",{"onUpdate:modelValue":a[0]||(a[0]=e=>C.value=e),placeholder:"Enter text to tokenize...",class:"test-textarea",rows:"3"},null,512),[[v,C.value]])]),o("div",Ye,[o("button",{onClick:z,class:"test-btn",disabled:!C.value||D.value},c(D.value?"Testing...":"Test Approximate (4 chars/token)"),9,Ze),o("button",{onClick:$,class:"test-btn primary",disabled:!C.value||T.value},c(T.value?"Loading CDN...":"Test Accurate (Reload CDN)"),9,Qe),o("button",{onClick:j,class:"test-btn secondary",disabled:!C.value||T.value||!I.value},c(T.value?"Testing...":"Test Accurate (Use Cached)"),9,Xe)]),o("div",ea,[o("small",aa,[m(" Worker Status: "+c(I.value?"âœ… Cached (CDN loaded)":"âŒ Not initialized")+" ",1),I.value?u("",!0):(n(),s("button",{key:0,onClick:V,class:"init-btn"},"Initialize Cached Worker")),I.value?(n(),s("button",{key:1,onClick:B,class:"terminate-btn"},"Terminate Worker")):u("",!0)])]),P.value?(n(),s("div",ta,[a[13]||(a[13]=o("h4",null,"Results:",-1)),o("div",la,[o("div",sa,[a[8]||(a[8]=o("label",null,"Method:",-1)),o("span",null,c(P.value.method),1)]),o("div",na,[a[9]||(a[9]=o("label",null,"Token Count:",-1)),o("span",null,c(P.value.tokens),1)]),o("div",oa,[a[10]||(a[10]=o("label",null,"Time Taken:",-1)),o("span",null,c(P.value.duration)+"ms",1)]),o("div",ia,[a[11]||(a[11]=o("label",null,"Is Accurate:",-1)),o("span",null,c(P.value.isAccurate?"âœ… Yes":"âŒ No"),1)])]),P.value.error?(n(),s("div",ra," âŒ Error: "+c(P.value.error),1)):u("",!0),P.value.progress?(n(),s("div",ca,[a[12]||(a[12]=o("h5",null,"Progress:",-1)),(n(!0),s(i,null,r(P.value.progress,e=>(n(),s("div",{key:e,class:"progress-msg"},c(e),1))),128))])):u("",!0)])):u("",!0)])]),o("div",da,[a[17]||(a[17]=o("h3",null,"ðŸš¨ Heisenbug Debug Mode",-1)),a[18]||(a[18]=o("p",{class:"section-desc"},"When enabled, all API execution errors will throw immediately instead of being stored, showing full stack traces in DevTools.",-1)),o("div",ua,[o("label",pa,[p(o("input",{type:"checkbox","onUpdate:modelValue":a[1]||(a[1]=e=>N.value=e),onChange:L},null,544),[[h,N.value]]),o("span",va,c(N.value?"ðŸ”¥ Debug Mode ON - Errors will throw!":"ðŸ’¤ Debug Mode OFF - Errors stored normally"),1)])]),N.value?(n(),s("div",ma,a[16]||(a[16]=[m(" âš ï¸ "),o("strong",null,"Warning:",-1),m(" With debug mode enabled, any error during API execution will crash the application and show stack traces in browser DevTools. This is intended for debugging the heisenbug. ")]))):u("",!0)]),o("div",{class:"section danger-actions-section"},[a[19]||(a[19]=o("h3",null,"Destructive Actions",-1)),o("div",{class:"danger-actions"},[o("button",{onClick:K,class:"danger-btn","data-testid":"btn-clear-all-data","aria-label":"Clear all application data"},"Clear All Data"),o("button",{onClick:W,class:"danger-btn","data-testid":"btn-reset-defaults","aria-label":"Reset application to default settings"},"Reset to Defaults"),o("button",{onClick:F,class:"danger-btn","data-testid":"btn-regenerate-database","aria-label":"Regenerate database structure"},"Regenerate Database")])])]))}}),[["__scopeId","data-v-a2b7505a"]]),ba={class:"debug-data-management"},ha=T(a({__name:"DebugDataManagement",setup(a){const o=t({}),i=d(()=>Object.values(o.value).reduce((e,a)=>e+a.length,0));async function r(){try{const e={designs:await S.designs.toArray(),variableLists:await S.variableLists.toArray(),trials:await S.trials.toArray(),models:await S.models.toArray(),apiCalls:await S.apiCalls.toArray(),settings:await S.settings.toArray(),templatePrompts:await S.templatePrompts.toArray(),spreadsheetPrompts:await S.spreadsheetPrompts.toArray()};o.value=e}catch(e){A.error("Failed to load table data",e)}}return l(async()=>{await r()}),(a,t)=>(n(),s("div",ba,[e(Y),e(le,{"total-records":i.value},null,8,["total-records"]),e(be,{"table-data":o.value,onRefreshData:r},null,8,["table-data"]),e(Ue),e(Le,{"table-data":o.value,onRefreshData:r},null,8,["table-data"]),e(ga,{onRefreshData:r})]))}}),[["__scopeId","data-v-224fee86"]]),fa={class:"background-keep-alive-settings"},ya={class:"setting-row"},wa={key:1,class:"keep-alive-config"},ka={class:"setting-row"},_a={key:0,class:"setting-row"},Ca={class:"method-info"},xa={class:"methods-grid"},Da={class:"method-name"},Ta={class:"method-description"},Aa={key:0,class:"method-status"},Sa={class:"current-status"},Ia={class:"status-grid"},Pa={class:"status-item"},Ea={key:0,class:"status-item"},Ua={key:1,class:"status-item"},Na={class:"status-item"},La={class:"setting-row"},Ra=T(a({__name:"BackgroundKeepAliveSettings",setup(a){const d=x(),p=U.getInstance(),v=t(p.getStatus()),h=t(p.getAvailableMethods()),_=t(p.getBrowserRecommendation());let C=null;l(()=>{C=window.setInterval(()=>{v.value=p.getStatus()},5e3)}),f(()=>{C&&clearInterval(C)});const D=async e=>{await d.setBackgroundKeepAlive(e)},T=e=>{const a=d.backgroundKeepAlive;return a.method===e||"auto"===a.method&&a.fallbackMethods.includes(e)},A=e=>{switch(e){case"open":return"green";case"connecting":return"orange";case"closed":return"red";default:return"gray"}};return(a,t)=>{const l=y("a-alert"),p=y("a-switch"),f=y("a-select-option"),C=y("a-select"),x=y("a-tag");return n(),s("div",fa,[t[24]||(t[24]=o("div",{class:"section-header"},[o("h3",null,"Background Tab Protection"),o("p",{class:"section-desc"}," Prevent browser throttling during long trials by maintaining WebRTC connections ")],-1)),b(d).backgroundKeepAlive.showBrowserWarnings&&_.value?(n(),w(l,{key:0,type:_.value.severity,message:`${_.value.browser} Browser Detected`,description:_.value.recommendation,"show-icon":!0,closable:!0,onClose:t[0]||(t[0]=()=>D({showBrowserWarnings:!1})),style:{"margin-bottom":"16px"}},null,8,["type","message","description"])):u("",!0),o("div",ya,[t[5]||(t[5]=o("div",{class:"setting-label"},[o("label",null,"Enable Background Protection"),o("div",{class:"setting-desc"}," Keep trials running smoothly when browser tab is in background ")],-1)),e(p,{checked:b(d).backgroundKeepAlive.enabled,onChange:t[1]||(t[1]=e=>D({enabled:e}))},null,8,["checked"])]),b(d).backgroundKeepAlive.enabled?(n(),s("div",wa,[o("div",ka,[t[11]||(t[11]=o("div",{class:"setting-label"},[o("label",null,"Protection Method"),o("div",{class:"setting-desc"}," Choose how to prevent background throttling ")],-1)),e(C,{value:b(d).backgroundKeepAlive.method,onChange:t[2]||(t[2]=e=>D({method:e})),style:{width:"200px"}},{default:k(()=>[e(f,{value:"auto"},{default:k(()=>t[6]||(t[6]=[o("div",{class:"method-option"},[o("strong",null,"Auto (Recommended)"),o("div",{class:"method-desc"},"Try methods with fallbacks")],-1)])),_:1,__:[6]}),e(f,{value:"self-loopback"},{default:k(()=>t[7]||(t[7]=[o("div",{class:"method-option"},[o("strong",null,"Self-Loopback"),o("div",{class:"method-desc"},"No external servers needed")],-1)])),_:1,__:[7]}),e(f,{value:"open-relay"},{default:k(()=>t[8]||(t[8]=[o("div",{class:"method-option"},[o("strong",null,"Open Relay"),o("div",{class:"method-desc"},"Free public TURN service")],-1)])),_:1,__:[8]}),e(f,{value:"google-stun"},{default:k(()=>t[9]||(t[9]=[o("div",{class:"method-option"},[o("strong",null,"Google STUN"),o("div",{class:"method-desc"},"Google's STUN servers")],-1)])),_:1,__:[9]}),e(f,{value:"disabled"},{default:k(()=>t[10]||(t[10]=[o("div",{class:"method-option"},[o("strong",null,"Disabled"),o("div",{class:"method-desc"},"No background protection")],-1)])),_:1,__:[10]})]),_:1},8,["value"])]),"auto"===b(d).backgroundKeepAlive.method?(n(),s("div",_a,[t[15]||(t[15]=o("div",{class:"setting-label"},[o("label",null,"Fallback Order"),o("div",{class:"setting-desc"}," Order to try methods if primary fails ")],-1)),e(C,{mode:"multiple",value:b(d).backgroundKeepAlive.fallbackMethods,onChange:t[3]||(t[3]=e=>D({fallbackMethods:e})),style:{width:"300px"},placeholder:"Select fallback methods"},{default:k(()=>[e(f,{value:"self-loopback"},{default:k(()=>t[12]||(t[12]=[m("Self-Loopback")])),_:1,__:[12]}),e(f,{value:"open-relay"},{default:k(()=>t[13]||(t[13]=[m("Open Relay")])),_:1,__:[13]}),e(f,{value:"google-stun"},{default:k(()=>t[14]||(t[14]=[m("Google STUN")])),_:1,__:[14]})]),_:1},8,["value"])])):u("",!0),o("div",Ca,[t[17]||(t[17]=o("h4",null,"Method Details",-1)),o("div",xa,[(n(!0),s(i,null,r(h.value,(a,l)=>(n(),s("div",{key:l,class:g(["method-card",{active:T(l)}])},[o("div",Da,c(a.name),1),o("div",Ta,c(a.description),1),T(l)?(n(),s("div",Aa,[e(x,{color:"green"},{default:k(()=>t[16]||(t[16]=[m("Currently Selected")])),_:1,__:[16]})])):u("",!0)],2))),128))])])])):u("",!0),o("div",Sa,[t[22]||(t[22]=o("h4",null,"Current Status",-1)),o("div",Ia,[o("div",Pa,[t[18]||(t[18]=o("label",null,"Protection Active:",-1)),e(x,{color:v.value.isActive?"green":"red"},{default:k(()=>[m(c(v.value.isActive?"Active":"Inactive"),1)]),_:1},8,["color"])]),v.value.method?(n(),s("div",Ea,[t[19]||(t[19]=o("label",null,"Method:",-1)),o("span",null,c(v.value.methodName),1)])):u("",!0),v.value.lastHeartbeat?(n(),s("div",Ua,[t[20]||(t[20]=o("label",null,"Last Heartbeat:",-1)),o("span",null,c((S=v.value.lastHeartbeat,new Intl.DateTimeFormat("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(S))),1)])):u("",!0),o("div",Na,[t[21]||(t[21]=o("label",null,"Connection State:",-1)),e(x,{color:A(v.value.connectionState)},{default:k(()=>[m(c(v.value.connectionState),1)]),_:1},8,["color"])])])]),o("div",La,[t[23]||(t[23]=o("div",{class:"setting-label"},[o("label",null,"Show Browser Warnings"),o("div",{class:"setting-desc"}," Display warnings about browser-specific throttling behavior ")],-1)),e(p,{checked:b(d).backgroundKeepAlive.showBrowserWarnings,onChange:t[4]||(t[4]=e=>D({showBrowserWarnings:e}))},null,8,["checked"])])]);var S}}}),[["__scopeId","data-v-1590dacc"]]),Ma={class:"settings-view full-width","data-testid":"page-settings"},Oa={class:"api-key-label"},za={class:"provider-info spacing-top-xs"},$a={class:"text-secondary"},ja={class:"help-item"},Va={class:"help-content"},Ba={class:"help-item"},Ka={class:"help-content"},Wa={class:"single-line-setting"},Fa={key:0,class:"environmental-toggle-section"},Ga={class:"env-toggle-container"},Ha=T(a({__name:"SettingsView",setup(a){const p=x(),v=N(),h=_(),f=t([]),C=t([]),T=d({get:()=>p.financialCostsEnabled,set:e=>p.setFinancialCostsEnabled(e)}),S=t(!0),I=d({get:()=>p.environmentalCostsEnabled,set:e=>p.setEnvironmentalCostsEnabled(e)}),P=t("carbon"),E=t(["cars","phones"]),U=[{title:"Provider Group",dataIndex:"name",key:"name",width:150},{title:"Providers",dataIndex:"providers",key:"providers",width:200},{title:"Value",key:"input",width:100,align:"center"},{title:"Slider (1-6)",key:"slider",width:200,align:"center"}],R=d(()=>{const e=D.getAllGroups(),a=[];for(const t of e){const e=D.getProvidersInGroup(t);if(0===e.length)continue;const l=e.some(e=>p.isProviderEnabled(e.id));let s=1;for(const a of e)a.execution?.defaultConcurrency&&(s=Math.max(s,a.execution.defaultConcurrency));const n=p.getGroupConcurrency(t),o=void 0!==n?n:s;a.push({id:t,name:t.charAt(0).toUpperCase()+t.slice(1),providers:e.map(e=>e.name).join(", "),concurrency:o,enabled:l,defaultConcurrency:s})}return a}),M=d(()=>p.apiKeyGroups);function O(e,a){p.setGroupConcurrency(e,a)}function z(){h.push("/environmental-config")}function $(){v.reset(),h.push("/welcome")}return l(async()=>{A.debug("SettingsView mounted")}),(a,t)=>{const l=y("a-tag"),d=y("a-alert"),v=y("a-input-password"),h=y("a-form-item"),_=y("a-col"),x=y("a-row"),D=y("a-form"),A=y("a-card"),N=y("a-button"),j=y("a-divider"),V=y("a-space"),B=y("a-input-number"),K=y("a-slider"),W=y("a-table"),G=y("a-collapse-panel"),H=y("a-collapse"),J=y("a-switch"),q=y("a-select-option"),Y=y("a-select"),Z=y("a-checkbox"),Q=y("a-checkbox-group");return n(),s("div",Ma,[t[31]||(t[31]=o("div",{class:"settings-header"},[o("h2",null,"Settings"),o("p",{class:"description"},"Configure API keys and provider settings for scientific model testing")],-1)),e(A,{title:"API Keys",class:"settings-card",size:"small"},{extra:k(()=>[e(l,{color:"green",size:"small"},{default:k(()=>[m(c(Object.values(M.value).filter(e=>e.hasKey).length)+" / "+c(Object.keys(M.value).length)+" configured ",1)]),_:1})]),default:k(()=>[e(d,{message:"Local Storage Only: API keys are stored locally in your browser and are never sent to auditomatic.org. API Keys only leave your browser as authentication to external LLM API providers, via encrypted HTTPS.",type:"info","show-icon":"",class:"spacing-bottom-md"}),e(D,{layout:"vertical",size:"small"},{default:k(()=>[e(x,{gutter:[16,16]},{default:k(()=>[(n(!0),s(i,null,r(M.value,a=>(n(),w(_,{key:a.id,span:12},{default:k(()=>[e(h,null,{label:k(()=>[o("div",Oa,[m(c(a.name)+" ",1),a.hasKey?(n(),w(l,{key:0,color:"success",size:"small"},{default:k(()=>t[6]||(t[6]=[m("âœ“ Configured")])),_:1,__:[6]})):(n(),w(l,{key:1,color:"default",size:"small"},{default:k(()=>t[7]||(t[7]=[m("Not configured")])),_:1,__:[7]}))])]),default:k(()=>{return[e(v,{value:(t=a.id,p.getApiKey(t)||""),onInput:e=>function(e,a){const t=a.target.value;p.setApiKey(e,t)}(a.id,e),placeholder:`Enter ${a.name} API key`,autocomplete:"off",size:"small",visibilityToggle:!0,"data-testid":`input-api-key-${a.id}`,"aria-label":`${a.name} API key input`},null,8,["value","onInput","placeholder","data-testid","aria-label"]),o("div",za,[o("small",$a," Used by: "+c(a.providers.join(", ")),1)])];var t}),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}),e(A,{title:"Getting Started",class:"settings-card",size:"small"},{extra:k(()=>[e(l,{color:"blue",size:"small"},{default:k(()=>t[8]||(t[8]=[m("Help")])),_:1,__:[8]})]),default:k(()=>[e(V,{direction:"vertical",style:{width:"100%"}},{default:k(()=>[o("div",ja,[e(b(F),{class:"help-icon"}),o("div",Va,[t[10]||(t[10]=o("h4",null,"Setup Wizard",-1)),t[11]||(t[11]=o("p",null,"New to Auditomatic? Run the setup wizard to configure providers and learn the basics.",-1)),e(N,{onClick:$},{default:k(()=>t[9]||(t[9]=[m(" Run Setup Wizard ")])),_:1,__:[9]})])]),e(j,{style:{margin:"12px 0"}}),o("div",Ba,[e(b(L),{class:"help-icon"}),o("div",Ka,[t[13]||(t[13]=o("h4",null,"Documentation",-1)),t[14]||(t[14]=o("p",null,"Learn more about using Auditomatic Lite for systematic LLM testing.",-1)),e(N,{type:"link",href:"/docs",target:"_blank"},{default:k(()=>t[12]||(t[12]=[m(" View Documentation â†’ ")])),_:1,__:[12]})])])]),_:1})]),_:1}),e(A,{class:"settings-card",size:"small"},{default:k(()=>[e(H,{activeKey:f.value,"onUpdate:activeKey":t[0]||(t[0]=e=>f.value=e),bordered:!1},{default:k(()=>[e(G,{key:"concurrency"},{header:k(()=>t[15]||(t[15]=[o("div",{class:"collapse-header"},[o("span",{class:"collapse-title"},"Concurrency Settings"),o("small",{class:"text-secondary"},"Request limits per provider group (max 6 due to browser limitations)")],-1)])),default:k(()=>[e(d,{message:"Browser Connection Limit",description:"Modern browsers limit HTTP/1.1 connections to 6 per host. Since all AI providers use HTTP/1.1, setting concurrency above 6 will have no effect.",type:"info","show-icon":"",style:{marginBottom:"16px"}}),e(W,{columns:U,"data-source":R.value,pagination:!1,size:"small",class:"scientific-table","row-key":"id"},{bodyCell:k(({column:e,record:a})=>["input"===e.key?(n(),w(B,{key:0,value:a.concurrency,onChange:e=>O(a.id,e),min:1,max:6,disabled:!a.enabled,size:"small",style:{width:"80px"},"data-testid":`input-concurrency-${a.id}`,"aria-label":`Concurrency limit for ${a.name}`},null,8,["value","onChange","disabled","data-testid","aria-label"])):u("",!0),"slider"===e.key?(n(),w(K,{key:1,value:a.concurrency,onChange:e=>O(a.id,e),min:1,max:6,disabled:!a.enabled,style:{width:"150px",margin:"0 auto"},size:"small"},null,8,["value","onChange","disabled"])):u("",!0)]),_:1},8,["data-source"])]),_:1})]),_:1},8,["activeKey"])]),_:1}),e(A,{title:"Cost Tracking",class:"settings-card",size:"small"},{default:k(()=>[o("div",Wa,[t[16]||(t[16]=o("span",{class:"setting-label"},"Financial:",-1)),t[17]||(t[17]=o("span",{class:"setting-desc"},"Display estimated API costs for model usage",-1)),e(J,{checked:T.value,"onUpdate:checked":t[1]||(t[1]=e=>T.value=e),"data-testid":"switch-financial-costs","aria-label":"Enable or disable financial cost display"},null,8,["checked"])]),S.value?(n(),s("div",Fa,[t[20]||(t[20]=o("h3",{class:"settings-subsection-title"},"Environmental Impact Display",-1)),o("div",Ga,[o("div",{class:g(["env-toggle-option",{active:!I.value}])},t[18]||(t[18]=[o("strong",null,'Show "??"',-1),o("span",null,"Display as placeholders",-1)]),2),e(J,{checked:I.value,"onUpdate:checked":t[2]||(t[2]=e=>I.value=e),"data-testid":"switch-environmental-costs","aria-label":"Toggle between ?? placeholders and estimates",size:"default"},null,8,["checked"]),o("div",{class:g(["env-toggle-option",{active:I.value}])},t[19]||(t[19]=[o("strong",null,"Show Estimates",-1),o("span",null,"Beta estimates (not recommended)",-1)]),2)]),I.value?(n(),w(d,{key:0,message:"These environmental estimates are very inaccurate and not currently recommended. They're shown for relative comparison only.",type:"warning","show-icon":"",class:"spacing-top-md",style:{fontSize:"12px"}})):u("",!0)])):u("",!0),I.value?(n(),w(D,{key:1,layout:"vertical",size:"small",class:"spacing-top-lg"},{default:k(()=>[e(h,{label:"Primary Environmental Metric"},{default:k(()=>[e(Y,{value:P.value,"onUpdate:value":t[3]||(t[3]=e=>P.value=e),style:{width:"200px"},size:"small","data-testid":"select-environmental-metric","aria-label":"Select primary environmental metric"},{default:k(()=>[e(q,{value:"carbon"},{default:k(()=>t[21]||(t[21]=[m("Carbon Footprint")])),_:1,__:[21]}),e(q,{value:"water"},{default:k(()=>t[22]||(t[22]=[m("Water Usage")])),_:1,__:[22]}),e(q,{value:"energy"},{default:k(()=>t[23]||(t[23]=[m("Energy Consumption")])),_:1,__:[23]})]),_:1},8,["value"])]),_:1}),e(h,{label:"Show Equivalents"},{default:k(()=>[e(Q,{value:E.value,"onUpdate:value":t[4]||(t[4]=e=>E.value=e),"data-testid":"checkbox-group-equivalents","aria-label":"Select environmental equivalents to display"},{default:k(()=>[e(Z,{value:"cars","data-testid":"checkbox-equiv-cars"},{default:k(()=>t[24]||(t[24]=[m("Car Miles")])),_:1,__:[24]}),e(Z,{value:"trees","data-testid":"checkbox-equiv-trees"},{default:k(()=>t[25]||(t[25]=[m("Trees Needed")])),_:1,__:[25]}),e(Z,{value:"phones","data-testid":"checkbox-equiv-phones"},{default:k(()=>t[26]||(t[26]=[m("Phone Charges")])),_:1,__:[26]}),e(Z,{value:"bottles","data-testid":"checkbox-equiv-bottles"},{default:k(()=>t[27]||(t[27]=[m("Water Bottles")])),_:1,__:[27]})]),_:1},8,["value"])]),_:1}),e(h,null,{default:k(()=>[e(N,{type:"link",onClick:z,size:"small","data-testid":"btn-configure-environmental","aria-label":"Go to environmental cost configuration"},{default:k(()=>t[28]||(t[28]=[m(" Configure Environmental Cost Data â†’ ")])),_:1,__:[28]})]),_:1})]),_:1})):u("",!0)]),_:1}),e(A,{title:"Background Tab Protection",class:"settings-card",size:"small"},{extra:k(()=>[e(l,{color:"blue",size:"small"},{default:k(()=>t[29]||(t[29]=[m("Performance")])),_:1,__:[29]})]),default:k(()=>[e(Ra)]),_:1}),e(A,{class:"settings-card danger-zone-card",size:"small"},{default:k(()=>[e(H,{activeKey:C.value,"onUpdate:activeKey":t[5]||(t[5]=e=>C.value=e),bordered:!1},{default:k(()=>[e(G,{key:"danger-zone"},{header:k(()=>t[30]||(t[30]=[o("div",{class:"collapse-header danger-zone-header"},[o("span",{class:"collapse-title danger-zone-title"},"DANGER ZONE SETTINGS"),o("small",{class:"text-danger"},"Data management & destructive actions")],-1)])),default:k(()=>[e(ha)]),_:1})]),_:1},8,["activeKey"])]),_:1})])}}}),[["__scopeId","data-v-7a1a67c4"]]);export{Ha as default};
