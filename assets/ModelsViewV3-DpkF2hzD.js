const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-VqxE_YFg.js","assets/index-Rfcl7loQ.css"])))=>i.map(i=>d[i]);
import{b as p,I as je,d as q,aA as Ne,r as P,c as j,p as $t,i as de,j as b,m as s,k as t,v as T,t as d,x as z,y as E,F as Q,A as le,z as g,D as w,q as I,_ as ce,aa as ne,aB as ue,ah as ge,J as Oe,aC as He,a as R,B as ze,w as Mt,C as Ue,n as Se,E as Qe,aD as qe,L as Ke,u as We,aE as Je,U as zt,am as Ot,s as Re,aF as St,aG as Tt,a2 as Pt,o as Bt,aH as Et,aI as Fe,aJ as xt,ak as Dt,M as Lt}from"./index-VqxE_YFg.js";import{u as Xe}from"./useV4Models-DikFBAJl.js";import{u as Ye}from"./useV4ProviderParameters-CRxV9tla.js";import{F as At}from"./FilterOutlined-nMX--4l-.js";import{U as Ze}from"./UnorderedListOutlined-4DAA3meo.js";import{S as Gt}from"./SaveOutlined-CXnObmoP.js";import"./useV4LiveQuery-Cn2JLPvq.js";var Ut={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 144H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H212V212h200v200zm452-268H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H612V212h200v200zM464 544H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16zm-52 268H212V612h200v200zm452-268H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16zm-52 268H612V612h200v200z"}}]},name:"appstore",theme:"outlined"};function Ie(h){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?Object(arguments[e]):{},l=Object.keys(a);typeof Object.getOwnPropertySymbols=="function"&&(l=l.concat(Object.getOwnPropertySymbols(a).filter(function(m){return Object.getOwnPropertyDescriptor(a,m).enumerable}))),l.forEach(function(m){Rt(h,m,a[m])})}return h}function Rt(h,e,a){return e in h?Object.defineProperty(h,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):h[e]=a,h}var Te=function(e,a){var l=Ie({},e,a.attrs);return p(je,Ie({},l,{icon:Ut}),null)};Te.displayName="AppstoreOutlined";Te.inheritAttrs=!1;var Ft={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"};function Ve(h){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?Object(arguments[e]):{},l=Object.keys(a);typeof Object.getOwnPropertySymbols=="function"&&(l=l.concat(Object.getOwnPropertySymbols(a).filter(function(m){return Object.getOwnPropertyDescriptor(a,m).enumerable}))),l.forEach(function(m){It(h,m,a[m])})}return h}function It(h,e,a){return e in h?Object.defineProperty(h,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):h[e]=a,h}var Pe=function(e,a){var l=Ve({},e,a.attrs);return p(je,Ve({},l,{icon:Ft}),null)};Pe.displayName="UploadOutlined";Pe.inheritAttrs=!1;class Vt{async bulkWrite(e,a,l="put"){a.length!==0&&await q.transaction("rw",q[e],async()=>{switch(l){case"put":await q[e].bulkPut(a);break;case"add":await q[e].bulkAdd(a);break;case"update":const m=a.map(M=>q[e].update(M.id,M));await Promise.all(m);break}})}async bulkDelete(e,a){a.length!==0&&await q.transaction("rw",q[e],async()=>{await q[e].bulkDelete(a)})}async conditionalBulkUpdate(e,a,l){let m=0;return await q.transaction("rw",q[e],async()=>{await q[e].toCollection().modify(M=>{a(M)&&(Object.assign(M,l),m++)})}),m}freezeDeep(e){const a=e.map(l=>Object.freeze(l));return Object.freeze(a)}async getAndFreeze(e,a){const l=await q[e].get(a);return l?Object.freeze(l):null}async getAllAndFreeze(e){const a=await q[e].toArray();return this.freezeDeep(a)}}const ke=new Vt;class jt{async bulkUpsertModels(e){e.length!==0&&await q.transaction("rw",q.models,async()=>{const a=e.map(l=>Object.freeze({...l,enabled:l.enabled??!1,available:l.available??!0}));await q.models.bulkPut(a)})}async clearProviderModels(e){return await q.transaction("rw",q.models,async()=>{const m=(await q.models.where("provider").equals(e).toArray()).map(M=>M.id);return m.length>0&&await q.models.bulkDelete(m),m.length})}async toggleModelEnabled(e,a){return await q.models.update(e,{enabled:a})===1}async toggleProviderModels(e,a){return await ke.conditionalBulkUpdate("models",l=>l.provider===e,{enabled:a})}async toggleAllModels(e){return await ke.conditionalBulkUpdate("models",()=>!0,{enabled:e})}async getModelStatistics(){const e=await q.models.toArray(),a={total:e.length,enabled:0,byProvider:{}};for(const l of e)l.enabled&&a.enabled++,a.byProvider[l.provider]||(a.byProvider[l.provider]={total:0,enabled:0}),a.byProvider[l.provider].total++,l.enabled&&a.byProvider[l.provider].enabled++;return Object.freeze(a)}async updateModelAvailability(e,a){return await ke.conditionalBulkUpdate("models",l=>l.provider===e,{available:a})}async searchModels(e){let a=q.models.toCollection();if(e.provider&&(a=q.models.where("provider").equals(e.provider)),e.enabled!==void 0&&(a=a.and(m=>m.enabled===e.enabled)),e.available!==void 0&&(a=a.and(m=>m.available===e.available)),e.search){const m=e.search.toLowerCase();a=a.and(M=>M.displayName.toLowerCase().includes(m)||M.modelId.toLowerCase().includes(m))}const l=await a.toArray();return ke.freezeDeep(l)}async clearAllModels(){await q.models.clear()}}const Nt=new jt;function Ht(){const h=Ne(),e=P(!1),a=P(null),l=P(!1),m=P(!1);async function M(f,i){e.value=!0,i&&(i.value=!0),a.value=null;try{return{ok:!0,value:await f()}}catch(o){const u=o instanceof Error?o:new Error(String(o));return a.value=u,{ok:!1,error:u}}finally{e.value=!1,i&&(i.value=!1)}}async function L(f){return M(()=>h.discoverModels(f),l)}async function G(f){return M(()=>h.refreshModelSource(f),l)}async function k(f,i){return M(async()=>{await h.toggleModel(f,i)},m)}async function _(f){return M(async()=>{await h.toggleAllModels(f)},m)}async function r(f,i){return M(async()=>{await h.toggleProviderModels(f,i)},m)}async function O(){return M(async()=>{await h.enableOpenRouterFavorites()},m)}async function A(){return M(async()=>{await h.clearAllModels()})}async function c(f,i){return M(async()=>{await Nt.updateModelAvailability(f,i)})}return{discoverModels:L,refreshDiscoverySource:G,toggleModel:k,toggleAllModels:_,toggleProviderModels:r,enableOpenRouterFavorites:O,clearAllModels:A,updateModelAvailability:c,isExecuting:e,lastError:a,isDiscovering:l,isTogglingModels:m}}function et(){const h=Ne(),e=P([]),a=P(!1),l=P([]);function m(){const G=h.getDiscoveryStatus();e.value=G.map(k=>({id:k.id,status:k.status==="loading"?"loading":k.status==="idle"?"success":k.status,modelCount:k.modelCount,error:k.error})),a.value=h.isDiscovering(),l.value=h.getDiscoveryErrors()}function M(G){return{litellm:"LiteLLM",openrouter:"OpenRouter",ollama:"Ollama",deterministic:"Deterministic"}[G]||G}function L(G){const k=$t.getProvider(G);return(k==null?void 0:k.name)||G}return m(),{discoveryStatus:j(()=>e.value),isDiscovering:j(()=>a.value),discoveryErrors:j(()=>l.value),getSourceDisplayName:M,getProviderDisplayName:L,refreshStatus:m}}const Qt={class:"search-section"},qt={class:"search-controls"},Kt={class:"size-filter"},Wt={class:"size-controls"},Jt={class:"size-presets"},Xt={key:0,class:"size-filter-indicator"},Yt={class:"quantized-filter"},Zt={class:"filter-description"},es={class:"category-filters"},ts=de({__name:"OllamaSearchFilters",props:{searchQuery:{},sortBy:{},selectedCategories:{},maxSizeGB:{},showQuantized:{type:Boolean},categories:{}},emits:["update:searchQuery","update:sortBy","update:maxSizeGB","update:showQuantized","toggle-category"],setup(h,{emit:e}){const a=h,l=e,m=j({get:()=>a.searchQuery,set:_=>l("update:searchQuery",_)}),M=j({get:()=>a.sortBy,set:_=>l("update:sortBy",_)}),L=j({get:()=>a.maxSizeGB,set:_=>l("update:maxSizeGB",_)}),G=j({get:()=>a.showQuantized,set:_=>l("update:showQuantized",_)}),k=[{label:"1GB",value:1},{label:"2GB",value:2},{label:"4GB",value:4},{label:"8GB",value:8},{label:"16GB",value:16},{label:"None",value:999}];return(_,r)=>{const O=T("a-input-search"),A=T("a-select-option"),c=T("a-select"),f=T("a-input-number"),i=T("a-button"),o=T("a-tag");return s(),b("div",Qt,[t("div",qt,[p(O,{value:m.value,"onUpdate:value":r[0]||(r[0]=u=>m.value=u),placeholder:"Search models by name or description...","allow-clear":"",size:"large",class:"search-input"},null,8,["value"]),p(c,{value:M.value,"onUpdate:value":r[1]||(r[1]=u=>M.value=u),placeholder:"Sort by",style:{width:"180px"},size:"large"},{default:d(()=>[p(A,{value:"popularity"},{default:d(()=>r[4]||(r[4]=[z("Popularity")])),_:1,__:[4]}),p(A,{value:"lastUpdated"},{default:d(()=>r[5]||(r[5]=[z("Last Updated")])),_:1,__:[5]}),p(A,{value:"name"},{default:d(()=>r[6]||(r[6]=[z("Name")])),_:1,__:[6]}),p(A,{value:"tagCount"},{default:d(()=>r[7]||(r[7]=[z("Tag Count")])),_:1,__:[7]})]),_:1},8,["value"])]),t("div",Kt,[t("div",Wt,[r[8]||(r[8]=t("span",{class:"filter-label"},"Filter to models smaller than:",-1)),p(f,{value:L.value,"onUpdate:value":r[2]||(r[2]=u=>L.value=u),min:1,max:999,step:1,size:"small",class:"size-input","addon-after":"GB"},null,8,["value"]),t("div",Jt,[(s(),b(Q,null,le(k,u=>p(i,{key:u.value,size:"small",type:L.value===u.value?"primary":"default",onClick:v=>L.value=u.value,class:"preset-button"},{default:d(()=>[z(g(u.label),1)]),_:2},1032,["type","onClick"])),64))])]),L.value<999?(s(),b("span",Xt," â‰¤"+g(L.value)+"GB filter active ",1)):E("",!0)]),t("div",Yt,[p(i,{type:G.value?"default":"primary",size:"small",onClick:r[3]||(r[3]=u=>G.value=!G.value)},{icon:d(()=>[p(w(At))]),default:d(()=>[z(" "+g(G.value?"Hide":"Show")+" Quantized Versions ",1)]),_:1},8,["type"]),t("span",Zt,g(G.value?"Showing all versions":"Hiding q2_K, q3_K, q4_0, q5_1, q6_K, q8_0, fp16..."),1)]),t("div",es,[(s(!0),b(Q,null,le(_.categories,u=>(s(),I(o,{key:u,color:_.selectedCategories.includes(u)?"blue":"default",checkable:!0,checked:_.selectedCategories.includes(u),onClick:v=>_.$emit("toggle-category",u),class:"category-tag"},{default:d(()=>[z(g(u),1)]),_:2},1032,["color","checked","onClick"]))),128))])])}}}),ss=ce(ts,[["__scopeId","data-v-a03d8794"]]),as={key:0,class:"downloads-section"},ls={class:"download-items"},os={class:"download-info"},ns={class:"download-tag"},is={class:"download-status"},rs=de({__name:"OllamaDownloadProgress",props:{pullProgress:{}},setup(h){return(e,a)=>{const l=T("a-progress");return Object.keys(e.pullProgress).length>0?(s(),b("div",as,[a[0]||(a[0]=t("h4",null,"Active Downloads",-1)),t("div",ls,[(s(!0),b(Q,null,le(e.pullProgress,(m,M)=>(s(),b("div",{key:M,class:"download-item"},[t("div",os,[t("code",ns,g(M),1),t("span",is,g(m.message),1)]),p(l,{percent:m.percent,status:m.status==="success"?"success":"active",size:"small",class:"download-progress"},null,8,["percent","status"])]))),128))])])):E("",!0)}}}),us=ce(rs,[["__scopeId","data-v-88ba3f68"]]),ds={class:"model-info"},cs={class:"model-name"},ps={key:0},ms={class:"model-description"},vs={class:"model-actions"},fs={key:0,class:"button-size-info"},gs={key:0,class:"tags-preview"},ys={class:"preview-tags"},_s=["onClick","title"],bs={key:1,class:"tag-actual"},hs={class:"tag-size"},ks={key:0,class:"more-tags"},ws={key:1,class:"tags-expanded"},Cs={key:0,class:"tag-name"},$s={key:2},Ms={key:1,class:"text-secondary"},zs=de({__name:"OllamaModelCard",props:{model:{},expanded:{type:Boolean},pullingModels:{},pullProgress:{},installedModels:{},maxSizeGB:{},showQuantized:{type:Boolean},isQuantizedTag:{type:Function},parseSizeToGB:{type:Function},getSizeClass:{type:Function},getLatestTagInfo:{type:Function}},emits:["toggle-expand","pull-model"],setup(h){const e=h,a=[{title:"Tag",key:"name",width:200},{title:"Size",key:"size",width:100,align:"right"},{title:"Context",key:"context",width:100,align:"center"},{title:"Status",key:"status",width:80,align:"center"},{title:"Action",key:"actions",width:80,align:"center"}],l=j(()=>e.installedModels.some(u=>u.startsWith(e.model.name))),m=j(()=>e.installedModels.filter(u=>u.startsWith(e.model.name+":")).length),M=j(()=>c(`${e.model.name}:latest`)||c(e.model.name)),L=j(()=>e.pullingModels.has(`${e.model.name}:latest`)),G=j(()=>e.pullProgress[`${e.model.name}:latest`]),k=j(()=>e.getLatestTagInfo(e.model)),_=j(()=>e.maxSizeGB<999||!e.showQuantized),r=j(()=>e.model.tags?Object.entries(e.model.tags).map(([u,v])=>({...v,name:u})).filter(u=>!(e.maxSizeGB<999&&e.parseSizeToGB(u.size||"0GB")>e.maxSizeGB||!e.showQuantized&&e.isQuantizedTag(u.name))).sort((u,v)=>u.name.localeCompare(v.name)):[]),O=j(()=>r.value.length),A=j(()=>r.value.sort((v,$)=>{const B=["latest","instruct","8b","7b","3b","1b"],x=B.indexOf(v.name),C=B.indexOf($.name);return x!==-1&&C!==-1?x-C:x!==-1?-1:C!==-1?1:v.name.localeCompare($.name)}).slice(0,5));function c(u){return e.installedModels.includes(u)}function f(u){return e.pullingModels.has(u)}function i(u){return e.pullProgress[u]}const o=j(()=>{const u=k.value;return u?{actualTag:u.actualTag||"",size:u.size||""}:null});return(u,v)=>{const $=T("a-tag"),B=T("a-button"),x=T("a-table");return s(),b("div",{class:ne(["model-item",{expanded:u.expanded}])},[t("div",{class:"model-header",onClick:v[2]||(v[2]=C=>u.$emit("toggle-expand"))},[t("div",ds,[t("div",cs,[t("h4",null,g(u.model.name),1),p($,{size:"small",color:"blue"},{default:d(()=>[z(g(u.model.pullCount||"0")+" pulls",1)]),_:1}),p($,{size:"small",color:"green"},{default:d(()=>[z(g(O.value)+" ",1),_.value?(s(),b("span",ps,"/"+g(u.model.tagCount||0),1)):E("",!0),v[3]||(v[3]=z(" versions "))]),_:1,__:[3]}),l.value?(s(),I($,{key:0,size:"small",color:"success",class:"installed-tag"},{icon:d(()=>[p(w(ue))]),default:d(()=>[z(" "+g(m.value)+" installed ",1)]),_:1})):E("",!0)]),t("p",ms,g(u.model.description||"No description available"),1)]),t("div",vs,[p(B,{type:M.value?"default":"primary",size:"small",onClick:v[0]||(v[0]=ge(C=>u.$emit("pull-model",u.model.name,"latest"),["stop"])),loading:L.value,disabled:M.value},{default:d(()=>[G.value?(s(),b(Q,{key:0},[z(g(Math.round(G.value.percent))+"% ",1)],64)):M.value?(s(),b(Q,{key:1},[p(w(ue)),v[4]||(v[4]=z(" Installed "))],64)):(s(),b(Q,{key:2},[v[5]||(v[5]=z(" Pull Latest ")),o.value?(s(),b("span",fs," ("+g(o.value.actualTag?o.value.actualTag+", ":"")+g(o.value.size)+") ",1)):E("",!0)],64))]),_:1},8,["type","loading","disabled"]),p(B,{type:"text",size:"small",onClick:v[1]||(v[1]=ge(C=>u.$emit("toggle-expand"),["stop"]))},{icon:d(()=>[u.expanded?(s(),I(w(He),{key:1})):(s(),I(w(Oe),{key:0}))]),default:d(()=>[z(" "+g(u.expanded?"Hide versions":"See all versions"),1)]),_:1})])]),u.expanded?E("",!0):(s(),b("div",gs,[t("div",ys,[(s(!0),b(Q,null,le(A.value,C=>(s(),b("span",{key:C.name,class:ne(["tag-chip",[u.getSizeClass(C.size),{installed:c(C.fullTag)}]]),onClick:S=>c(C.fullTag)?null:u.$emit("pull-model",u.model.name,C.name),title:`${C.fullTag} - ${C.size}${c(C.fullTag)?" (Installed)":""}`},[c(C.fullTag)?(s(),I(w(ue),{key:0,class:"installed-icon"})):E("",!0),z(" "+g(C.name)+" ",1),C.name==="latest"&&o.value?(s(),b("span",bs," ("+g(o.value.actualTag)+") ",1)):E("",!0),t("span",hs,g(C.size),1)],10,_s))),128)),O.value>5?(s(),b("span",ks," +"+g(O.value-5)+" more versions ",1)):E("",!0)])])),u.expanded?(s(),b("div",ws,[p(x,{columns:a,"data-source":r.value,pagination:!1,size:"small",scroll:{y:300},class:"tags-table"},{bodyCell:d(({column:C,record:S})=>[C.key==="name"?(s(),b("code",Cs,g(S.name),1)):E("",!0),C.key==="size"?(s(),b("span",{key:1,class:ne(["tag-size",u.getSizeClass(S.size)])},g(S.size),3)):E("",!0),C.key==="context"?(s(),b("span",$s,g(S.contextWindow),1)):E("",!0),C.key==="status"?(s(),b(Q,{key:3},[c(S.fullTag)?(s(),I($,{key:0,size:"small",color:"success"},{default:d(()=>[p(w(ue)),v[6]||(v[6]=z(" Installed "))]),_:1,__:[6]})):(s(),b("span",Ms,"-"))],64)):E("",!0),C.key==="actions"?(s(),I(B,{key:4,type:c(S.fullTag)?"default":"primary",size:"small",onClick:N=>u.$emit("pull-model",u.model.name,S.name),loading:f(S.fullTag),disabled:c(S.fullTag)},{default:d(()=>[i(S.fullTag)?(s(),b(Q,{key:0},[z(g(Math.round(i(S.fullTag).percent))+"% ",1)],64)):c(S.fullTag)?(s(),b(Q,{key:1},[p(w(ue)),v[7]||(v[7]=z(" Installed "))],64)):(s(),b(Q,{key:2},[z(" Pull ")],64))]),_:2},1032,["type","onClick","loading","disabled"])):E("",!0)]),_:1},8,["data-source"])])):E("",!0)],2)}}}),Os=ce(zs,[["__scopeId","data-v-83727817"]]),Ss={class:"list-view"},Ts={class:"expanded-tags-container"},Ps={class:"expanded-tags-grid"},Bs={class:"tag-name"},Es={key:0,class:"tag-actual"},xs={class:"tag-size"},Ds={class:"tag-context"},Ls={key:0,class:"model-name-cell"},As={key:1,class:"description-cell"},Gs={key:2,class:"stats-cell"},Us={class:"stat-item"},Rs={class:"stat-item"},Fs={key:0},Is={key:3,class:"size-range"},Vs=de({__name:"OllamaModelList",props:{models:{},expandedModels:{},pullingModels:{},pullProgress:{},installedModels:{},maxSizeGB:{},showQuantized:{type:Boolean},isQuantizedTag:{type:Function},parseSizeToGB:{type:Function},getSizeClass:{type:Function},getLatestTagInfo:{type:Function},getModelSizeRange:{type:Function}},emits:["toggle-model","pull-model","expand"],setup(h){const e=h,a=[{title:"Model",key:"name",width:200,fixed:"left"},{title:"Description",key:"description",ellipsis:!0},{title:"Stats",key:"stats",width:200},{title:"Size Range",key:"sizeRange",width:120,align:"center"},{title:"Actions",key:"actions",width:220,align:"center",fixed:"right"}];function l(k){return k.tags?Object.entries(k.tags).map(([_,r])=>({...r,name:_})).filter(_=>!(e.maxSizeGB<999&&e.parseSizeToGB(_.size||"0GB")>e.maxSizeGB||!e.showQuantized&&e.isQuantizedTag(_.name))).sort((_,r)=>_.name.localeCompare(r.name)):[]}function m(k){return k.tags?Object.entries(k.tags).filter(([_,r])=>!(e.maxSizeGB<999&&e.parseSizeToGB(r.size||"0GB")>e.maxSizeGB||!e.showQuantized&&e.isQuantizedTag(_))).length:0}function M(k){return e.installedModels.some(_=>_.startsWith(k))}function L(k){return e.installedModels.includes(k)}function G(k){return e.installedModels.filter(_=>_.startsWith(k+":"))}return(k,_)=>{const r=T("a-tag"),O=T("a-button"),A=T("a-space"),c=T("a-table");return s(),b("div",Ss,[p(c,{"data-source":k.models,columns:a,pagination:!1,"row-key":f=>f.name,size:"small",scroll:{y:"calc(100% - 48px)"},"expanded-row-keys":k.expandedModels,"expand-row-by-click":!1,onExpand:_[0]||(_[0]=(f,i)=>k.$emit("expand",f,i)),class:"models-list-table"},{expandedRowRender:d(({record:f})=>[t("div",Ts,[t("div",Ps,[(s(!0),b(Q,null,le(l(f),i=>{var o;return s(),b("div",{key:i.fullTag,class:ne(["expanded-tag-item",k.getSizeClass(i.size)])},[t("span",Bs,g(i.name),1),i.name==="latest"&&k.getLatestTagInfo(f)?(s(),b("span",Es," ("+g((o=k.getLatestTagInfo(f))==null?void 0:o.actualTag)+") ",1)):E("",!0),t("span",xs,g(i.size),1),t("span",Ds,g(i.contextWindow||"-"),1),L(i.fullTag)?(s(),I(r,{key:1,size:"small",color:"success"},{default:d(()=>[p(w(ue)),_[1]||(_[1]=z(" Installed "))]),_:1,__:[1]})):(s(),I(O,{key:2,type:"primary",size:"small",loading:k.pullingModels.has(i.fullTag),onClick:u=>k.$emit("pull-model",f.name,i.name)},{default:d(()=>[k.pullProgress[i.fullTag]?(s(),b(Q,{key:0},[z(g(Math.round(k.pullProgress[i.fullTag].percent))+"% ",1)],64)):(s(),b(Q,{key:1},[z(" Pull ")],64))]),_:2},1032,["loading","onClick"]))],2)}),128))])])]),bodyCell:d(({column:f,record:i})=>[f.key==="name"?(s(),b("div",Ls,[t("code",null,g(i.name),1),M(i.name)?(s(),I(r,{key:0,size:"small",color:"success"},{default:d(()=>[p(w(ue)),z(" "+g(G(i.name).length)+" installed ",1)]),_:2},1024)):E("",!0)])):E("",!0),f.key==="description"?(s(),b("span",As,g(i.description||"No description"),1)):E("",!0),f.key==="stats"?(s(),b("div",Gs,[t("span",Us,g(i.pullCount||"0")+" pulls",1),_[3]||(_[3]=t("span",{class:"stat-divider"},"â€¢",-1)),t("span",Rs,[z(g(m(i))+" ",1),k.maxSizeGB<999||!k.showQuantized?(s(),b("span",Fs,"/"+g(i.tagCount||0),1)):E("",!0),_[2]||(_[2]=z(" versions "))])])):E("",!0),f.key==="sizeRange"?(s(),b("span",Is,g(k.getModelSizeRange(i)),1)):E("",!0),f.key==="actions"?(s(),I(A,{key:4,size:"small"},{default:d(()=>[p(O,{type:"text",size:"small",onClick:o=>k.$emit("toggle-model",i.name)},{icon:d(()=>[k.expandedModels.includes(i.name)?(s(),I(w(He),{key:1})):(s(),I(w(Oe),{key:0}))]),default:d(()=>[z(" "+g(k.expandedModels.includes(i.name)?"Hide":"See")+" Versions ",1)]),_:2},1032,["onClick"]),p(O,{type:L(`${i.name}:latest`)||L(i.name)?"default":"primary",size:"small",onClick:o=>k.$emit("pull-model",i.name,"latest"),loading:k.pullingModels.has(`${i.name}:latest`),disabled:L(`${i.name}:latest`)||L(i.name)},{default:d(()=>[k.pullProgress[`${i.name}:latest`]?(s(),b(Q,{key:0},[z(g(Math.round(k.pullProgress[`${i.name}:latest`].percent))+"% ",1)],64)):L(`${i.name}:latest`)||L(i.name)?(s(),I(w(ue),{key:1})):(s(),b(Q,{key:2},[z(" Pull Latest ")],64))]),_:2},1032,["type","onClick","loading","disabled"])]),_:2},1024)):E("",!0)]),_:1},8,["data-source","row-key","expanded-row-keys"])])}}}),js=ce(Vs,[["__scopeId","data-v-7d1c26f3"]]);async function be(h,e={}){var k,_;const l=`http://localhost:11434${h}`,m=window.location.protocol==="https:",M=e.timeout||3e4,L=new AbortController,G=setTimeout(()=>L.abort(),M);try{const r=await fetch(l,{...e,signal:L.signal,headers:{"Content-Type":"application/json",...e.headers}});return clearTimeout(G),r}catch(r){clearTimeout(G);const O=new Error;throw O.isHttps=m,r.name==="AbortError"?(O.type="timeout",O.message="Request to Ollama timed out",O.details=`The request took longer than ${M/1e3} seconds`):(k=r.message)!=null&&k.includes("Failed to fetch")||(_=r.message)!=null&&_.includes("NetworkError")?m?(O.type="cors",O.message="Cannot connect to Ollama from HTTPS site",O.details="Browser security prevents HTTPS sites from accessing local HTTP services. To use Ollama: 1) Download the desktop app, 2) Run Auditomatic locally, or 3) Configure Ollama with OLLAMA_ORIGINS=*"):(O.type="network",O.message="Cannot connect to Ollama",O.details="Make sure Ollama is running on your computer (http://localhost:11434)"):(O.type="unknown",O.message=r.message||"Unknown error connecting to Ollama",O.details=r.stack),R.warn("Ollama fetch error",{type:O.type,endpoint:h,isHttps:m,originalError:r.message}),O}}async function Ns(){R.warn("[OLLAMA DEBUG] checkOllamaConnection called");try{const h=await be("/api/tags",{timeout:5e3});R.warn("[OLLAMA DEBUG] ollamaFetch response:",{ok:h.ok,status:h.status,statusText:h.statusText,url:h.url});const e=h.ok;return R.warn("[OLLAMA DEBUG] checkOllamaConnection returning available:",e),{available:e}}catch(h){return R.warn("[OLLAMA DEBUG] checkOllamaConnection error:",h),R.warn("[OLLAMA DEBUG] Error details:",{message:h.message,name:h.name,type:h.type}),{available:!1,error:h}}}async function Hs(){var h,e,a;R.warn("[CORS DEBUG] Starting detectOllamaCORSIssue..."),R.warn("[CORS DEBUG] Current origin:",window.location.origin);try{const l="http://localhost:11434/api/tags";R.warn("[CORS DEBUG] Attempting fetch to:",l);const m=await fetch(l,{method:"GET",headers:{Accept:"application/json"}});return R.warn("[CORS DEBUG] Fetch successful, response ok:",m.ok),{hasCORSIssue:!1,canConnect:!0}}catch(l){return R.warn("[CORS DEBUG] Fetch failed with error:",l.message),R.warn("[CORS DEBUG] Error type:",l.name),(h=l.message)!=null&&h.includes("Failed to fetch")||(e=l.message)!=null&&e.includes("NetworkError")||(a=l.message)!=null&&a.includes("CORS")||l.name==="TypeError"?(R.warn("[CORS DEBUG] NetworkError detected - this means server responded but CORS blocked it"),{hasCORSIssue:!0,canConnect:!0,error:`Ollama is running but CORS is not configured to allow requests from ${window.location.origin}. Add OLLAMA_ORIGINS=* to your Ollama service configuration.`}):(R.warn("[CORS DEBUG] Unknown error type"),{hasCORSIssue:!1,canConnect:!1,error:l.message||"Unknown connection error"})}}async function Qs(){const h=await be("/api/tags");if(!h.ok)throw new Error(`Failed to fetch models: ${h.status} ${h.statusText}`);return h.json()}async function qs(h){const e=await be("/api/delete",{method:"DELETE",body:JSON.stringify({name:h})});if(!e.ok)throw new Error(`Failed to delete model: ${e.status} ${e.statusText}`)}function Ks(){const h=P(null),e=P(!1),a=P(""),l=P(new Set),m=P({}),M=P([]);async function L(){e.value=!0,a.value="";try{const v=await fetch("https://ollama.models.auditomatic.org/models.json");if(!v.ok)throw new Error(`Failed to fetch models: ${v.statusText}`);h.value=await v.json(),await G()}catch(v){a.value=`Failed to load model library: ${v instanceof Error?v.message:"Unknown error"}`}finally{e.value=!1}}async function G(){try{const v=await be("/api/tags");if(v.ok){const $=await v.json();M.value=($.models||[]).map(B=>B.name)}}catch(v){const $=v;$.type==="cors"&&$.isHttps&&R.debug("Cannot access Ollama from HTTPS site"),M.value=[]}}async function k(v,$,B){var C;const x=$==="latest"?v:`${v}:${$}`;if(!l.value.has(x)){l.value.add(x),m.value[x]={percent:0,status:"active",message:"Starting download..."};try{const S=await be("/api/pull",{method:"POST",body:JSON.stringify({name:x,stream:!0})});if(!S.ok)throw new Error(`Failed to pull model: ${S.statusText}`);const N=(C=S.body)==null?void 0:C.getReader();if(!N)throw new Error("Unable to read response stream");let J=0,V=0;for(;;){const{done:X,value:pe}=await N.read();if(X)break;const ye=new TextDecoder().decode(pe).split(`
`).filter(oe=>oe.trim());for(const oe of ye)try{const U=JSON.parse(oe);U.total&&(J=U.total),U.completed&&(V=U.completed);const D=J>0?Math.round(V/J*100):0;if(m.value[x]={status:U.status==="success"?"success":"active",percent:D,message:U.status||"Downloading..."},U.status==="success"){ze.success(`Successfully pulled ${x}`),await G(),B==null||B(),setTimeout(()=>{delete m.value[x]},3e3);return}}catch{}}}catch(S){const N=S;let J=S instanceof Error?S.message:"Unknown error";N.type==="cors"&&N.isHttps&&(J="Cannot access Ollama from HTTPS site. Please use the desktop app or run locally."),ze.error(`Failed to pull ${x}: ${J}`),m.value[x]={status:"exception",percent:0,message:"Download failed"},setTimeout(()=>{delete m.value[x]},5e3)}finally{l.value.delete(x)}}}function _(v){const $=parseFloat(v.replace(/[^\d.]/g,""))||0,B=v.replace(/[\d.]/g,"").trim().toUpperCase();return B.includes("MB")?$/1e3:B.includes("TB")?$*1e3:(B.includes("GB"),$)}function r(v){return/-q\d{1,2}_|-fp\d+/.test(v)}function O(v){return M.value.some($=>$.startsWith(v))}function A(v){return M.value.includes(v)}function c(v){return M.value.filter($=>$.startsWith(v+":"))}function f(v){return v<1?`${Math.round(v*1e3)}MB`:`${v.toFixed(1)}GB`}function i(v){const $=_(v);return $<5?"size-small":$<20?"size-medium":"size-large"}function o(v){if(!v.tags)return"N/A";const $=Object.values(v.tags).map(C=>_(C.size||"0GB")).filter(C=>C>0);if($.length===0)return"N/A";const B=Math.min(...$),x=Math.max(...$);return B===x?f(B):`${f(B)} - ${f(x)}`}function u(v){if(!v.tags||!v.tags.latest)return null;const $=v.tags.latest,B=Object.entries(v.tags).find(([x,C])=>x!=="latest"&&C.modelHash===$.modelHash);return B?{actualTag:B[0],size:B[1].size||$.size}:{actualTag:"",size:$.size}}return{modelsData:h,loading:e,error:a,pullingModels:l,pullProgress:m,installedModels:M,fetchModels:L,fetchInstalledModels:G,pullModel:k,parseSizeToGB:_,isQuantizedTag:r,isModelInstalled:O,isTagInstalled:A,getInstalledTagsForModel:c,formatSizeGB:f,getSizeClass:i,getModelSizeRange:o,getLatestTagInfo:u}}const Ws={class:"modal-content"},Js={class:"stats-bar"},Xs={class:"view-controls"},Ys={key:0,class:"loading-text"},Zs={class:"models-container"},ea=de({__name:"OllamaModelLibraryModalV3",props:{modelValue:{type:Boolean}},emits:["update:modelValue","models-updated"],setup(h,{emit:e}){const a=h,l=e,{modelsData:m,loading:M,error:L,pullingModels:G,pullProgress:k,installedModels:_,fetchModels:r,pullModel:O,parseSizeToGB:A,isQuantizedTag:c,getSizeClass:f,getModelSizeRange:i,getLatestTagInfo:o}=Ks(),u=P(""),v=P("popularity"),$=P([]),B=P(8),x=P(!1),C=P("card"),S=P(new Set),N=j({get:()=>a.modelValue,set:U=>l("update:modelValue",U)}),J=j(()=>{var U;return((U=m.value)==null?void 0:U.totalModels)||0}),V=j(()=>{var U;return((U=m.value)==null?void 0:U.categories)||[]}),X=j(()=>{if(!m.value)return[];let U=Object.entries(m.value.models).map(([D,K])=>({...K,name:D}));if(u.value){const D=u.value.toLowerCase();U=U.filter(K=>K.name.toLowerCase().includes(D)||K.description.toLowerCase().includes(D))}switch($.value.length>0&&(U=U.filter(D=>$.value.some(K=>(D.categories||[]).includes(K)))),B.value<999&&(U=U.filter(D=>D.tags?Object.values(D.tags).some(K=>A(K.size||"0GB")<=B.value):!0)),v.value){case"popularity":U.sort((D,K)=>{const ie=D.pullCount||"0",re=K.pullCount||"0",se=parseFloat(ie.replace(/[^\d.]/g,""))||0,ve=parseFloat(re.replace(/[^\d.]/g,""))||0,W=ie.includes("M")?1e6:ie.includes("K")?1e3:1,he=re.includes("M")?1e6:re.includes("K")?1e3:1;return ve*he-se*W});break;case"lastUpdated":U.sort((D,K)=>{const ie=D.lastUpdated?new Date(D.lastUpdated).getTime():0;return(K.lastUpdated?new Date(K.lastUpdated).getTime():0)-ie});break;case"name":U.sort((D,K)=>D.name.localeCompare(K.name));break;case"tagCount":U.sort((D,K)=>(K.tagCount||0)-(D.tagCount||0));break}return U});function pe(U){const D=$.value.indexOf(U);D===-1?$.value.push(U):$.value.splice(D,1)}function me(U){S.value.has(U)?S.value.delete(U):S.value.add(U)}function ye(U,D){U?S.value.add(D.name):S.value.delete(D.name)}async function oe(U,D){await O(U,D,()=>l("models-updated"))}return Mt(N,U=>{U&&!m.value&&r(),U||(S.value.clear(),u.value="",$.value=[],B.value=8,x.value=!1,L.value="")}),(U,D)=>{const K=T("a-button"),ie=T("a-button-group"),re=T("a-spin"),se=T("a-alert"),ve=T("a-modal");return s(),I(ve,{open:N.value,"onUpdate:open":D[7]||(D[7]=W=>N.value=W),title:"Ollama Model Library",width:"95vw",footer:null,destroyOnClose:!0,"wrap-class-name":"ollama-library-modal-full",class:"ollama-library-modal"},{default:d(()=>[t("div",Ws,[p(ss,{"search-query":u.value,"onUpdate:searchQuery":D[0]||(D[0]=W=>u.value=W),"sort-by":v.value,"onUpdate:sortBy":D[1]||(D[1]=W=>v.value=W),"max-size-g-b":B.value,"onUpdate:maxSizeGB":D[2]||(D[2]=W=>B.value=W),"show-quantized":x.value,"onUpdate:showQuantized":D[3]||(D[3]=W=>x.value=W),"selected-categories":$.value,categories:V.value,onToggleCategory:pe},null,8,["search-query","sort-by","max-size-g-b","show-quantized","selected-categories","categories"]),t("div",Js,[t("span",null,"Showing "+g(X.value.length)+" of "+g(J.value)+" models",1),t("div",Xs,[p(ie,{size:"small"},{default:d(()=>[p(K,{type:C.value==="card"?"primary":"default",onClick:D[4]||(D[4]=W=>C.value="card"),icon:Ue(w(Te)),title:"Card View"},null,8,["type","icon"]),p(K,{type:C.value==="list"?"primary":"default",onClick:D[5]||(D[5]=W=>C.value="list"),icon:Ue(w(Ze)),title:"List View"},null,8,["type","icon"])]),_:1}),w(M)?(s(),b("span",Ys,"Loading...")):E("",!0)])]),p(us,{"pull-progress":w(k)},null,8,["pull-progress"]),t("div",Zs,[p(re,{spinning:w(M),size:"large"},{default:d(()=>[C.value==="card"?(s(!0),b(Q,{key:0},le(X.value,W=>(s(),I(Os,{key:W.name,model:W,expanded:S.value.has(W.name),"pulling-models":w(G),"pull-progress":w(k),"installed-models":w(_),"max-size-g-b":B.value,"show-quantized":x.value,"is-quantized-tag":w(c),"parse-size-to-g-b":w(A),"get-size-class":w(f),"get-latest-tag-info":w(o),onToggleExpand:he=>me(W.name),onPullModel:oe},null,8,["model","expanded","pulling-models","pull-progress","installed-models","max-size-g-b","show-quantized","is-quantized-tag","parse-size-to-g-b","get-size-class","get-latest-tag-info","onToggleExpand"]))),128)):E("",!0),C.value==="list"?(s(),I(js,{key:1,models:X.value,"expanded-models":Array.from(S.value),"pulling-models":w(G),"pull-progress":w(k),"installed-models":w(_),"max-size-g-b":B.value,"show-quantized":x.value,"is-quantized-tag":w(c),"parse-size-to-g-b":w(A),"get-size-class":w(f),"get-latest-tag-info":w(o),"get-model-size-range":w(i),onToggleModel:me,onPullModel:oe,onExpand:ye},null,8,["models","expanded-models","pulling-models","pull-progress","installed-models","max-size-g-b","show-quantized","is-quantized-tag","parse-size-to-g-b","get-size-class","get-latest-tag-info","get-model-size-range"])):E("",!0)]),_:1},8,["spinning"])]),w(L)?(s(),I(se,{key:0,type:"error",message:w(L),closable:"",onClose:D[6]||(D[6]=W=>L.value=""),class:"error-alert"},null,8,["message"])):E("",!0)])]),_:1},8,["open"])}}}),ta=ce(ea,[["__scopeId","data-v-96287dbe"]]),sa={class:"ollama-model-manager"},aa={class:"action-bar"},la={class:"models-section"},oa={key:0,class:"model-name"},na={key:1,class:"model-size"},ia={key:2,class:"model-date"},ra=de({__name:"OllamaModelManagerV3",setup(h){const e=P([]),a=P(!1),l=P(new Set),m=P(""),M=P(!1),L=[{title:"Model Name",key:"name",width:"40%"},{title:"Size",key:"size",width:"20%",align:"right"},{title:"Modified",key:"modified",width:"25%"},{title:"Actions",key:"actions",width:"15%",align:"center"}];async function G(){const c=await Ns();return!c.available&&c.error&&(c.error.type==="cors"&&c.error.isHttps?m.value=c.error.details||"Cannot connect to Ollama from HTTPS site":m.value=c.error.message),c.available}async function k(){try{const c=await Qs();e.value=c.models||[]}catch(c){const f=c;f.type==="cors"&&f.isHttps?m.value=f.details||"Cannot access Ollama from HTTPS site":m.value=`Failed to fetch models: ${c instanceof Error?c.message:"Unknown error"}`,e.value=[]}}async function _(c){l.value.add(c),m.value="";try{await qs(c),ze.success(`Successfully removed ${c}`),await r()}catch(f){const i=f;i.type==="cors"&&i.isHttps?m.value=i.details||"Cannot access Ollama from HTTPS site":m.value=`Failed to remove model: ${f instanceof Error?f.message:"Unknown error"}`}finally{l.value.delete(c)}}async function r(){a.value=!0,await k(),a.value=!1}function O(c){if(!c)return"0 B";const f=["B","KB","MB","GB","TB"],i=Math.floor(Math.log(c)/Math.log(1024));return`${(c/Math.pow(1024,i)).toFixed(1)} ${f[i]}`}function A(c){try{return new Date(c).toLocaleDateString()}catch{return"Unknown"}}return Se(async()=>{await G()?await r():m.value="Cannot connect to Ollama. Make sure Ollama is running on localhost:11434"}),(c,f)=>{const i=T("a-button"),o=T("a-tag"),u=T("a-popconfirm"),v=T("a-table"),$=T("a-empty"),B=T("a-alert");return s(),b("div",sa,[t("div",aa,[p(i,{type:"primary",onClick:f[0]||(f[0]=x=>M.value=!0)},{icon:d(()=>[p(w(Qe))]),default:d(()=>[f[3]||(f[3]=z(" Download Ollama Models "))]),_:1,__:[3]}),p(i,{onClick:r,loading:a.value},{icon:d(()=>[p(w(qe))]),default:d(()=>[f[4]||(f[4]=z(" Refresh "))]),_:1,__:[4]},8,["loading"])]),t("div",la,[f[7]||(f[7]=t("h4",{class:"section-title"},"Installed Models",-1)),p(v,{columns:L,"data-source":e.value,pagination:!1,size:"small",loading:a.value,"row-key":"name",class:"models-table"},{bodyCell:d(({column:x,record:C})=>{var S;return[x.key==="name"?(s(),b("div",oa,[t("code",null,g(C.name),1),(S=C.details)!=null&&S.family?(s(),I(o,{key:0,size:"small",color:"blue"},{default:d(()=>[z(g(C.details.family),1)]),_:2},1024)):E("",!0)])):E("",!0),x.key==="size"?(s(),b("span",na,g(O(C.size)),1)):E("",!0),x.key==="modified"?(s(),b("span",ia,g(A(C.modified_at)),1)):E("",!0),x.key==="actions"?(s(),I(u,{key:3,title:"Are you sure you want to delete this model?",description:`This will permanently remove ${C.name} from your system.`,"ok-text":"Delete","cancel-text":"Cancel",onConfirm:N=>_(C.name)},{default:d(()=>[p(i,{type:"text",danger:"",size:"small",loading:l.value.has(C.name)},{icon:d(()=>[p(w(Ke))]),default:d(()=>[f[5]||(f[5]=z(" Remove "))]),_:2,__:[5]},1032,["loading"])]),_:2},1032,["description","onConfirm"])):E("",!0)]}),_:1},8,["data-source","loading"]),!a.value&&e.value.length===0?(s(),I($,{key:0,description:"No Ollama models installed",class:"empty-state"},{image:d(()=>f[6]||(f[6]=[t("div",{class:"empty-icon"},"ðŸ“¦",-1)])),_:1})):E("",!0)]),m.value?(s(),I(B,{key:0,type:"error",message:m.value,closable:"",onClose:f[1]||(f[1]=x=>m.value=""),class:"error-alert"},null,8,["message"])):E("",!0),p(ta,{modelValue:M.value,"onUpdate:modelValue":f[2]||(f[2]=x=>M.value=x),onModelsUpdated:r},null,8,["modelValue"])])}}}),ua=ce(ra,[["__scopeId","data-v-9a88ecb1"]]),da={class:"model-list"},ca={class:"model-header"},pa={class:"model-table"},ma=["onClick"],va={class:"model-name"},fa={class:"model-source"},ga={class:"model-context"},ya={key:0},_a={key:1,class:"text-secondary"},ba={key:0,class:"model-cost-in"},ha={key:0,class:"cost-value"},ka={key:1,class:"text-secondary"},wa={key:1,class:"model-cost-out"},Ca={key:0,class:"cost-value"},$a={key:1,class:"text-secondary"},Ma={class:"model-enviro-carbon"},za={class:"enviro-value"},Oa={class:"model-enviro-water"},Sa={class:"enviro-value"},Ta={class:"model-enviro-energy"},Pa={class:"enviro-value"},Ba=de({__name:"ModelListV3",props:{models:{},providerId:{}},emits:["toggle-model"],setup(h){const e=h,a=We(),l=P("name"),m=P("asc"),M=j(()=>{if(!e.models||e.models.length===0)return[];const _=e.models.filter(A=>{var c,f;return((c=A.capabilities)==null?void 0:c.inputCostPerToken)||((f=A.capabilities)==null?void 0:f.outputCostPerToken)});return _.length>0?R.info("MODEL_LIST_DEBUG: Models with pricing:",_.map(A=>{var c,f;return{id:A.id,provider:A.provider,modelId:A.modelId,inputCost:(c=A.capabilities)==null?void 0:c.inputCostPerToken,outputCost:(f=A.capabilities)==null?void 0:f.outputCostPerToken}})):R.info("MODEL_LIST_DEBUG: No models have pricing data. Sample model:",e.models[0]),[...e.models].sort((A,c)=>{var i,o,u,v,$,B;let f=0;switch(l.value){case"enabled":f=(A.enabled?1:0)-(c.enabled?1:0);break;case"name":f=A.displayName.localeCompare(c.displayName);break;case"source":f=(A.source||"").localeCompare(c.source||"");break;case"context":const x=((i=A.capabilities)==null?void 0:i.contextWindow)||0,C=((o=c.capabilities)==null?void 0:o.contextWindow)||0;f=x-C;break;case"inputCost":const S=((u=A.capabilities)==null?void 0:u.inputCostPerToken)||0,N=((v=c.capabilities)==null?void 0:v.inputCostPerToken)||0;f=S-N;break;case"outputCost":const J=(($=A.capabilities)==null?void 0:$.outputCostPerToken)||0,V=((B=c.capabilities)==null?void 0:B.outputCostPerToken)||0;f=J-V;break}return m.value==="asc"?f:-f})});function L(_){l.value===_?m.value=m.value==="asc"?"desc":"asc":(l.value=_,m.value="asc")}function G(_){return _>=1e6?(_/1e6).toFixed(1)+"M":_>=1e3?(_/1e3).toFixed(0)+"K":_.toString()}function k(_){if(!_||_===0)return"0.00";const r=_*1e6;return r<.01?r.toFixed(4):r<1?r.toFixed(3):r<10?r.toFixed(2):r<100?r.toFixed(1):r.toFixed(0)}return(_,r)=>{const O=T("a-switch"),A=T("a-tag");return s(),b("div",da,[t("div",ca,[t("div",{class:"header-switch sortable",onClick:r[0]||(r[0]=c=>L("enabled"))},[r[7]||(r[7]=t("span",null,"Enabled",-1)),t("span",{class:ne(["sort-indicator",{active:l.value==="enabled"}])},g(l.value==="enabled"&&m.value==="asc"?"â–²":"â–¼"),3)]),t("div",{class:"header-name sortable",onClick:r[1]||(r[1]=c=>L("name"))},[r[8]||(r[8]=t("span",null,"Model",-1)),t("span",{class:ne(["sort-indicator",{active:l.value==="name"}])},g(l.value==="name"&&m.value==="asc"?"â–²":"â–¼"),3)]),t("div",{class:"header-source sortable",onClick:r[2]||(r[2]=c=>L("source"))},[r[9]||(r[9]=t("span",null,"Source",-1)),t("span",{class:ne(["sort-indicator",{active:l.value==="source"}])},g(l.value==="source"&&m.value==="asc"?"â–²":"â–¼"),3)]),t("div",{class:"header-context sortable",onClick:r[3]||(r[3]=c=>L("context"))},[r[10]||(r[10]=t("span",null,"Context",-1)),t("span",{class:ne(["sort-indicator",{active:l.value==="context"}])},g(l.value==="context"&&m.value==="asc"?"â–²":"â–¼"),3)]),w(a).showFinancialCosts.value?(s(),b("div",{key:0,class:"header-cost-in sortable",onClick:r[4]||(r[4]=c=>L("inputCost"))},[r[11]||(r[11]=t("span",null,"Input $/1M",-1)),t("span",{class:ne(["sort-indicator",{active:l.value==="inputCost"}])},g(l.value==="inputCost"&&m.value==="asc"?"â–²":"â–¼"),3)])):E("",!0),w(a).showFinancialCosts.value?(s(),b("div",{key:1,class:"header-cost-out sortable",onClick:r[5]||(r[5]=c=>L("outputCost"))},[r[12]||(r[12]=t("span",null,"Output $/1M",-1)),t("span",{class:ne(["sort-indicator",{active:l.value==="outputCost"}])},g(l.value==="outputCost"&&m.value==="asc"?"â–²":"â–¼"),3)])):E("",!0),r[13]||(r[13]=t("div",{class:"header-enviro-carbon"},[t("span",null,"COâ‚‚")],-1)),r[14]||(r[14]=t("div",{class:"header-enviro-water"},[t("span",null,"ðŸ’§")],-1)),r[15]||(r[15]=t("div",{class:"header-enviro-energy"},[t("span",null,"âš¡")],-1))]),t("div",pa,[(s(!0),b(Q,null,le(M.value,c=>{var f,i,o;return s(),b("div",{key:c.id,class:"model-row",onClick:u=>_.$emit("toggle-model",c.id,!c.enabled)},[t("div",{class:"model-switch",onClick:r[6]||(r[6]=ge(()=>{},["stop"]))},[p(O,{checked:c.enabled,size:"small",onChange:u=>_.$emit("toggle-model",c.id,u),"data-testid":"model-toggle","data-provider":c.provider,"data-model":c.modelId,"aria-label":`${c.enabled?"Disable":"Enable"} model ${c.modelId}`},null,8,["checked","onChange","data-provider","data-model","aria-label"])]),t("div",va,[t("code",null,g(c.modelId),1)]),t("div",fa,[c.source?(s(),I(A,{key:0,size:"small",color:"cyan"},{default:d(()=>[z(g(c.source),1)]),_:2},1024)):E("",!0)]),t("div",ga,[(f=c.capabilities)!=null&&f.contextWindow?(s(),b("span",ya,g(G(c.capabilities.contextWindow)),1)):(s(),b("span",_a,"-"))]),w(a).showFinancialCosts.value?(s(),b("div",ba,[(i=c.capabilities)!=null&&i.inputCostPerToken?(s(),b("span",ha," $"+g(k(c.capabilities.inputCostPerToken)),1)):(s(),b("span",ka,"-"))])):E("",!0),w(a).showFinancialCosts.value?(s(),b("div",wa,[(o=c.capabilities)!=null&&o.outputCostPerToken?(s(),b("span",Ca," $"+g(k(c.capabilities.outputCostPerToken)),1)):(s(),b("span",$a,"-"))])):E("",!0),t("div",Ma,[t("span",za,g(w(a).getEnvironmentalCost(c,"carbon")),1)]),t("div",Oa,[t("span",Sa,g(w(a).getEnvironmentalCost(c,"water")),1)]),t("div",Ta,[t("span",Pa,g(w(a).getEnvironmentalCost(c,"energy")),1)])],8,ma)}),128))])])}}}),Ea=ce(Ba,[["__scopeId","data-v-2b840b1b"]]),xa={class:"model-preference-manager"},Da={class:"preferences-section"},La={class:"action-group"},Aa={class:"action-group"},Ga={class:"status-grid"},Ua={class:"status-item"},Ra={class:"status-value"},Fa={class:"status-item"},Ia={class:"status-value"},Va={class:"status-item"},ja={class:"status-value"},Na={class:"status-item"},Ha={class:"status-value"},Qa={class:"status-item"},qa={class:"status-value"},Ka={class:"status-item"},Wa={class:"status-value"},Ja={class:"action-group"},Xa={class:"provider-grid"},Ya={class:"provider-name"},Za={class:"provider-stats"},el={class:"provider-total"},tl={class:"provider-enabled"},sl=de({__name:"ModelPreferenceManagerV3",setup(h){const{models:e,enabledModels:a,modelsByProvider:l,showFinancialCosts:m,showEnvironmentalCosts:M}=Xe(),{discoveryStatus:L}=et(),G=We(),k=P([]),_=P(!1),r=P(!1),O=P(""),A=P("");async function c(){_.value=!0,O.value="";try{const i=await G.exportModelPreferences();if(i.ok){const o=new Blob([JSON.stringify(i.value,null,2)],{type:"application/json"}),u=URL.createObjectURL(o),v=document.createElement("a");v.href=u,v.download=`model-preferences-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(v),v.click(),document.body.removeChild(v),URL.revokeObjectURL(u),A.value="Model preferences exported successfully!"}else O.value=i.error.message}catch(i){O.value=`Failed to export preferences: ${i instanceof Error?i.message:"Unknown error"}`}finally{_.value=!1}}async function f(i){r.value=!0,O.value="";try{const o=await i.text(),u=JSON.parse(o),v=await G.importModelPreferences(u);v.ok?A.value="Model preferences imported successfully!":O.value=v.error.message}catch(o){o instanceof SyntaxError?O.value="Invalid JSON file format":O.value=`Failed to import preferences: ${o instanceof Error?o.message:"Unknown error"}`}finally{r.value=!1}return!1}return(i,o)=>{const u=T("a-button"),v=T("a-upload"),$=T("a-space"),B=T("a-divider"),x=T("a-alert"),C=T("a-collapse-panel"),S=T("a-collapse");return s(),b("div",xa,[p(S,{activeKey:k.value,"onUpdate:activeKey":o[2]||(o[2]=N=>k.value=N),bordered:!1,class:"preferences-collapse"},{default:d(()=>[p(C,{key:"preferences"},{header:d(()=>o[3]||(o[3]=[t("div",{class:"preferences-header"},[t("strong",null,"ðŸ”§ V3 Enhanced Features"),t("span",{class:"preferences-description"},"Advanced model preference management")],-1)])),default:d(()=>{var N,J,V;return[t("div",Da,[t("div",La,[o[6]||(o[6]=t("h5",{class:"action-title"},"Model Preferences",-1)),o[7]||(o[7]=t("p",{class:"action-description"}," Export and import your model enabled/disabled preferences for backup or sharing. ",-1)),p($,null,{default:d(()=>[p(u,{onClick:c,loading:_.value,type:"primary"},{icon:d(()=>[p(w(Qe))]),default:d(()=>[o[4]||(o[4]=z(" Export Preferences "))]),_:1,__:[4]},8,["loading"]),p(v,{"before-upload":f,"show-upload-list":!1,accept:".json"},{default:d(()=>[p(u,{loading:r.value},{icon:d(()=>[p(w(Pe))]),default:d(()=>[o[5]||(o[5]=z(" Import Preferences "))]),_:1,__:[5]},8,["loading"])]),_:1})]),_:1})]),p(B),t("div",Aa,[o[14]||(o[14]=t("h5",{class:"action-title"},"V3 System Information",-1)),o[15]||(o[15]=t("p",{class:"action-description"}," Enhanced V3 backend capabilities and status. ",-1)),t("div",Ga,[t("div",Ua,[o[8]||(o[8]=t("span",{class:"status-label"},"Total Models:",-1)),t("span",Ra,g(((N=w(e))==null?void 0:N.length)||0),1)]),t("div",Fa,[o[9]||(o[9]=t("span",{class:"status-label"},"Enabled Models:",-1)),t("span",Ia,g(((J=w(a))==null?void 0:J.length)||0),1)]),t("div",Va,[o[10]||(o[10]=t("span",{class:"status-label"},"Active Providers:",-1)),t("span",ja,g(Object.keys(w(l)||{}).length),1)]),t("div",Na,[o[11]||(o[11]=t("span",{class:"status-label"},"Discovery Sources:",-1)),t("span",Ha,g(((V=w(L))==null?void 0:V.length)||0),1)]),t("div",Qa,[o[12]||(o[12]=t("span",{class:"status-label"},"Cost Display:",-1)),t("span",qa,g(w(m)?"Enabled":"Disabled"),1)]),t("div",Ka,[o[13]||(o[13]=t("span",{class:"status-label"},"Environmental Display:",-1)),t("span",Wa,g(w(M)?"Enabled":"Disabled"),1)])])]),p(B),t("div",Ja,[o[16]||(o[16]=t("h5",{class:"action-title"},"Provider Status",-1)),o[17]||(o[17]=t("p",{class:"action-description"}," Real-time provider status and model counts. ",-1)),t("div",Xa,[(s(!0),b(Q,null,le(w(l),(X,pe)=>(s(),b("div",{key:pe,class:"provider-item"},[t("div",Ya,g(w(G).getProviderDisplayName(pe)),1),t("div",Za,[t("span",el,g(X.length)+" total",1),t("span",tl,g(X.filter(me=>me.enabled).length)+" enabled",1)])]))),128))])])]),O.value?(s(),I(x,{key:0,type:"error",message:O.value,closable:"",onClose:o[0]||(o[0]=X=>O.value=""),class:"error-alert"},null,8,["message"])):E("",!0),A.value?(s(),I(x,{key:1,type:"success",message:A.value,closable:"",onClose:o[1]||(o[1]=X=>A.value=""),class:"success-alert"},null,8,["message"])):E("",!0)]}),_:1})]),_:1},8,["activeKey"])])}}}),al=ce(sl,[["__scopeId","data-v-65aaac20"]]),ll={key:0,class:"loading-state"},ol={key:1,class:"error-state"},nl={class:"error-message"},il=["onClick"],rl={class:"list-header"},ul={class:"list-info"},dl={class:"list-name"},cl={class:"list-meta"},pl={class:"list-actions"},ml={class:"list-description"},vl={class:"list-preview"},fl={key:0,class:"more-models"},gl=de({__name:"ModelListsDropdownV3",props:{currentModels:{},isLoading:{type:Boolean,default:!1}},emits:["apply-list","close"],setup(h,{emit:e}){const a=h,l=e,{getProviderGroup:m}=Ye(),M=P([]),L=P(!0),G=P(""),k=P(!1),_=P("");Se(async()=>{try{L.value=!0,G.value="";const{getModelListManager:i}=await Je(async()=>{const{getModelListManager:v}=await import("./index-VqxE_YFg.js").then($=>$.a$);return{getModelListManager:v}},__vite__mapDeps([0,1])),u=await i().getLists();M.value=u.filter(v=>["openrouter-favorites","cost-efficient","high-performance"].includes(v.id)),R.info("Model lists loaded:",{lists:M.value.length})}catch(i){R.error("Failed to load model lists:",i),G.value="Failed to load model lists"}finally{L.value=!1}});function r(i){return a.currentModels.some(o=>o.modelId!==i.modelId?!1:i.provider?o.provider===i.provider&&o.enabled:i.providerGroup?m(o.provider)===i.providerGroup&&o.enabled:!1)}function O(i){return i.models.slice(0,3)}function A(i){return i.modelId.replace(/^.*\//,"").replace(/-instruct$/,"").replace(/-preview$/,"")}async function c(i){if(!(k.value||a.isLoading))try{k.value=!0,_.value=i,await new Promise((o,u)=>{l("apply-list",i),setTimeout(()=>{o()},2e3)})}catch(o){R.error("Failed to apply list:",o)}finally{k.value=!1,_.value=""}}function f(i){var o;(o=i.domEvent)==null||o.stopPropagation()}return(i,o)=>{const u=T("a-spin"),v=T("a-button"),$=T("a-menu-item"),B=T("a-menu-divider"),x=T("a-tag"),C=T("a-menu");return s(),I(C,{class:"model-lists-menu",onClick:f},{default:d(()=>[L.value?(s(),b("div",ll,[p(u,{size:"small"}),o[0]||(o[0]=t("span",null,"Loading model lists...",-1))])):G.value?(s(),b("div",ol,[t("span",nl,g(G.value),1)])):(s(),b(Q,{key:2},[o[6]||(o[6]=t("div",{class:"menu-header"},[t("span",null,"Built-in Lists")],-1)),(s(!0),b(Q,null,le(M.value,S=>(s(),I($,{key:S.id,class:"list-menu-item"},{default:d(()=>[t("div",{class:"list-item",onClick:N=>c(S.id)},[t("div",rl,[t("div",ul,[t("span",dl,g(S.name),1),t("span",cl,g(S.models.length)+" models",1)]),t("div",pl,[p(v,{type:"primary",size:"small",loading:k.value&&_.value===S.id,onClick:ge(N=>c(S.id),["stop"])},{default:d(()=>o[1]||(o[1]=[z(" Apply ")])),_:2,__:[1]},1032,["loading","onClick"])])]),t("div",ml,g(S.description),1),t("div",vl,[(s(!0),b(Q,null,le(O(S),(N,J)=>(s(),b("span",{key:`${N.provider||N.providerGroup}-${N.modelId}`,class:ne(["preview-model",{enabled:r(N)}])},g(A(N))+g(J<O(S).length-1?", ":""),3))),128)),S.models.length>3?(s(),b("span",fl," +"+g(S.models.length-3)+" more ",1)):E("",!0)])],8,il)]),_:2},1024))),128)),p(B),p($,{disabled:"",class:"future-feature"},{default:d(()=>[p(w(Gt)),o[3]||(o[3]=t("span",null,"Save Current Selection...",-1)),p(x,{color:"blue",size:"small"},{default:d(()=>o[2]||(o[2]=[z("Soon")])),_:1,__:[2]})]),_:1,__:[3]}),p($,{disabled:"",class:"future-feature"},{default:d(()=>[p(w(zt)),o[5]||(o[5]=t("span",null,"Manage Lists...",-1)),p(x,{color:"blue",size:"small"},{default:d(()=>o[4]||(o[4]=[z("Soon")])),_:1,__:[4]})]),_:1,__:[5]})],64))]),_:1})}}}),yl=ce(gl,[["__scopeId","data-v-e613a393"]]),_l={class:"models-view","data-testid":"page-models"},bl={class:"page-header"},hl={class:"ollama-cors-message"},kl={class:"cors-help"},wl={key:3,class:"discovery-status-bar"},Cl={class:"source-name"},$l=["onClick","data-testid","aria-label"],Ml={class:"search-filter-bar"},zl={class:"control-bar"},Ol={class:"left-controls"},Sl={class:"stats"},Tl={class:"provider-header"},Pl={class:"provider-info"},Bl={key:1,class:"provider-summary"},El=de({__name:"ModelsViewV3",setup(h){const e=Lt(),{models:a,modelsByProvider:l,stats:m}=Xe(),{getProviderGroup:M,requiresApiKey:L}=Ye(),{hasApiKey:G}=Ot(),{discoverModels:k,refreshDiscoverySource:_,toggleModel:r,toggleAllModels:O,toggleProviderModels:A,clearAllModels:c,isDiscovering:f,isTogglingModels:i}=Ht(),{discoveryStatus:o,getSourceDisplayName:u,getProviderDisplayName:v,refreshStatus:$}=et(),B=P(""),x=P(""),C=P("all"),S=P(!1),N=j(()=>{const y={};return Object.keys(l.value||{}).forEach(n=>{const F=M(n),Y=L(n),te=G(F);y[n]={hasKey:te,providerGroup:F,requiresKey:Y}}),y}),J=P(!1),V=P(""),X=P([]),pe=P(null),me=P([]),ye=P(!1),oe=P(null),U=P(!1),D=P(!1);let K=null;const ie=y=>{K&&clearTimeout(K),K=setTimeout(()=>{x.value=y},300)},re=j(()=>{const y={};for(const[n,F]of Object.entries(l.value))y[n]=F.filter(Y=>Y.enabled).length;return y}),se=P([]),ve=j(()=>{const y=x.value.toLowerCase(),n={},F=Object.keys(l.value);if(se.value.length===0||F.some(Y=>!se.value.includes(Y))){const Y=se.value.filter(Z=>F.includes(Z)),te=F.filter(Z=>!se.value.includes(Z)).sort();se.value=[...Y,...te]}for(const Y of se.value){const te=l.value[Y];if(!te)continue;let Z=[...te];y&&(Z=Z.filter(fe=>fe.displayName.toLowerCase().includes(y)||fe.modelId.toLowerCase().includes(y)||Y.toLowerCase().includes(y))),C.value==="enabled"?Z=Z.filter(fe=>fe.enabled):C.value==="disabled"&&(Z=Z.filter(fe=>!fe.enabled)),Z.length>0&&(n[Y]=Z)}return n}),W=j(()=>{const y=m.value.total;return R.info("ModelsViewV3 V4 totalCount:",y),y}),he=j(()=>m.value.enabled),tt=j(()=>B.value?`No models found matching "${B.value}"`:C.value!=="all"?`No ${C.value} models found`:'No models available. Click "Refresh Models" to discover models.'),we=j(()=>{if(!V.value)return!1;const y=V.value.toLowerCase();return y.includes("ollama")&&(y.includes("failed to fetch")||y.includes("networkerror when attempting to fetch"))&&!y.includes("litellm")&&!y.includes("openrouter")}),st=j(()=>{var F,Y;const y=((F=l.value["ollama-chat"])==null?void 0:F.length)>0||((Y=l.value["ollama-generate"])==null?void 0:Y.length)>0,n=o.value.some(te=>te.id==="ollama");return y||n||we.value});j(()=>!!l.value.openrouter);const Ce=j(()=>{const y=se.value.length;return X.value.length===y&&y>0}),at=Re(St),lt=Re(Tt);function ot(y){return{idle:"default",loading:"processing",success:"success",error:"error"}[y]||"default"}function nt(y){return re.value[y]||0}function it(y){const n=nt(y),F=(l.value[y]||[]).length;return n===0?"default":n===F?"success":"warning"}function rt(y){const n=ve.value[y]||[];return n.length>0&&n.every(F=>F.enabled)}function ut(y){const n=ve.value[y]||[];return n.length>0&&n.every(F=>!F.enabled)}function dt(y){e.push({path:"/settings",query:y?{provider:y}:void 0})}function ct(){Ce.value?X.value=[]:X.value=[...se.value]}async function pt(y,n){const F=await r(y,n);F.ok||(V.value=F.error.message)}async function Be(y,n){const F=await A(y,n);F.ok||(V.value=F.error.message)}async function mt(){const y=await O(!0);y.ok||(V.value=y.error.message)}async function vt(){const y=await O(!1);y.ok||(V.value=y.error.message)}async function $e(){S.value=!0,V.value="";try{R.info("V4 DEBUG: Starting discovery...");const y=await k({forceRefresh:!0});R.info("V4 DEBUG: Discovery result:",y),y.ok?(R.info("V4 DEBUG: Discovery successful, models found:",y.value.totalModels),R.info("V4 DEBUG: After discovery, models.value.length =",a.value.length),y.value.errors.length>0&&(V.value=`Some sources failed: ${y.value.errors.join("; ")}`)):(R.info("V4 DEBUG: Discovery failed:",y.error),V.value=`Discovery failed: ${y.error.message}`),$()}catch(y){R.error("Failed to refresh models",y),V.value="Failed to refresh models. Please check your connection and try again."}finally{S.value=!1}}async function ft(y){pe.value=y,V.value="";try{const n=await _(y);n.ok&&n.value.errors.length>0?V.value=`Failed to refresh ${u(y)}: ${n.value.errors.join("; ")}`:n.ok||(V.value=`Failed to refresh ${u(y)}: ${n.error.message}`),$()}catch(n){R.error("Failed to retry source",n,{sourceId:y}),V.value=`Failed to refresh ${u(y)}: ${n instanceof Error?n.message:"Unknown error"}`}finally{pe.value=null}}async function gt(){try{await _("ollama"),$(),Ee()}catch(y){R.error("Failed to refresh Ollama models after update",y)}}async function Ee(){R.warn("[CORS DEBUG] Starting CORS check...");try{const y=await Hs();R.warn("[CORS DEBUG] CORS check result:",y),y.hasCORSIssue&&y.canConnect?(R.warn("[CORS DEBUG] Setting CORS issue alert"),oe.value=y.error||"CORS configuration issue detected"):(R.warn("[CORS DEBUG] No CORS issue detected, clearing alert"),oe.value=null)}catch(y){R.warn("[CORS DEBUG] CORS check failed:",y)}}async function yt(){if(confirm("This will remove all models and re-discover them from scratch. Any custom model configurations will be lost. Continue?")){J.value=!0,V.value="";try{const n=await c();if(!n.ok){V.value=n.error.message;return}const F=await k({forceRefresh:!0});F.ok&&F.value.errors.length>0?V.value=`Some sources failed: ${F.value.errors.join("; ")}`:F.ok||(V.value=`Discovery failed: ${F.error.message}`),$()}catch(n){R.error("Failed to clear and refresh models",n),V.value="Failed to clear and refresh models. Please check your connection and try again."}finally{J.value=!1}}}async function _t(y){try{R.info("Applying model list:",y);const{getModelListManager:n}=await Je(async()=>{const{getModelListManager:te}=await import("./index-VqxE_YFg.js").then(Z=>Z.a$);return{getModelListManager:te}},__vite__mapDeps([0,1])),Y=await n().applyList(y);R.info("Model list applied:",Y),await $e()}catch(n){R.error("Failed to apply model list:",n),V.value=`Failed to apply model list: ${n instanceof Error?n.message:"Unknown error"}`}}Pt(()=>{ie(B.value)});const ae=j(()=>i.value);return Se(async()=>{R.info("V4 DEBUG: models.value.length =",a.value.length),R.info("V4 DEBUG: models.value =",a.value),R.info("V4 DEBUG: modelsByProvider.value =",l.value),a.value.length===0&&(R.info("V4 DEBUG: No models found, refreshing..."),$e()),X.value=[],Ee()}),Bt(()=>{B.value="",X.value=[],V.value=""}),(y,n)=>{const F=T("a-button"),Y=T("a-space"),te=T("a-alert"),Z=T("a-tag"),fe=T("a-input-search"),Me=T("a-radio-button"),bt=T("a-radio-group"),ht=T("a-divider"),kt=T("a-dropdown"),wt=T("a-tooltip"),xe=T("a-collapse-panel"),De=T("a-collapse"),Ct=T("a-empty");return s(),b("div",_l,[t("div",bl,[n[12]||(n[12]=t("div",{class:"header-content"},[t("h1",null,"Model Management"),t("p",{class:"description"},"Configure and enable LLM models for testing")],-1)),p(Y,null,{default:d(()=>[p(F,{type:"primary",onClick:$e,loading:S.value||w(f),"data-testid":"btn-refresh-models","aria-label":"Refresh available models"},{icon:d(()=>[p(w(qe))]),default:d(()=>[n[10]||(n[10]=z(" Refresh Models "))]),_:1,__:[10]},8,["loading"]),p(F,{danger:"",onClick:yt,loading:J.value,"data-testid":"btn-clear-refresh-models","aria-label":"Clear all models and refresh"},{icon:d(()=>[p(w(Ke))]),default:d(()=>[n[11]||(n[11]=z(" Clear and Refresh Models "))]),_:1,__:[11]},8,["loading"])]),_:1})]),V.value&&!we.value?(s(),I(te,{key:0,type:"error",message:V.value,closable:"",onClose:n[0]||(n[0]=H=>V.value=""),class:"error-alert"},null,8,["message"])):E("",!0),we.value?(s(),I(te,{key:1,type:"info",closable:"",onClose:n[1]||(n[1]=H=>V.value=""),class:"ollama-info-alert"},{message:d(()=>n[13]||(n[13]=[t("div",{class:"ollama-message"},[z(" Ollama is not running on this computer. To audit local LLMs, install "),t("a",{href:"https://ollama.com",target:"_blank",rel:"noopener noreferrer"},"Ollama"),z(". ")],-1)])),_:1})):E("",!0),oe.value?(s(),I(te,{key:2,type:"warning",closable:"",onClose:n[3]||(n[3]=H=>oe.value=null),class:"ollama-cors-alert"},{message:d(()=>[t("div",hl,[n[14]||(n[14]=t("strong",null,"Ollama CORS Configuration Issue",-1)),n[15]||(n[15]=t("br",null,null,-1)),n[16]||(n[16]=z(" Ollama is running but not configured to allow browser requests. Add ")),n[17]||(n[17]=t("code",null,"OLLAMA_ORIGINS=*",-1)),n[18]||(n[18]=z(" to your Ollama service configuration. ")),t("div",kl,[t("a",{href:"#",onClick:n[2]||(n[2]=ge(H=>U.value=!0,["prevent"]))},"Show setup instructions")])])]),_:1})):E("",!0),w(o).length>0?(s(),b("div",wl,[n[19]||(n[19]=t("span",{class:"status-label"},"Sources:",-1)),(s(!0),b(Q,null,le(w(o),H=>(s(),b("div",{key:H.id,class:"source-status-compact"},[t("span",Cl,g(w(u)(H.id)),1),p(Z,{color:ot(H.status),size:"small"},{default:d(()=>[H.status==="success"&&H.modelCount?(s(),b(Q,{key:0},[z(g(H.modelCount),1)],64)):H.status==="error"?(s(),b("span",{key:1,onClick:ee=>ft(H.id),style:{cursor:"pointer"},"data-testid":`retry-source-${H.id}`,"aria-label":`Retry loading models from ${w(u)(H.id)}`},"âŸ³ retry",8,$l)):(s(),b(Q,{key:2},[z(g(H.status),1)],64))]),_:2},1032,["color"])]))),128))])):E("",!0),t("div",Ml,[p(fe,{value:B.value,"onUpdate:value":n[4]||(n[4]=H=>B.value=H),placeholder:"Search models by name, provider, or ID...","allow-clear":"",size:"large",class:"search-input","data-testid":"input-model-search","aria-label":"Search models",loading:B.value!==x.value},null,8,["value","loading"]),p(bt,{value:C.value,"onUpdate:value":n[5]||(n[5]=H=>C.value=H),"button-style":"solid",size:"large"},{default:d(()=>[p(Me,{value:"all"},{default:d(()=>n[20]||(n[20]=[z("All")])),_:1,__:[20]}),p(Me,{value:"enabled"},{default:d(()=>n[21]||(n[21]=[z("Enabled")])),_:1,__:[21]}),p(Me,{value:"disabled"},{default:d(()=>n[22]||(n[22]=[z("Disabled")])),_:1,__:[22]})]),_:1},8,["value"])]),t("div",zl,[t("div",Ol,[p(F,{type:"text",size:"small",onClick:ct},{icon:d(()=>[(s(),I(Et(Ce.value?lt.value:at.value)))]),default:d(()=>[z(" "+g(Ce.value?"Collapse All":"Expand All"),1)]),_:1}),p(ht,{type:"vertical"}),p(F,{type:"text",size:"small",onClick:mt,loading:ae.value,disabled:ae.value},{icon:d(()=>[p(w(ue))]),default:d(()=>[n[23]||(n[23]=z(" Enable All "))]),_:1,__:[23]},8,["loading","disabled"]),p(F,{type:"text",size:"small",onClick:vt,loading:ae.value,disabled:ae.value},{icon:d(()=>[p(w(Fe))]),default:d(()=>[n[24]||(n[24]=z(" Disable All "))]),_:1,__:[24]},8,["loading","disabled"]),p(kt,{open:D.value,"onUpdate:open":n[7]||(n[7]=H=>D.value=H),placement:"bottomLeft",disabled:ae.value},{overlay:d(()=>[p(yl,{"current-models":Array.from(w(a)),"is-loading":ae.value,onApplyList:_t,onClose:n[6]||(n[6]=H=>D.value=!1)},null,8,["current-models","is-loading"])]),default:d(()=>[p(F,{type:"text",size:"small",loading:ae.value,disabled:ae.value},{icon:d(()=>[p(w(Ze))]),default:d(()=>[n[25]||(n[25]=z(" Model Lists ")),p(w(Oe))]),_:1,__:[25]},8,["loading","disabled"])]),_:1},8,["open","disabled"])]),t("div",Sl,[t("span",null,g(he.value)+" of "+g(W.value)+" models enabled",1)])]),p(De,{activeKey:X.value,"onUpdate:activeKey":n[8]||(n[8]=H=>X.value=H),bordered:!1,class:"provider-collapse",destroyInactivePanel:!1},{default:d(()=>[(s(!0),b(Q,null,le(ve.value,(H,ee)=>(s(),I(xe,{key:`provider-${ee}`},{header:d(()=>{var Le,Ae;return[t("div",Tl,[t("div",Pl,[t("strong",null,g(w(v)(ee)),1),(Le=N.value[ee])!=null&&Le.requiresKey&&!((Ae=N.value[ee])!=null&&Ae.hasKey)?(s(),I(wt,{key:0,placement:"top"},{title:d(()=>{var _e;return[z(" API key not set for "+g((_e=N.value[ee])==null?void 0:_e.providerGroup)+". Click to add in settings. ",1)]}),default:d(()=>[p(F,{type:"link",danger:"",size:"small",onClick:ge(_e=>{var Ge;return dt((Ge=N.value[ee])==null?void 0:Ge.providerGroup)},["stop"])},{icon:d(()=>[p(w(Dt))]),default:d(()=>[n[26]||(n[26]=z(" API Key Missing "))]),_:2,__:[26]},1032,["onClick"])]),_:2},1024)):E("",!0),X.value.includes(ee)?(s(),b(Q,{key:2},[p(Z,{size:"small",color:"blue"},{default:d(()=>[z(g(H.length)+" models",1)]),_:2},1024),p(Z,{size:"small",color:it(ee)},{default:d(()=>[z(g(re.value[ee]||0)+" enabled ",1)]),_:2},1032,["color"])],64)):(s(),b("span",Bl,g(re.value[ee]||0)+" / "+g((w(l)[ee]||[]).length)+" enabled ",1))]),p(Y,{size:"small"},{default:d(()=>[p(F,{type:"text",size:"small",onClick:ge(_e=>Be(ee,!0),["stop"]),disabled:rt(ee)||ae.value,loading:ae.value},{icon:d(()=>[p(w(ue))]),default:d(()=>[n[27]||(n[27]=z(" Enable All "))]),_:2,__:[27]},1032,["onClick","disabled","loading"]),p(F,{type:"text",size:"small",onClick:ge(_e=>Be(ee,!1),["stop"]),disabled:ut(ee)||ae.value,loading:ae.value},{icon:d(()=>[p(w(Fe))]),default:d(()=>[n[28]||(n[28]=z(" Disable All "))]),_:2,__:[28]},1032,["onClick","disabled","loading"])]),_:2},1024)])]}),default:d(()=>[(s(),I(xt,null,[p(Ea,{models:H,"provider-id":ee,onToggleModel:pt},null,8,["models","provider-id"])],1024))]),_:2},1024))),128))]),_:1},8,["activeKey"]),Object.keys(ve.value).length===0?(s(),I(Ct,{key:4,description:tt.value,class:"empty-state"},null,8,["description"])):E("",!0),st.value?(s(),I(De,{key:5,activeKey:me.value,"onUpdate:activeKey":n[9]||(n[9]=H=>me.value=H),bordered:!1,class:"ollama-manager-collapse"},{default:d(()=>[p(xe,{key:"ollama"},{header:d(()=>n[29]||(n[29]=[t("div",{class:"ollama-header"},[t("strong",null,"Ollama Model Management"),t("span",{class:"ollama-description"},"Download and manage local Ollama models")],-1)])),default:d(()=>[p(ua,{onModelsUpdated:gt})]),_:1})]),_:1},8,["activeKey"])):E("",!0),ye.value?(s(),I(al,{key:6,class:"enhanced-features"})):E("",!0)])}}}),Fl=ce(El,[["__scopeId","data-v-8bb54e66"]]);export{Fl as default};
