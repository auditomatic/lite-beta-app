import{a4 as t,a5 as i,m as e}from"./vue3-datagrid-BMRu4gh2.js";
/*!
 * Built by Revolist OU ❤️
 */const l={contentSize:0,clientSize:0,virtualSize:0,maxSize:0};function a(t,i,e=0){return e>t?0:t+(e?i-e:0)}class r{constructor(t){this.cfg=t,this.preventArtificialScroll={rgRow:null,rgCol:null},this.previousScroll={rgRow:-1,rgCol:-1},this.params={rgRow:Object.assign({},l),rgCol:Object.assign({},l)}}setParams(t,i){const e=a(t.contentSize,t.clientSize,t.virtualSize);this.params[i]=Object.assign(Object.assign({},t),{maxSize:e-t.clientSize,virtualContentSize:e})}async setScroll(t){this.cancelScroll(t.dimension);const i=new Promise((i,e)=>{if(this.cfg.skipAnimationFrame)return i();const l=window.requestAnimationFrame(()=>{i()});this.preventArtificialScroll[t.dimension]=e.bind(null,l)});try{await i;const e=this.getParams(t.dimension);t.coordinate=Math.ceil(t.coordinate),this.previousScroll[t.dimension]=this.wrapCoordinate(t.coordinate,e),this.preventArtificialScroll[t.dimension]=null,this.cfg.applyScroll(Object.assign(Object.assign({},t),{coordinate:e.virtualSize?this.convert(t.coordinate,e,!1):t.coordinate}))}catch(e){window.cancelAnimationFrame(e)}}scroll(t,i,e=!1,l,a=!1){if(this.cancelScroll(i),!e&&this.previousScroll[i]===t)return void(this.previousScroll[i]=-1);const r=this.getParams(i);this.cfg.runScroll({dimension:i,coordinate:r.virtualSize?this.convert(t,r):t,delta:l,outside:a})}getParams(t){return this.params[t]}wrapCoordinate(t,i){return t<0?-1:"number"==typeof i.maxSize&&t>i.maxSize?i.maxSize:t}cancelScroll(t){var i,e;null===(e=(i=this.preventArtificialScroll)[t])||void 0===e||e.call(i),this.preventArtificialScroll[t]=null}convert(i,e,l=!0){var a;const r=e.clientSize,o=[0,(null!==(a=e.virtualContentSize)&&void 0!==a?a:r)-r],s=[0,e.contentSize-e.virtualSize];return l?t(i,o,s):t(i,s,o)}}class o{constructor(t=10){this.scrollThrottling=t,this.mouseWheelScrollTimestamp={rgCol:0,rgRow:0},this.lastKnownScrollCoordinate={rgCol:0,rgRow:0},this.lastScrollUpdateCallbacks={}}setCoordinate(t){this.lastKnownScrollCoordinate[t.dimension]=t.coordinate}latestScrollUpdate(t){this.mouseWheelScrollTimestamp[t]=(new Date).getTime()}isReady(t,i){return this.lastScrollUpdateCallbacks[t]&&this.clearLastScrollUpdate(t),this.verifyChange(t,i)}verifyChange(t,i){return(new Date).getTime()-this.mouseWheelScrollTimestamp[t]>this.scrollThrottling&&i!==this.lastKnownScrollCoordinate[t]}clearLastScrollUpdate(t){var i,e;clearTimeout(null!==(e=null===(i=this.lastScrollUpdateCallbacks[t])||void 0===i?void 0:i.timeout)&&void 0!==e?e:0),delete this.lastScrollUpdateCallbacks[t]}throttleLastScrollUpdate(t,i,e){if(this.scrollThrottling){this.clearLastScrollUpdate(t);const l=this.lastScrollUpdateCallbacks[t]={callback:e,timestamp:(new Date).getTime(),coordinate:i,timeout:0};l.timeout=setTimeout(()=>{this.clearLastScrollUpdate(t),this.mouseWheelScrollTimestamp[t]<l.timestamp&&this.verifyChange(t,l.coordinate)&&l.callback()},this.scrollThrottling+50)}}}function s(t,l,a){var r=!0,o=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return i(a)&&(r="leading"in a?!!a.leading:r,o="trailing"in a?!!a.trailing:o),e(t,l,{leading:r,maxWait:l,trailing:o})}export{o as L,r as a,a as g,s as t};
