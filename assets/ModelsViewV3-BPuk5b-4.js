const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-Be9cnb4G.js","assets/index-Rfcl7loQ.css"])))=>i.map(i=>d[i]);
import{b as c,I as je,d as q,aA as Ne,r as P,c as V,p as $t,i as de,j as _,m as s,k as e,v as T,t as d,x as O,y as B,F as Q,A as le,z as f,D as k,q as I,_ as ce,aa as ne,aB as ue,ah as ge,J as Oe,aC as He,a as R,B as ze,w as Mt,C as Ue,n as Se,E as Qe,aD as qe,L as Ke,u as We,aE as Je,U as zt,am as Ot,s as Re,aF as St,aG as Tt,a2 as Pt,o as Bt,aH as Et,aI as Fe,aJ as xt,ak as Dt,M as At}from"./index-Be9cnb4G.js";import{u as Xe}from"./useV4Models-QYoKHV_V.js";import{u as Ye}from"./useV4ProviderParameters-CzGv5o9f.js";import{F as Lt}from"./FilterOutlined-CLYJxwr7.js";import{U as Ze}from"./UnorderedListOutlined-7P0rgCtZ.js";import{S as Gt}from"./SaveOutlined-DJx3-BjJ.js";import"./useV4LiveQuery-Du2rfIZ0.js";var Ut={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 144H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H212V212h200v200zm452-268H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H612V212h200v200zM464 544H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16zm-52 268H212V612h200v200zm452-268H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16zm-52 268H612V612h200v200z"}}]},name:"appstore",theme:"outlined"};function Ie(h){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?Object(arguments[t]):{},l=Object.keys(a);typeof Object.getOwnPropertySymbols=="function"&&(l=l.concat(Object.getOwnPropertySymbols(a).filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable}))),l.forEach(function(p){Rt(h,p,a[p])})}return h}function Rt(h,t,a){return t in h?Object.defineProperty(h,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):h[t]=a,h}var Te=function(t,a){var l=Ie({},t,a.attrs);return c(je,Ie({},l,{icon:Ut}),null)};Te.displayName="AppstoreOutlined";Te.inheritAttrs=!1;var Ft={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"};function Ve(h){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?Object(arguments[t]):{},l=Object.keys(a);typeof Object.getOwnPropertySymbols=="function"&&(l=l.concat(Object.getOwnPropertySymbols(a).filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable}))),l.forEach(function(p){It(h,p,a[p])})}return h}function It(h,t,a){return t in h?Object.defineProperty(h,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):h[t]=a,h}var Pe=function(t,a){var l=Ve({},t,a.attrs);return c(je,Ve({},l,{icon:Ft}),null)};Pe.displayName="UploadOutlined";Pe.inheritAttrs=!1;class Vt{async bulkWrite(t,a,l="put"){a.length!==0&&await q.transaction("rw",q[t],async()=>{switch(l){case"put":await q[t].bulkPut(a);break;case"add":await q[t].bulkAdd(a);break;case"update":const p=a.map(M=>q[t].update(M.id,M));await Promise.all(p);break}})}async bulkDelete(t,a){a.length!==0&&await q.transaction("rw",q[t],async()=>{await q[t].bulkDelete(a)})}async conditionalBulkUpdate(t,a,l){let p=0;return await q.transaction("rw",q[t],async()=>{await q[t].toCollection().modify(M=>{a(M)&&(Object.assign(M,l),p++)})}),p}freezeDeep(t){const a=t.map(l=>Object.freeze(l));return Object.freeze(a)}async getAndFreeze(t,a){const l=await q[t].get(a);return l?Object.freeze(l):null}async getAllAndFreeze(t){const a=await q[t].toArray();return this.freezeDeep(a)}}const we=new Vt;class jt{async bulkUpsertModels(t){t.length!==0&&await q.transaction("rw",q.models,async()=>{const a=t.map(l=>Object.freeze({...l,enabled:l.enabled??!1,available:l.available??!0}));await q.models.bulkPut(a)})}async clearProviderModels(t){return await q.transaction("rw",q.models,async()=>{const p=(await q.models.where("provider").equals(t).toArray()).map(M=>M.id);return p.length>0&&await q.models.bulkDelete(p),p.length})}async toggleModelEnabled(t,a){return await q.models.update(t,{enabled:a})===1}async toggleProviderModels(t,a){return await we.conditionalBulkUpdate("models",l=>l.provider===t,{enabled:a})}async toggleAllModels(t){return await we.conditionalBulkUpdate("models",()=>!0,{enabled:t})}async getModelStatistics(){const t=await q.models.toArray(),a={total:t.length,enabled:0,byProvider:{}};for(const l of t)l.enabled&&a.enabled++,a.byProvider[l.provider]||(a.byProvider[l.provider]={total:0,enabled:0}),a.byProvider[l.provider].total++,l.enabled&&a.byProvider[l.provider].enabled++;return Object.freeze(a)}async updateModelAvailability(t,a){return await we.conditionalBulkUpdate("models",l=>l.provider===t,{available:a})}async searchModels(t){let a=q.models.toCollection();if(t.provider&&(a=q.models.where("provider").equals(t.provider)),t.enabled!==void 0&&(a=a.and(p=>p.enabled===t.enabled)),t.available!==void 0&&(a=a.and(p=>p.available===t.available)),t.search){const p=t.search.toLowerCase();a=a.and(M=>M.displayName.toLowerCase().includes(p)||M.modelId.toLowerCase().includes(p))}const l=await a.toArray();return we.freezeDeep(l)}async clearAllModels(){await q.models.clear()}}const Nt=new jt;function Ht(){const h=Ne(),t=P(!1),a=P(null),l=P(!1),p=P(!1);async function M(y,r){t.value=!0,r&&(r.value=!0),a.value=null;try{return{ok:!0,value:await y()}}catch(o){const u=o instanceof Error?o:new Error(String(o));return a.value=u,{ok:!1,error:u}}finally{t.value=!1,r&&(r.value=!1)}}async function A(y){return M(()=>h.discoverModels(y),l)}async function L(y){return M(()=>h.refreshModelSource(y),l)}async function w(y,r){return M(async()=>{await h.toggleModel(y,r)},p)}async function b(y){return M(async()=>{await h.toggleAllModels(y)},p)}async function i(y,r){return M(async()=>{await h.toggleProviderModels(y,r)},p)}async function z(){return M(async()=>{await h.enableOpenRouterFavorites()},p)}async function F(){return M(async()=>{await h.clearAllModels()})}async function v(y,r){return M(async()=>{await Nt.updateModelAvailability(y,r)})}return{discoverModels:A,refreshDiscoverySource:L,toggleModel:w,toggleAllModels:b,toggleProviderModels:i,enableOpenRouterFavorites:z,clearAllModels:F,updateModelAvailability:v,isExecuting:t,lastError:a,isDiscovering:l,isTogglingModels:p}}function et(){const h=Ne(),t=P([]),a=P(!1),l=P([]);function p(){const L=h.getDiscoveryStatus();t.value=L.map(w=>({id:w.id,status:w.status==="loading"?"loading":w.status==="idle"?"success":w.status,modelCount:w.modelCount,error:w.error})),a.value=h.isDiscovering(),l.value=h.getDiscoveryErrors()}function M(L){return{litellm:"LiteLLM",openrouter:"OpenRouter",ollama:"Ollama",deterministic:"Deterministic"}[L]||L}function A(L){const w=$t.getProvider(L);return(w==null?void 0:w.name)||L}return p(),{discoveryStatus:V(()=>t.value),isDiscovering:V(()=>a.value),discoveryErrors:V(()=>l.value),getSourceDisplayName:M,getProviderDisplayName:A,refreshStatus:p}}const Qt={class:"search-section"},qt={class:"search-controls"},Kt={class:"size-filter"},Wt={class:"size-controls"},Jt={class:"size-presets"},Xt={key:0,class:"size-filter-indicator"},Yt={class:"quantized-filter"},Zt={class:"filter-description"},es={class:"category-filters"},ts=de({__name:"OllamaSearchFilters",props:{searchQuery:{},sortBy:{},selectedCategories:{},maxSizeGB:{},showQuantized:{type:Boolean},categories:{}},emits:["update:searchQuery","update:sortBy","update:maxSizeGB","update:showQuantized","toggle-category"],setup(h,{emit:t}){const a=h,l=t,p=V({get:()=>a.searchQuery,set:b=>l("update:searchQuery",b)}),M=V({get:()=>a.sortBy,set:b=>l("update:sortBy",b)}),A=V({get:()=>a.maxSizeGB,set:b=>l("update:maxSizeGB",b)}),L=V({get:()=>a.showQuantized,set:b=>l("update:showQuantized",b)}),w=[{label:"1GB",value:1},{label:"2GB",value:2},{label:"4GB",value:4},{label:"8GB",value:8},{label:"16GB",value:16},{label:"None",value:999}];return(b,i)=>{const z=T("a-input-search"),F=T("a-select-option"),v=T("a-select"),y=T("a-input-number"),r=T("a-button"),o=T("a-tag");return s(),_("div",Qt,[e("div",qt,[c(z,{value:p.value,"onUpdate:value":i[0]||(i[0]=u=>p.value=u),placeholder:"Search models by name or description...","allow-clear":"",size:"large",class:"search-input"},null,8,["value"]),c(v,{value:M.value,"onUpdate:value":i[1]||(i[1]=u=>M.value=u),placeholder:"Sort by",style:{width:"180px"},size:"large"},{default:d(()=>[c(F,{value:"popularity"},{default:d(()=>i[4]||(i[4]=[O("Popularity")])),_:1,__:[4]}),c(F,{value:"lastUpdated"},{default:d(()=>i[5]||(i[5]=[O("Last Updated")])),_:1,__:[5]}),c(F,{value:"name"},{default:d(()=>i[6]||(i[6]=[O("Name")])),_:1,__:[6]}),c(F,{value:"tagCount"},{default:d(()=>i[7]||(i[7]=[O("Tag Count")])),_:1,__:[7]})]),_:1},8,["value"])]),e("div",Kt,[e("div",Wt,[i[8]||(i[8]=e("span",{class:"filter-label"},"Filter to models smaller than:",-1)),c(y,{value:A.value,"onUpdate:value":i[2]||(i[2]=u=>A.value=u),min:1,max:999,step:1,size:"small",class:"size-input","addon-after":"GB"},null,8,["value"]),e("div",Jt,[(s(),_(Q,null,le(w,u=>c(r,{key:u.value,size:"small",type:A.value===u.value?"primary":"default",onClick:m=>A.value=u.value,class:"preset-button"},{default:d(()=>[O(f(u.label),1)]),_:2},1032,["type","onClick"])),64))])]),A.value<999?(s(),_("span",Xt," â‰¤"+f(A.value)+"GB filter active ",1)):B("",!0)]),e("div",Yt,[c(r,{type:L.value?"default":"primary",size:"small",onClick:i[3]||(i[3]=u=>L.value=!L.value)},{icon:d(()=>[c(k(Lt))]),default:d(()=>[O(" "+f(L.value?"Hide":"Show")+" Quantized Versions ",1)]),_:1},8,["type"]),e("span",Zt,f(L.value?"Showing all versions":"Hiding q2_K, q3_K, q4_0, q5_1, q6_K, q8_0, fp16..."),1)]),e("div",es,[(s(!0),_(Q,null,le(b.categories,u=>(s(),I(o,{key:u,color:b.selectedCategories.includes(u)?"blue":"default",checkable:!0,checked:b.selectedCategories.includes(u),onClick:m=>b.$emit("toggle-category",u),class:"category-tag"},{default:d(()=>[O(f(u),1)]),_:2},1032,["color","checked","onClick"]))),128))])])}}}),ss=ce(ts,[["__scopeId","data-v-a03d8794"]]),as={key:0,class:"downloads-section"},ls={class:"download-items"},os={class:"download-info"},ns={class:"download-tag"},rs={class:"download-status"},is=de({__name:"OllamaDownloadProgress",props:{pullProgress:{}},setup(h){return(t,a)=>{const l=T("a-progress");return Object.keys(t.pullProgress).length>0?(s(),_("div",as,[a[0]||(a[0]=e("h4",null,"Active Downloads",-1)),e("div",ls,[(s(!0),_(Q,null,le(t.pullProgress,(p,M)=>(s(),_("div",{key:M,class:"download-item"},[e("div",os,[e("code",ns,f(M),1),e("span",rs,f(p.message),1)]),c(l,{percent:p.percent,status:p.status==="success"?"success":"active",size:"small",class:"download-progress"},null,8,["percent","status"])]))),128))])])):B("",!0)}}}),us=ce(is,[["__scopeId","data-v-88ba3f68"]]),ds={class:"model-info"},cs={class:"model-name"},ps={key:0},ms={class:"model-description"},vs={class:"model-actions"},fs={key:0,class:"button-size-info"},gs={key:0,class:"tags-preview"},ys={class:"preview-tags"},_s=["onClick","title"],bs={key:1,class:"tag-actual"},hs={class:"tag-size"},ws={key:0,class:"more-tags"},ks={key:1,class:"tags-expanded"},Cs={key:0,class:"tag-name"},$s={key:2},Ms={key:1,class:"text-secondary"},zs=de({__name:"OllamaModelCard",props:{model:{},expanded:{type:Boolean},pullingModels:{},pullProgress:{},installedModels:{},maxSizeGB:{},showQuantized:{type:Boolean},isQuantizedTag:{type:Function},parseSizeToGB:{type:Function},getSizeClass:{type:Function},getLatestTagInfo:{type:Function}},emits:["toggle-expand","pull-model"],setup(h){const t=h,a=[{title:"Tag",key:"name",width:200},{title:"Size",key:"size",width:100,align:"right"},{title:"Context",key:"context",width:100,align:"center"},{title:"Status",key:"status",width:80,align:"center"},{title:"Action",key:"actions",width:80,align:"center"}],l=V(()=>t.installedModels.some(u=>u.startsWith(t.model.name))),p=V(()=>t.installedModels.filter(u=>u.startsWith(t.model.name+":")).length),M=V(()=>v(`${t.model.name}:latest`)||v(t.model.name)),A=V(()=>t.pullingModels.has(`${t.model.name}:latest`)),L=V(()=>t.pullProgress[`${t.model.name}:latest`]),w=V(()=>t.getLatestTagInfo(t.model)),b=V(()=>t.maxSizeGB<999||!t.showQuantized),i=V(()=>t.model.tags?Object.entries(t.model.tags).map(([u,m])=>({...m,name:u})).filter(u=>!(t.maxSizeGB<999&&t.parseSizeToGB(u.size||"0GB")>t.maxSizeGB||!t.showQuantized&&t.isQuantizedTag(u.name))).sort((u,m)=>u.name.localeCompare(m.name)):[]),z=V(()=>i.value.length),F=V(()=>i.value.sort((m,$)=>{const E=["latest","instruct","8b","7b","3b","1b"],x=E.indexOf(m.name),C=E.indexOf($.name);return x!==-1&&C!==-1?x-C:x!==-1?-1:C!==-1?1:m.name.localeCompare($.name)}).slice(0,5));function v(u){return t.installedModels.includes(u)}function y(u){return t.pullingModels.has(u)}function r(u){return t.pullProgress[u]}const o=V(()=>{const u=w.value;return u?{actualTag:u.actualTag||"",size:u.size||""}:null});return(u,m)=>{const $=T("a-tag"),E=T("a-button"),x=T("a-table");return s(),_("div",{class:ne(["model-item",{expanded:u.expanded}])},[e("div",{class:"model-header",onClick:m[2]||(m[2]=C=>u.$emit("toggle-expand"))},[e("div",ds,[e("div",cs,[e("h4",null,f(u.model.name),1),c($,{size:"small",color:"blue"},{default:d(()=>[O(f(u.model.pullCount||"0")+" pulls",1)]),_:1}),c($,{size:"small",color:"green"},{default:d(()=>[O(f(z.value)+" ",1),b.value?(s(),_("span",ps,"/"+f(u.model.tagCount||0),1)):B("",!0),m[3]||(m[3]=O(" versions "))]),_:1,__:[3]}),l.value?(s(),I($,{key:0,size:"small",color:"success",class:"installed-tag"},{icon:d(()=>[c(k(ue))]),default:d(()=>[O(" "+f(p.value)+" installed ",1)]),_:1})):B("",!0)]),e("p",ms,f(u.model.description||"No description available"),1)]),e("div",vs,[c(E,{type:M.value?"default":"primary",size:"small",onClick:m[0]||(m[0]=ge(C=>u.$emit("pull-model",u.model.name,"latest"),["stop"])),loading:A.value,disabled:M.value},{default:d(()=>[L.value?(s(),_(Q,{key:0},[O(f(Math.round(L.value.percent))+"% ",1)],64)):M.value?(s(),_(Q,{key:1},[c(k(ue)),m[4]||(m[4]=O(" Installed "))],64)):(s(),_(Q,{key:2},[m[5]||(m[5]=O(" Pull Latest ")),o.value?(s(),_("span",fs," ("+f(o.value.actualTag?o.value.actualTag+", ":"")+f(o.value.size)+") ",1)):B("",!0)],64))]),_:1},8,["type","loading","disabled"]),c(E,{type:"text",size:"small",onClick:m[1]||(m[1]=ge(C=>u.$emit("toggle-expand"),["stop"]))},{icon:d(()=>[u.expanded?(s(),I(k(He),{key:1})):(s(),I(k(Oe),{key:0}))]),default:d(()=>[O(" "+f(u.expanded?"Hide versions":"See all versions"),1)]),_:1})])]),u.expanded?B("",!0):(s(),_("div",gs,[e("div",ys,[(s(!0),_(Q,null,le(F.value,C=>(s(),_("span",{key:C.name,class:ne(["tag-chip",[u.getSizeClass(C.size),{installed:v(C.fullTag)}]]),onClick:S=>v(C.fullTag)?null:u.$emit("pull-model",u.model.name,C.name),title:`${C.fullTag} - ${C.size}${v(C.fullTag)?" (Installed)":""}`},[v(C.fullTag)?(s(),I(k(ue),{key:0,class:"installed-icon"})):B("",!0),O(" "+f(C.name)+" ",1),C.name==="latest"&&o.value?(s(),_("span",bs," ("+f(o.value.actualTag)+") ",1)):B("",!0),e("span",hs,f(C.size),1)],10,_s))),128)),z.value>5?(s(),_("span",ws," +"+f(z.value-5)+" more versions ",1)):B("",!0)])])),u.expanded?(s(),_("div",ks,[c(x,{columns:a,"data-source":i.value,pagination:!1,size:"small",scroll:{y:300},class:"tags-table"},{bodyCell:d(({column:C,record:S})=>[C.key==="name"?(s(),_("code",Cs,f(S.name),1)):B("",!0),C.key==="size"?(s(),_("span",{key:1,class:ne(["tag-size",u.getSizeClass(S.size)])},f(S.size),3)):B("",!0),C.key==="context"?(s(),_("span",$s,f(S.contextWindow),1)):B("",!0),C.key==="status"?(s(),_(Q,{key:3},[v(S.fullTag)?(s(),I($,{key:0,size:"small",color:"success"},{default:d(()=>[c(k(ue)),m[6]||(m[6]=O(" Installed "))]),_:1,__:[6]})):(s(),_("span",Ms,"-"))],64)):B("",!0),C.key==="actions"?(s(),I(E,{key:4,type:v(S.fullTag)?"default":"primary",size:"small",onClick:N=>u.$emit("pull-model",u.model.name,S.name),loading:y(S.fullTag),disabled:v(S.fullTag)},{default:d(()=>[r(S.fullTag)?(s(),_(Q,{key:0},[O(f(Math.round(r(S.fullTag).percent))+"% ",1)],64)):v(S.fullTag)?(s(),_(Q,{key:1},[c(k(ue)),m[7]||(m[7]=O(" Installed "))],64)):(s(),_(Q,{key:2},[O(" Pull ")],64))]),_:2},1032,["type","onClick","loading","disabled"])):B("",!0)]),_:1},8,["data-source"])])):B("",!0)],2)}}}),Os=ce(zs,[["__scopeId","data-v-83727817"]]),Ss={class:"list-view"},Ts={class:"expanded-tags-container"},Ps={class:"expanded-tags-grid"},Bs={class:"tag-name"},Es={key:0,class:"tag-actual"},xs={class:"tag-size"},Ds={class:"tag-context"},As={key:0,class:"model-name-cell"},Ls={key:1,class:"description-cell"},Gs={key:2,class:"stats-cell"},Us={class:"stat-item"},Rs={class:"stat-item"},Fs={key:0},Is={key:3,class:"size-range"},Vs=de({__name:"OllamaModelList",props:{models:{},expandedModels:{},pullingModels:{},pullProgress:{},installedModels:{},maxSizeGB:{},showQuantized:{type:Boolean},isQuantizedTag:{type:Function},parseSizeToGB:{type:Function},getSizeClass:{type:Function},getLatestTagInfo:{type:Function},getModelSizeRange:{type:Function}},emits:["toggle-model","pull-model","expand"],setup(h){const t=h,a=[{title:"Model",key:"name",width:200,fixed:"left"},{title:"Description",key:"description",ellipsis:!0},{title:"Stats",key:"stats",width:200},{title:"Size Range",key:"sizeRange",width:120,align:"center"},{title:"Actions",key:"actions",width:220,align:"center",fixed:"right"}];function l(w){return w.tags?Object.entries(w.tags).map(([b,i])=>({...i,name:b})).filter(b=>!(t.maxSizeGB<999&&t.parseSizeToGB(b.size||"0GB")>t.maxSizeGB||!t.showQuantized&&t.isQuantizedTag(b.name))).sort((b,i)=>b.name.localeCompare(i.name)):[]}function p(w){return w.tags?Object.entries(w.tags).filter(([b,i])=>!(t.maxSizeGB<999&&t.parseSizeToGB(i.size||"0GB")>t.maxSizeGB||!t.showQuantized&&t.isQuantizedTag(b))).length:0}function M(w){return t.installedModels.some(b=>b.startsWith(w))}function A(w){return t.installedModels.includes(w)}function L(w){return t.installedModels.filter(b=>b.startsWith(w+":"))}return(w,b)=>{const i=T("a-tag"),z=T("a-button"),F=T("a-space"),v=T("a-table");return s(),_("div",Ss,[c(v,{"data-source":w.models,columns:a,pagination:!1,"row-key":y=>y.name,size:"small",scroll:{y:"calc(100% - 48px)"},"expanded-row-keys":w.expandedModels,"expand-row-by-click":!1,onExpand:b[0]||(b[0]=(y,r)=>w.$emit("expand",y,r)),class:"models-list-table"},{expandedRowRender:d(({record:y})=>[e("div",Ts,[e("div",Ps,[(s(!0),_(Q,null,le(l(y),r=>{var o;return s(),_("div",{key:r.fullTag,class:ne(["expanded-tag-item",w.getSizeClass(r.size)])},[e("span",Bs,f(r.name),1),r.name==="latest"&&w.getLatestTagInfo(y)?(s(),_("span",Es," ("+f((o=w.getLatestTagInfo(y))==null?void 0:o.actualTag)+") ",1)):B("",!0),e("span",xs,f(r.size),1),e("span",Ds,f(r.contextWindow||"-"),1),A(r.fullTag)?(s(),I(i,{key:1,size:"small",color:"success"},{default:d(()=>[c(k(ue)),b[1]||(b[1]=O(" Installed "))]),_:1,__:[1]})):(s(),I(z,{key:2,type:"primary",size:"small",loading:w.pullingModels.has(r.fullTag),onClick:u=>w.$emit("pull-model",y.name,r.name)},{default:d(()=>[w.pullProgress[r.fullTag]?(s(),_(Q,{key:0},[O(f(Math.round(w.pullProgress[r.fullTag].percent))+"% ",1)],64)):(s(),_(Q,{key:1},[O(" Pull ")],64))]),_:2},1032,["loading","onClick"]))],2)}),128))])])]),bodyCell:d(({column:y,record:r})=>[y.key==="name"?(s(),_("div",As,[e("code",null,f(r.name),1),M(r.name)?(s(),I(i,{key:0,size:"small",color:"success"},{default:d(()=>[c(k(ue)),O(" "+f(L(r.name).length)+" installed ",1)]),_:2},1024)):B("",!0)])):B("",!0),y.key==="description"?(s(),_("span",Ls,f(r.description||"No description"),1)):B("",!0),y.key==="stats"?(s(),_("div",Gs,[e("span",Us,f(r.pullCount||"0")+" pulls",1),b[3]||(b[3]=e("span",{class:"stat-divider"},"â€¢",-1)),e("span",Rs,[O(f(p(r))+" ",1),w.maxSizeGB<999||!w.showQuantized?(s(),_("span",Fs,"/"+f(r.tagCount||0),1)):B("",!0),b[2]||(b[2]=O(" versions "))])])):B("",!0),y.key==="sizeRange"?(s(),_("span",Is,f(w.getModelSizeRange(r)),1)):B("",!0),y.key==="actions"?(s(),I(F,{key:4,size:"small"},{default:d(()=>[c(z,{type:"text",size:"small",onClick:o=>w.$emit("toggle-model",r.name)},{icon:d(()=>[w.expandedModels.includes(r.name)?(s(),I(k(He),{key:1})):(s(),I(k(Oe),{key:0}))]),default:d(()=>[O(" "+f(w.expandedModels.includes(r.name)?"Hide":"See")+" Versions ",1)]),_:2},1032,["onClick"]),c(z,{type:A(`${r.name}:latest`)||A(r.name)?"default":"primary",size:"small",onClick:o=>w.$emit("pull-model",r.name,"latest"),loading:w.pullingModels.has(`${r.name}:latest`),disabled:A(`${r.name}:latest`)||A(r.name)},{default:d(()=>[w.pullProgress[`${r.name}:latest`]?(s(),_(Q,{key:0},[O(f(Math.round(w.pullProgress[`${r.name}:latest`].percent))+"% ",1)],64)):A(`${r.name}:latest`)||A(r.name)?(s(),I(k(ue),{key:1})):(s(),_(Q,{key:2},[O(" Pull Latest ")],64))]),_:2},1032,["type","onClick","loading","disabled"])]),_:2},1024)):B("",!0)]),_:1},8,["data-source","row-key","expanded-row-keys"])])}}}),js=ce(Vs,[["__scopeId","data-v-7d1c26f3"]]);async function be(h,t={}){var w,b;const l=`http://localhost:11434${h}`,p=window.location.protocol==="https:",M=t.timeout||3e4,A=new AbortController,L=setTimeout(()=>A.abort(),M);try{const i=await fetch(l,{...t,signal:A.signal,headers:{"Content-Type":"application/json",...t.headers}});return clearTimeout(L),i}catch(i){clearTimeout(L);const z=new Error;throw z.isHttps=p,i.name==="AbortError"?(z.type="timeout",z.message="Request to Ollama timed out",z.details=`The request took longer than ${M/1e3} seconds`):(w=i.message)!=null&&w.includes("Failed to fetch")||(b=i.message)!=null&&b.includes("NetworkError")?p?(z.type="cors",z.message="Cannot connect to Ollama from HTTPS site",z.details="Browser security prevents HTTPS sites from accessing local HTTP services. To use Ollama: 1) Download the desktop app, 2) Run Auditomatic locally, or 3) Configure Ollama with OLLAMA_ORIGINS=*"):(z.type="network",z.message="Cannot connect to Ollama",z.details="Make sure Ollama is running on your computer (http://localhost:11434)"):(z.type="unknown",z.message=i.message||"Unknown error connecting to Ollama",z.details=i.stack),R.warn("Ollama fetch error",{type:z.type,endpoint:h,isHttps:p,originalError:i.message}),z}}async function Ns(){R.warn("[OLLAMA DEBUG] checkOllamaConnection called");try{const h=await be("/api/tags",{timeout:5e3});R.warn("[OLLAMA DEBUG] ollamaFetch response:",{ok:h.ok,status:h.status,statusText:h.statusText,url:h.url});const t=h.ok;return R.warn("[OLLAMA DEBUG] checkOllamaConnection returning available:",t),{available:t}}catch(h){return R.warn("[OLLAMA DEBUG] checkOllamaConnection error:",h),R.warn("[OLLAMA DEBUG] Error details:",{message:h.message,name:h.name,type:h.type}),{available:!1,error:h}}}async function Hs(){var h,t,a;R.warn("[CORS DEBUG] Starting detectOllamaCORSIssue..."),R.warn("[CORS DEBUG] Current origin:",window.location.origin);try{const l="http://localhost:11434/api/tags";R.warn("[CORS DEBUG] Attempting fetch to:",l);const p=await fetch(l,{method:"GET",headers:{Accept:"application/json"}});return R.warn("[CORS DEBUG] Fetch successful, response ok:",p.ok),{hasCORSIssue:!1,canConnect:!0}}catch(l){return R.warn("[CORS DEBUG] Fetch failed with error:",l.message),R.warn("[CORS DEBUG] Error type:",l.name),(h=l.message)!=null&&h.includes("Failed to fetch")||(t=l.message)!=null&&t.includes("NetworkError")||(a=l.message)!=null&&a.includes("CORS")||l.name==="TypeError"?(R.warn("[CORS DEBUG] NetworkError detected - this means server responded but CORS blocked it"),{hasCORSIssue:!0,canConnect:!0,error:`Ollama is running but CORS is not configured to allow requests from ${window.location.origin}. Add OLLAMA_ORIGINS=* to your Ollama service configuration.`}):(R.warn("[CORS DEBUG] Unknown error type"),{hasCORSIssue:!1,canConnect:!1,error:l.message||"Unknown connection error"})}}async function Qs(){const h=await be("/api/tags");if(!h.ok)throw new Error(`Failed to fetch models: ${h.status} ${h.statusText}`);return h.json()}async function qs(h){const t=await be("/api/delete",{method:"DELETE",body:JSON.stringify({name:h})});if(!t.ok)throw new Error(`Failed to delete model: ${t.status} ${t.statusText}`)}function Ks(){const h=P(null),t=P(!1),a=P(""),l=P(new Set),p=P({}),M=P([]);async function A(){t.value=!0,a.value="";try{const m=await fetch("https://ollama.models.auditomatic.org/models.json");if(!m.ok)throw new Error(`Failed to fetch models: ${m.statusText}`);h.value=await m.json(),await L()}catch(m){a.value=`Failed to load model library: ${m instanceof Error?m.message:"Unknown error"}`}finally{t.value=!1}}async function L(){try{const m=await be("/api/tags");if(m.ok){const $=await m.json();M.value=($.models||[]).map(E=>E.name)}}catch(m){const $=m;$.type==="cors"&&$.isHttps&&R.debug("Cannot access Ollama from HTTPS site"),M.value=[]}}async function w(m,$,E){var C;const x=$==="latest"?m:`${m}:${$}`;if(!l.value.has(x)){l.value.add(x),p.value[x]={percent:0,status:"active",message:"Starting download..."};try{const S=await be("/api/pull",{method:"POST",body:JSON.stringify({name:x,stream:!0})});if(!S.ok)throw new Error(`Failed to pull model: ${S.statusText}`);const N=(C=S.body)==null?void 0:C.getReader();if(!N)throw new Error("Unable to read response stream");let J=0,j=0;for(;;){const{done:X,value:pe}=await N.read();if(X)break;const ye=new TextDecoder().decode(pe).split(`
`).filter(oe=>oe.trim());for(const oe of ye)try{const G=JSON.parse(oe);G.total&&(J=G.total),G.completed&&(j=G.completed);const D=J>0?Math.round(j/J*100):0;if(p.value[x]={status:G.status==="success"?"success":"active",percent:D,message:G.status||"Downloading..."},G.status==="success"){ze.success(`Successfully pulled ${x}`),await L(),E==null||E(),setTimeout(()=>{delete p.value[x]},3e3);return}}catch{}}}catch(S){const N=S;let J=S instanceof Error?S.message:"Unknown error";N.type==="cors"&&N.isHttps&&(J="Cannot access Ollama from HTTPS site. Please use the desktop app or run locally."),ze.error(`Failed to pull ${x}: ${J}`),p.value[x]={status:"exception",percent:0,message:"Download failed"},setTimeout(()=>{delete p.value[x]},5e3)}finally{l.value.delete(x)}}}function b(m){const $=parseFloat(m.replace(/[^\d.]/g,""))||0,E=m.replace(/[\d.]/g,"").trim().toUpperCase();return E.includes("MB")?$/1e3:E.includes("TB")?$*1e3:(E.includes("GB"),$)}function i(m){return/-q\d{1,2}_|-fp\d+/.test(m)}function z(m){return M.value.some($=>$.startsWith(m))}function F(m){return M.value.includes(m)}function v(m){return M.value.filter($=>$.startsWith(m+":"))}function y(m){return m<1?`${Math.round(m*1e3)}MB`:`${m.toFixed(1)}GB`}function r(m){const $=b(m);return $<5?"size-small":$<20?"size-medium":"size-large"}function o(m){if(!m.tags)return"N/A";const $=Object.values(m.tags).map(C=>b(C.size||"0GB")).filter(C=>C>0);if($.length===0)return"N/A";const E=Math.min(...$),x=Math.max(...$);return E===x?y(E):`${y(E)} - ${y(x)}`}function u(m){if(!m.tags||!m.tags.latest)return null;const $=m.tags.latest,E=Object.entries(m.tags).find(([x,C])=>x!=="latest"&&C.modelHash===$.modelHash);return E?{actualTag:E[0],size:E[1].size||$.size}:{actualTag:"",size:$.size}}return{modelsData:h,loading:t,error:a,pullingModels:l,pullProgress:p,installedModels:M,fetchModels:A,fetchInstalledModels:L,pullModel:w,parseSizeToGB:b,isQuantizedTag:i,isModelInstalled:z,isTagInstalled:F,getInstalledTagsForModel:v,formatSizeGB:y,getSizeClass:r,getModelSizeRange:o,getLatestTagInfo:u}}const Ws={class:"modal-content"},Js={class:"stats-bar"},Xs={class:"view-controls"},Ys={key:0,class:"loading-text"},Zs={class:"models-container"},ea=de({__name:"OllamaModelLibraryModalV3",props:{modelValue:{type:Boolean}},emits:["update:modelValue","models-updated"],setup(h,{emit:t}){const a=h,l=t,{modelsData:p,loading:M,error:A,pullingModels:L,pullProgress:w,installedModels:b,fetchModels:i,pullModel:z,parseSizeToGB:F,isQuantizedTag:v,getSizeClass:y,getModelSizeRange:r,getLatestTagInfo:o}=Ks(),u=P(""),m=P("popularity"),$=P([]),E=P(8),x=P(!1),C=P("card"),S=P(new Set),N=V({get:()=>a.modelValue,set:G=>l("update:modelValue",G)}),J=V(()=>{var G;return((G=p.value)==null?void 0:G.totalModels)||0}),j=V(()=>{var G;return((G=p.value)==null?void 0:G.categories)||[]}),X=V(()=>{if(!p.value)return[];let G=Object.entries(p.value.models).map(([D,K])=>({...K,name:D}));if(u.value){const D=u.value.toLowerCase();G=G.filter(K=>K.name.toLowerCase().includes(D)||K.description.toLowerCase().includes(D))}switch($.value.length>0&&(G=G.filter(D=>$.value.some(K=>(D.categories||[]).includes(K)))),E.value<999&&(G=G.filter(D=>D.tags?Object.values(D.tags).some(K=>F(K.size||"0GB")<=E.value):!0)),m.value){case"popularity":G.sort((D,K)=>{const re=D.pullCount||"0",ie=K.pullCount||"0",se=parseFloat(re.replace(/[^\d.]/g,""))||0,ve=parseFloat(ie.replace(/[^\d.]/g,""))||0,W=re.includes("M")?1e6:re.includes("K")?1e3:1,he=ie.includes("M")?1e6:ie.includes("K")?1e3:1;return ve*he-se*W});break;case"lastUpdated":G.sort((D,K)=>{const re=D.lastUpdated?new Date(D.lastUpdated).getTime():0;return(K.lastUpdated?new Date(K.lastUpdated).getTime():0)-re});break;case"name":G.sort((D,K)=>D.name.localeCompare(K.name));break;case"tagCount":G.sort((D,K)=>(K.tagCount||0)-(D.tagCount||0));break}return G});function pe(G){const D=$.value.indexOf(G);D===-1?$.value.push(G):$.value.splice(D,1)}function me(G){S.value.has(G)?S.value.delete(G):S.value.add(G)}function ye(G,D){G?S.value.add(D.name):S.value.delete(D.name)}async function oe(G,D){await z(G,D,()=>l("models-updated"))}return Mt(N,G=>{G&&!p.value&&i(),G||(S.value.clear(),u.value="",$.value=[],E.value=8,x.value=!1,A.value="")}),(G,D)=>{const K=T("a-button"),re=T("a-button-group"),ie=T("a-spin"),se=T("a-alert"),ve=T("a-modal");return s(),I(ve,{open:N.value,"onUpdate:open":D[7]||(D[7]=W=>N.value=W),title:"Ollama Model Library",width:"95vw",footer:null,destroyOnClose:!0,"wrap-class-name":"ollama-library-modal-full",class:"ollama-library-modal"},{default:d(()=>[e("div",Ws,[c(ss,{"search-query":u.value,"onUpdate:searchQuery":D[0]||(D[0]=W=>u.value=W),"sort-by":m.value,"onUpdate:sortBy":D[1]||(D[1]=W=>m.value=W),"max-size-g-b":E.value,"onUpdate:maxSizeGB":D[2]||(D[2]=W=>E.value=W),"show-quantized":x.value,"onUpdate:showQuantized":D[3]||(D[3]=W=>x.value=W),"selected-categories":$.value,categories:j.value,onToggleCategory:pe},null,8,["search-query","sort-by","max-size-g-b","show-quantized","selected-categories","categories"]),e("div",Js,[e("span",null,"Showing "+f(X.value.length)+" of "+f(J.value)+" models",1),e("div",Xs,[c(re,{size:"small"},{default:d(()=>[c(K,{type:C.value==="card"?"primary":"default",onClick:D[4]||(D[4]=W=>C.value="card"),icon:Ue(k(Te)),title:"Card View"},null,8,["type","icon"]),c(K,{type:C.value==="list"?"primary":"default",onClick:D[5]||(D[5]=W=>C.value="list"),icon:Ue(k(Ze)),title:"List View"},null,8,["type","icon"])]),_:1}),k(M)?(s(),_("span",Ys,"Loading...")):B("",!0)])]),c(us,{"pull-progress":k(w)},null,8,["pull-progress"]),e("div",Zs,[c(ie,{spinning:k(M),size:"large"},{default:d(()=>[C.value==="card"?(s(!0),_(Q,{key:0},le(X.value,W=>(s(),I(Os,{key:W.name,model:W,expanded:S.value.has(W.name),"pulling-models":k(L),"pull-progress":k(w),"installed-models":k(b),"max-size-g-b":E.value,"show-quantized":x.value,"is-quantized-tag":k(v),"parse-size-to-g-b":k(F),"get-size-class":k(y),"get-latest-tag-info":k(o),onToggleExpand:he=>me(W.name),onPullModel:oe},null,8,["model","expanded","pulling-models","pull-progress","installed-models","max-size-g-b","show-quantized","is-quantized-tag","parse-size-to-g-b","get-size-class","get-latest-tag-info","onToggleExpand"]))),128)):B("",!0),C.value==="list"?(s(),I(js,{key:1,models:X.value,"expanded-models":Array.from(S.value),"pulling-models":k(L),"pull-progress":k(w),"installed-models":k(b),"max-size-g-b":E.value,"show-quantized":x.value,"is-quantized-tag":k(v),"parse-size-to-g-b":k(F),"get-size-class":k(y),"get-latest-tag-info":k(o),"get-model-size-range":k(r),onToggleModel:me,onPullModel:oe,onExpand:ye},null,8,["models","expanded-models","pulling-models","pull-progress","installed-models","max-size-g-b","show-quantized","is-quantized-tag","parse-size-to-g-b","get-size-class","get-latest-tag-info","get-model-size-range"])):B("",!0)]),_:1},8,["spinning"])]),k(A)?(s(),I(se,{key:0,type:"error",message:k(A),closable:"",onClose:D[6]||(D[6]=W=>A.value=""),class:"error-alert"},null,8,["message"])):B("",!0)])]),_:1},8,["open"])}}}),ta=ce(ea,[["__scopeId","data-v-96287dbe"]]),sa={class:"ollama-model-manager"},aa={class:"action-bar"},la={class:"models-section"},oa={key:0,class:"model-name"},na={key:1,class:"model-size"},ra={key:2,class:"model-date"},ia=de({__name:"OllamaModelManagerV3",setup(h){const t=P([]),a=P(!1),l=P(new Set),p=P(""),M=P(!1),A=[{title:"Model Name",key:"name",width:"40%"},{title:"Size",key:"size",width:"20%",align:"right"},{title:"Modified",key:"modified",width:"25%"},{title:"Actions",key:"actions",width:"15%",align:"center"}];async function L(){const v=await Ns();return!v.available&&v.error&&(v.error.type==="cors"&&v.error.isHttps?p.value=v.error.details||"Cannot connect to Ollama from HTTPS site":p.value=v.error.message),v.available}async function w(){try{const v=await Qs();t.value=v.models||[]}catch(v){const y=v;y.type==="cors"&&y.isHttps?p.value=y.details||"Cannot access Ollama from HTTPS site":p.value=`Failed to fetch models: ${v instanceof Error?v.message:"Unknown error"}`,t.value=[]}}async function b(v){l.value.add(v),p.value="";try{await qs(v),ze.success(`Successfully removed ${v}`),await i()}catch(y){const r=y;r.type==="cors"&&r.isHttps?p.value=r.details||"Cannot access Ollama from HTTPS site":p.value=`Failed to remove model: ${y instanceof Error?y.message:"Unknown error"}`}finally{l.value.delete(v)}}async function i(){a.value=!0,await w(),a.value=!1}function z(v){if(!v)return"0 B";const y=["B","KB","MB","GB","TB"],r=Math.floor(Math.log(v)/Math.log(1024));return`${(v/Math.pow(1024,r)).toFixed(1)} ${y[r]}`}function F(v){try{return new Date(v).toLocaleDateString()}catch{return"Unknown"}}return Se(async()=>{await L()?await i():p.value="Cannot connect to Ollama. Make sure Ollama is running on localhost:11434"}),(v,y)=>{const r=T("a-button"),o=T("a-tag"),u=T("a-popconfirm"),m=T("a-table"),$=T("a-empty"),E=T("a-alert");return s(),_("div",sa,[e("div",aa,[c(r,{type:"primary",onClick:y[0]||(y[0]=x=>M.value=!0)},{icon:d(()=>[c(k(Qe))]),default:d(()=>[y[3]||(y[3]=O(" Download Ollama Models "))]),_:1,__:[3]}),c(r,{onClick:i,loading:a.value},{icon:d(()=>[c(k(qe))]),default:d(()=>[y[4]||(y[4]=O(" Refresh "))]),_:1,__:[4]},8,["loading"])]),e("div",la,[y[7]||(y[7]=e("h4",{class:"section-title"},"Installed Models",-1)),c(m,{columns:A,"data-source":t.value,pagination:!1,size:"small",loading:a.value,"row-key":"name",class:"models-table"},{bodyCell:d(({column:x,record:C})=>{var S;return[x.key==="name"?(s(),_("div",oa,[e("code",null,f(C.name),1),(S=C.details)!=null&&S.family?(s(),I(o,{key:0,size:"small",color:"blue"},{default:d(()=>[O(f(C.details.family),1)]),_:2},1024)):B("",!0)])):B("",!0),x.key==="size"?(s(),_("span",na,f(z(C.size)),1)):B("",!0),x.key==="modified"?(s(),_("span",ra,f(F(C.modified_at)),1)):B("",!0),x.key==="actions"?(s(),I(u,{key:3,title:"Are you sure you want to delete this model?",description:`This will permanently remove ${C.name} from your system.`,"ok-text":"Delete","cancel-text":"Cancel",onConfirm:N=>b(C.name)},{default:d(()=>[c(r,{type:"text",danger:"",size:"small",loading:l.value.has(C.name)},{icon:d(()=>[c(k(Ke))]),default:d(()=>[y[5]||(y[5]=O(" Remove "))]),_:2,__:[5]},1032,["loading"])]),_:2},1032,["description","onConfirm"])):B("",!0)]}),_:1},8,["data-source","loading"]),!a.value&&t.value.length===0?(s(),I($,{key:0,description:"No Ollama models installed",class:"empty-state"},{image:d(()=>y[6]||(y[6]=[e("div",{class:"empty-icon"},"ðŸ“¦",-1)])),_:1})):B("",!0)]),p.value?(s(),I(E,{key:0,type:"error",message:p.value,closable:"",onClose:y[1]||(y[1]=x=>p.value=""),class:"error-alert"},null,8,["message"])):B("",!0),c(ta,{modelValue:M.value,"onUpdate:modelValue":y[2]||(y[2]=x=>M.value=x),onModelsUpdated:i},null,8,["modelValue"])])}}}),ua=ce(ia,[["__scopeId","data-v-9a88ecb1"]]),da={class:"model-list"},ca={class:"model-header"},pa={class:"model-table"},ma=["onClick"],va={class:"model-name"},fa={class:"model-source"},ga={class:"model-context"},ya={key:0},_a={key:1,class:"text-secondary"},ba={key:0,class:"model-cost-in"},ha={key:0,class:"cost-value"},wa={key:1,class:"text-secondary"},ka={key:1,class:"model-cost-out"},Ca={key:0,class:"cost-value"},$a={key:1,class:"text-secondary"},Ma={class:"model-enviro-carbon"},za={class:"enviro-value"},Oa={class:"model-enviro-water"},Sa={class:"enviro-value"},Ta={class:"model-enviro-energy"},Pa={class:"enviro-value"},Ba=de({__name:"ModelListV3",props:{models:{},providerId:{}},emits:["toggle-model"],setup(h){const t=h,a=We(),l=P("name"),p=P("asc"),M=V(()=>!t.models||t.models.length===0?[]:[...t.models].sort((z,F)=>{var y,r,o,u,m,$;let v=0;switch(l.value){case"enabled":v=(z.enabled?1:0)-(F.enabled?1:0);break;case"name":v=z.displayName.localeCompare(F.displayName);break;case"source":v=(z.source||"").localeCompare(F.source||"");break;case"context":const E=((y=z.capabilities)==null?void 0:y.contextWindow)||0,x=((r=F.capabilities)==null?void 0:r.contextWindow)||0;v=E-x;break;case"inputCost":const C=((o=z.capabilities)==null?void 0:o.inputCostPerToken)||0,S=((u=F.capabilities)==null?void 0:u.inputCostPerToken)||0;v=C-S;break;case"outputCost":const N=((m=z.capabilities)==null?void 0:m.outputCostPerToken)||0,J=(($=F.capabilities)==null?void 0:$.outputCostPerToken)||0;v=N-J;break}return p.value==="asc"?v:-v}));function A(b){l.value===b?p.value=p.value==="asc"?"desc":"asc":(l.value=b,p.value="asc")}function L(b){return b>=1e6?(b/1e6).toFixed(1)+"M":b>=1e3?(b/1e3).toFixed(0)+"K":b.toString()}function w(b){if(!b||b===0)return"0.00";const i=b*1e6;return i<.01?i.toFixed(4):i<1?i.toFixed(3):i<10?i.toFixed(2):i<100?i.toFixed(1):i.toFixed(0)}return(b,i)=>{const z=T("a-switch"),F=T("a-tag");return s(),_("div",da,[e("div",ca,[e("div",{class:"header-switch sortable",onClick:i[0]||(i[0]=v=>A("enabled"))},[i[7]||(i[7]=e("span",null,"Enabled",-1)),e("span",{class:ne(["sort-indicator",{active:l.value==="enabled"}])},f(l.value==="enabled"&&p.value==="asc"?"â–²":"â–¼"),3)]),e("div",{class:"header-name sortable",onClick:i[1]||(i[1]=v=>A("name"))},[i[8]||(i[8]=e("span",null,"Model",-1)),e("span",{class:ne(["sort-indicator",{active:l.value==="name"}])},f(l.value==="name"&&p.value==="asc"?"â–²":"â–¼"),3)]),e("div",{class:"header-source sortable",onClick:i[2]||(i[2]=v=>A("source"))},[i[9]||(i[9]=e("span",null,"Source",-1)),e("span",{class:ne(["sort-indicator",{active:l.value==="source"}])},f(l.value==="source"&&p.value==="asc"?"â–²":"â–¼"),3)]),e("div",{class:"header-context sortable",onClick:i[3]||(i[3]=v=>A("context"))},[i[10]||(i[10]=e("span",null,"Context",-1)),e("span",{class:ne(["sort-indicator",{active:l.value==="context"}])},f(l.value==="context"&&p.value==="asc"?"â–²":"â–¼"),3)]),k(a).showFinancialCosts.value?(s(),_("div",{key:0,class:"header-cost-in sortable",onClick:i[4]||(i[4]=v=>A("inputCost"))},[i[11]||(i[11]=e("span",null,"Input $/1M",-1)),e("span",{class:ne(["sort-indicator",{active:l.value==="inputCost"}])},f(l.value==="inputCost"&&p.value==="asc"?"â–²":"â–¼"),3)])):B("",!0),k(a).showFinancialCosts.value?(s(),_("div",{key:1,class:"header-cost-out sortable",onClick:i[5]||(i[5]=v=>A("outputCost"))},[i[12]||(i[12]=e("span",null,"Output $/1M",-1)),e("span",{class:ne(["sort-indicator",{active:l.value==="outputCost"}])},f(l.value==="outputCost"&&p.value==="asc"?"â–²":"â–¼"),3)])):B("",!0),i[13]||(i[13]=e("div",{class:"header-enviro-carbon"},[e("span",null,"COâ‚‚")],-1)),i[14]||(i[14]=e("div",{class:"header-enviro-water"},[e("span",null,"ðŸ’§")],-1)),i[15]||(i[15]=e("div",{class:"header-enviro-energy"},[e("span",null,"âš¡")],-1))]),e("div",pa,[(s(!0),_(Q,null,le(M.value,v=>{var y,r,o;return s(),_("div",{key:v.id,class:"model-row",onClick:u=>b.$emit("toggle-model",v.id,!v.enabled)},[e("div",{class:"model-switch",onClick:i[6]||(i[6]=ge(()=>{},["stop"]))},[c(z,{checked:v.enabled,size:"small",onChange:u=>b.$emit("toggle-model",v.id,u),"data-testid":"model-toggle","data-provider":v.provider,"data-model":v.modelId,"aria-label":`${v.enabled?"Disable":"Enable"} model ${v.modelId}`},null,8,["checked","onChange","data-provider","data-model","aria-label"])]),e("div",va,[e("code",null,f(v.modelId),1)]),e("div",fa,[v.source?(s(),I(F,{key:0,size:"small",color:"cyan"},{default:d(()=>[O(f(v.source),1)]),_:2},1024)):B("",!0)]),e("div",ga,[(y=v.capabilities)!=null&&y.contextWindow?(s(),_("span",ya,f(L(v.capabilities.contextWindow)),1)):(s(),_("span",_a,"-"))]),k(a).showFinancialCosts.value?(s(),_("div",ba,[(r=v.capabilities)!=null&&r.inputCostPerToken?(s(),_("span",ha," $"+f(w(v.capabilities.inputCostPerToken)),1)):(s(),_("span",wa,"-"))])):B("",!0),k(a).showFinancialCosts.value?(s(),_("div",ka,[(o=v.capabilities)!=null&&o.outputCostPerToken?(s(),_("span",Ca," $"+f(w(v.capabilities.outputCostPerToken)),1)):(s(),_("span",$a,"-"))])):B("",!0),e("div",Ma,[e("span",za,f(k(a).getEnvironmentalCost(v,"carbon")),1)]),e("div",Oa,[e("span",Sa,f(k(a).getEnvironmentalCost(v,"water")),1)]),e("div",Ta,[e("span",Pa,f(k(a).getEnvironmentalCost(v,"energy")),1)])],8,ma)}),128))])])}}}),Ea=ce(Ba,[["__scopeId","data-v-f51d3c44"]]),xa={class:"model-preference-manager"},Da={class:"preferences-section"},Aa={class:"action-group"},La={class:"action-group"},Ga={class:"status-grid"},Ua={class:"status-item"},Ra={class:"status-value"},Fa={class:"status-item"},Ia={class:"status-value"},Va={class:"status-item"},ja={class:"status-value"},Na={class:"status-item"},Ha={class:"status-value"},Qa={class:"status-item"},qa={class:"status-value"},Ka={class:"status-item"},Wa={class:"status-value"},Ja={class:"action-group"},Xa={class:"provider-grid"},Ya={class:"provider-name"},Za={class:"provider-stats"},el={class:"provider-total"},tl={class:"provider-enabled"},sl=de({__name:"ModelPreferenceManagerV3",setup(h){const{models:t,enabledModels:a,modelsByProvider:l,showFinancialCosts:p,showEnvironmentalCosts:M}=Xe(),{discoveryStatus:A}=et(),L=We(),w=P([]),b=P(!1),i=P(!1),z=P(""),F=P("");async function v(){b.value=!0,z.value="";try{const r=await L.exportModelPreferences();if(r.ok){const o=new Blob([JSON.stringify(r.value,null,2)],{type:"application/json"}),u=URL.createObjectURL(o),m=document.createElement("a");m.href=u,m.download=`model-preferences-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(m),m.click(),document.body.removeChild(m),URL.revokeObjectURL(u),F.value="Model preferences exported successfully!"}else z.value=r.error.message}catch(r){z.value=`Failed to export preferences: ${r instanceof Error?r.message:"Unknown error"}`}finally{b.value=!1}}async function y(r){i.value=!0,z.value="";try{const o=await r.text(),u=JSON.parse(o),m=await L.importModelPreferences(u);m.ok?F.value="Model preferences imported successfully!":z.value=m.error.message}catch(o){o instanceof SyntaxError?z.value="Invalid JSON file format":z.value=`Failed to import preferences: ${o instanceof Error?o.message:"Unknown error"}`}finally{i.value=!1}return!1}return(r,o)=>{const u=T("a-button"),m=T("a-upload"),$=T("a-space"),E=T("a-divider"),x=T("a-alert"),C=T("a-collapse-panel"),S=T("a-collapse");return s(),_("div",xa,[c(S,{activeKey:w.value,"onUpdate:activeKey":o[2]||(o[2]=N=>w.value=N),bordered:!1,class:"preferences-collapse"},{default:d(()=>[c(C,{key:"preferences"},{header:d(()=>o[3]||(o[3]=[e("div",{class:"preferences-header"},[e("strong",null,"ðŸ”§ V3 Enhanced Features"),e("span",{class:"preferences-description"},"Advanced model preference management")],-1)])),default:d(()=>{var N,J,j;return[e("div",Da,[e("div",Aa,[o[6]||(o[6]=e("h5",{class:"action-title"},"Model Preferences",-1)),o[7]||(o[7]=e("p",{class:"action-description"}," Export and import your model enabled/disabled preferences for backup or sharing. ",-1)),c($,null,{default:d(()=>[c(u,{onClick:v,loading:b.value,type:"primary"},{icon:d(()=>[c(k(Qe))]),default:d(()=>[o[4]||(o[4]=O(" Export Preferences "))]),_:1,__:[4]},8,["loading"]),c(m,{"before-upload":y,"show-upload-list":!1,accept:".json"},{default:d(()=>[c(u,{loading:i.value},{icon:d(()=>[c(k(Pe))]),default:d(()=>[o[5]||(o[5]=O(" Import Preferences "))]),_:1,__:[5]},8,["loading"])]),_:1})]),_:1})]),c(E),e("div",La,[o[14]||(o[14]=e("h5",{class:"action-title"},"V3 System Information",-1)),o[15]||(o[15]=e("p",{class:"action-description"}," Enhanced V3 backend capabilities and status. ",-1)),e("div",Ga,[e("div",Ua,[o[8]||(o[8]=e("span",{class:"status-label"},"Total Models:",-1)),e("span",Ra,f(((N=k(t))==null?void 0:N.length)||0),1)]),e("div",Fa,[o[9]||(o[9]=e("span",{class:"status-label"},"Enabled Models:",-1)),e("span",Ia,f(((J=k(a))==null?void 0:J.length)||0),1)]),e("div",Va,[o[10]||(o[10]=e("span",{class:"status-label"},"Active Providers:",-1)),e("span",ja,f(Object.keys(k(l)||{}).length),1)]),e("div",Na,[o[11]||(o[11]=e("span",{class:"status-label"},"Discovery Sources:",-1)),e("span",Ha,f(((j=k(A))==null?void 0:j.length)||0),1)]),e("div",Qa,[o[12]||(o[12]=e("span",{class:"status-label"},"Cost Display:",-1)),e("span",qa,f(k(p)?"Enabled":"Disabled"),1)]),e("div",Ka,[o[13]||(o[13]=e("span",{class:"status-label"},"Environmental Display:",-1)),e("span",Wa,f(k(M)?"Enabled":"Disabled"),1)])])]),c(E),e("div",Ja,[o[16]||(o[16]=e("h5",{class:"action-title"},"Provider Status",-1)),o[17]||(o[17]=e("p",{class:"action-description"}," Real-time provider status and model counts. ",-1)),e("div",Xa,[(s(!0),_(Q,null,le(k(l),(X,pe)=>(s(),_("div",{key:pe,class:"provider-item"},[e("div",Ya,f(k(L).getProviderDisplayName(pe)),1),e("div",Za,[e("span",el,f(X.length)+" total",1),e("span",tl,f(X.filter(me=>me.enabled).length)+" enabled",1)])]))),128))])])]),z.value?(s(),I(x,{key:0,type:"error",message:z.value,closable:"",onClose:o[0]||(o[0]=X=>z.value=""),class:"error-alert"},null,8,["message"])):B("",!0),F.value?(s(),I(x,{key:1,type:"success",message:F.value,closable:"",onClose:o[1]||(o[1]=X=>F.value=""),class:"success-alert"},null,8,["message"])):B("",!0)]}),_:1})]),_:1},8,["activeKey"])])}}}),al=ce(sl,[["__scopeId","data-v-65aaac20"]]),ll={key:0,class:"loading-state"},ol={key:1,class:"error-state"},nl={class:"error-message"},rl=["onClick"],il={class:"list-header"},ul={class:"list-info"},dl={class:"list-name"},cl={class:"list-meta"},pl={class:"list-actions"},ml={class:"list-description"},vl={class:"list-preview"},fl={key:0,class:"more-models"},gl=de({__name:"ModelListsDropdownV3",props:{currentModels:{},isLoading:{type:Boolean,default:!1}},emits:["apply-list","close"],setup(h,{emit:t}){const a=h,l=t,{getProviderGroup:p}=Ye(),M=P([]),A=P(!0),L=P(""),w=P(!1),b=P("");Se(async()=>{try{A.value=!0,L.value="";const{getModelListManager:r}=await Je(async()=>{const{getModelListManager:m}=await import("./index-Be9cnb4G.js").then($=>$.a$);return{getModelListManager:m}},__vite__mapDeps([0,1])),u=await r().getLists();M.value=u.filter(m=>["openrouter-favorites","cost-efficient","high-performance"].includes(m.id)),R.info("Model lists loaded:",{lists:M.value.length})}catch(r){R.error("Failed to load model lists:",r),L.value="Failed to load model lists"}finally{A.value=!1}});function i(r){return a.currentModels.some(o=>o.modelId!==r.modelId?!1:r.provider?o.provider===r.provider&&o.enabled:r.providerGroup?p(o.provider)===r.providerGroup&&o.enabled:!1)}function z(r){return r.models.slice(0,3)}function F(r){return r.modelId.replace(/^.*\//,"").replace(/-instruct$/,"").replace(/-preview$/,"")}async function v(r){if(!(w.value||a.isLoading))try{w.value=!0,b.value=r,await new Promise((o,u)=>{l("apply-list",r),setTimeout(()=>{o()},2e3)})}catch(o){R.error("Failed to apply list:",o)}finally{w.value=!1,b.value=""}}function y(r){var o;(o=r.domEvent)==null||o.stopPropagation()}return(r,o)=>{const u=T("a-spin"),m=T("a-button"),$=T("a-menu-item"),E=T("a-menu-divider"),x=T("a-tag"),C=T("a-menu");return s(),I(C,{class:"model-lists-menu",onClick:y},{default:d(()=>[A.value?(s(),_("div",ll,[c(u,{size:"small"}),o[0]||(o[0]=e("span",null,"Loading model lists...",-1))])):L.value?(s(),_("div",ol,[e("span",nl,f(L.value),1)])):(s(),_(Q,{key:2},[o[6]||(o[6]=e("div",{class:"menu-header"},[e("span",null,"Built-in Lists")],-1)),(s(!0),_(Q,null,le(M.value,S=>(s(),I($,{key:S.id,class:"list-menu-item"},{default:d(()=>[e("div",{class:"list-item",onClick:N=>v(S.id)},[e("div",il,[e("div",ul,[e("span",dl,f(S.name),1),e("span",cl,f(S.models.length)+" models",1)]),e("div",pl,[c(m,{type:"primary",size:"small",loading:w.value&&b.value===S.id,onClick:ge(N=>v(S.id),["stop"])},{default:d(()=>o[1]||(o[1]=[O(" Apply ")])),_:2,__:[1]},1032,["loading","onClick"])])]),e("div",ml,f(S.description),1),e("div",vl,[(s(!0),_(Q,null,le(z(S),(N,J)=>(s(),_("span",{key:`${N.provider||N.providerGroup}-${N.modelId}`,class:ne(["preview-model",{enabled:i(N)}])},f(F(N))+f(J<z(S).length-1?", ":""),3))),128)),S.models.length>3?(s(),_("span",fl," +"+f(S.models.length-3)+" more ",1)):B("",!0)])],8,rl)]),_:2},1024))),128)),c(E),c($,{disabled:"",class:"future-feature"},{default:d(()=>[c(k(Gt)),o[3]||(o[3]=e("span",null,"Save Current Selection...",-1)),c(x,{color:"blue",size:"small"},{default:d(()=>o[2]||(o[2]=[O("Soon")])),_:1,__:[2]})]),_:1,__:[3]}),c($,{disabled:"",class:"future-feature"},{default:d(()=>[c(k(zt)),o[5]||(o[5]=e("span",null,"Manage Lists...",-1)),c(x,{color:"blue",size:"small"},{default:d(()=>o[4]||(o[4]=[O("Soon")])),_:1,__:[4]})]),_:1,__:[5]})],64))]),_:1})}}}),yl=ce(gl,[["__scopeId","data-v-e613a393"]]),_l={class:"models-view","data-testid":"page-models"},bl={class:"page-header"},hl={class:"ollama-cors-message"},wl={class:"cors-help"},kl={key:3,class:"discovery-status-bar"},Cl={class:"source-name"},$l=["onClick","data-testid","aria-label"],Ml={class:"search-filter-bar"},zl={class:"control-bar"},Ol={class:"left-controls"},Sl={class:"stats"},Tl={class:"provider-header"},Pl={class:"provider-info"},Bl={key:1,class:"provider-summary"},El=de({__name:"ModelsViewV3",setup(h){const t=At(),{models:a,modelsByProvider:l,stats:p}=Xe(),{getProviderGroup:M,requiresApiKey:A}=Ye(),{hasApiKey:L}=Ot(),{discoverModels:w,refreshDiscoverySource:b,toggleModel:i,toggleAllModels:z,toggleProviderModels:F,clearAllModels:v,isDiscovering:y,isTogglingModels:r}=Ht(),{discoveryStatus:o,getSourceDisplayName:u,getProviderDisplayName:m,refreshStatus:$}=et(),E=P(""),x=P(""),C=P("all"),S=P(!1),N=V(()=>{const g={};return Object.keys(l.value||{}).forEach(n=>{const U=M(n),Y=A(n),te=L(U);g[n]={hasKey:te,providerGroup:U,requiresKey:Y}}),g}),J=P(!1),j=P(""),X=P([]),pe=P(null),me=P([]),ye=P(!1),oe=P(null),G=P(!1),D=P(!1);let K=null;const re=g=>{K&&clearTimeout(K),K=setTimeout(()=>{x.value=g},300)},ie=V(()=>{const g={};for(const[n,U]of Object.entries(l.value))g[n]=U.filter(Y=>Y.enabled).length;return g}),se=P([]),ve=V(()=>{const g=x.value.toLowerCase(),n={},U=Object.keys(l.value);if(se.value.length===0||U.some(Y=>!se.value.includes(Y))){const Y=se.value.filter(Z=>U.includes(Z)),te=U.filter(Z=>!se.value.includes(Z)).sort();se.value=[...Y,...te]}for(const Y of se.value){const te=l.value[Y];if(!te)continue;let Z=[...te];g&&(Z=Z.filter(fe=>fe.displayName.toLowerCase().includes(g)||fe.modelId.toLowerCase().includes(g)||Y.toLowerCase().includes(g))),C.value==="enabled"?Z=Z.filter(fe=>fe.enabled):C.value==="disabled"&&(Z=Z.filter(fe=>!fe.enabled)),Z.length>0&&(n[Y]=Z)}return n}),W=V(()=>{const g=p.value.total;return R.info("ModelsViewV3 V4 totalCount:",g),g}),he=V(()=>p.value.enabled),tt=V(()=>E.value?`No models found matching "${E.value}"`:C.value!=="all"?`No ${C.value} models found`:'No models available. Click "Refresh Models" to discover models.'),ke=V(()=>{if(!j.value)return!1;const g=j.value.toLowerCase();return g.includes("ollama")&&(g.includes("failed to fetch")||g.includes("networkerror when attempting to fetch"))&&!g.includes("litellm")&&!g.includes("openrouter")}),st=V(()=>{var U,Y;const g=((U=l.value["ollama-chat"])==null?void 0:U.length)>0||((Y=l.value["ollama-generate"])==null?void 0:Y.length)>0,n=o.value.some(te=>te.id==="ollama");return g||n||ke.value});V(()=>!!l.value.openrouter);const Ce=V(()=>{const g=se.value.length;return X.value.length===g&&g>0}),at=Re(St),lt=Re(Tt);function ot(g){return{idle:"default",loading:"processing",success:"success",error:"error"}[g]||"default"}function nt(g){return ie.value[g]||0}function rt(g){const n=nt(g),U=(l.value[g]||[]).length;return n===0?"default":n===U?"success":"warning"}function it(g){const n=ve.value[g]||[];return n.length>0&&n.every(U=>U.enabled)}function ut(g){const n=ve.value[g]||[];return n.length>0&&n.every(U=>!U.enabled)}function dt(g){t.push({path:"/settings",query:g?{provider:g}:void 0})}function ct(){Ce.value?X.value=[]:X.value=[...se.value]}async function pt(g,n){const U=await i(g,n);U.ok||(j.value=U.error.message)}async function Be(g,n){const U=await F(g,n);U.ok||(j.value=U.error.message)}async function mt(){const g=await z(!0);g.ok||(j.value=g.error.message)}async function vt(){const g=await z(!1);g.ok||(j.value=g.error.message)}async function $e(){S.value=!0,j.value="";try{R.info("V4 DEBUG: Starting discovery...");const g=await w({forceRefresh:!0});R.info("V4 DEBUG: Discovery result:",g),g.ok?(R.info("V4 DEBUG: Discovery successful, models found:",g.value.totalModels),R.info("V4 DEBUG: After discovery, models.value.length =",a.value.length),g.value.errors.length>0&&(j.value=`Some sources failed: ${g.value.errors.join("; ")}`)):(R.info("V4 DEBUG: Discovery failed:",g.error),j.value=`Discovery failed: ${g.error.message}`),$()}catch(g){R.error("Failed to refresh models",g),j.value="Failed to refresh models. Please check your connection and try again."}finally{S.value=!1}}async function ft(g){pe.value=g,j.value="";try{const n=await b(g);n.ok&&n.value.errors.length>0?j.value=`Failed to refresh ${u(g)}: ${n.value.errors.join("; ")}`:n.ok||(j.value=`Failed to refresh ${u(g)}: ${n.error.message}`),$()}catch(n){R.error("Failed to retry source",n,{sourceId:g}),j.value=`Failed to refresh ${u(g)}: ${n instanceof Error?n.message:"Unknown error"}`}finally{pe.value=null}}async function gt(){try{await b("ollama"),$(),Ee()}catch(g){R.error("Failed to refresh Ollama models after update",g)}}async function Ee(){R.warn("[CORS DEBUG] Starting CORS check...");try{const g=await Hs();R.warn("[CORS DEBUG] CORS check result:",g),g.hasCORSIssue&&g.canConnect?(R.warn("[CORS DEBUG] Setting CORS issue alert"),oe.value=g.error||"CORS configuration issue detected"):(R.warn("[CORS DEBUG] No CORS issue detected, clearing alert"),oe.value=null)}catch(g){R.warn("[CORS DEBUG] CORS check failed:",g)}}async function yt(){if(confirm("This will remove all models and re-discover them from scratch. Any custom model configurations will be lost. Continue?")){J.value=!0,j.value="";try{const n=await v();if(!n.ok){j.value=n.error.message;return}const U=await w({forceRefresh:!0});U.ok&&U.value.errors.length>0?j.value=`Some sources failed: ${U.value.errors.join("; ")}`:U.ok||(j.value=`Discovery failed: ${U.error.message}`),$()}catch(n){R.error("Failed to clear and refresh models",n),j.value="Failed to clear and refresh models. Please check your connection and try again."}finally{J.value=!1}}}async function _t(g){try{R.info("Applying model list:",g);const{getModelListManager:n}=await Je(async()=>{const{getModelListManager:te}=await import("./index-Be9cnb4G.js").then(Z=>Z.a$);return{getModelListManager:te}},__vite__mapDeps([0,1])),Y=await n().applyList(g);R.info("Model list applied:",Y),await $e()}catch(n){R.error("Failed to apply model list:",n),j.value=`Failed to apply model list: ${n instanceof Error?n.message:"Unknown error"}`}}Pt(()=>{re(E.value)});const ae=V(()=>r.value);return Se(async()=>{R.info("V4 DEBUG: models.value.length =",a.value.length),R.info("V4 DEBUG: models.value =",a.value),R.info("V4 DEBUG: modelsByProvider.value =",l.value),a.value.length===0&&(R.info("V4 DEBUG: No models found, refreshing..."),$e()),X.value=[],Ee()}),Bt(()=>{E.value="",X.value=[],j.value=""}),(g,n)=>{const U=T("a-button"),Y=T("a-space"),te=T("a-alert"),Z=T("a-tag"),fe=T("a-input-search"),Me=T("a-radio-button"),bt=T("a-radio-group"),ht=T("a-divider"),wt=T("a-dropdown"),kt=T("a-tooltip"),xe=T("a-collapse-panel"),De=T("a-collapse"),Ct=T("a-empty");return s(),_("div",_l,[e("div",bl,[n[12]||(n[12]=e("div",{class:"header-content"},[e("h1",null,"Model Management"),e("p",{class:"description"},"Configure and enable LLM models for testing")],-1)),c(Y,null,{default:d(()=>[c(U,{type:"primary",onClick:$e,loading:S.value||k(y),"data-testid":"btn-refresh-models","aria-label":"Refresh available models"},{icon:d(()=>[c(k(qe))]),default:d(()=>[n[10]||(n[10]=O(" Refresh Models "))]),_:1,__:[10]},8,["loading"]),c(U,{danger:"",onClick:yt,loading:J.value,"data-testid":"btn-clear-refresh-models","aria-label":"Clear all models and refresh"},{icon:d(()=>[c(k(Ke))]),default:d(()=>[n[11]||(n[11]=O(" Clear and Refresh Models "))]),_:1,__:[11]},8,["loading"])]),_:1})]),j.value&&!ke.value?(s(),I(te,{key:0,type:"error",message:j.value,closable:"",onClose:n[0]||(n[0]=H=>j.value=""),class:"error-alert"},null,8,["message"])):B("",!0),ke.value?(s(),I(te,{key:1,type:"info",closable:"",onClose:n[1]||(n[1]=H=>j.value=""),class:"ollama-info-alert"},{message:d(()=>n[13]||(n[13]=[e("div",{class:"ollama-message"},[O(" Ollama is not running on this computer. To audit local LLMs, install "),e("a",{href:"https://ollama.com",target:"_blank",rel:"noopener noreferrer"},"Ollama"),O(". ")],-1)])),_:1})):B("",!0),oe.value?(s(),I(te,{key:2,type:"warning",closable:"",onClose:n[3]||(n[3]=H=>oe.value=null),class:"ollama-cors-alert"},{message:d(()=>[e("div",hl,[n[14]||(n[14]=e("strong",null,"Ollama CORS Configuration Issue",-1)),n[15]||(n[15]=e("br",null,null,-1)),n[16]||(n[16]=O(" Ollama is running but not configured to allow browser requests. Add ")),n[17]||(n[17]=e("code",null,"OLLAMA_ORIGINS=*",-1)),n[18]||(n[18]=O(" to your Ollama service configuration. ")),e("div",wl,[e("a",{href:"#",onClick:n[2]||(n[2]=ge(H=>G.value=!0,["prevent"]))},"Show setup instructions")])])]),_:1})):B("",!0),k(o).length>0?(s(),_("div",kl,[n[19]||(n[19]=e("span",{class:"status-label"},"Sources:",-1)),(s(!0),_(Q,null,le(k(o),H=>(s(),_("div",{key:H.id,class:"source-status-compact"},[e("span",Cl,f(k(u)(H.id)),1),c(Z,{color:ot(H.status),size:"small"},{default:d(()=>[H.status==="success"&&H.modelCount?(s(),_(Q,{key:0},[O(f(H.modelCount),1)],64)):H.status==="error"?(s(),_("span",{key:1,onClick:ee=>ft(H.id),style:{cursor:"pointer"},"data-testid":`retry-source-${H.id}`,"aria-label":`Retry loading models from ${k(u)(H.id)}`},"âŸ³ retry",8,$l)):(s(),_(Q,{key:2},[O(f(H.status),1)],64))]),_:2},1032,["color"])]))),128))])):B("",!0),e("div",Ml,[c(fe,{value:E.value,"onUpdate:value":n[4]||(n[4]=H=>E.value=H),placeholder:"Search models by name, provider, or ID...","allow-clear":"",size:"large",class:"search-input","data-testid":"input-model-search","aria-label":"Search models",loading:E.value!==x.value},null,8,["value","loading"]),c(bt,{value:C.value,"onUpdate:value":n[5]||(n[5]=H=>C.value=H),"button-style":"solid",size:"large"},{default:d(()=>[c(Me,{value:"all"},{default:d(()=>n[20]||(n[20]=[O("All")])),_:1,__:[20]}),c(Me,{value:"enabled"},{default:d(()=>n[21]||(n[21]=[O("Enabled")])),_:1,__:[21]}),c(Me,{value:"disabled"},{default:d(()=>n[22]||(n[22]=[O("Disabled")])),_:1,__:[22]})]),_:1},8,["value"])]),e("div",zl,[e("div",Ol,[c(U,{type:"text",size:"small",onClick:ct},{icon:d(()=>[(s(),I(Et(Ce.value?lt.value:at.value)))]),default:d(()=>[O(" "+f(Ce.value?"Collapse All":"Expand All"),1)]),_:1}),c(ht,{type:"vertical"}),c(U,{type:"text",size:"small",onClick:mt,loading:ae.value,disabled:ae.value},{icon:d(()=>[c(k(ue))]),default:d(()=>[n[23]||(n[23]=O(" Enable All "))]),_:1,__:[23]},8,["loading","disabled"]),c(U,{type:"text",size:"small",onClick:vt,loading:ae.value,disabled:ae.value},{icon:d(()=>[c(k(Fe))]),default:d(()=>[n[24]||(n[24]=O(" Disable All "))]),_:1,__:[24]},8,["loading","disabled"]),c(wt,{open:D.value,"onUpdate:open":n[7]||(n[7]=H=>D.value=H),placement:"bottomLeft",disabled:ae.value},{overlay:d(()=>[c(yl,{"current-models":Array.from(k(a)),"is-loading":ae.value,onApplyList:_t,onClose:n[6]||(n[6]=H=>D.value=!1)},null,8,["current-models","is-loading"])]),default:d(()=>[c(U,{type:"text",size:"small",loading:ae.value,disabled:ae.value},{icon:d(()=>[c(k(Ze))]),default:d(()=>[n[25]||(n[25]=O(" Model Lists ")),c(k(Oe))]),_:1,__:[25]},8,["loading","disabled"])]),_:1},8,["open","disabled"])]),e("div",Sl,[e("span",null,f(he.value)+" of "+f(W.value)+" models enabled",1)])]),c(De,{activeKey:X.value,"onUpdate:activeKey":n[8]||(n[8]=H=>X.value=H),bordered:!1,class:"provider-collapse",destroyInactivePanel:!1},{default:d(()=>[(s(!0),_(Q,null,le(ve.value,(H,ee)=>(s(),I(xe,{key:`provider-${ee}`},{header:d(()=>{var Ae,Le;return[e("div",Tl,[e("div",Pl,[e("strong",null,f(k(m)(ee)),1),(Ae=N.value[ee])!=null&&Ae.requiresKey&&!((Le=N.value[ee])!=null&&Le.hasKey)?(s(),I(kt,{key:0,placement:"top"},{title:d(()=>{var _e;return[O(" API key not set for "+f((_e=N.value[ee])==null?void 0:_e.providerGroup)+". Click to add in settings. ",1)]}),default:d(()=>[c(U,{type:"link",danger:"",size:"small",onClick:ge(_e=>{var Ge;return dt((Ge=N.value[ee])==null?void 0:Ge.providerGroup)},["stop"])},{icon:d(()=>[c(k(Dt))]),default:d(()=>[n[26]||(n[26]=O(" API Key Missing "))]),_:2,__:[26]},1032,["onClick"])]),_:2},1024)):B("",!0),X.value.includes(ee)?(s(),_(Q,{key:2},[c(Z,{size:"small",color:"blue"},{default:d(()=>[O(f(H.length)+" models",1)]),_:2},1024),c(Z,{size:"small",color:rt(ee)},{default:d(()=>[O(f(ie.value[ee]||0)+" enabled ",1)]),_:2},1032,["color"])],64)):(s(),_("span",Bl,f(ie.value[ee]||0)+" / "+f((k(l)[ee]||[]).length)+" enabled ",1))]),c(Y,{size:"small"},{default:d(()=>[c(U,{type:"text",size:"small",onClick:ge(_e=>Be(ee,!0),["stop"]),disabled:it(ee)||ae.value,loading:ae.value},{icon:d(()=>[c(k(ue))]),default:d(()=>[n[27]||(n[27]=O(" Enable All "))]),_:2,__:[27]},1032,["onClick","disabled","loading"]),c(U,{type:"text",size:"small",onClick:ge(_e=>Be(ee,!1),["stop"]),disabled:ut(ee)||ae.value,loading:ae.value},{icon:d(()=>[c(k(Fe))]),default:d(()=>[n[28]||(n[28]=O(" Disable All "))]),_:2,__:[28]},1032,["onClick","disabled","loading"])]),_:2},1024)])]}),default:d(()=>[(s(),I(xt,null,[c(Ea,{models:H,"provider-id":ee,onToggleModel:pt},null,8,["models","provider-id"])],1024))]),_:2},1024))),128))]),_:1},8,["activeKey"]),Object.keys(ve.value).length===0?(s(),I(Ct,{key:4,description:tt.value,class:"empty-state"},null,8,["description"])):B("",!0),st.value?(s(),I(De,{key:5,activeKey:me.value,"onUpdate:activeKey":n[9]||(n[9]=H=>me.value=H),bordered:!1,class:"ollama-manager-collapse"},{default:d(()=>[c(xe,{key:"ollama"},{header:d(()=>n[29]||(n[29]=[e("div",{class:"ollama-header"},[e("strong",null,"Ollama Model Management"),e("span",{class:"ollama-description"},"Download and manage local Ollama models")],-1)])),default:d(()=>[c(ua,{onModelsUpdated:gt})]),_:1})]),_:1},8,["activeKey"])):B("",!0),ye.value?(s(),I(al,{key:6,class:"enhanced-features"})):B("",!0)])}}}),Fl=ce(El,[["__scopeId","data-v-8bb54e66"]]);export{Fl as default};
