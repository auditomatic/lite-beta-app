const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-C6frMIbt.js","./vendor-B8IWC-3k.js","./db-CL8uhZCz.js","./index-2LpVAqLp.css"])))=>i.map(i=>d[i]);
import{I as e,_ as t,b as a,z as l,G as s,W as i,O as o,d as n,e as r,c as d,p as c,u,a as p,l as m,i as v,h as g,m as f,g as y,a3 as h,N as b,a8 as C,E as w}from"./index-C6frMIbt.js";import{_ as k}from"./BaseModal.vue_vue_type_style_index_0_lang-Ba6DaieS.js";import{k as T,d as I,aa as S,Z as _,$ as P,a0 as x,ai as D,f as M,c as N,w as $,o as E,b as O,a3 as z,X as F,F as j,Y as A,_ as V,a2 as L,af as U,ab as H,G as q,u as J,ae as R,n as B,l as Y}from"./vendor-B8IWC-3k.js";import{u as G}from"./useEnvironmentalCost-D5DspU9W.js";import{a as K}from"./cost-formatting-Bv_drrqY.js";import{G as W}from"./GenericModelSelectorModal-E71KLBpB.js";var Z={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494zM514.1 580.1l-61.8-102.4c-2.2-3.6-6.1-5.8-10.3-5.8h-38.4c-2.3 0-4.5.6-6.4 1.9-5.6 3.5-7.3 10.9-3.7 16.6l82.3 130.4-83.4 132.8a12.04 12.04 0 0010.2 18.4h34.5c4.2 0 8-2.2 10.2-5.7L510 664.8l62.3 101.4c2.2 3.6 6.1 5.7 10.2 5.7H620c2.3 0 4.5-.7 6.5-1.9 5.6-3.6 7.2-11 3.6-16.6l-84-130.4 85.3-132.5a12.04 12.04 0 00-10.1-18.5h-35.7c-4.2 0-8.1 2.2-10.3 5.8l-61.2 102.3z"}}]},name:"file-excel",theme:"outlined"};function Q(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?Object(arguments[t]):{},l=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(l=l.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),l.forEach(function(t){X(e,t,a[t])})}return e}function X(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var ee=function(t,a){var l=Q({},t,a.attrs);return T(e,Q({},l,{icon:Z}),null)};ee.displayName="FileExcelOutlined",ee.inheritAttrs=!1;const te={class:"modal-footer"},ae={key:0,class:"footer-left"},le={class:"footer-actions"},se=t(I({__name:"ModalFooter",setup:e=>(e,t)=>(_(),S("div",te,[e.$slots.left?(_(),S("div",ae,[D(e.$slots,"left",{},void 0,!0)])):P("",!0),x("div",le,[D(e.$slots,"default",{},void 0,!0)])]))}),[["__scopeId","data-v-1215184f"]]),ie={key:0,class:"preview-controls"},oe={key:0,class:"cycle-info"},ne=["innerHTML"],re={key:1,class:"variable-legend"},de={class:"variable-value"},ce=t(I({__name:"TemplatePreview",props:{prompt:{},template:{},variables:{},tabularData:{},cycling:{type:Boolean,default:!0},cyclingPaused:{type:Boolean,default:!1},cyclingSpeed:{default:1e3},showControls:{default:"none"},displayMode:{default:"block"},showLegend:{type:Boolean,default:!1},maxHeight:{default:"300px"},previewMode:{type:Boolean,default:!1}},emits:["update:cyclingPaused","update:previewMode"],setup(e,{emit:t}){const i=e,o=t,n=a();const r=M(0);let d=null;const c=["variable-highlight-blue","variable-highlight-green","variable-highlight-purple","variable-highlight-orange","variable-highlight-pink","variable-highlight-teal"],u=N(()=>{if(i.prompt){if("template"===i.prompt.type)return i.prompt.template;if("spreadsheet"===i.prompt.type)return i.prompt.promptPattern}return i.template||""}),p=N(()=>{if(i.tabularData&&i.tabularData.length>0)return i.tabularData.map(e=>{const t={};return Object.keys(e).forEach(a=>{let l=a.replace(/[^a-zA-Z0-9_]/g,"_");/^[a-zA-Z]/.test(l)||(l="col_"+l),l=l.replace(/_+/g,"_"),l=l.replace(/_+$/,""),t[l]=String(e[a]||"")}),t});if(i.prompt&&"spreadsheet"===i.prompt.type){const e=i.prompt,t=n.lists.find(t=>t.id===e.datasetId);if("tabular"===t?.category&&t.tabularData&&t.tabularData.rows)return t.tabularData.rows.map(e=>{const t={};return Object.keys(e).forEach(a=>{t[a]=String(e[a]||"")}),t})}const e=[];if("template"===i.prompt?.type&&i.prompt.variables)for(const[a,l]of Object.entries(i.prompt.variables))if("direct"===l.type&&l.values)e.push({name:a,values:[...l.values]});else if("list"===l.type&&l.listId){const t=n.lists.find(e=>e.id===l.listId);t&&("simple"===t.category&&t.values?e.push({name:a,values:[...t.values]}):"attributed"===t.category&&t.items&&e.push({name:a,values:t.items.map(e=>e.value)}))}if(i.variables)for(const[a,l]of Object.entries(i.variables))l.length>0&&e.push({name:a,values:[...l]});if(0===e.length)return[];const t=e.map(e=>e.values);return t.reduce((e,t)=>e.flatMap(e=>t.map(t=>[...e,t])),[[]]).map(t=>{const a={};return e.forEach((e,l)=>{a[e.name]=t[l]}),a})}),m=N(()=>p.value.length),v=N(()=>0===p.value.length?{}:p.value[r.value%p.value.length]),g=N(()=>{let e=u.value;"inline"===i.displayMode&&(e=e.replace(/\s+/g," ").trim());let t=y(e);if(p.value.length>0&&(i.cycling||i.previewMode)){const e=v.value;Object.keys(e).forEach((a,l)=>{const s=e[a];if(void 0!==s){const e=new RegExp(`\\{\\{\\s*${i=a,i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}\\s*\\}\\}`,"g"),o=`<span class="${f(l)}">${y(s)}</span>`;t=t.replace(e,o)}var i})}return t});function f(e){return c[e%c.length]}function y(e){const t=document.createElement("div");return t.textContent=e,t.innerHTML}function h(){o("update:cyclingPaused",!i.cyclingPaused)}function b(){o("update:previewMode",!i.previewMode)}function C(){!i.cycling||i.cyclingPaused||p.value.length<=1||(w(),d=setInterval(()=>{r.value=(r.value+1)%p.value.length},i.cyclingSpeed))}function w(){d&&(clearInterval(d),d=null)}return $([()=>i.cycling,()=>i.cyclingPaused],()=>{i.cycling&&!i.cyclingPaused?C():w()},{immediate:!0}),$(()=>i.template,()=>{r.value=0}),E(()=>{i.cycling&&!i.cyclingPaused&&C()}),O(()=>{w()}),(e,t)=>{const a=A("a-button");return _(),S("div",{class:z(["template-preview",[`preview-${e.displayMode}`,{"preview-cycling":e.cycling&&!e.cyclingPaused}]])},["none"!==e.showControls?(_(),S("div",ie,["pause-play"===e.showControls?(_(),S(j,{key:0},[T(a,{onClick:h,size:"small",type:e.cyclingPaused?"default":"primary",disabled:!e.cycling||m.value<=1},{default:V(()=>[q(L(e.cyclingPaused?"Start":"Pause")+" Variable Substitution ",1)]),_:1},8,["type","disabled"]),e.cycling&&m.value>1?(_(),S("span",oe,L(r.value+1)+" / "+L(m.value),1)):P("",!0)],64)):"editor-mode"===e.showControls?(_(),F(a,{key:1,type:e.previewMode?"default":"primary",onClick:b},{default:V(()=>[e.previewMode?(_(),F(J(s),{key:1})):(_(),F(J(l),{key:0})),q(" "+L(e.previewMode?"Return to Editor":"Preview Filled-In Prompts"),1)]),_:1},8,["type"])):P("",!0)])):P("",!0),x("div",{class:"preview-content",innerHTML:g.value,style:U({maxHeight:e.maxHeight})},null,12,ne),e.showLegend&&v.value&&Object.keys(v.value).length>0?(_(),S("div",re,[(_(!0),S(j,null,H(v.value,(e,t,a)=>(_(),S("div",{key:t,class:"legend-item"},[x("span",{class:z(f(a))},L(t),3),x("span",de,L(e),1)]))),128))])):P("",!0)],2)}}}),[["__scopeId","data-v-10bae0c1"]]),ue={class:"design-selection-step"},pe={class:"step-body"},me={class:"design-selector","data-testid":"design-selector"},ve={key:0,class:"no-designs-state"},ge={class:"no-designs-content"},fe={key:1,class:"design-list","data-testid":"design-list"},ye=["data-template-id","data-template-name","onClick"],he={class:"design-header"},be={class:"design-title-section"},Ce={class:"design-name"},we={key:0,class:"design-inline-description"},ke={class:"design-date"},Te={class:"design-stats"},Ie={class:"stat-item"},Se={class:"stat-value"},_e={class:"stat-item"},Pe={class:"stat-value"},xe={class:"stat-item"},De={class:"stat-value"},Me={class:"design-selector","data-testid":"spreadsheet-design-selector"},Ne={key:0,class:"no-designs-state"},$e={class:"no-designs-content"},Ee={key:1,class:"design-list","data-testid":"spreadsheet-design-list"},Oe=["data-spreadsheet-id","data-spreadsheet-name","onClick"],ze={class:"design-header"},Fe={class:"design-title-section"},je={class:"design-name"},Ae={key:0,class:"design-inline-description"},Ve={class:"design-date"},Le={class:"design-stats"},Ue={class:"stat-item"},He={class:"stat-value"},qe={class:"stat-item"},Je={class:"stat-value"},Re={class:"stat-item"},Be={class:"stat-value"},Ye=t(I({__name:"DesignSelectionStep",props:{templatePrompts:{},spreadsheetPrompts:{},searchTerm:{},countVariables:{type:Function},formatLastEditDate:{type:Function},getOutputTypeColor:{type:Function},getCombinationCount:{type:Function}},emits:["select","create-new","create-spreadsheet"],setup(e){const t=e,a=M("classic"),l=M(""),{templatePrompts:s,spreadsheetPrompts:n,countVariables:r,formatLastEditDate:d,getOutputTypeColor:c,getCombinationCount:u}=t;return(e,t)=>{const p=A("a-input"),m=A("a-button"),v=A("a-tag"),g=A("a-tab-pane"),f=A("a-tabs");return _(),S("div",ue,[x("div",pe,[T(f,{activeKey:a.value,"onUpdate:activeKey":t[6]||(t[6]=e=>a.value=e),type:"card",class:"design-tabs"},{default:V(()=>[T(g,{key:"classic",tab:"Classic Designs (permutes through all variable combinations)"},{default:V(()=>[x("div",me,[T(p,{value:l.value,"onUpdate:value":t[0]||(t[0]=e=>l.value=e),placeholder:"Search classic designs...",size:"large",class:"design-search","data-testid":"input-design-search",allowClear:""},{prefix:V(()=>[T(J(i))]),_:1},8,["value"]),0===J(s).length?(_(),S("div",ve,[x("div",ge,[t[8]||(t[8]=x("p",null,"No classic designs found",-1)),T(m,{onClick:t[1]||(t[1]=t=>e.$emit("create-new"))},{default:V(()=>t[7]||(t[7]=[q("Create Template")])),_:1,__:[7]})])])):(_(),S("div",fe,[(_(!0),S(j,null,H(J(s),a=>(_(),S("div",{key:a.id,class:"design-item","data-testid":"template-item","data-template-id":a.id,"data-template-name":a.name,onClick:t=>e.$emit("select",a)},[x("div",he,[x("div",be,[x("h4",Ce,[q(L(a.name)+" ",1),a.description?(_(),S("span",we,"- "+L(a.description),1)):P("",!0)])]),x("span",ke,L(J(d)(a.updated)),1)]),T(ce,{prompt:a,cycling:!0,"show-controls":"none","display-mode":"inline","max-height":"none",class:"design-description"},null,8,["prompt"]),x("div",Te,[T(v,{size:"small",color:J(c)(a.outputConfig.outputType),class:"output-type-tag"},{default:V(()=>[q(L(a.outputConfig.outputType||"text"),1)]),_:2},1032,["color"]),x("span",Ie,[x("span",Se,L(J(r)(a)),1),t[9]||(t[9]=x("span",{class:"stat-label"},"vars",-1))]),t[12]||(t[12]=x("span",{class:"stat-divider"},"â€¢",-1)),x("span",_e,[x("span",Pe,L(J(u)(a)),1),t[10]||(t[10]=x("span",{class:"stat-label"},"combos",-1))]),t[13]||(t[13]=x("span",{class:"stat-divider"},"â€¢",-1)),x("span",xe,[x("span",De,L(a.tokenEstimate?.avgTokens||"?"),1),t[11]||(t[11]=x("span",{class:"stat-label"},"tokens",-1))])])],8,ye))),128)),x("div",{class:"design-card design-card-create","data-testid":"btn-create-design",onClick:t[2]||(t[2]=t=>e.$emit("create-new"))},[T(J(o),{style:{"font-size":"24px"}}),t[14]||(t[14]=x("span",null,"Create New Design",-1))])]))])]),_:1}),T(g,{key:"spreadsheet",tab:"Spreadsheet Designs (one API call per row)"},{default:V(()=>[x("div",Me,[T(p,{value:l.value,"onUpdate:value":t[3]||(t[3]=e=>l.value=e),placeholder:"Search spreadsheet designs...",size:"large",class:"design-search","data-testid":"input-spreadsheet-search",allowClear:""},{prefix:V(()=>[T(J(i))]),_:1},8,["value"]),0===J(n).length?(_(),S("div",Ne,[x("div",$e,[t[16]||(t[16]=x("p",null,"No spreadsheet designs found",-1)),T(m,{type:"primary",onClick:t[4]||(t[4]=t=>e.$emit("create-spreadsheet"))},{default:V(()=>[T(J(ee)),t[15]||(t[15]=q(" Create Spreadsheet Design "))]),_:1,__:[15]})])])):(_(),S("div",Ee,[(_(!0),S(j,null,H(J(n),a=>(_(),S("div",{key:a.id,class:"design-item","data-testid":"spreadsheet-design-item","data-spreadsheet-id":a.id,"data-spreadsheet-name":a.name,onClick:t=>e.$emit("select",a)},[x("div",ze,[x("div",Fe,[x("h4",je,[q(L(a.name)+" ",1),a.description?(_(),S("span",Ae,"- "+L(a.description),1)):P("",!0)])]),x("span",Ve,L(J(d)(a.updated)),1)]),T(ce,{prompt:a,cycling:!0,"show-controls":"none","display-mode":"inline","max-height":"none",class:"design-description"},null,8,["prompt"]),x("div",Le,[T(v,{size:"small",color:"orange",class:"output-type-tag"},{default:V(()=>t[17]||(t[17]=[q(" spreadsheet ")])),_:1,__:[17]}),x("span",Ue,[x("span",He,L(J(r)(a)),1),t[18]||(t[18]=x("span",{class:"stat-label"},"vars",-1))]),t[21]||(t[21]=x("span",{class:"stat-divider"},"â€¢",-1)),x("span",qe,[x("span",Je,L(J(u)(a)),1),t[19]||(t[19]=x("span",{class:"stat-label"},"rows",-1))]),t[22]||(t[22]=x("span",{class:"stat-divider"},"â€¢",-1)),x("span",Re,[x("span",Be,L(a.tokenEstimate?.avgTokens||"?"),1),t[20]||(t[20]=x("span",{class:"stat-label"},"tokens",-1))])])],8,Oe))),128)),x("div",{class:"design-card design-card-create","data-testid":"btn-create-spreadsheet-design",onClick:t[5]||(t[5]=t=>e.$emit("create-spreadsheet"))},[T(J(ee),{style:{"font-size":"24px"}}),t[23]||(t[23]=x("span",null,"Create Spreadsheet Design",-1))])]))])]),_:1})]),_:1},8,["activeKey"])])])}}}),[["__scopeId","data-v-a0e2494e"]]),Ge={class:"trial-metadata-form"},Ke={class:"form-section"},We={class:"trial-name-section"},Ze={class:"repeat-section"},Qe={class:"form-stats"},Xe={class:"stat-item"},et={class:"stat-value"},tt={class:"stat-item"},at={class:"stat-value"},lt=t(I({__name:"TrialMetadataForm",props:{modelValue:{},totalCombinations:{}},emits:["update:modelValue"],setup(e,{emit:t}){const a=e,l=t;function s(e){l("update:modelValue",{...a.modelValue,trialName:e})}function i(e){l("update:modelValue",{...a.modelValue,repeatCount:e||1})}return(e,t)=>{const a=A("a-input"),l=A("a-input-number");return _(),S("div",Ge,[x("div",Ke,[x("div",We,[t[0]||(t[0]=x("label",{class:"form-label"},"Trial Name:",-1)),T(a,{value:e.modelValue.trialName,"onUpdate:value":s,placeholder:"Enter trial name",class:"trial-name-input","data-testid":"input-trial-name",size:"large"},null,8,["value"])]),x("div",Ze,[t[1]||(t[1]=x("label",{class:"form-label"},"Repeat Each Prompt:",-1)),T(l,{value:e.modelValue.repeatCount,"onUpdate:value":i,min:1,max:10,size:"large",class:"repeat-count-input"},null,8,["value"]),t[2]||(t[2]=x("span",{class:"repeat-suffix"},"times",-1))])]),x("div",Qe,[x("div",Xe,[t[3]||(t[3]=x("span",{class:"stat-label"},"Total Combinations:",-1)),x("span",et,L(e.totalCombinations),1)]),x("div",tt,[t[4]||(t[4]=x("span",{class:"stat-label"},"API Calls per Model:",-1)),x("span",at,L(e.totalCombinations*e.modelValue.repeatCount),1)])])])}}}),[["__scopeId","data-v-50707609"]]),st={class:"model-configuration-section"},it={class:"quick-add-row"},ot={class:"quick-add-section"},nt={class:"quick-add-buttons"},rt={key:0,class:"quick-cost"},dt={key:0,class:"config-table","data-testid":"model-config-table"},ct=["data-config-index","data-provider","data-model"],ut={class:"col-model"},pt={class:"model-name"},mt={class:"model-provider"},vt={class:"col-params"},gt={class:"params-text"},ft={class:"col-calls"},yt={class:"calls-breakdown"},ht={class:"calls-value"},bt={class:"col-cost"},Ct={class:"cost-breakdown"},wt={key:0,class:"cost-value"},kt={key:1,class:"env-cost"},Tt={class:"col-total"},It={class:"cost-breakdown"},St={key:0,class:"cost-value total-cost"},_t={key:1,class:"env-cost"},Pt={class:"col-actions"},xt={key:0,class:"table-summary-row"},Dt={class:"col-model"},Mt={class:"summary-label"},Nt={class:"col-calls"},$t={class:"summary-calls"},Et={class:"col-total"},Ot={key:0,class:"summary-cost"},zt={key:1,class:"empty-config-state"},Ft=t(I({__name:"ModelConfigurationSection",props:{configurations:{},prompt:{},totalCombinations:{},repeatCount:{}},emits:["show-model-selector","add","remove"],setup(e,{emit:t}){const a=e,l=t,s=n(),i=r(),u=d(),{hasDataForModel:p}=G(),m=N(()=>i.financialCostsEnabled),v=N(()=>i.environmentalCostsEnabled),g=N(()=>a.totalCombinations*a.configurations.length*a.repeatCount),f=N(()=>{let e=0;for(const t of a.configurations)e+=w(t)*a.totalCombinations*a.repeatCount;return e}),y=N(()=>{const e=e=>i.hasApiKey(e),t=(e,t)=>!!s.enabledModels.find(a=>a.provider===e&&a.modelId===t&&a.enabled),a=[],l=new Set,o=[...u.trials].sort((e,t)=>new Date(t.created).getTime()-new Date(e.created).getTime());for(const s of o){if(a.length>=5)break;for(const i of s.configurationSnapshots||[]){if(a.length>=5)break;const s=`${i.provider}:${i.modelId}:${JSON.stringify(i.parameters)}`;if(!l.has(s)&&e(i.provider)&&t(i.provider,i.modelId)){const e=c.getParametersForModel(i.provider,i.modelId);if(!e)continue;if(Object.keys(i.parameters).some(t=>!(t in e)))continue;l.add(s),a.push({provider:i.provider,modelId:i.modelId,displayName:i.modelId,parameters:i.parameters,outputType:"text"})}}}const n=(e,t)=>{const a=c.getParametersForModel(e,t),l={},s=(e,t)=>{Object.entries(e).forEach(([e,a])=>{"object"===a.type&&a.properties?(t[e]={},s(a.properties,t[e])):void 0!==a.default&&(t[e]=a.default)})};s(a,l),l.temperature||!l.options||l.options.temperature||(l.options?l.options.temperature=0:l.temperature=0);const i=(e,t)=>{for(const[a,l]of Object.entries(e))"object"===l.type&&l.properties?(t[a]||(t[a]={}),i(l.properties,t[a])):l.is_output_length&&void 0===t[a]&&(t[a]=128)};return i(a,l),l},r=[{provider:"openai-chat",modelId:"gpt-4.1-nano",displayName:"gpt-4.1-nano",parameters:n("openai-chat","gpt-4.1-nano"),outputType:"text"},{provider:"anthropic",modelId:"claude-3-haiku-20240307",displayName:"claude-3-haiku-20240307",parameters:n("anthropic","claude-3-haiku-20240307"),outputType:"text"}],d=new Set(a.map(e=>`${e.provider}:${e.modelId}:${JSON.stringify(e.parameters)}`));for(const s of r){const l=`${s.provider}:${s.modelId}:${JSON.stringify(s.parameters)}`;!d.has(l)&&e(s.provider)&&t(s.provider,s.modelId)&&a.push(s)}const p=[],m=new Set;for(const s of a){const e=`${s.provider}:${s.modelId}`;m.has(e)||(m.add(e),p.push(s))}return p.slice(0,7)});function h(e,t=""){const a=[];for(const[l,s]of Object.entries(e))if(null!=s){const e=t?`${t}.${l}`:l;if("object"!=typeof s||Array.isArray(s)){const t=Array.isArray(s)?JSON.stringify(s):s;a.push(`${e}=${t}`)}else{const t=h(s,e);t&&"Default settings"!==t&&a.push(...t.split(", "))}}return a.length>0?a.join(", "):t?"":"Default settings"}function b(e){return a.configurations.some(t=>t.provider===e.provider&&t.modelId===e.modelId&&JSON.stringify(t.parameters)===JSON.stringify(e.parameters))}function C(e){const t=s.enabledModels.find(t=>t.provider===e.provider&&t.modelId===e.modelId);if(!t||!a.prompt)return 0;const l=a.prompt.tokenEstimate?.avgTokens||0,i=c.getParametersForModel(e.provider,e.modelId);let o=0;for(const[a,s]of Object.entries(i))if(s.is_output_length&&e.parameters[a]){o=e.parameters[a];break}if(0===l||0===o)return 0;return((t.capabilities?.inputCostPerToken||0)*l+(t.capabilities?.outputCostPerToken||0)*o)*a.totalCombinations*a.repeatCount}function w(e){const t=s.enabledModels.find(t=>t.provider===e.provider&&t.modelId===e.modelId);if(!t||!a.prompt)return 0;const l=a.prompt.tokenEstimate?.avgTokens||0,i=c.getParametersForModel(e.provider,e.modelId);let o=0;for(const[a,s]of Object.entries(i))if(s.is_output_length&&e.parameters[a]){o=e.parameters[a];break}if(0===l||0===o)return 0;return(t.capabilities?.inputCostPerToken||0)*l+(t.capabilities?.outputCostPerToken||0)*o}function k(e){return w(e)*a.totalCombinations*a.repeatCount}function I(e){return p(e.provider,e.modelId)}function D(e,t){return"per-call"===t?"<1mg COâ‚‚e":"~10mg COâ‚‚e"}return(e,t)=>{const a=A("a-button");return _(),S("div",st,[x("div",it,[T(a,{onClick:t[0]||(t[0]=t=>e.$emit("show-model-selector")),type:"primary",size:"large",class:"big-add-model-btn","data-testid":"btn-add-model","aria-label":"Add Model Configuration"},{default:V(()=>[T(J(o)),t[1]||(t[1]=q(" Add Model "))]),_:1,__:[1]}),t[3]||(t[3]=x("div",{class:"separator-bar"},null,-1)),x("div",ot,[t[2]||(t[2]=x("div",{class:"quick-add-label"},"Quick add recent/popular models (with default temperature=0, max response length = 128):",-1)),x("div",nt,[(_(!0),S(j,null,H(y.value,e=>(_(),F(a,{key:`${e.provider}:${e.modelId}:${JSON.stringify(e.parameters)}`,onClick:t=>function(e){b(e)||(l("add",{name:e.displayName,provider:e.provider,modelId:e.modelId,parameters:e.parameters}),B(()=>{const e=document.querySelector(".ant-modal-body");e&&e.scrollTo({top:e.scrollHeight,behavior:"smooth"})}))}(e),size:"small",class:"quick-preset-btn",disabled:b(e),"data-testid":"quick-add-model","data-provider":e.provider,"data-model":e.modelId,"aria-label":`Quick add ${e.displayName} model`},{default:V(()=>[q(L(e.displayName)+" ",1),m.value?(_(),S("span",rt,L(J(K)(C(e))),1)):P("",!0)]),_:2},1032,["onClick","disabled","data-provider","data-model","aria-label"]))),128))])])]),e.configurations.length>0?(_(),S("div",dt,[t[8]||(t[8]=R('<div class="table-header" data-v-60b7dee1><div class="col-model" data-v-60b7dee1>Model</div><div class="col-params" data-v-60b7dee1>Parameters</div><div class="col-calls" data-v-60b7dee1>API Calls</div><div class="col-cost" data-v-60b7dee1>Cost per Call</div><div class="col-total" data-v-60b7dee1>Total Cost</div><div class="col-actions" data-v-60b7dee1>Actions</div></div>',1)),(_(!0),S(j,null,H(e.configurations,(l,s)=>(_(),S("div",{key:`model-config-${l.provider}-${l.modelId}-${s}`,class:"table-row","data-testid":"model-config-row","data-config-index":s,"data-provider":l.provider,"data-model":l.modelId},[x("div",ut,[x("div",pt,L(l.provider)+":"+L(l.modelId),1),x("div",mt,L(l.provider),1)]),x("div",vt,[x("span",gt,L(h(l.parameters)),1)]),x("div",ft,[x("span",yt,L(e.totalCombinations)+" Ã— "+L(e.repeatCount)+" = ",1),x("span",ht,L(e.totalCombinations*e.repeatCount),1)]),x("div",bt,[x("div",Ct,[m.value?(_(),S("span",wt,L(J(K)(w(l))),1)):P("",!0),v.value&&I(l)?(_(),S("small",kt,L(D(0,"per-call")),1)):P("",!0)])]),x("div",Tt,[x("div",It,[m.value?(_(),S("span",St,L(J(K)(k(l))),1)):P("",!0),v.value&&I(l)?(_(),S("small",_t,L(D(0,"total")),1)):P("",!0)])]),x("div",Pt,[T(a,{type:"text",size:"small",danger:"",onClick:t=>e.$emit("remove",s),class:"remove-btn","data-testid":"remove-model-config","data-config-index":s,"aria-label":`Remove ${l.provider} ${l.modelId} configuration`},{default:V(()=>t[4]||(t[4]=[q("Remove")])),_:2,__:[4]},1032,["onClick","data-config-index","aria-label"])])],8,ct))),128)),e.configurations.length>1?(_(),S("div",xt,[x("div",Dt,[x("div",Mt,"TOTAL ("+L(e.configurations.length)+" models)",1)]),t[5]||(t[5]=x("div",{class:"col-params"},null,-1)),x("div",Nt,[x("span",$t,L(g.value),1)]),t[6]||(t[6]=x("div",{class:"col-cost"},null,-1)),x("div",Et,[m.value?(_(),S("span",Ot,L(J(K)(f.value)),1)):P("",!0)]),t[7]||(t[7]=x("div",{class:"col-actions"},null,-1))])):P("",!0)])):(_(),S("div",zt,t[9]||(t[9]=[x("p",null,"No models configured yet. Add at least one model to continue.",-1)])))])}}}),[["__scopeId","data-v-60b7dee1"]]);const jt={key:0,class:"trial-creation-form"},At={class:"streamlined-content"},Vt={class:"content-section"},Lt={class:"section-header"},Ut={class:"section-body"},Ht={key:1,class:"selected-design-with-template"},qt={class:"unified-header"},Jt={class:"combinations-count"},Rt={class:"header-controls"},Bt={class:"design-stats"},Yt={class:"stat-item"},Gt={class:"stat-value"},Kt={class:"stat-item"},Wt={class:"stat-value"},Zt={class:"stat-item"},Qt={class:"stat-value"},Xt={key:0,class:"content-section","data-testid":"trial-config-section"},ea={class:"section-body"},ta={class:"model-section"},aa={class:"tab-footer"},la={class:"footer-actions"},sa={class:"streamlined-content"},ia={class:"content-section"},oa={class:"section-header"},na={class:"section-body"},ra={key:1,class:"selected-design-with-template"},da={class:"unified-header"},ca={class:"combinations-count"},ua={class:"header-controls"},pa={class:"design-stats"},ma={class:"stat-item"},va={class:"stat-value"},ga={class:"stat-item"},fa={class:"stat-value"},ya={class:"stat-item"},ha={class:"stat-value"},ba={key:0,class:"content-section","data-testid":"trial-config-section"},Ca={class:"section-body"},wa={class:"model-section"},ka=t(I({__name:"TrialCreationModalNew",props:{initialTemplateId:{},initialPromptSource:{},trialToDuplicate:{},isEditMode:{type:Boolean},isTabMode:{type:Boolean}},emits:["close","created","created-and-started","export-trial"],setup(e,{emit:t}){const l=e,s=t,i=d(),o=N(()=>({type:l.isEditMode?"edit":l.trialToDuplicate?"duplicate":"create",initialTemplateId:l.initialTemplateId,sourceTrial:l.trialToDuplicate||void 0})),I=a(),D=u(),O=p(),z=function(e){const t=u(),l=p(),s=a(),i=n(),o=d(),y=r(),h=M(null),b=M(""),C=M(1),w=M([]),k=M(!1),T=M(),I=M(!1),S=M(!1),_=M(!1),P=N(()=>{if(!h.value)return 0;if("template"===h.value.type){const e=h.value;if(!e.variables)return 1;let t=1;for(const a of Object.values(e.variables))if("direct"===a.type)t*=a.values?.length||1;else if(a.listId){const e=s.lists.find(e=>e.id===a.listId);t*=e?.itemCount||1}return t}if("spreadsheet"===h.value.type){const e=h.value,t=s.lists.find(t=>t.id===e.datasetId);return t?.itemCount||0}return 0}),x=N(()=>P.value*w.value.length*C.value),D=N(()=>{let e=0;for(const t of w.value)e+=z(t)*P.value*C.value;return e}),$=N(()=>null!==h.value&&w.value.length>0);function E(e){m.info("ðŸŽ¯ Prompt selected for trial creation",{promptId:e.id,promptName:e.name,promptType:e.type,source:e.source||e.migrationSource||"unknown",variableCount:"template"===e.type?Object.keys(e.variables||{}).length:"N/A (spreadsheet)",datasetId:"spreadsheet"===e.type?e.datasetId:void 0}),h.value=e,b.value=O(e),S.value=!0}function O(e){return e||h.value?`${e?.name||h.value?.name||"Trial"} - ${(new Date).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}`:"New Trial"}function z(e){const t=i.enabledModels.find(t=>t.provider===e.provider&&t.modelId===e.modelId);if(!t)return 0;const a=h.value?.tokenEstimate?.avgTokens||0,l=c.getParametersForModel(e.provider,e.modelId);let s=0;for(const[i,o]of Object.entries(l))if(o.is_output_length&&e.parameters[i]){s=e.parameters[i];break}return 0===a||0===s?0:(t.capabilities?.inputCostPerToken||0)*a+(t.capabilities?.outputCostPerToken||0)*s}return{selectedPrompt:h,trialName:b,repeatCount:C,configurations:w,creating:k,showModelSelector:I,liveUpdatePaused:S,showPlaceholders:_,promptSource:T,totalCombinations:P,totalExperiments:x,totalCost:D,canProceed:$,selectPrompt:E,selectDesign:function(e){m.warn("selectDesign is deprecated, use selectPrompt instead"),E(e)},generateTrialName:O,addConfiguration:function(e){w.value.push(e)},removeConfiguration:function(e){w.value.splice(e,1)},getConfigCostPerCall:z,createDraftTrial:async function(){if(h.value&&0!==w.value.length){m.info("ðŸ—ï¸ Creating draft trial",{promptId:h.value.id,promptName:h.value.name,promptType:h.value.type,trialName:b.value||O(),totalCombinations:P.value,configurationCount:w.value.length,repeatCount:C.value,totalExperiments:x.value}),k.value="draft";try{const e={name:b.value||O(),configurations:w.value.map(e=>({name:e.name,provider:e.provider,modelId:e.modelId,parameters:JSON.parse(JSON.stringify(e.parameters||{}))})),repeatConfig:C.value>1?{callsPerPrompt:C.value,strategy:"sequential"}:void 0};T.value?e.promptSource=T.value:e.promptSource={type:h.value.type,id:h.value.id};const t=await o.createTrial(e);return m.info("âœ… Draft trial created successfully",{trialId:t,promptSource:e.promptSource,configurationCount:e.configurations.length}),f.success("Trial created as draft!"),t}catch(e){throw m.error("Failed to create draft trial",e),f.error("Failed to create draft trial"),e}finally{k.value=!1}}},createAndStartTrial:async function(){if(h.value&&0!==w.value.length){k.value="start";try{const e={name:b.value||O(),configurations:w.value.map(e=>({name:e.name,provider:e.provider,modelId:e.modelId,parameters:JSON.parse(JSON.stringify(e.parameters||{}))})),repeatConfig:C.value>1?{callsPerPrompt:C.value,strategy:"sequential"}:void 0};T.value?e.promptSource=T.value:e.promptSource={type:h.value.type,id:h.value.id};const t=await o.createTrial(e);f.success("Trial created!");const a=await o.getRunningTrials();return a.length>0?{trialId:t,runningTrial:a[0]}:(f.success("Starting execution..."),await o.executeTrial(t),{trialId:t})}catch(e){throw m.error("Failed to create trial",e),f.error("Failed to create trial"),e}finally{k.value=!1}}},createAndExportTrial:async function(){if(h.value&&0!==w.value.length){k.value="export";try{const e={name:b.value||O(),configurations:w.value.map(e=>({name:e.name,provider:e.provider,modelId:e.modelId,parameters:JSON.parse(JSON.stringify(e.parameters||{}))})),repeatConfig:C.value>1?{callsPerPrompt:C.value,strategy:"sequential"}:void 0};T.value?e.promptSource=T.value:e.promptSource={type:h.value.type,id:h.value.id};const t=await o.createTrial(e),a=await o.getTrial(t);if(!a)throw new Error("Trial not found after creation");return f.success("Trial created! Opening export options..."),a}catch(e){throw m.error("Failed to create trial for export",e),f.error("Failed to create trial for export"),e}finally{k.value=!1}}},initialize:async function(){await Promise.all([t.initialize(),l.initialize(),s.initialize(),o.initialize()]);const a=e.value;if(a.initialDesignId){m.debug("ðŸ” Looking for initial prompt",{initialDesignId:a.initialDesignId,availableTemplates:t.templates.length,availableSpreadsheets:l.spreadsheets.length});let e=t.templates.find(e=>e.id===a.initialDesignId);e||(e=l.spreadsheets.find(e=>e.id===a.initialDesignId)),e?(m.info("ðŸŽ¯ Found initial prompt for trial creation",{promptId:e.id,promptName:e.name,promptType:e.type,foundIn:"template"===e.type?"templatePrompts":"spreadsheetPrompts"}),E(e)):m.warn("âŒ Initial prompt not found",{requestedId:a.initialDesignId,availableTemplateIds:t.templates.map(e=>e.id),availableSpreadsheetIds:l.spreadsheets.map(e=>e.id)})}if(a.sourceTrial){const e=a.sourceTrial;m.warn("Trial duplication in useTrialCreation composable is deprecated. Use TrialCreationModalNew instead.",{trialType:v(e)?"template":g(e)?"spreadsheet":"unknown",trialId:e.id}),b.value="edit"===a.type?e.name:`Copy of ${e.name}`,(v(e)||g(e))&&(e.repeatConfig?.callsPerPrompt&&(C.value=e.repeatConfig.callsPerPrompt),e.configurationSnapshots&&e.configurationSnapshots.length>0&&(w.value=e.configurationSnapshots.map(e=>({name:e.name||e.modelId,provider:e.provider,modelId:e.modelId,parameters:e.parameters||{}})))),S.value=!0}},templatePromptsStore:t,spreadsheetPromptsStore:l,variableListsStore:s,modelsStore:i,settingsStore:y}}(o),j=M(""),U=N(()=>{const e=D.templates;if(!j.value)return e;const t=j.value.toLowerCase();return e.filter(e=>e.name.toLowerCase().includes(t)||e.template.toLowerCase().includes(t))}),H=N(()=>{const e=O.spreadsheets;if(!j.value)return e;const t=j.value.toLowerCase();return e.filter(e=>e.name.toLowerCase().includes(t)||e.promptPattern.toLowerCase().includes(t))});function R(e){if("template"===e.type)return Object.keys(e.variables).length;{const t=I.lists.find(t=>t.id===e.datasetId);return t?.items?.length||0}}function B(e){const t=new Date,a=t.getTime()-e.getTime(),l=Math.floor(a/864e5);if(0===l)return"Today";if(1===l)return"Yesterday";if(l<7)return`${l} days ago`;if(l<30){const e=Math.floor(l/7);return`${e} week${e>1?"s":""} ago`}return e.toLocaleDateString("en-US",{month:"short",day:"numeric",year:e.getFullYear()!==t.getFullYear()?"numeric":void 0})}function G(e){return{text:"blue",number:"green",boolean:"purple",json:"orange"}[e]||"default"}function K(e){if("template"===e.type){let t=1;for(const a of Object.values(e.variables))if("direct"===a.type&&a.values)t*=a.values.length;else if("list"===a.type&&a.listId){const e=I.lists.find(e=>e.id===a.listId);t*=e?.itemCount||1}return t>1e3?`${(t/1e3).toFixed(1)}k`:t.toString()}{const t=I.lists.find(t=>t.id===e.datasetId);return t?.itemCount?.toString()||"0"}}const Z=M(!0),Q=N(()=>z.selectedPrompt.value),X=N({get:()=>z.trialName.value,set:e=>{z.trialName.value=e}}),ee=N({get:()=>z.repeatCount.value,set:e=>{z.repeatCount.value=e}}),te=N(()=>z.configurations.value),ae=N({get:()=>z.showModelSelector.value,set:e=>{z.showModelSelector.value=e}}),le=N(()=>z.creating.value),ie=N(()=>z.totalCombinations.value);function oe(e){return e?"template"===e.type||"spreadsheet"===e.type?e.outputConfig?.outputType||"text":e.outputType||"text":"text"}function ne(e){if(e)return e.tokenEstimate?.avgTokens}function re(e){if(e)return{totalCombinations:ie.value,avgTokens:ne(e)||150}}const de=M(),ue=N(()=>l.isEditMode&&l.trialToDuplicate?`Edit Trial: ${l.trialToDuplicate.name}`:l.trialToDuplicate?`Duplicate Trial: ${l.trialToDuplicate.name}`:"Create New Trial"),pe=N(()=>z.canProceed.value);async function me(e){m.info("ðŸŽ¯ TrialCreationModalNew.onPromptSelected called",{promptId:e.id,promptName:e.name,promptType:e.type,variableListsCount:I.lists.length}),0===I.lists.length&&(m.debug("Initializing variable lists store before prompt selection"),await I.initialize()),m.debug("Calling trialCreation.selectPrompt",{prompt:e}),z.selectPrompt(e),m.info("ðŸ” After selectPrompt call",{selectedPromptId:z.selectedPrompt.value?.id,selectedPromptName:z.selectedPrompt.value?.name,totalCombinations:z.totalCombinations.value}),Z.value=!0}async function ve(){if(l.initialPromptSource)try{const e=await C.resolve(l.initialPromptSource.id);if(!e)throw new Error("Prompt source not found");let t;if("template"===e.type?t=await D.getTemplate(e.id):"spreadsheet"===e.type&&(t=await O.getSpreadsheet(e.id)),!t)throw new Error(`${e.type} prompt not found in V2 stores`);de.value={type:e.type,id:e.id},z.selectPrompt(t),m.debug("Loaded prompt source",{type:e.type,id:e.id})}catch(e){m.error("Failed to load prompt source",e),h.error({title:"Failed to load prompt source",content:e instanceof Error?e.message:"Unknown error"})}}function ge(){z.selectedPrompt.value=null,z.configurations.value=[],de.value=void 0}async function fe(){s("close"),window.location.href="#/templates"}async function ye(){s("close"),window.location.href="#/spreadsheet"}function he(e){z.trialName.value=e.trialName,z.repeatCount.value=e.repeatCount}function be(e){z.addConfiguration(e)}function Ce(e){z.removeConfiguration(e)}function we(e){be(e),z.showModelSelector.value=!1}async function ke(){try{de.value&&(z.promptSource.value=de.value);const e=await z.createDraftTrial();e&&(s("created",e),s("close"))}catch(e){}}async function Te(){try{de.value&&(z.promptSource.value=de.value);const e=await z.createAndExportTrial();e&&(s("export-trial",e),s("close"))}catch(e){}}async function Ie(){try{de.value&&(z.promptSource.value=de.value);const e=await z.createAndStartTrial();e&&(e.runningTrial?h.confirm({title:"Another trial is already running",content:Y("div",{style:"font-size: 14px; line-height: 1.6;"},[Y("p",{style:"font-weight: 600; margin-bottom: 12px;"},`The trial "${e.runningTrial.name}" is currently executing.`),Y("p",{style:"margin-bottom: 16px;"},"You can only run one trial at a time. Here are your options:"),Y("ul",{style:"margin: 0 0 16px 20px; padding: 0;"},[Y("li",{style:"margin-bottom: 8px;"},[Y("strong","Start new trial: "),"This will automatically pause the current trial. You can resume it later from the Trials page."]),Y("li",{style:"margin-bottom: 8px;"},[Y("strong","Create as draft: "),"Save this trial configuration without starting it. You can run it later when the current trial completes."]),Y("li",[Y("strong","Keep current trial: "),"Cancel this action and let the current trial continue running."])]),Y("div",{style:"background: #f0f2f5; padding: 12px; border-radius: 6px; margin-top: 16px;"},[Y("p",{style:"margin: 0; font-size: 13px; color: #666;"},[Y("strong","ðŸ’¡ Tip: "),"Paused trials retain their progress and can be resumed anytime. All completed API calls are saved."])])]),width:600,okText:"Start new trial (pause current)",cancelText:"Keep current trial running",onOk:async()=>{try{await i.executeTrial(e.trialId),s("created-and-started",e.trialId),s("close")}catch(t){m.error("Failed to start trial after confirmation",t),f.error("Failed to start trial")}},onCancel:async()=>{try{await i.deleteTrial(e.trialId)}catch(t){m.error("Failed to delete trial after cancellation",t)}}}):(s("created-and-started",e.trialId),s("close")))}catch(e){}}function Se(){Z.value=!Z.value}async function _e(){l.initialTemplateId&&await async function(e){try{const t=await D.getTemplate(e);if(t)return void z.selectPrompt(t);const a=await O.getSpreadsheet(e);if(a)return void z.selectPrompt(a);throw new Error("Design not found in V2 stores")}catch(t){m.error("Failed to load design",t),h.error({title:"Failed to load design",content:t instanceof Error?t.message:"Unknown error"})}}(l.initialTemplateId)}return E(async()=>{if(m.info("ðŸš€ TrialCreationModalNew mounting - initializing stores"),await z.initialize(),m.info("ðŸ“Š Store initialization complete",{templatePromptsCount:D.templates.length,spreadsheetPromptsCount:O.spreadsheets.length,variableListsCount:I.lists.length,templatePromptIds:D.templates.map(e=>e.id),spreadsheetPromptIds:O.spreadsheets.map(e=>e.id)}),0===D.templates.length&&0===O.spreadsheets.length){m.warn("ðŸš¨ No V2 templates found - checking for legacy V1 designs to migrate");try{const e=await y.designs.toArray();if(m.info("ðŸ” Legacy design check",{legacyDesignCount:e.length,legacyDesignIds:e.map(e=>e.id)}),e.length>0){m.error("ðŸ’€ FOUND LEGACY DESIGNS THAT NEED MIGRATION!"),m.error("The V2 migration did not run properly when designs-db.ts was deleted"),m.error("User had working V1 designs but they are orphaned in V2 system"),h.error({title:"Data Migration Required",content:`Found ${e.length} legacy template(s) that need to be migrated to the new V2 system. This will be fixed automatically.`,width:600});const{MigrationService:t}=await b(async()=>{const{MigrationService:e}=await import("./index-C6frMIbt.js").then(e=>e.aj);return{MigrationService:e}},__vite__mapDeps([0,1,2,3]),import.meta.url);await t.forceReMigration(),await Promise.all([D.initialize(),O.initialize()]),m.info("âœ… Manual migration completed",{newTemplateCount:D.templates.length,newSpreadsheetCount:O.spreadsheets.length})}}catch(e){m.error("Failed to check/migrate legacy designs",e)}}0===I.lists.length&&(m.debug("Initializing variable lists store"),await I.initialize()),l.initialPromptSource&&await ve()}),$(()=>l.trialToDuplicate,()=>{l.trialToDuplicate&&async function(){if(l.trialToDuplicate)try{if(v(l.trialToDuplicate))de.value={type:"template",id:l.trialToDuplicate.templateId},await ve();else{if(!g(l.trialToDuplicate))throw m.warn("Unknown trial type for duplication",l.trialToDuplicate),new Error("Unknown trial type - cannot duplicate this trial");de.value={type:"spreadsheet",id:l.trialToDuplicate.spreadsheetId},await ve()}l.isEditMode?z.trialName.value=l.trialToDuplicate.name:z.trialName.value=`${l.trialToDuplicate.name} (Copy)`,z.repeatCount.value=l.trialToDuplicate.repeatConfig?.callsPerPrompt||1,z.configurations.value=l.trialToDuplicate.configurationSnapshots||[]}catch(e){m.error("Failed to initialize duplication",e),h.error({title:"Failed to load trial data",content:e instanceof Error?e.message:"Unknown error"})}}()},{immediate:!0}),$(()=>l.initialTemplateId,()=>{l.initialTemplateId&&!l.trialToDuplicate&&_e()},{immediate:!0}),(e,t)=>{const a=A("a-button"),l=A("a-tag");return e.isTabMode?(_(),S("div",jt,[x("div",At,[x("section",Vt,[x("div",Lt,[t[8]||(t[8]=x("h3",null,"What are you testing?",-1)),Q.value?(_(),F(a,{key:0,onClick:ge,size:"small",class:"back-button",style:{"margin-left":"2em"}},{default:V(()=>t[7]||(t[7]=[q(" â† Back to Select Template ")])),_:1,__:[7]})):P("",!0)]),x("div",Ut,[Q.value?(_(),S("div",Ht,[x("div",qt,[x("h4",null,L(Q.value.name),1),x("span",Jt,L(ie.value)+" combinations",1),x("div",Rt,[T(a,{onClick:Se,size:"small",type:Z.value?"default":"primary",class:"pause-btn"},{default:V(()=>[q(L(Z.value?"Start Variable Substitution":"Pause Variable Substitution"),1)]),_:1},8,["type"])])]),T(ce,{prompt:Q.value,cycling:!0,"cycling-paused":Z.value,"show-controls":"none","display-mode":"inline","max-height":"none",class:"step2-preview","onUpdate:cyclingPaused":t[0]||(t[0]=e=>Z.value=e)},null,8,["prompt","cycling-paused"]),x("div",Bt,[T(l,{size:"small",color:G(oe(Q.value)),class:"output-type-tag"},{default:V(()=>[q(L(oe(Q.value)),1)]),_:1},8,["color"]),x("span",Yt,[x("span",Gt,L(R(Q.value)),1),t[9]||(t[9]=x("span",{class:"stat-label"},"vars",-1))]),t[12]||(t[12]=x("span",{class:"stat-divider"},"â€¢",-1)),x("span",Kt,[x("span",Wt,L(ie.value),1),t[10]||(t[10]=x("span",{class:"stat-label"},"combos",-1))]),t[13]||(t[13]=x("span",{class:"stat-divider"},"â€¢",-1)),x("span",Zt,[x("span",Qt,L(ne(Q.value)||"?"),1),t[11]||(t[11]=x("span",{class:"stat-label"},"tokens",-1))])])])):(_(),F(Ye,{key:0,"template-prompts":U.value,"spreadsheet-prompts":H.value,"search-term":j.value,"count-variables":R,"format-last-edit-date":B,"get-output-type-color":G,"get-combination-count":K,onSelect:me,onCreateNew:fe,onCreateSpreadsheet:ye},null,8,["template-prompts","spreadsheet-prompts","search-term"]))])]),Q.value?(_(),S("section",Xt,[t[15]||(t[15]=x("h3",null,"Trial Configuration",-1)),x("div",ea,[T(lt,{"model-value":{trialName:X.value,repeatCount:ee.value},"total-combinations":ie.value,"onUpdate:modelValue":he},null,8,["model-value","total-combinations"]),x("div",ta,[t[14]||(t[14]=x("h4",null,"Model Configuration",-1)),T(Ft,{configurations:te.value,prompt:Q.value,"total-combinations":ie.value,"repeat-count":ee.value,onShowModelSelector:t[1]||(t[1]=e=>ae.value=!0),onAdd:be,onRemove:Ce},null,8,["configurations","prompt","total-combinations","repeat-count"])])])])):P("",!0)]),x("div",aa,[x("div",la,[T(a,{size:"large",onClick:ke,loading:"draft"===le.value,disabled:!pe.value,"data-testid":"btn-create-draft-tab","aria-label":"Create trial as draft"},{default:V(()=>t[16]||(t[16]=[q(" Create as Draft ")])),_:1,__:[16]},8,["loading","disabled"]),T(a,{size:"large",onClick:Te,loading:"export"===le.value,disabled:!pe.value,"data-testid":"btn-export-python-tab","aria-label":"Export trial to Python"},{default:V(()=>t[17]||(t[17]=[q(" Export to Python ")])),_:1,__:[17]},8,["loading","disabled"]),T(a,{type:"primary",size:"large",onClick:Ie,loading:"start"===le.value,disabled:!pe.value,"data-testid":"btn-create-and-start-tab","aria-label":"Create and start trial execution"},{default:V(()=>[T(J(w)),t[18]||(t[18]=q(" Create and Start "))]),_:1,__:[18]},8,["loading","disabled"])])]),T(W,{open:ae.value&&!!Q.value,mode:"trial","trial-context":Q.value?re(Q.value):void 0,"existing-configurations":te.value,onClose:t[2]||(t[2]=e=>ae.value=!1),onAddConfiguration:we},null,8,["open","trial-context","existing-configurations"])])):(_(),F(k,{key:1,"model-value":!0,title:ue.value,size:"full","data-testid":"modal-trial-creation","onUpdate:modelValue":t[6]||(t[6]=t=>e.$emit("close"))},{footer:V(()=>[T(se,null,{default:V(()=>[T(a,{size:"large",onClick:ke,loading:"draft"===le.value,disabled:!pe.value,"data-testid":"btn-create-draft","aria-label":"Create trial as draft"},{default:V(()=>t[28]||(t[28]=[q(" Create as Draft ")])),_:1,__:[28]},8,["loading","disabled"]),T(a,{size:"large",onClick:Te,loading:"export"===le.value,disabled:!pe.value,"data-testid":"btn-export-python","aria-label":"Export trial to Python"},{default:V(()=>t[29]||(t[29]=[q(" Export to Python ")])),_:1,__:[29]},8,["loading","disabled"]),T(a,{type:"primary",size:"large",onClick:Ie,loading:"start"===le.value,disabled:!pe.value,"data-testid":"btn-create-and-start","aria-label":"Create and start trial execution"},{default:V(()=>[T(J(w)),t[30]||(t[30]=q(" Create and Start "))]),_:1,__:[30]},8,["loading","disabled"])]),_:1})]),default:V(()=>[x("div",sa,[x("section",ia,[x("div",oa,[t[20]||(t[20]=x("h3",null,"What are you testing?",-1)),Q.value?(_(),F(a,{key:0,onClick:ge,size:"small",class:"back-button",style:{"margin-left":"2em"}},{default:V(()=>t[19]||(t[19]=[q(" â† Back to Select Template ")])),_:1,__:[19]})):P("",!0)]),x("div",na,[Q.value?(_(),S("div",ra,[x("div",da,[x("h4",null,L(Q.value.name),1),x("span",ca,L(ie.value)+" combinations",1),x("div",ua,[T(a,{onClick:Se,size:"small",type:Z.value?"default":"primary",class:"pause-btn"},{default:V(()=>[q(L(Z.value?"Start Variable Substitution":"Pause Variable Substitution"),1)]),_:1},8,["type"])])]),T(ce,{prompt:Q.value,cycling:!0,"cycling-paused":Z.value,"show-controls":"none","display-mode":"inline","max-height":"none",class:"step2-preview","onUpdate:cyclingPaused":t[3]||(t[3]=e=>Z.value=e)},null,8,["prompt","cycling-paused"]),x("div",pa,[T(l,{size:"small",color:G(oe(Q.value)),class:"output-type-tag"},{default:V(()=>[q(L(oe(Q.value)),1)]),_:1},8,["color"]),x("span",ma,[x("span",va,L(R(Q.value)),1),t[21]||(t[21]=x("span",{class:"stat-label"},"vars",-1))]),t[24]||(t[24]=x("span",{class:"stat-divider"},"â€¢",-1)),x("span",ga,[x("span",fa,L(ie.value),1),t[22]||(t[22]=x("span",{class:"stat-label"},"combos",-1))]),t[25]||(t[25]=x("span",{class:"stat-divider"},"â€¢",-1)),x("span",ya,[x("span",ha,L(ne(Q.value)||"?"),1),t[23]||(t[23]=x("span",{class:"stat-label"},"tokens",-1))])])])):(_(),F(Ye,{key:0,"template-prompts":U.value,"spreadsheet-prompts":H.value,"search-term":j.value,"count-variables":R,"format-last-edit-date":B,"get-output-type-color":G,"get-combination-count":K,onSelect:me,onCreateNew:fe,onCreateSpreadsheet:ye},null,8,["template-prompts","spreadsheet-prompts","search-term"]))])]),Q.value?(_(),S("section",ba,[t[27]||(t[27]=x("h3",null,"Trial Configuration",-1)),x("div",Ca,[T(lt,{"model-value":{trialName:X.value,repeatCount:ee.value},"total-combinations":ie.value,"onUpdate:modelValue":he},null,8,["model-value","total-combinations"]),x("div",wa,[t[26]||(t[26]=x("h4",null,"Model Configuration",-1)),T(Ft,{configurations:te.value,prompt:Q.value,"total-combinations":ie.value,"repeat-count":ee.value,onShowModelSelector:t[4]||(t[4]=e=>ae.value=!0),onAdd:be,onRemove:Ce},null,8,["configurations","prompt","total-combinations","repeat-count"])])])])):P("",!0)]),T(W,{open:ae.value&&!!Q.value,mode:"trial","trial-context":Q.value?re(Q.value):void 0,"existing-configurations":te.value,onClose:t[5]||(t[5]=e=>ae.value=!1),onAddConfiguration:we},null,8,["open","trial-context","existing-configurations"])]),_:1},8,["title"]))}}}),[["__scopeId","data-v-2b41895d"]]);export{ee as F,ka as T,ce as a};
