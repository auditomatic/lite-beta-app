const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-WXAkW4LC.js","assets/index-Rfcl7loQ.css"])))=>i.map(i=>d[i]);
import{b as c,I as je,d as Q,aA as Ne,r as x,c as V,p as $t,i as de,j as _,m as a,k as e,v as T,t as d,x as O,y as B,F as H,A as le,z as f,D as k,q as U,_ as ce,aa as ne,aB as ue,ah as ge,J as Oe,aC as He,a as K,B as ze,w as Mt,C as Ge,n as Se,E as Qe,aD as qe,L as Ke,u as We,aE as Je,U as zt,am as Ot,s as Ie,aF as St,aG as Tt,a2 as Pt,o as xt,aH as Bt,aI as Ue,aJ as Et,ak as Dt,M as Lt}from"./index-WXAkW4LC.js";import{u as Xe}from"./useV4Models-BSUCAAFo.js";import{u as Ye}from"./useV4ProviderParameters-DJzZ-hbk.js";import{F as At}from"./FilterOutlined-DIuMK-Ou.js";import{U as Ze}from"./UnorderedListOutlined-AeWDTYNK.js";import{S as Ft}from"./SaveOutlined-CC-AZCnW.js";import"./useV4LiveQuery-BW9Mfo21.js";var Gt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 144H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H212V212h200v200zm452-268H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H612V212h200v200zM464 544H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16zm-52 268H212V612h200v200zm452-268H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16zm-52 268H612V612h200v200z"}}]},name:"appstore",theme:"outlined"};function Ve(w){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?Object(arguments[t]):{},o=Object.keys(s);typeof Object.getOwnPropertySymbols=="function"&&(o=o.concat(Object.getOwnPropertySymbols(s).filter(function(p){return Object.getOwnPropertyDescriptor(s,p).enumerable}))),o.forEach(function(p){It(w,p,s[p])})}return w}function It(w,t,s){return t in w?Object.defineProperty(w,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):w[t]=s,w}var Te=function(t,s){var o=Ve({},t,s.attrs);return c(je,Ve({},o,{icon:Gt}),null)};Te.displayName="AppstoreOutlined";Te.inheritAttrs=!1;var Ut={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"};function Re(w){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?Object(arguments[t]):{},o=Object.keys(s);typeof Object.getOwnPropertySymbols=="function"&&(o=o.concat(Object.getOwnPropertySymbols(s).filter(function(p){return Object.getOwnPropertyDescriptor(s,p).enumerable}))),o.forEach(function(p){Vt(w,p,s[p])})}return w}function Vt(w,t,s){return t in w?Object.defineProperty(w,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):w[t]=s,w}var Pe=function(t,s){var o=Re({},t,s.attrs);return c(je,Re({},o,{icon:Ut}),null)};Pe.displayName="UploadOutlined";Pe.inheritAttrs=!1;class Rt{async bulkWrite(t,s,o="put"){s.length!==0&&await Q.transaction("rw",Q[t],async()=>{switch(o){case"put":await Q[t].bulkPut(s);break;case"add":await Q[t].bulkAdd(s);break;case"update":const p=s.map(C=>Q[t].update(C.id,C));await Promise.all(p);break}})}async bulkDelete(t,s){s.length!==0&&await Q.transaction("rw",Q[t],async()=>{await Q[t].bulkDelete(s)})}async conditionalBulkUpdate(t,s,o){let p=0;return await Q.transaction("rw",Q[t],async()=>{await Q[t].toCollection().modify(C=>{s(C)&&(Object.assign(C,o),p++)})}),p}freezeDeep(t){const s=t.map(o=>Object.freeze(o));return Object.freeze(s)}async getAndFreeze(t,s){const o=await Q[t].get(s);return o?Object.freeze(o):null}async getAllAndFreeze(t){const s=await Q[t].toArray();return this.freezeDeep(s)}}const ke=new Rt;class jt{async bulkUpsertModels(t){t.length!==0&&await Q.transaction("rw",Q.models,async()=>{const s=t.map(o=>Object.freeze({...o,enabled:o.enabled??!1,available:o.available??!0}));await Q.models.bulkPut(s)})}async clearProviderModels(t){return await Q.transaction("rw",Q.models,async()=>{const p=(await Q.models.where("provider").equals(t).toArray()).map(C=>C.id);return p.length>0&&await Q.models.bulkDelete(p),p.length})}async toggleModelEnabled(t,s){return await Q.models.update(t,{enabled:s})===1}async toggleProviderModels(t,s){return await ke.conditionalBulkUpdate("models",o=>o.provider===t,{enabled:s})}async toggleAllModels(t){return await ke.conditionalBulkUpdate("models",()=>!0,{enabled:t})}async getModelStatistics(){const t=await Q.models.toArray(),s={total:t.length,enabled:0,byProvider:{}};for(const o of t)o.enabled&&s.enabled++,s.byProvider[o.provider]||(s.byProvider[o.provider]={total:0,enabled:0}),s.byProvider[o.provider].total++,o.enabled&&s.byProvider[o.provider].enabled++;return Object.freeze(s)}async updateModelAvailability(t,s){return await ke.conditionalBulkUpdate("models",o=>o.provider===t,{available:s})}async searchModels(t){let s=Q.models.toCollection();if(t.provider&&(s=Q.models.where("provider").equals(t.provider)),t.enabled!==void 0&&(s=s.and(p=>p.enabled===t.enabled)),t.available!==void 0&&(s=s.and(p=>p.available===t.available)),t.search){const p=t.search.toLowerCase();s=s.and(C=>C.displayName.toLowerCase().includes(p)||C.modelId.toLowerCase().includes(p))}const o=await s.toArray();return ke.freezeDeep(o)}async clearAllModels(){await Q.models.clear()}}const Nt=new jt;function Ht(){const w=Ne(),t=x(!1),s=x(null),o=x(!1),p=x(!1);async function C(y,i){t.value=!0,i&&(i.value=!0),s.value=null;try{return{ok:!0,value:await y()}}catch(l){const u=l instanceof Error?l:new Error(String(l));return s.value=u,{ok:!1,error:u}}finally{t.value=!1,i&&(i.value=!1)}}async function P(y){return C(()=>w.discoverModels(y),o)}async function A(y){return C(()=>w.refreshModelSource(y),o)}async function h(y,i){return C(async()=>{await w.toggleModel(y,i)},p)}async function b(y){return C(async()=>{await w.toggleAllModels(y)},p)}async function r(y,i){return C(async()=>{await w.toggleProviderModels(y,i)},p)}async function z(){return C(async()=>{await w.enableOpenRouterFavorites()},p)}async function I(){return C(async()=>{await w.clearAllModels()})}async function v(y,i){return C(async()=>{await Nt.updateModelAvailability(y,i)})}return{discoverModels:P,refreshDiscoverySource:A,toggleModel:h,toggleAllModels:b,toggleProviderModels:r,enableOpenRouterFavorites:z,clearAllModels:I,updateModelAvailability:v,isExecuting:t,lastError:s,isDiscovering:o,isTogglingModels:p}}function et(){const w=Ne(),t=x([]),s=x(!1),o=x([]);function p(){const A=w.getDiscoveryStatus();t.value=A.map(h=>({id:h.id,status:h.status==="loading"?"loading":h.status==="idle"?"success":h.status,modelCount:h.modelCount,error:h.error})),s.value=w.isDiscovering(),o.value=w.getDiscoveryErrors()}function C(A){return{litellm:"LiteLLM",openrouter:"OpenRouter",ollama:"Ollama",deterministic:"Deterministic"}[A]||A}function P(A){const h=$t.getProvider(A);return(h==null?void 0:h.name)||A}return p(),{discoveryStatus:V(()=>t.value),isDiscovering:V(()=>s.value),discoveryErrors:V(()=>o.value),getSourceDisplayName:C,getProviderDisplayName:P,refreshStatus:p}}const Qt={class:"search-section"},qt={class:"search-controls"},Kt={class:"size-filter"},Wt={class:"size-controls"},Jt={class:"size-presets"},Xt={key:0,class:"size-filter-indicator"},Yt={class:"quantized-filter"},Zt={class:"filter-description"},es={class:"category-filters"},ts=de({__name:"OllamaSearchFilters",props:{searchQuery:{},sortBy:{},selectedCategories:{},maxSizeGB:{},showQuantized:{type:Boolean},categories:{}},emits:["update:searchQuery","update:sortBy","update:maxSizeGB","update:showQuantized","toggle-category"],setup(w,{emit:t}){const s=w,o=t,p=V({get:()=>s.searchQuery,set:b=>o("update:searchQuery",b)}),C=V({get:()=>s.sortBy,set:b=>o("update:sortBy",b)}),P=V({get:()=>s.maxSizeGB,set:b=>o("update:maxSizeGB",b)}),A=V({get:()=>s.showQuantized,set:b=>o("update:showQuantized",b)}),h=[{label:"1GB",value:1},{label:"2GB",value:2},{label:"4GB",value:4},{label:"8GB",value:8},{label:"16GB",value:16},{label:"None",value:999}];return(b,r)=>{const z=T("a-input-search"),I=T("a-select-option"),v=T("a-select"),y=T("a-input-number"),i=T("a-button"),l=T("a-tag");return a(),_("div",Qt,[e("div",qt,[c(z,{value:p.value,"onUpdate:value":r[0]||(r[0]=u=>p.value=u),placeholder:"Search models by name or description...","allow-clear":"",size:"large",class:"search-input"},null,8,["value"]),c(v,{value:C.value,"onUpdate:value":r[1]||(r[1]=u=>C.value=u),placeholder:"Sort by",style:{width:"180px"},size:"large"},{default:d(()=>[c(I,{value:"popularity"},{default:d(()=>r[4]||(r[4]=[O("Popularity")])),_:1,__:[4]}),c(I,{value:"lastUpdated"},{default:d(()=>r[5]||(r[5]=[O("Last Updated")])),_:1,__:[5]}),c(I,{value:"name"},{default:d(()=>r[6]||(r[6]=[O("Name")])),_:1,__:[6]}),c(I,{value:"tagCount"},{default:d(()=>r[7]||(r[7]=[O("Tag Count")])),_:1,__:[7]})]),_:1},8,["value"])]),e("div",Kt,[e("div",Wt,[r[8]||(r[8]=e("span",{class:"filter-label"},"Filter to models smaller than:",-1)),c(y,{value:P.value,"onUpdate:value":r[2]||(r[2]=u=>P.value=u),min:1,max:999,step:1,size:"small",class:"size-input","addon-after":"GB"},null,8,["value"]),e("div",Jt,[(a(),_(H,null,le(h,u=>c(i,{key:u.value,size:"small",type:P.value===u.value?"primary":"default",onClick:m=>P.value=u.value,class:"preset-button"},{default:d(()=>[O(f(u.label),1)]),_:2},1032,["type","onClick"])),64))])]),P.value<999?(a(),_("span",Xt," â‰¤"+f(P.value)+"GB filter active ",1)):B("",!0)]),e("div",Yt,[c(i,{type:A.value?"default":"primary",size:"small",onClick:r[3]||(r[3]=u=>A.value=!A.value)},{icon:d(()=>[c(k(At))]),default:d(()=>[O(" "+f(A.value?"Hide":"Show")+" Quantized Versions ",1)]),_:1},8,["type"]),e("span",Zt,f(A.value?"Showing all versions":"Hiding q2_K, q3_K, q4_0, q5_1, q6_K, q8_0, fp16..."),1)]),e("div",es,[(a(!0),_(H,null,le(b.categories,u=>(a(),U(l,{key:u,color:b.selectedCategories.includes(u)?"blue":"default",checkable:!0,checked:b.selectedCategories.includes(u),onClick:m=>b.$emit("toggle-category",u),class:"category-tag"},{default:d(()=>[O(f(u),1)]),_:2},1032,["color","checked","onClick"]))),128))])])}}}),ss=ce(ts,[["__scopeId","data-v-a03d8794"]]),as={key:0,class:"downloads-section"},ls={class:"download-items"},os={class:"download-info"},ns={class:"download-tag"},is={class:"download-status"},rs=de({__name:"OllamaDownloadProgress",props:{pullProgress:{}},setup(w){return(t,s)=>{const o=T("a-progress");return Object.keys(t.pullProgress).length>0?(a(),_("div",as,[s[0]||(s[0]=e("h4",null,"Active Downloads",-1)),e("div",ls,[(a(!0),_(H,null,le(t.pullProgress,(p,C)=>(a(),_("div",{key:C,class:"download-item"},[e("div",os,[e("code",ns,f(C),1),e("span",is,f(p.message),1)]),c(o,{percent:p.percent,status:p.status==="success"?"success":"active",size:"small",class:"download-progress"},null,8,["percent","status"])]))),128))])])):B("",!0)}}}),us=ce(rs,[["__scopeId","data-v-88ba3f68"]]),ds={class:"model-info"},cs={class:"model-name"},ps={key:0},ms={class:"model-description"},vs={class:"model-actions"},fs={key:0,class:"button-size-info"},gs={key:0,class:"tags-preview"},ys={class:"preview-tags"},_s=["onClick","title"],bs={key:1,class:"tag-actual"},hs={class:"tag-size"},ks={key:0,class:"more-tags"},ws={key:1,class:"tags-expanded"},Cs={key:0,class:"tag-name"},$s={key:2},Ms={key:1,class:"text-secondary"},zs=de({__name:"OllamaModelCard",props:{model:{},expanded:{type:Boolean},pullingModels:{},pullProgress:{},installedModels:{},maxSizeGB:{},showQuantized:{type:Boolean},isQuantizedTag:{type:Function},parseSizeToGB:{type:Function},getSizeClass:{type:Function},getLatestTagInfo:{type:Function}},emits:["toggle-expand","pull-model"],setup(w){const t=w,s=[{title:"Tag",key:"name",width:200},{title:"Size",key:"size",width:100,align:"right"},{title:"Context",key:"context",width:100,align:"center"},{title:"Status",key:"status",width:80,align:"center"},{title:"Action",key:"actions",width:80,align:"center"}],o=V(()=>t.installedModels.some(u=>u.startsWith(t.model.name))),p=V(()=>t.installedModels.filter(u=>u.startsWith(t.model.name+":")).length),C=V(()=>v(`${t.model.name}:latest`)||v(t.model.name)),P=V(()=>t.pullingModels.has(`${t.model.name}:latest`)),A=V(()=>t.pullProgress[`${t.model.name}:latest`]),h=V(()=>t.getLatestTagInfo(t.model)),b=V(()=>t.maxSizeGB<999||!t.showQuantized),r=V(()=>t.model.tags?Object.entries(t.model.tags).map(([u,m])=>({...m,name:u})).filter(u=>!(t.maxSizeGB<999&&t.parseSizeToGB(u.size||"0GB")>t.maxSizeGB||!t.showQuantized&&t.isQuantizedTag(u.name))).sort((u,m)=>u.name.localeCompare(m.name)):[]),z=V(()=>r.value.length),I=V(()=>r.value.sort((m,M)=>{const E=["latest","instruct","8b","7b","3b","1b"],D=E.indexOf(m.name),$=E.indexOf(M.name);return D!==-1&&$!==-1?D-$:D!==-1?-1:$!==-1?1:m.name.localeCompare(M.name)}).slice(0,5));function v(u){return t.installedModels.includes(u)}function y(u){return t.pullingModels.has(u)}function i(u){return t.pullProgress[u]}const l=V(()=>{const u=h.value;return u?{actualTag:u.actualTag||"",size:u.size||""}:null});return(u,m)=>{const M=T("a-tag"),E=T("a-button"),D=T("a-table");return a(),_("div",{class:ne(["model-item",{expanded:u.expanded}])},[e("div",{class:"model-header",onClick:m[2]||(m[2]=$=>u.$emit("toggle-expand"))},[e("div",ds,[e("div",cs,[e("h4",null,f(u.model.name),1),c(M,{size:"small",color:"blue"},{default:d(()=>[O(f(u.model.pullCount||"0")+" pulls",1)]),_:1}),c(M,{size:"small",color:"green"},{default:d(()=>[O(f(z.value)+" ",1),b.value?(a(),_("span",ps,"/"+f(u.model.tagCount||0),1)):B("",!0),m[3]||(m[3]=O(" versions "))]),_:1,__:[3]}),o.value?(a(),U(M,{key:0,size:"small",color:"success",class:"installed-tag"},{icon:d(()=>[c(k(ue))]),default:d(()=>[O(" "+f(p.value)+" installed ",1)]),_:1})):B("",!0)]),e("p",ms,f(u.model.description||"No description available"),1)]),e("div",vs,[c(E,{type:C.value?"default":"primary",size:"small",onClick:m[0]||(m[0]=ge($=>u.$emit("pull-model",u.model.name,"latest"),["stop"])),loading:P.value,disabled:C.value},{default:d(()=>[A.value?(a(),_(H,{key:0},[O(f(Math.round(A.value.percent))+"% ",1)],64)):C.value?(a(),_(H,{key:1},[c(k(ue)),m[4]||(m[4]=O(" Installed "))],64)):(a(),_(H,{key:2},[m[5]||(m[5]=O(" Pull Latest ")),l.value?(a(),_("span",fs," ("+f(l.value.actualTag?l.value.actualTag+", ":"")+f(l.value.size)+") ",1)):B("",!0)],64))]),_:1},8,["type","loading","disabled"]),c(E,{type:"text",size:"small",onClick:m[1]||(m[1]=ge($=>u.$emit("toggle-expand"),["stop"]))},{icon:d(()=>[u.expanded?(a(),U(k(He),{key:1})):(a(),U(k(Oe),{key:0}))]),default:d(()=>[O(" "+f(u.expanded?"Hide versions":"See all versions"),1)]),_:1})])]),u.expanded?B("",!0):(a(),_("div",gs,[e("div",ys,[(a(!0),_(H,null,le(I.value,$=>(a(),_("span",{key:$.name,class:ne(["tag-chip",[u.getSizeClass($.size),{installed:v($.fullTag)}]]),onClick:S=>v($.fullTag)?null:u.$emit("pull-model",u.model.name,$.name),title:`${$.fullTag} - ${$.size}${v($.fullTag)?" (Installed)":""}`},[v($.fullTag)?(a(),U(k(ue),{key:0,class:"installed-icon"})):B("",!0),O(" "+f($.name)+" ",1),$.name==="latest"&&l.value?(a(),_("span",bs," ("+f(l.value.actualTag)+") ",1)):B("",!0),e("span",hs,f($.size),1)],10,_s))),128)),z.value>5?(a(),_("span",ks," +"+f(z.value-5)+" more versions ",1)):B("",!0)])])),u.expanded?(a(),_("div",ws,[c(D,{columns:s,"data-source":r.value,pagination:!1,size:"small",scroll:{y:300},class:"tags-table"},{bodyCell:d(({column:$,record:S})=>[$.key==="name"?(a(),_("code",Cs,f(S.name),1)):B("",!0),$.key==="size"?(a(),_("span",{key:1,class:ne(["tag-size",u.getSizeClass(S.size)])},f(S.size),3)):B("",!0),$.key==="context"?(a(),_("span",$s,f(S.contextWindow),1)):B("",!0),$.key==="status"?(a(),_(H,{key:3},[v(S.fullTag)?(a(),U(M,{key:0,size:"small",color:"success"},{default:d(()=>[c(k(ue)),m[6]||(m[6]=O(" Installed "))]),_:1,__:[6]})):(a(),_("span",Ms,"-"))],64)):B("",!0),$.key==="actions"?(a(),U(E,{key:4,type:v(S.fullTag)?"default":"primary",size:"small",onClick:j=>u.$emit("pull-model",u.model.name,S.name),loading:y(S.fullTag),disabled:v(S.fullTag)},{default:d(()=>[i(S.fullTag)?(a(),_(H,{key:0},[O(f(Math.round(i(S.fullTag).percent))+"% ",1)],64)):v(S.fullTag)?(a(),_(H,{key:1},[c(k(ue)),m[7]||(m[7]=O(" Installed "))],64)):(a(),_(H,{key:2},[O(" Pull ")],64))]),_:2},1032,["type","onClick","loading","disabled"])):B("",!0)]),_:1},8,["data-source"])])):B("",!0)],2)}}}),Os=ce(zs,[["__scopeId","data-v-83727817"]]),Ss={class:"list-view"},Ts={class:"expanded-tags-container"},Ps={class:"expanded-tags-grid"},xs={class:"tag-name"},Bs={key:0,class:"tag-actual"},Es={class:"tag-size"},Ds={class:"tag-context"},Ls={key:0,class:"model-name-cell"},As={key:1,class:"description-cell"},Fs={key:2,class:"stats-cell"},Gs={class:"stat-item"},Is={class:"stat-item"},Us={key:0},Vs={key:3,class:"size-range"},Rs=de({__name:"OllamaModelList",props:{models:{},expandedModels:{},pullingModels:{},pullProgress:{},installedModels:{},maxSizeGB:{},showQuantized:{type:Boolean},isQuantizedTag:{type:Function},parseSizeToGB:{type:Function},getSizeClass:{type:Function},getLatestTagInfo:{type:Function},getModelSizeRange:{type:Function}},emits:["toggle-model","pull-model","expand"],setup(w){const t=w,s=[{title:"Model",key:"name",width:200,fixed:"left"},{title:"Description",key:"description",ellipsis:!0},{title:"Stats",key:"stats",width:200},{title:"Size Range",key:"sizeRange",width:120,align:"center"},{title:"Actions",key:"actions",width:220,align:"center",fixed:"right"}];function o(h){return h.tags?Object.entries(h.tags).map(([b,r])=>({...r,name:b})).filter(b=>!(t.maxSizeGB<999&&t.parseSizeToGB(b.size||"0GB")>t.maxSizeGB||!t.showQuantized&&t.isQuantizedTag(b.name))).sort((b,r)=>b.name.localeCompare(r.name)):[]}function p(h){return h.tags?Object.entries(h.tags).filter(([b,r])=>!(t.maxSizeGB<999&&t.parseSizeToGB(r.size||"0GB")>t.maxSizeGB||!t.showQuantized&&t.isQuantizedTag(b))).length:0}function C(h){return t.installedModels.some(b=>b.startsWith(h))}function P(h){return t.installedModels.includes(h)}function A(h){return t.installedModels.filter(b=>b.startsWith(h+":"))}return(h,b)=>{const r=T("a-tag"),z=T("a-button"),I=T("a-space"),v=T("a-table");return a(),_("div",Ss,[c(v,{"data-source":h.models,columns:s,pagination:!1,"row-key":y=>y.name,size:"small",scroll:{y:"calc(100% - 48px)"},"expanded-row-keys":h.expandedModels,"expand-row-by-click":!1,onExpand:b[0]||(b[0]=(y,i)=>h.$emit("expand",y,i)),class:"models-list-table"},{expandedRowRender:d(({record:y})=>[e("div",Ts,[e("div",Ps,[(a(!0),_(H,null,le(o(y),i=>{var l;return a(),_("div",{key:i.fullTag,class:ne(["expanded-tag-item",h.getSizeClass(i.size)])},[e("span",xs,f(i.name),1),i.name==="latest"&&h.getLatestTagInfo(y)?(a(),_("span",Bs," ("+f((l=h.getLatestTagInfo(y))==null?void 0:l.actualTag)+") ",1)):B("",!0),e("span",Es,f(i.size),1),e("span",Ds,f(i.contextWindow||"-"),1),P(i.fullTag)?(a(),U(r,{key:1,size:"small",color:"success"},{default:d(()=>[c(k(ue)),b[1]||(b[1]=O(" Installed "))]),_:1,__:[1]})):(a(),U(z,{key:2,type:"primary",size:"small",loading:h.pullingModels.has(i.fullTag),onClick:u=>h.$emit("pull-model",y.name,i.name)},{default:d(()=>[h.pullProgress[i.fullTag]?(a(),_(H,{key:0},[O(f(Math.round(h.pullProgress[i.fullTag].percent))+"% ",1)],64)):(a(),_(H,{key:1},[O(" Pull ")],64))]),_:2},1032,["loading","onClick"]))],2)}),128))])])]),bodyCell:d(({column:y,record:i})=>[y.key==="name"?(a(),_("div",Ls,[e("code",null,f(i.name),1),C(i.name)?(a(),U(r,{key:0,size:"small",color:"success"},{default:d(()=>[c(k(ue)),O(" "+f(A(i.name).length)+" installed ",1)]),_:2},1024)):B("",!0)])):B("",!0),y.key==="description"?(a(),_("span",As,f(i.description||"No description"),1)):B("",!0),y.key==="stats"?(a(),_("div",Fs,[e("span",Gs,f(i.pullCount||"0")+" pulls",1),b[3]||(b[3]=e("span",{class:"stat-divider"},"â€¢",-1)),e("span",Is,[O(f(p(i))+" ",1),h.maxSizeGB<999||!h.showQuantized?(a(),_("span",Us,"/"+f(i.tagCount||0),1)):B("",!0),b[2]||(b[2]=O(" versions "))])])):B("",!0),y.key==="sizeRange"?(a(),_("span",Vs,f(h.getModelSizeRange(i)),1)):B("",!0),y.key==="actions"?(a(),U(I,{key:4,size:"small"},{default:d(()=>[c(z,{type:"text",size:"small",onClick:l=>h.$emit("toggle-model",i.name)},{icon:d(()=>[h.expandedModels.includes(i.name)?(a(),U(k(He),{key:1})):(a(),U(k(Oe),{key:0}))]),default:d(()=>[O(" "+f(h.expandedModels.includes(i.name)?"Hide":"See")+" Versions ",1)]),_:2},1032,["onClick"]),c(z,{type:P(`${i.name}:latest`)||P(i.name)?"default":"primary",size:"small",onClick:l=>h.$emit("pull-model",i.name,"latest"),loading:h.pullingModels.has(`${i.name}:latest`),disabled:P(`${i.name}:latest`)||P(i.name)},{default:d(()=>[h.pullProgress[`${i.name}:latest`]?(a(),_(H,{key:0},[O(f(Math.round(h.pullProgress[`${i.name}:latest`].percent))+"% ",1)],64)):P(`${i.name}:latest`)||P(i.name)?(a(),U(k(ue),{key:1})):(a(),_(H,{key:2},[O(" Pull Latest ")],64))]),_:2},1032,["type","onClick","loading","disabled"])]),_:2},1024)):B("",!0)]),_:1},8,["data-source","row-key","expanded-row-keys"])])}}}),js=ce(Rs,[["__scopeId","data-v-7d1c26f3"]]);async function be(w,t={}){var h,b;const o=`http://localhost:11434${w}`,p=window.location.protocol==="https:",C=t.timeout||3e4,P=new AbortController,A=setTimeout(()=>P.abort(),C);try{const r=await fetch(o,{...t,signal:P.signal,headers:{"Content-Type":"application/json",...t.headers}});return clearTimeout(A),r}catch(r){clearTimeout(A);const z=new Error;throw z.isHttps=p,r.name==="AbortError"?(z.type="timeout",z.message="Request to Ollama timed out",z.details=`The request took longer than ${C/1e3} seconds`):(h=r.message)!=null&&h.includes("Failed to fetch")||(b=r.message)!=null&&b.includes("NetworkError")?p?(z.type="cors",z.message="Cannot connect to Ollama from HTTPS site",z.details="Browser security prevents HTTPS sites from accessing local HTTP services. To use Ollama: 1) Download the desktop app, 2) Run Auditomatic locally, or 3) Configure Ollama with OLLAMA_ORIGINS=*"):(z.type="network",z.message="Cannot connect to Ollama",z.details="Make sure Ollama is running on your computer (http://localhost:11434)"):(z.type="unknown",z.message=r.message||"Unknown error connecting to Ollama",z.details=r.stack),K.warn("Ollama fetch error",{type:z.type,endpoint:w,isHttps:p,originalError:r.message}),z}}async function Ns(){try{return{available:(await be("/api/tags",{timeout:5e3})).ok}}catch(w){return{available:!1,error:w}}}async function Hs(){var w,t;try{const o=await fetch("http://localhost:11434/api/tags",{method:"GET",headers:{Origin:window.location.origin,Accept:"application/json"},timeout:3e3});return{hasCORSIssue:!1,canConnect:!0}}catch(s){if((w=s.message)!=null&&w.includes("Failed to fetch")||(t=s.message)!=null&&t.includes("NetworkError"))try{const o=new Image,p=new Promise((C,P)=>{o.onload=()=>C("connected"),o.onerror=()=>P("cors_blocked"),o.src="http://localhost:11434/favicon.ico?"+Date.now()});return await Promise.race([p,new Promise((C,P)=>setTimeout(()=>P("timeout"),2e3))]),{hasCORSIssue:!0,canConnect:!0,error:"Ollama is running but CORS headers may not be configured for API requests"}}catch{return{hasCORSIssue:!1,canConnect:!1,error:"Cannot connect to Ollama - server may not be running"}}return{hasCORSIssue:!1,canConnect:!1,error:s.message||"Unknown connection error"}}}async function Qs(){const w=await be("/api/tags");if(!w.ok)throw new Error(`Failed to fetch models: ${w.status} ${w.statusText}`);return w.json()}async function qs(w){const t=await be("/api/delete",{method:"DELETE",body:JSON.stringify({name:w})});if(!t.ok)throw new Error(`Failed to delete model: ${t.status} ${t.statusText}`)}function Ks(){const w=x(null),t=x(!1),s=x(""),o=x(new Set),p=x({}),C=x([]);async function P(){t.value=!0,s.value="";try{const m=await fetch("https://ollama.models.auditomatic.org/models.json");if(!m.ok)throw new Error(`Failed to fetch models: ${m.statusText}`);w.value=await m.json(),await A()}catch(m){s.value=`Failed to load model library: ${m instanceof Error?m.message:"Unknown error"}`}finally{t.value=!1}}async function A(){try{const m=await be("/api/tags");if(m.ok){const M=await m.json();C.value=(M.models||[]).map(E=>E.name)}}catch(m){const M=m;M.type==="cors"&&M.isHttps&&K.debug("Cannot access Ollama from HTTPS site"),C.value=[]}}async function h(m,M,E){var $;const D=M==="latest"?m:`${m}:${M}`;if(!o.value.has(D)){o.value.add(D),p.value[D]={percent:0,status:"active",message:"Starting download..."};try{const S=await be("/api/pull",{method:"POST",body:JSON.stringify({name:D,stream:!0})});if(!S.ok)throw new Error(`Failed to pull model: ${S.statusText}`);const j=($=S.body)==null?void 0:$.getReader();if(!j)throw new Error("Unable to read response stream");let J=0,R=0;for(;;){const{done:X,value:pe}=await j.read();if(X)break;const ye=new TextDecoder().decode(pe).split(`
`).filter(oe=>oe.trim());for(const oe of ye)try{const F=JSON.parse(oe);F.total&&(J=F.total),F.completed&&(R=F.completed);const L=J>0?Math.round(R/J*100):0;if(p.value[D]={status:F.status==="success"?"success":"active",percent:L,message:F.status||"Downloading..."},F.status==="success"){ze.success(`Successfully pulled ${D}`),await A(),E==null||E(),setTimeout(()=>{delete p.value[D]},3e3);return}}catch{}}}catch(S){const j=S;let J=S instanceof Error?S.message:"Unknown error";j.type==="cors"&&j.isHttps&&(J="Cannot access Ollama from HTTPS site. Please use the desktop app or run locally."),ze.error(`Failed to pull ${D}: ${J}`),p.value[D]={status:"exception",percent:0,message:"Download failed"},setTimeout(()=>{delete p.value[D]},5e3)}finally{o.value.delete(D)}}}function b(m){const M=parseFloat(m.replace(/[^\d.]/g,""))||0,E=m.replace(/[\d.]/g,"").trim().toUpperCase();return E.includes("MB")?M/1e3:E.includes("TB")?M*1e3:(E.includes("GB"),M)}function r(m){return/-q\d{1,2}_|-fp\d+/.test(m)}function z(m){return C.value.some(M=>M.startsWith(m))}function I(m){return C.value.includes(m)}function v(m){return C.value.filter(M=>M.startsWith(m+":"))}function y(m){return m<1?`${Math.round(m*1e3)}MB`:`${m.toFixed(1)}GB`}function i(m){const M=b(m);return M<5?"size-small":M<20?"size-medium":"size-large"}function l(m){if(!m.tags)return"N/A";const M=Object.values(m.tags).map($=>b($.size||"0GB")).filter($=>$>0);if(M.length===0)return"N/A";const E=Math.min(...M),D=Math.max(...M);return E===D?y(E):`${y(E)} - ${y(D)}`}function u(m){if(!m.tags||!m.tags.latest)return null;const M=m.tags.latest,E=Object.entries(m.tags).find(([D,$])=>D!=="latest"&&$.modelHash===M.modelHash);return E?{actualTag:E[0],size:E[1].size||M.size}:{actualTag:"",size:M.size}}return{modelsData:w,loading:t,error:s,pullingModels:o,pullProgress:p,installedModels:C,fetchModels:P,fetchInstalledModels:A,pullModel:h,parseSizeToGB:b,isQuantizedTag:r,isModelInstalled:z,isTagInstalled:I,getInstalledTagsForModel:v,formatSizeGB:y,getSizeClass:i,getModelSizeRange:l,getLatestTagInfo:u}}const Ws={class:"modal-content"},Js={class:"stats-bar"},Xs={class:"view-controls"},Ys={key:0,class:"loading-text"},Zs={class:"models-container"},ea=de({__name:"OllamaModelLibraryModalV3",props:{modelValue:{type:Boolean}},emits:["update:modelValue","models-updated"],setup(w,{emit:t}){const s=w,o=t,{modelsData:p,loading:C,error:P,pullingModels:A,pullProgress:h,installedModels:b,fetchModels:r,pullModel:z,parseSizeToGB:I,isQuantizedTag:v,getSizeClass:y,getModelSizeRange:i,getLatestTagInfo:l}=Ks(),u=x(""),m=x("popularity"),M=x([]),E=x(8),D=x(!1),$=x("card"),S=x(new Set),j=V({get:()=>s.modelValue,set:F=>o("update:modelValue",F)}),J=V(()=>{var F;return((F=p.value)==null?void 0:F.totalModels)||0}),R=V(()=>{var F;return((F=p.value)==null?void 0:F.categories)||[]}),X=V(()=>{if(!p.value)return[];let F=Object.entries(p.value.models).map(([L,q])=>({...q,name:L}));if(u.value){const L=u.value.toLowerCase();F=F.filter(q=>q.name.toLowerCase().includes(L)||q.description.toLowerCase().includes(L))}switch(M.value.length>0&&(F=F.filter(L=>M.value.some(q=>(L.categories||[]).includes(q)))),E.value<999&&(F=F.filter(L=>L.tags?Object.values(L.tags).some(q=>I(q.size||"0GB")<=E.value):!0)),m.value){case"popularity":F.sort((L,q)=>{const ie=L.pullCount||"0",re=q.pullCount||"0",se=parseFloat(ie.replace(/[^\d.]/g,""))||0,ve=parseFloat(re.replace(/[^\d.]/g,""))||0,W=ie.includes("M")?1e6:ie.includes("K")?1e3:1,he=re.includes("M")?1e6:re.includes("K")?1e3:1;return ve*he-se*W});break;case"lastUpdated":F.sort((L,q)=>{const ie=L.lastUpdated?new Date(L.lastUpdated).getTime():0;return(q.lastUpdated?new Date(q.lastUpdated).getTime():0)-ie});break;case"name":F.sort((L,q)=>L.name.localeCompare(q.name));break;case"tagCount":F.sort((L,q)=>(q.tagCount||0)-(L.tagCount||0));break}return F});function pe(F){const L=M.value.indexOf(F);L===-1?M.value.push(F):M.value.splice(L,1)}function me(F){S.value.has(F)?S.value.delete(F):S.value.add(F)}function ye(F,L){F?S.value.add(L.name):S.value.delete(L.name)}async function oe(F,L){await z(F,L,()=>o("models-updated"))}return Mt(j,F=>{F&&!p.value&&r(),F||(S.value.clear(),u.value="",M.value=[],E.value=8,D.value=!1,P.value="")}),(F,L)=>{const q=T("a-button"),ie=T("a-button-group"),re=T("a-spin"),se=T("a-alert"),ve=T("a-modal");return a(),U(ve,{open:j.value,"onUpdate:open":L[7]||(L[7]=W=>j.value=W),title:"Ollama Model Library",width:"95vw",footer:null,destroyOnClose:!0,"wrap-class-name":"ollama-library-modal-full",class:"ollama-library-modal"},{default:d(()=>[e("div",Ws,[c(ss,{"search-query":u.value,"onUpdate:searchQuery":L[0]||(L[0]=W=>u.value=W),"sort-by":m.value,"onUpdate:sortBy":L[1]||(L[1]=W=>m.value=W),"max-size-g-b":E.value,"onUpdate:maxSizeGB":L[2]||(L[2]=W=>E.value=W),"show-quantized":D.value,"onUpdate:showQuantized":L[3]||(L[3]=W=>D.value=W),"selected-categories":M.value,categories:R.value,onToggleCategory:pe},null,8,["search-query","sort-by","max-size-g-b","show-quantized","selected-categories","categories"]),e("div",Js,[e("span",null,"Showing "+f(X.value.length)+" of "+f(J.value)+" models",1),e("div",Xs,[c(ie,{size:"small"},{default:d(()=>[c(q,{type:$.value==="card"?"primary":"default",onClick:L[4]||(L[4]=W=>$.value="card"),icon:Ge(k(Te)),title:"Card View"},null,8,["type","icon"]),c(q,{type:$.value==="list"?"primary":"default",onClick:L[5]||(L[5]=W=>$.value="list"),icon:Ge(k(Ze)),title:"List View"},null,8,["type","icon"])]),_:1}),k(C)?(a(),_("span",Ys,"Loading...")):B("",!0)])]),c(us,{"pull-progress":k(h)},null,8,["pull-progress"]),e("div",Zs,[c(re,{spinning:k(C),size:"large"},{default:d(()=>[$.value==="card"?(a(!0),_(H,{key:0},le(X.value,W=>(a(),U(Os,{key:W.name,model:W,expanded:S.value.has(W.name),"pulling-models":k(A),"pull-progress":k(h),"installed-models":k(b),"max-size-g-b":E.value,"show-quantized":D.value,"is-quantized-tag":k(v),"parse-size-to-g-b":k(I),"get-size-class":k(y),"get-latest-tag-info":k(l),onToggleExpand:he=>me(W.name),onPullModel:oe},null,8,["model","expanded","pulling-models","pull-progress","installed-models","max-size-g-b","show-quantized","is-quantized-tag","parse-size-to-g-b","get-size-class","get-latest-tag-info","onToggleExpand"]))),128)):B("",!0),$.value==="list"?(a(),U(js,{key:1,models:X.value,"expanded-models":Array.from(S.value),"pulling-models":k(A),"pull-progress":k(h),"installed-models":k(b),"max-size-g-b":E.value,"show-quantized":D.value,"is-quantized-tag":k(v),"parse-size-to-g-b":k(I),"get-size-class":k(y),"get-latest-tag-info":k(l),"get-model-size-range":k(i),onToggleModel:me,onPullModel:oe,onExpand:ye},null,8,["models","expanded-models","pulling-models","pull-progress","installed-models","max-size-g-b","show-quantized","is-quantized-tag","parse-size-to-g-b","get-size-class","get-latest-tag-info","get-model-size-range"])):B("",!0)]),_:1},8,["spinning"])]),k(P)?(a(),U(se,{key:0,type:"error",message:k(P),closable:"",onClose:L[6]||(L[6]=W=>P.value=""),class:"error-alert"},null,8,["message"])):B("",!0)])]),_:1},8,["open"])}}}),ta=ce(ea,[["__scopeId","data-v-96287dbe"]]),sa={class:"ollama-model-manager"},aa={class:"action-bar"},la={class:"models-section"},oa={key:0,class:"model-name"},na={key:1,class:"model-size"},ia={key:2,class:"model-date"},ra=de({__name:"OllamaModelManagerV3",setup(w){const t=x([]),s=x(!1),o=x(new Set),p=x(""),C=x(!1),P=[{title:"Model Name",key:"name",width:"40%"},{title:"Size",key:"size",width:"20%",align:"right"},{title:"Modified",key:"modified",width:"25%"},{title:"Actions",key:"actions",width:"15%",align:"center"}];async function A(){const v=await Ns();return!v.available&&v.error&&(v.error.type==="cors"&&v.error.isHttps?p.value=v.error.details||"Cannot connect to Ollama from HTTPS site":p.value=v.error.message),v.available}async function h(){try{const v=await Qs();t.value=v.models||[]}catch(v){const y=v;y.type==="cors"&&y.isHttps?p.value=y.details||"Cannot access Ollama from HTTPS site":p.value=`Failed to fetch models: ${v instanceof Error?v.message:"Unknown error"}`,t.value=[]}}async function b(v){o.value.add(v),p.value="";try{await qs(v),ze.success(`Successfully removed ${v}`),await r()}catch(y){const i=y;i.type==="cors"&&i.isHttps?p.value=i.details||"Cannot access Ollama from HTTPS site":p.value=`Failed to remove model: ${y instanceof Error?y.message:"Unknown error"}`}finally{o.value.delete(v)}}async function r(){s.value=!0,await h(),s.value=!1}function z(v){if(!v)return"0 B";const y=["B","KB","MB","GB","TB"],i=Math.floor(Math.log(v)/Math.log(1024));return`${(v/Math.pow(1024,i)).toFixed(1)} ${y[i]}`}function I(v){try{return new Date(v).toLocaleDateString()}catch{return"Unknown"}}return Se(async()=>{await A()?await r():p.value="Cannot connect to Ollama. Make sure Ollama is running on localhost:11434"}),(v,y)=>{const i=T("a-button"),l=T("a-tag"),u=T("a-popconfirm"),m=T("a-table"),M=T("a-empty"),E=T("a-alert");return a(),_("div",sa,[e("div",aa,[c(i,{type:"primary",onClick:y[0]||(y[0]=D=>C.value=!0)},{icon:d(()=>[c(k(Qe))]),default:d(()=>[y[3]||(y[3]=O(" Download Ollama Models "))]),_:1,__:[3]}),c(i,{onClick:r,loading:s.value},{icon:d(()=>[c(k(qe))]),default:d(()=>[y[4]||(y[4]=O(" Refresh "))]),_:1,__:[4]},8,["loading"])]),e("div",la,[y[7]||(y[7]=e("h4",{class:"section-title"},"Installed Models",-1)),c(m,{columns:P,"data-source":t.value,pagination:!1,size:"small",loading:s.value,"row-key":"name",class:"models-table"},{bodyCell:d(({column:D,record:$})=>{var S;return[D.key==="name"?(a(),_("div",oa,[e("code",null,f($.name),1),(S=$.details)!=null&&S.family?(a(),U(l,{key:0,size:"small",color:"blue"},{default:d(()=>[O(f($.details.family),1)]),_:2},1024)):B("",!0)])):B("",!0),D.key==="size"?(a(),_("span",na,f(z($.size)),1)):B("",!0),D.key==="modified"?(a(),_("span",ia,f(I($.modified_at)),1)):B("",!0),D.key==="actions"?(a(),U(u,{key:3,title:"Are you sure you want to delete this model?",description:`This will permanently remove ${$.name} from your system.`,"ok-text":"Delete","cancel-text":"Cancel",onConfirm:j=>b($.name)},{default:d(()=>[c(i,{type:"text",danger:"",size:"small",loading:o.value.has($.name)},{icon:d(()=>[c(k(Ke))]),default:d(()=>[y[5]||(y[5]=O(" Remove "))]),_:2,__:[5]},1032,["loading"])]),_:2},1032,["description","onConfirm"])):B("",!0)]}),_:1},8,["data-source","loading"]),!s.value&&t.value.length===0?(a(),U(M,{key:0,description:"No Ollama models installed",class:"empty-state"},{image:d(()=>y[6]||(y[6]=[e("div",{class:"empty-icon"},"ðŸ“¦",-1)])),_:1})):B("",!0)]),p.value?(a(),U(E,{key:0,type:"error",message:p.value,closable:"",onClose:y[1]||(y[1]=D=>p.value=""),class:"error-alert"},null,8,["message"])):B("",!0),c(ta,{modelValue:C.value,"onUpdate:modelValue":y[2]||(y[2]=D=>C.value=D),onModelsUpdated:r},null,8,["modelValue"])])}}}),ua=ce(ra,[["__scopeId","data-v-9a88ecb1"]]),da={class:"model-list"},ca={class:"model-header"},pa={class:"model-table"},ma=["onClick"],va={class:"model-name"},fa={class:"model-source"},ga={class:"model-context"},ya={key:0},_a={key:1,class:"text-secondary"},ba={key:0,class:"model-cost-in"},ha={key:0,class:"cost-value"},ka={key:1,class:"text-secondary"},wa={key:1,class:"model-cost-out"},Ca={key:0,class:"cost-value"},$a={key:1,class:"text-secondary"},Ma={class:"model-enviro-carbon"},za={class:"enviro-value"},Oa={class:"model-enviro-water"},Sa={class:"enviro-value"},Ta={class:"model-enviro-energy"},Pa={class:"enviro-value"},xa=de({__name:"ModelListV3",props:{models:{},providerId:{}},emits:["toggle-model"],setup(w){const t=w,s=We(),o=x("name"),p=x("asc"),C=V(()=>!t.models||t.models.length===0?[]:[...t.models].sort((z,I)=>{var y,i,l,u,m,M;let v=0;switch(o.value){case"enabled":v=(z.enabled?1:0)-(I.enabled?1:0);break;case"name":v=z.displayName.localeCompare(I.displayName);break;case"source":v=(z.source||"").localeCompare(I.source||"");break;case"context":const E=((y=z.capabilities)==null?void 0:y.contextWindow)||0,D=((i=I.capabilities)==null?void 0:i.contextWindow)||0;v=E-D;break;case"inputCost":const $=((l=z.capabilities)==null?void 0:l.inputCostPerToken)||0,S=((u=I.capabilities)==null?void 0:u.inputCostPerToken)||0;v=$-S;break;case"outputCost":const j=((m=z.capabilities)==null?void 0:m.outputCostPerToken)||0,J=((M=I.capabilities)==null?void 0:M.outputCostPerToken)||0;v=j-J;break}return p.value==="asc"?v:-v}));function P(b){o.value===b?p.value=p.value==="asc"?"desc":"asc":(o.value=b,p.value="asc")}function A(b){return b>=1e6?(b/1e6).toFixed(1)+"M":b>=1e3?(b/1e3).toFixed(0)+"K":b.toString()}function h(b){if(!b||b===0)return"0.00";const r=b*1e6;return r<.01?r.toFixed(4):r<1?r.toFixed(3):r<10?r.toFixed(2):r<100?r.toFixed(1):r.toFixed(0)}return(b,r)=>{const z=T("a-switch"),I=T("a-tag");return a(),_("div",da,[e("div",ca,[e("div",{class:"header-switch sortable",onClick:r[0]||(r[0]=v=>P("enabled"))},[r[7]||(r[7]=e("span",null,"Enabled",-1)),e("span",{class:ne(["sort-indicator",{active:o.value==="enabled"}])},f(o.value==="enabled"&&p.value==="asc"?"â–²":"â–¼"),3)]),e("div",{class:"header-name sortable",onClick:r[1]||(r[1]=v=>P("name"))},[r[8]||(r[8]=e("span",null,"Model",-1)),e("span",{class:ne(["sort-indicator",{active:o.value==="name"}])},f(o.value==="name"&&p.value==="asc"?"â–²":"â–¼"),3)]),e("div",{class:"header-source sortable",onClick:r[2]||(r[2]=v=>P("source"))},[r[9]||(r[9]=e("span",null,"Source",-1)),e("span",{class:ne(["sort-indicator",{active:o.value==="source"}])},f(o.value==="source"&&p.value==="asc"?"â–²":"â–¼"),3)]),e("div",{class:"header-context sortable",onClick:r[3]||(r[3]=v=>P("context"))},[r[10]||(r[10]=e("span",null,"Context",-1)),e("span",{class:ne(["sort-indicator",{active:o.value==="context"}])},f(o.value==="context"&&p.value==="asc"?"â–²":"â–¼"),3)]),k(s).showFinancialCosts.value?(a(),_("div",{key:0,class:"header-cost-in sortable",onClick:r[4]||(r[4]=v=>P("inputCost"))},[r[11]||(r[11]=e("span",null,"Input $/1M",-1)),e("span",{class:ne(["sort-indicator",{active:o.value==="inputCost"}])},f(o.value==="inputCost"&&p.value==="asc"?"â–²":"â–¼"),3)])):B("",!0),k(s).showFinancialCosts.value?(a(),_("div",{key:1,class:"header-cost-out sortable",onClick:r[5]||(r[5]=v=>P("outputCost"))},[r[12]||(r[12]=e("span",null,"Output $/1M",-1)),e("span",{class:ne(["sort-indicator",{active:o.value==="outputCost"}])},f(o.value==="outputCost"&&p.value==="asc"?"â–²":"â–¼"),3)])):B("",!0),r[13]||(r[13]=e("div",{class:"header-enviro-carbon"},[e("span",null,"COâ‚‚")],-1)),r[14]||(r[14]=e("div",{class:"header-enviro-water"},[e("span",null,"ðŸ’§")],-1)),r[15]||(r[15]=e("div",{class:"header-enviro-energy"},[e("span",null,"âš¡")],-1))]),e("div",pa,[(a(!0),_(H,null,le(C.value,v=>{var y,i,l;return a(),_("div",{key:v.id,class:"model-row",onClick:u=>b.$emit("toggle-model",v.id,!v.enabled)},[e("div",{class:"model-switch",onClick:r[6]||(r[6]=ge(()=>{},["stop"]))},[c(z,{checked:v.enabled,size:"small",onChange:u=>b.$emit("toggle-model",v.id,u),"data-testid":"model-toggle","data-provider":v.provider,"data-model":v.modelId,"aria-label":`${v.enabled?"Disable":"Enable"} model ${v.modelId}`},null,8,["checked","onChange","data-provider","data-model","aria-label"])]),e("div",va,[e("code",null,f(v.modelId),1)]),e("div",fa,[v.source?(a(),U(I,{key:0,size:"small",color:"cyan"},{default:d(()=>[O(f(v.source),1)]),_:2},1024)):B("",!0)]),e("div",ga,[(y=v.capabilities)!=null&&y.contextWindow?(a(),_("span",ya,f(A(v.capabilities.contextWindow)),1)):(a(),_("span",_a,"-"))]),k(s).showFinancialCosts.value?(a(),_("div",ba,[(i=v.capabilities)!=null&&i.inputCostPerToken?(a(),_("span",ha," $"+f(h(v.capabilities.inputCostPerToken)),1)):(a(),_("span",ka,"-"))])):B("",!0),k(s).showFinancialCosts.value?(a(),_("div",wa,[(l=v.capabilities)!=null&&l.outputCostPerToken?(a(),_("span",Ca," $"+f(h(v.capabilities.outputCostPerToken)),1)):(a(),_("span",$a,"-"))])):B("",!0),e("div",Ma,[e("span",za,f(k(s).getEnvironmentalCost(v,"carbon")),1)]),e("div",Oa,[e("span",Sa,f(k(s).getEnvironmentalCost(v,"water")),1)]),e("div",Ta,[e("span",Pa,f(k(s).getEnvironmentalCost(v,"energy")),1)])],8,ma)}),128))])])}}}),Ba=ce(xa,[["__scopeId","data-v-f51d3c44"]]),Ea={class:"model-preference-manager"},Da={class:"preferences-section"},La={class:"action-group"},Aa={class:"action-group"},Fa={class:"status-grid"},Ga={class:"status-item"},Ia={class:"status-value"},Ua={class:"status-item"},Va={class:"status-value"},Ra={class:"status-item"},ja={class:"status-value"},Na={class:"status-item"},Ha={class:"status-value"},Qa={class:"status-item"},qa={class:"status-value"},Ka={class:"status-item"},Wa={class:"status-value"},Ja={class:"action-group"},Xa={class:"provider-grid"},Ya={class:"provider-name"},Za={class:"provider-stats"},el={class:"provider-total"},tl={class:"provider-enabled"},sl=de({__name:"ModelPreferenceManagerV3",setup(w){const{models:t,enabledModels:s,modelsByProvider:o,showFinancialCosts:p,showEnvironmentalCosts:C}=Xe(),{discoveryStatus:P}=et(),A=We(),h=x([]),b=x(!1),r=x(!1),z=x(""),I=x("");async function v(){b.value=!0,z.value="";try{const i=await A.exportModelPreferences();if(i.ok){const l=new Blob([JSON.stringify(i.value,null,2)],{type:"application/json"}),u=URL.createObjectURL(l),m=document.createElement("a");m.href=u,m.download=`model-preferences-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(m),m.click(),document.body.removeChild(m),URL.revokeObjectURL(u),I.value="Model preferences exported successfully!"}else z.value=i.error.message}catch(i){z.value=`Failed to export preferences: ${i instanceof Error?i.message:"Unknown error"}`}finally{b.value=!1}}async function y(i){r.value=!0,z.value="";try{const l=await i.text(),u=JSON.parse(l),m=await A.importModelPreferences(u);m.ok?I.value="Model preferences imported successfully!":z.value=m.error.message}catch(l){l instanceof SyntaxError?z.value="Invalid JSON file format":z.value=`Failed to import preferences: ${l instanceof Error?l.message:"Unknown error"}`}finally{r.value=!1}return!1}return(i,l)=>{const u=T("a-button"),m=T("a-upload"),M=T("a-space"),E=T("a-divider"),D=T("a-alert"),$=T("a-collapse-panel"),S=T("a-collapse");return a(),_("div",Ea,[c(S,{activeKey:h.value,"onUpdate:activeKey":l[2]||(l[2]=j=>h.value=j),bordered:!1,class:"preferences-collapse"},{default:d(()=>[c($,{key:"preferences"},{header:d(()=>l[3]||(l[3]=[e("div",{class:"preferences-header"},[e("strong",null,"ðŸ”§ V3 Enhanced Features"),e("span",{class:"preferences-description"},"Advanced model preference management")],-1)])),default:d(()=>{var j,J,R;return[e("div",Da,[e("div",La,[l[6]||(l[6]=e("h5",{class:"action-title"},"Model Preferences",-1)),l[7]||(l[7]=e("p",{class:"action-description"}," Export and import your model enabled/disabled preferences for backup or sharing. ",-1)),c(M,null,{default:d(()=>[c(u,{onClick:v,loading:b.value,type:"primary"},{icon:d(()=>[c(k(Qe))]),default:d(()=>[l[4]||(l[4]=O(" Export Preferences "))]),_:1,__:[4]},8,["loading"]),c(m,{"before-upload":y,"show-upload-list":!1,accept:".json"},{default:d(()=>[c(u,{loading:r.value},{icon:d(()=>[c(k(Pe))]),default:d(()=>[l[5]||(l[5]=O(" Import Preferences "))]),_:1,__:[5]},8,["loading"])]),_:1})]),_:1})]),c(E),e("div",Aa,[l[14]||(l[14]=e("h5",{class:"action-title"},"V3 System Information",-1)),l[15]||(l[15]=e("p",{class:"action-description"}," Enhanced V3 backend capabilities and status. ",-1)),e("div",Fa,[e("div",Ga,[l[8]||(l[8]=e("span",{class:"status-label"},"Total Models:",-1)),e("span",Ia,f(((j=k(t))==null?void 0:j.length)||0),1)]),e("div",Ua,[l[9]||(l[9]=e("span",{class:"status-label"},"Enabled Models:",-1)),e("span",Va,f(((J=k(s))==null?void 0:J.length)||0),1)]),e("div",Ra,[l[10]||(l[10]=e("span",{class:"status-label"},"Active Providers:",-1)),e("span",ja,f(Object.keys(k(o)||{}).length),1)]),e("div",Na,[l[11]||(l[11]=e("span",{class:"status-label"},"Discovery Sources:",-1)),e("span",Ha,f(((R=k(P))==null?void 0:R.length)||0),1)]),e("div",Qa,[l[12]||(l[12]=e("span",{class:"status-label"},"Cost Display:",-1)),e("span",qa,f(k(p)?"Enabled":"Disabled"),1)]),e("div",Ka,[l[13]||(l[13]=e("span",{class:"status-label"},"Environmental Display:",-1)),e("span",Wa,f(k(C)?"Enabled":"Disabled"),1)])])]),c(E),e("div",Ja,[l[16]||(l[16]=e("h5",{class:"action-title"},"Provider Status",-1)),l[17]||(l[17]=e("p",{class:"action-description"}," Real-time provider status and model counts. ",-1)),e("div",Xa,[(a(!0),_(H,null,le(k(o),(X,pe)=>(a(),_("div",{key:pe,class:"provider-item"},[e("div",Ya,f(k(A).getProviderDisplayName(pe)),1),e("div",Za,[e("span",el,f(X.length)+" total",1),e("span",tl,f(X.filter(me=>me.enabled).length)+" enabled",1)])]))),128))])])]),z.value?(a(),U(D,{key:0,type:"error",message:z.value,closable:"",onClose:l[0]||(l[0]=X=>z.value=""),class:"error-alert"},null,8,["message"])):B("",!0),I.value?(a(),U(D,{key:1,type:"success",message:I.value,closable:"",onClose:l[1]||(l[1]=X=>I.value=""),class:"success-alert"},null,8,["message"])):B("",!0)]}),_:1})]),_:1},8,["activeKey"])])}}}),al=ce(sl,[["__scopeId","data-v-65aaac20"]]),ll={key:0,class:"loading-state"},ol={key:1,class:"error-state"},nl={class:"error-message"},il=["onClick"],rl={class:"list-header"},ul={class:"list-info"},dl={class:"list-name"},cl={class:"list-meta"},pl={class:"list-actions"},ml={class:"list-description"},vl={class:"list-preview"},fl={key:0,class:"more-models"},gl=de({__name:"ModelListsDropdownV3",props:{currentModels:{},isLoading:{type:Boolean,default:!1}},emits:["apply-list","close"],setup(w,{emit:t}){const s=w,o=t,{getProviderGroup:p}=Ye(),C=x([]),P=x(!0),A=x(""),h=x(!1),b=x("");Se(async()=>{try{P.value=!0,A.value="";const{getModelListManager:i}=await Je(async()=>{const{getModelListManager:m}=await import("./index-WXAkW4LC.js").then(M=>M.a$);return{getModelListManager:m}},__vite__mapDeps([0,1])),u=await i().getLists();C.value=u.filter(m=>["openrouter-favorites","cost-efficient","high-performance"].includes(m.id)),K.info("Model lists loaded:",{lists:C.value.length})}catch(i){K.error("Failed to load model lists:",i),A.value="Failed to load model lists"}finally{P.value=!1}});function r(i){return s.currentModels.some(l=>l.modelId!==i.modelId?!1:i.provider?l.provider===i.provider&&l.enabled:i.providerGroup?p(l.provider)===i.providerGroup&&l.enabled:!1)}function z(i){return i.models.slice(0,3)}function I(i){return i.modelId.replace(/^.*\//,"").replace(/-instruct$/,"").replace(/-preview$/,"")}async function v(i){if(!(h.value||s.isLoading))try{h.value=!0,b.value=i,await new Promise((l,u)=>{o("apply-list",i),setTimeout(()=>{l()},2e3)})}catch(l){K.error("Failed to apply list:",l)}finally{h.value=!1,b.value=""}}function y(i){var l;(l=i.domEvent)==null||l.stopPropagation()}return(i,l)=>{const u=T("a-spin"),m=T("a-button"),M=T("a-menu-item"),E=T("a-menu-divider"),D=T("a-tag"),$=T("a-menu");return a(),U($,{class:"model-lists-menu",onClick:y},{default:d(()=>[P.value?(a(),_("div",ll,[c(u,{size:"small"}),l[0]||(l[0]=e("span",null,"Loading model lists...",-1))])):A.value?(a(),_("div",ol,[e("span",nl,f(A.value),1)])):(a(),_(H,{key:2},[l[6]||(l[6]=e("div",{class:"menu-header"},[e("span",null,"Built-in Lists")],-1)),(a(!0),_(H,null,le(C.value,S=>(a(),U(M,{key:S.id,class:"list-menu-item"},{default:d(()=>[e("div",{class:"list-item",onClick:j=>v(S.id)},[e("div",rl,[e("div",ul,[e("span",dl,f(S.name),1),e("span",cl,f(S.models.length)+" models",1)]),e("div",pl,[c(m,{type:"primary",size:"small",loading:h.value&&b.value===S.id,onClick:ge(j=>v(S.id),["stop"])},{default:d(()=>l[1]||(l[1]=[O(" Apply ")])),_:2,__:[1]},1032,["loading","onClick"])])]),e("div",ml,f(S.description),1),e("div",vl,[(a(!0),_(H,null,le(z(S),(j,J)=>(a(),_("span",{key:`${j.provider||j.providerGroup}-${j.modelId}`,class:ne(["preview-model",{enabled:r(j)}])},f(I(j))+f(J<z(S).length-1?", ":""),3))),128)),S.models.length>3?(a(),_("span",fl," +"+f(S.models.length-3)+" more ",1)):B("",!0)])],8,il)]),_:2},1024))),128)),c(E),c(M,{disabled:"",class:"future-feature"},{default:d(()=>[c(k(Ft)),l[3]||(l[3]=e("span",null,"Save Current Selection...",-1)),c(D,{color:"blue",size:"small"},{default:d(()=>l[2]||(l[2]=[O("Soon")])),_:1,__:[2]})]),_:1,__:[3]}),c(M,{disabled:"",class:"future-feature"},{default:d(()=>[c(k(zt)),l[5]||(l[5]=e("span",null,"Manage Lists...",-1)),c(D,{color:"blue",size:"small"},{default:d(()=>l[4]||(l[4]=[O("Soon")])),_:1,__:[4]})]),_:1,__:[5]})],64))]),_:1})}}}),yl=ce(gl,[["__scopeId","data-v-e613a393"]]),_l={class:"models-view","data-testid":"page-models"},bl={class:"page-header"},hl={class:"ollama-cors-message"},kl={class:"cors-help"},wl={key:3,class:"discovery-status-bar"},Cl={class:"source-name"},$l=["onClick","data-testid","aria-label"],Ml={class:"search-filter-bar"},zl={class:"control-bar"},Ol={class:"left-controls"},Sl={class:"stats"},Tl={class:"provider-header"},Pl={class:"provider-info"},xl={key:1,class:"provider-summary"},Bl=de({__name:"ModelsViewV3",setup(w){const t=Lt(),{models:s,modelsByProvider:o,stats:p}=Xe(),{getProviderGroup:C,requiresApiKey:P}=Ye(),{hasApiKey:A}=Ot(),{discoverModels:h,refreshDiscoverySource:b,toggleModel:r,toggleAllModels:z,toggleProviderModels:I,clearAllModels:v,isDiscovering:y,isTogglingModels:i}=Ht(),{discoveryStatus:l,getSourceDisplayName:u,getProviderDisplayName:m,refreshStatus:M}=et(),E=x(""),D=x(""),$=x("all"),S=x(!1),j=V(()=>{const g={};return Object.keys(o.value||{}).forEach(n=>{const G=C(n),Y=P(n),te=A(G);g[n]={hasKey:te,providerGroup:G,requiresKey:Y}}),g}),J=x(!1),R=x(""),X=x([]),pe=x(null),me=x([]),ye=x(!1),oe=x(null),F=x(!1),L=x(!1);let q=null;const ie=g=>{q&&clearTimeout(q),q=setTimeout(()=>{D.value=g},300)},re=V(()=>{const g={};for(const[n,G]of Object.entries(o.value))g[n]=G.filter(Y=>Y.enabled).length;return g}),se=x([]),ve=V(()=>{const g=D.value.toLowerCase(),n={},G=Object.keys(o.value);if(se.value.length===0||G.some(Y=>!se.value.includes(Y))){const Y=se.value.filter(Z=>G.includes(Z)),te=G.filter(Z=>!se.value.includes(Z)).sort();se.value=[...Y,...te]}for(const Y of se.value){const te=o.value[Y];if(!te)continue;let Z=[...te];g&&(Z=Z.filter(fe=>fe.displayName.toLowerCase().includes(g)||fe.modelId.toLowerCase().includes(g)||Y.toLowerCase().includes(g))),$.value==="enabled"?Z=Z.filter(fe=>fe.enabled):$.value==="disabled"&&(Z=Z.filter(fe=>!fe.enabled)),Z.length>0&&(n[Y]=Z)}return n}),W=V(()=>{const g=p.value.total;return K.info("ModelsViewV3 V4 totalCount:",g),g}),he=V(()=>p.value.enabled),tt=V(()=>E.value?`No models found matching "${E.value}"`:$.value!=="all"?`No ${$.value} models found`:'No models available. Click "Refresh Models" to discover models.'),we=V(()=>{if(!R.value)return!1;const g=R.value.toLowerCase();return g.includes("ollama")&&(g.includes("failed to fetch")||g.includes("networkerror when attempting to fetch"))&&!g.includes("litellm")&&!g.includes("openrouter")}),st=V(()=>{var G,Y;const g=((G=o.value["ollama-chat"])==null?void 0:G.length)>0||((Y=o.value["ollama-generate"])==null?void 0:Y.length)>0,n=l.value.some(te=>te.id==="ollama");return g||n||we.value});V(()=>!!o.value.openrouter);const Ce=V(()=>{const g=se.value.length;return X.value.length===g&&g>0}),at=Ie(St),lt=Ie(Tt);function ot(g){return{idle:"default",loading:"processing",success:"success",error:"error"}[g]||"default"}function nt(g){return re.value[g]||0}function it(g){const n=nt(g),G=(o.value[g]||[]).length;return n===0?"default":n===G?"success":"warning"}function rt(g){const n=ve.value[g]||[];return n.length>0&&n.every(G=>G.enabled)}function ut(g){const n=ve.value[g]||[];return n.length>0&&n.every(G=>!G.enabled)}function dt(g){t.push({path:"/settings",query:g?{provider:g}:void 0})}function ct(){Ce.value?X.value=[]:X.value=[...se.value]}async function pt(g,n){const G=await r(g,n);G.ok||(R.value=G.error.message)}async function xe(g,n){const G=await I(g,n);G.ok||(R.value=G.error.message)}async function mt(){const g=await z(!0);g.ok||(R.value=g.error.message)}async function vt(){const g=await z(!1);g.ok||(R.value=g.error.message)}async function $e(){S.value=!0,R.value="";try{K.info("V4 DEBUG: Starting discovery...");const g=await h({forceRefresh:!0});K.info("V4 DEBUG: Discovery result:",g),g.ok?(K.info("V4 DEBUG: Discovery successful, models found:",g.value.totalModels),K.info("V4 DEBUG: After discovery, models.value.length =",s.value.length),g.value.errors.length>0&&(R.value=`Some sources failed: ${g.value.errors.join("; ")}`)):(K.info("V4 DEBUG: Discovery failed:",g.error),R.value=`Discovery failed: ${g.error.message}`),M()}catch(g){K.error("Failed to refresh models",g),R.value="Failed to refresh models. Please check your connection and try again."}finally{S.value=!1}}async function ft(g){pe.value=g,R.value="";try{const n=await b(g);n.ok&&n.value.errors.length>0?R.value=`Failed to refresh ${u(g)}: ${n.value.errors.join("; ")}`:n.ok||(R.value=`Failed to refresh ${u(g)}: ${n.error.message}`),M()}catch(n){K.error("Failed to retry source",n,{sourceId:g}),R.value=`Failed to refresh ${u(g)}: ${n instanceof Error?n.message:"Unknown error"}`}finally{pe.value=null}}async function gt(){try{await b("ollama"),M(),Be()}catch(g){K.error("Failed to refresh Ollama models after update",g)}}async function Be(){try{const g=await Hs();g.hasCORSIssue&&g.canConnect?oe.value=g.error||"CORS configuration issue detected":oe.value=null}catch(g){K.debug("CORS check failed",g)}}async function yt(){if(confirm("This will remove all models and re-discover them from scratch. Any custom model configurations will be lost. Continue?")){J.value=!0,R.value="";try{const n=await v();if(!n.ok){R.value=n.error.message;return}const G=await h({forceRefresh:!0});G.ok&&G.value.errors.length>0?R.value=`Some sources failed: ${G.value.errors.join("; ")}`:G.ok||(R.value=`Discovery failed: ${G.error.message}`),M()}catch(n){K.error("Failed to clear and refresh models",n),R.value="Failed to clear and refresh models. Please check your connection and try again."}finally{J.value=!1}}}async function _t(g){try{K.info("Applying model list:",g);const{getModelListManager:n}=await Je(async()=>{const{getModelListManager:te}=await import("./index-WXAkW4LC.js").then(Z=>Z.a$);return{getModelListManager:te}},__vite__mapDeps([0,1])),Y=await n().applyList(g);K.info("Model list applied:",Y),await $e()}catch(n){K.error("Failed to apply model list:",n),R.value=`Failed to apply model list: ${n instanceof Error?n.message:"Unknown error"}`}}Pt(()=>{ie(E.value)});const ae=V(()=>i.value);return Se(async()=>{K.info("V4 DEBUG: models.value.length =",s.value.length),K.info("V4 DEBUG: models.value =",s.value),K.info("V4 DEBUG: modelsByProvider.value =",o.value),s.value.length===0&&(K.info("V4 DEBUG: No models found, refreshing..."),$e()),X.value=[],Be()}),xt(()=>{E.value="",X.value=[],R.value=""}),(g,n)=>{const G=T("a-button"),Y=T("a-space"),te=T("a-alert"),Z=T("a-tag"),fe=T("a-input-search"),Me=T("a-radio-button"),bt=T("a-radio-group"),ht=T("a-divider"),kt=T("a-dropdown"),wt=T("a-tooltip"),Ee=T("a-collapse-panel"),De=T("a-collapse"),Ct=T("a-empty");return a(),_("div",_l,[e("div",bl,[n[12]||(n[12]=e("div",{class:"header-content"},[e("h1",null,"Model Management"),e("p",{class:"description"},"Configure and enable LLM models for testing")],-1)),c(Y,null,{default:d(()=>[c(G,{type:"primary",onClick:$e,loading:S.value||k(y),"data-testid":"btn-refresh-models","aria-label":"Refresh available models"},{icon:d(()=>[c(k(qe))]),default:d(()=>[n[10]||(n[10]=O(" Refresh Models "))]),_:1,__:[10]},8,["loading"]),c(G,{danger:"",onClick:yt,loading:J.value,"data-testid":"btn-clear-refresh-models","aria-label":"Clear all models and refresh"},{icon:d(()=>[c(k(Ke))]),default:d(()=>[n[11]||(n[11]=O(" Clear and Refresh Models "))]),_:1,__:[11]},8,["loading"])]),_:1})]),R.value&&!we.value?(a(),U(te,{key:0,type:"error",message:R.value,closable:"",onClose:n[0]||(n[0]=N=>R.value=""),class:"error-alert"},null,8,["message"])):B("",!0),we.value?(a(),U(te,{key:1,type:"info",closable:"",onClose:n[1]||(n[1]=N=>R.value=""),class:"ollama-info-alert"},{message:d(()=>n[13]||(n[13]=[e("div",{class:"ollama-message"},[O(" Ollama is not running on this computer. To audit local LLMs, install "),e("a",{href:"https://ollama.com",target:"_blank",rel:"noopener noreferrer"},"Ollama"),O(". ")],-1)])),_:1})):B("",!0),oe.value?(a(),U(te,{key:2,type:"warning",closable:"",onClose:n[3]||(n[3]=N=>oe.value=null),class:"ollama-cors-alert"},{message:d(()=>[e("div",hl,[n[14]||(n[14]=e("strong",null,"Ollama CORS Configuration Issue",-1)),n[15]||(n[15]=e("br",null,null,-1)),n[16]||(n[16]=O(" Ollama is running but not configured to allow browser requests. Add ")),n[17]||(n[17]=e("code",null,"OLLAMA_ORIGINS=*",-1)),n[18]||(n[18]=O(" to your Ollama service configuration. ")),e("div",kl,[e("a",{href:"#",onClick:n[2]||(n[2]=ge(N=>F.value=!0,["prevent"]))},"Show setup instructions")])])]),_:1})):B("",!0),k(l).length>0?(a(),_("div",wl,[n[19]||(n[19]=e("span",{class:"status-label"},"Sources:",-1)),(a(!0),_(H,null,le(k(l),N=>(a(),_("div",{key:N.id,class:"source-status-compact"},[e("span",Cl,f(k(u)(N.id)),1),c(Z,{color:ot(N.status),size:"small"},{default:d(()=>[N.status==="success"&&N.modelCount?(a(),_(H,{key:0},[O(f(N.modelCount),1)],64)):N.status==="error"?(a(),_("span",{key:1,onClick:ee=>ft(N.id),style:{cursor:"pointer"},"data-testid":`retry-source-${N.id}`,"aria-label":`Retry loading models from ${k(u)(N.id)}`},"âŸ³ retry",8,$l)):(a(),_(H,{key:2},[O(f(N.status),1)],64))]),_:2},1032,["color"])]))),128))])):B("",!0),e("div",Ml,[c(fe,{value:E.value,"onUpdate:value":n[4]||(n[4]=N=>E.value=N),placeholder:"Search models by name, provider, or ID...","allow-clear":"",size:"large",class:"search-input","data-testid":"input-model-search","aria-label":"Search models",loading:E.value!==D.value},null,8,["value","loading"]),c(bt,{value:$.value,"onUpdate:value":n[5]||(n[5]=N=>$.value=N),"button-style":"solid",size:"large"},{default:d(()=>[c(Me,{value:"all"},{default:d(()=>n[20]||(n[20]=[O("All")])),_:1,__:[20]}),c(Me,{value:"enabled"},{default:d(()=>n[21]||(n[21]=[O("Enabled")])),_:1,__:[21]}),c(Me,{value:"disabled"},{default:d(()=>n[22]||(n[22]=[O("Disabled")])),_:1,__:[22]})]),_:1},8,["value"])]),e("div",zl,[e("div",Ol,[c(G,{type:"text",size:"small",onClick:ct},{icon:d(()=>[(a(),U(Bt(Ce.value?lt.value:at.value)))]),default:d(()=>[O(" "+f(Ce.value?"Collapse All":"Expand All"),1)]),_:1}),c(ht,{type:"vertical"}),c(G,{type:"text",size:"small",onClick:mt,loading:ae.value,disabled:ae.value},{icon:d(()=>[c(k(ue))]),default:d(()=>[n[23]||(n[23]=O(" Enable All "))]),_:1,__:[23]},8,["loading","disabled"]),c(G,{type:"text",size:"small",onClick:vt,loading:ae.value,disabled:ae.value},{icon:d(()=>[c(k(Ue))]),default:d(()=>[n[24]||(n[24]=O(" Disable All "))]),_:1,__:[24]},8,["loading","disabled"]),c(kt,{open:L.value,"onUpdate:open":n[7]||(n[7]=N=>L.value=N),placement:"bottomLeft",disabled:ae.value},{overlay:d(()=>[c(yl,{"current-models":Array.from(k(s)),"is-loading":ae.value,onApplyList:_t,onClose:n[6]||(n[6]=N=>L.value=!1)},null,8,["current-models","is-loading"])]),default:d(()=>[c(G,{type:"text",size:"small",loading:ae.value,disabled:ae.value},{icon:d(()=>[c(k(Ze))]),default:d(()=>[n[25]||(n[25]=O(" Model Lists ")),c(k(Oe))]),_:1,__:[25]},8,["loading","disabled"])]),_:1},8,["open","disabled"])]),e("div",Sl,[e("span",null,f(he.value)+" of "+f(W.value)+" models enabled",1)])]),c(De,{activeKey:X.value,"onUpdate:activeKey":n[8]||(n[8]=N=>X.value=N),bordered:!1,class:"provider-collapse",destroyInactivePanel:!1},{default:d(()=>[(a(!0),_(H,null,le(ve.value,(N,ee)=>(a(),U(Ee,{key:`provider-${ee}`},{header:d(()=>{var Le,Ae;return[e("div",Tl,[e("div",Pl,[e("strong",null,f(k(m)(ee)),1),(Le=j.value[ee])!=null&&Le.requiresKey&&!((Ae=j.value[ee])!=null&&Ae.hasKey)?(a(),U(wt,{key:0,placement:"top"},{title:d(()=>{var _e;return[O(" API key not set for "+f((_e=j.value[ee])==null?void 0:_e.providerGroup)+". Click to add in settings. ",1)]}),default:d(()=>[c(G,{type:"link",danger:"",size:"small",onClick:ge(_e=>{var Fe;return dt((Fe=j.value[ee])==null?void 0:Fe.providerGroup)},["stop"])},{icon:d(()=>[c(k(Dt))]),default:d(()=>[n[26]||(n[26]=O(" API Key Missing "))]),_:2,__:[26]},1032,["onClick"])]),_:2},1024)):B("",!0),X.value.includes(ee)?(a(),_(H,{key:2},[c(Z,{size:"small",color:"blue"},{default:d(()=>[O(f(N.length)+" models",1)]),_:2},1024),c(Z,{size:"small",color:it(ee)},{default:d(()=>[O(f(re.value[ee]||0)+" enabled ",1)]),_:2},1032,["color"])],64)):(a(),_("span",xl,f(re.value[ee]||0)+" / "+f((k(o)[ee]||[]).length)+" enabled ",1))]),c(Y,{size:"small"},{default:d(()=>[c(G,{type:"text",size:"small",onClick:ge(_e=>xe(ee,!0),["stop"]),disabled:rt(ee)||ae.value,loading:ae.value},{icon:d(()=>[c(k(ue))]),default:d(()=>[n[27]||(n[27]=O(" Enable All "))]),_:2,__:[27]},1032,["onClick","disabled","loading"]),c(G,{type:"text",size:"small",onClick:ge(_e=>xe(ee,!1),["stop"]),disabled:ut(ee)||ae.value,loading:ae.value},{icon:d(()=>[c(k(Ue))]),default:d(()=>[n[28]||(n[28]=O(" Disable All "))]),_:2,__:[28]},1032,["onClick","disabled","loading"])]),_:2},1024)])]}),default:d(()=>[(a(),U(Et,null,[c(Ba,{models:N,"provider-id":ee,onToggleModel:pt},null,8,["models","provider-id"])],1024))]),_:2},1024))),128))]),_:1},8,["activeKey"]),Object.keys(ve.value).length===0?(a(),U(Ct,{key:4,description:tt.value,class:"empty-state"},null,8,["description"])):B("",!0),st.value?(a(),U(De,{key:5,activeKey:me.value,"onUpdate:activeKey":n[9]||(n[9]=N=>me.value=N),bordered:!1,class:"ollama-manager-collapse"},{default:d(()=>[c(Ee,{key:"ollama"},{header:d(()=>n[29]||(n[29]=[e("div",{class:"ollama-header"},[e("strong",null,"Ollama Model Management"),e("span",{class:"ollama-description"},"Download and manage local Ollama models")],-1)])),default:d(()=>[c(ua,{onModelsUpdated:gt})]),_:1})]),_:1},8,["activeKey"])):B("",!0),ye.value?(a(),U(al,{key:6,class:"enhanced-features"})):B("",!0)])}}}),Ul=ce(Bl,[["__scopeId","data-v-5618cd31"]]);export{Ul as default};
