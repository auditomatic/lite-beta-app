const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./PythonExportModal.vue_vue_type_style_index_0_lang-BKaFWCp2.js","./vendor-DImCB_rW.js","./index-Dynr8V5n.js","./db-CL8uhZCz.js","./index-lzLChbdF.css","./BaseModal.vue_vue_type_style_index_0_lang-D3rbY83j.js","./BaseModal-DbTyIa7L.css","./designs-db-b5FxS9e9.js","./defaultData-BR5V2V3r.js","./variable.service-DGu7U4d3.js","./variables-db-DLw3DExB.js","./models-db-ClcV8tSQ.js","./useEnvironmentalCost-CfIURcPO.js","./cost-formatting-Bv_drrqY.js","./GenericModelSelectorModal-B1wj_vmD.js","./GenericModelSelectorModal-DrDcF-66.css","./PythonExportModal-DSxWLbl9.css"])))=>i.map(i=>d[i]);
import{l as e,g as a,_ as t,u as l,c as i,d as r,a as n}from"./index-Dynr8V5n.js";import{S as s,a9 as o,X as d,f as c,c as u,d as p,a6 as v,k as f,W as y,Z as g,u as m,Y as b,F as _,a8 as T,a1 as k,V as h,_ as C,a0 as w,G as x,ab as P,B as F,$ as I,w as E,o as S}from"./vendor-DImCB_rW.js";import{_ as D,T as z}from"./PythonExportModal.vue_vue_type_style_index_0_lang-BKaFWCp2.js";import{_ as $}from"./TrialDetailModal.vue_vue_type_style_index_0_lang-D0h6YZnI.js";import{E as L}from"./ExecutionMonitor-BhcxCWsZ.js";import{u as M}from"./useResponsiveTable-Cw1RaX8o.js";import"./db-CL8uhZCz.js";import"./BaseModal.vue_vue_type_style_index_0_lang-D3rbY83j.js";import"./designs-db-b5FxS9e9.js";import"./defaultData-BR5V2V3r.js";import"./variable.service-DGu7U4d3.js";import"./variables-db-DLw3DExB.js";import"./models-db-ClcV8tSQ.js";import"./useEnvironmentalCost-CfIURcPO.js";import"./cost-formatting-Bv_drrqY.js";import"./GenericModelSelectorModal-B1wj_vmD.js";const j="auditomatic.trials",N=s("trial-navigation",()=>{const a=o(),t=d(),l=c(null),i=c("all"),r=c("list"),n=c(!1),s=c({status:"all",search:""}),p=c({rowField:"",columnField:"model",valueField:"extracted_value",aggregation:"mean"});function v(t,l){n.value=!0;try{const n={tab:t};l&&Object.assign(n,l),"current"===t&&"list"!==r.value&&(n.subtab=r.value),a.push({name:"trials",query:n}),i.value=t,e.debug("Navigated to trials tab",{tab:t,query:n})}catch(s){e.error("Failed to navigate to tab",{error:s})}finally{n.value=!1}}return function(){try{const e=localStorage.getItem(`${j}.listViewFilters`);e&&(s.value=JSON.parse(e));const a=localStorage.getItem(`${j}.pivotConfig`);a&&(p.value=JSON.parse(a))}catch(a){e.warn("Failed to load trial navigation preferences",{error:a})}}(),{currentTrialId:u(()=>l.value),currentTab:u(()=>i.value),currentSubtab:u(()=>r.value),isNavigating:u(()=>n.value),listViewFilters:u(()=>s.value),pivotConfig:u(()=>p.value),selectTrial:function(e){l.value=e,v("current",{id:e})},navigateToTab:v,clearCurrentTrial:function(){l.value=null,v("all")},setSubtab:function(e){r.value=e,"current"===i.value&&l.value&&v("current",{id:l.value,subtab:"list"!==e?e:void 0})},saveListFilters:function(a){s.value=a;try{localStorage.setItem(`${j}.listViewFilters`,JSON.stringify(a))}catch(t){e.warn("Failed to save list view filters",{error:t})}},savePivotConfig:function(a){p.value=a;try{localStorage.setItem(`${j}.pivotConfig`,JSON.stringify(a))}catch(t){e.warn("Failed to save pivot config",{error:t})}},clearPreferences:function(){try{localStorage.removeItem(`${j}.listViewFilters`),localStorage.removeItem(`${j}.pivotConfig`),s.value={status:"all",search:""},p.value={rowField:"",columnField:"model",valueField:"extracted_value",aggregation:"mean"}}catch(a){e.warn("Failed to clear preferences",{error:a})}},syncWithRoute:function(){const e=t.query;e.tab&&(i.value=e.tab),e.id&&(l.value=e.id),e.subtab&&(r.value=e.subtab)}}});const V={class:"trials-table-container full-width scientific-table-wrapper","data-testid":"trials-table-container"},A={key:0,class:"trial-name-cell"},R={class:"trial-header"},q={class:"trial-name"},O={class:"trial-design"},U={class:"text-secondary"},B={key:1,class:"progress-cell"},K={class:"progress-text text-xs"},G={key:0,class:"network-errors"},W={key:4,class:"api-calls-cell"},J={class:"total-calls"},Y={class:"calls-calculation text-secondary"},H={key:0},X={key:1,class:"text-secondary"},Z={class:"date-cell"},Q={class:"date-value"},ee={class:"time-value text-secondary"},ae={key:7,class:"trial-actions-4"},te=t(p({__name:"TrialsTable",props:{trials:{},isLoading:{type:Boolean,default:!1}},emits:["trial-selected","trial-started","trial-paused","trial-resumed","trial-cancelled","trial-exported","trial-duplicated","trial-deleted","trial-viewed","trial-export-data","trial-export-python","trial-edited","trial-retried","status-filter-changed"],setup(t,{emit:l}){const i=t,r=l,n=c("all"),s=[{key:"all",label:"All"},{key:"draft",label:"Draft"},{key:"pending",label:"Pending"},{key:"running",label:"Running"},{key:"paused",label:"Paused"},{key:"completed",label:"Completed"},{key:"failed",label:"Failed"},{key:"cancelled",label:"Cancelled"}],{createTrialColumns:o,getVisibleColumns:d}=M(),p=d(o()),I=u(()=>"all"===n.value?i.trials:i.trials.filter(e=>e.status===n.value));function E(e){n.value=e,r("status-filter-changed",e)}function S(a){return{onClick:t=>{const l=t.target;l.closest(".ant-btn")||l.closest(".ant-dropdown-trigger")||(e.debug("Row clicked",{name:a.name,id:a.id}),r("trial-selected",a))}}}function D(e){return"all"===e?i.trials.length:i.trials.filter(a=>a.status===e).length}function z(e){return"failed"===e.status?"exception":"completed"===e.status?"success":e.progress.networkErrors>0?"exception":"normal"}function $(e){const a=[];return"running"===e.status&&a.push("status-running"),"failed"===e.status&&a.push("status-failed"),"completed"===e.status&&a.push("status-completed"),a.join(" ")}function L(e){const a=(new Date).getTime()-e.getTime(),t=Math.floor(a/864e5);return 0===t?"Today":1===t?"Yesterday":t<7?`${t} days ago`:t<30?`${Math.floor(t/7)} weeks ago`:e.toLocaleDateString()}function j(e){const a=Math.abs(e);if(0===a)return"";if(a<.01){const e=a.toFixed(10).match(/0\.0*([1-9])/);if(e){const t=e[0].length-1;return`$${a.toFixed(Math.max(2,t))}`}}return`$${a.toFixed(2)}`}function N(e){r("trial-viewed",e)}function te(e){r("trial-duplicated",e)}return(e,t)=>{const l=y("a-tab-pane"),i=y("a-tabs"),o=y("a-tag"),d=y("a-progress"),c=y("a-tooltip"),u=y("a-button"),M=y("a-menu-item"),le=y("a-menu"),ie=y("a-dropdown"),re=y("a-table");return b(),v("div",V,[f(i,{activeKey:n.value,"onUpdate:activeKey":t[0]||(t[0]=e=>n.value=e),size:"small",class:"status-tabs","data-testid":"trials-status-tabs",onChange:E},{default:g(()=>[(b(),v(_,null,T(s,e=>f(l,{key:e.key,tab:`${e.label} (${D(e.key)})`},null,8,["tab"])),64))]),_:1},8,["activeKey"]),f(re,{columns:m(p),"data-source":I.value,pagination:!1,size:"small",scroll:{y:"calc(100vh - 200px)"},"row-key":"id","row-class-name":$,class:"scientific-table clickable-rows","custom-row":S,"data-testid":"table-trials",role:"table","aria-label":"Trials data table"},{bodyCell:g(({column:e,record:l})=>{return["name"===e.key?(b(),v("div",A,[C("div",R,[C("strong",q,w(l.name),1),f(o,{color:(n=l.status,{draft:"default",pending:"processing",running:"processing",paused:"warning",completed:"success",failed:"error",cancelled:"default"}[n]||"default"),size:"small",class:"trial-status-tag"},{default:g(()=>[x(w(l.status.toUpperCase()),1)]),_:2},1032,["color"])]),C("div",O,[C("small",U," Design: "+w(l.designSnapshot?.originalName||"Unknown Design"),1)]),t[2]||(t[2]=C("div",{class:"click-hint"},[C("small",{class:"text-secondary"},"Click to view live progress")],-1))])):k("",!0),"progress"===e.key?(b(),v("div",B,[f(d,{percent:(i=l,0===i.progress.total?0:Math.round(i.progress.completed/i.progress.total*100)),size:"small",status:z(l),"show-info":!1,class:"progress-bar"},null,8,["percent","status"]),C("div",K,[x(w(l.progress.completed)+" / "+w(l.progress.total)+" ",1),l.progress.networkErrors>0?(b(),v("span",G," ("+w(l.progress.networkErrors)+" errors) ",1)):k("",!0)])])):k("",!0),"configurations"===e.key?(b(),v(_,{key:2},[f(c,{title:`${l.configurationSnapshots?.length||0} model configurations`},{default:g(()=>[f(o,{size:"small",color:"blue"},{default:g(()=>[x(w(l.configurationSnapshots?.length||0)+" configs ",1)]),_:2},1024)]),_:2},1032,["title"]),l.repeatConfig?.callsPerPrompt&&l.repeatConfig.callsPerPrompt>1?(b(),h(o,{key:0,size:"small",color:"purple",style:{"margin-left":"4px"}},{default:g(()=>[x(w(l.repeatConfig.callsPerPrompt)+"× repeat ",1)]),_:2},1024)):k("",!0)],64)):k("",!0),"variables"===e.key?(b(),h(c,{key:3,title:`${l.totalCombinations} variable combinations`},{default:g(()=>[f(o,{size:"small",color:"green"},{default:g(()=>[x(w(l.totalCombinations)+" combos ",1)]),_:2},1024)]),_:2},1032,["title"])):k("",!0),"api_calls"===e.key?(b(),v("div",W,[C("span",J,w(l.progress.total),1),C("small",Y,[x(w(l.configurationSnapshots?.length||0)+" × "+w(l.totalCombinations),1),l.repeatConfig?.callsPerPrompt&&l.repeatConfig.callsPerPrompt>1?(b(),v("span",H," × "+w(l.repeatConfig.callsPerPrompt),1)):k("",!0)])])):k("",!0),"cost"===e.key?(b(),v("span",{key:5,class:P(["cost-cell",{negative:l.estimatedCost<0}])},[j(l.estimatedCost)?(b(),v(_,{key:0},[x(w(j(l.estimatedCost)),1)],64)):(b(),v("span",X,"-"))],2)):k("",!0),"created"===e.key?(b(),h(c,{key:6,title:l.created.toLocaleString()},{default:g(()=>{return[C("div",Z,[C("span",Q,w(L(l.created)),1),C("small",ee,w((e=l.created,e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))),1)])];var e}),_:2},1032,["title"])):k("",!0),"actions"===e.key?(b(),v("div",ae,["draft"===l.status||"pending"===l.status?(b(),h(u,{key:0,size:"small",type:"primary",onClick:F(e=>function(e){r("trial-started",e)}(l),["stop"]),"data-testid":"trial-start-btn","data-trial-id":l.id,"aria-label":`Start trial ${l.name}`},{default:g(()=>t[3]||(t[3]=[x(" Start ")])),_:2,__:[3]},1032,["onClick","data-trial-id","aria-label"])):"running"===l.status?(b(),h(u,{key:1,size:"small",type:"primary",onClick:F(e=>N(l),["stop"]),"data-testid":"trial-view-live-btn","data-trial-id":l.id,"aria-label":`View live progress for ${l.name}`},{default:g(()=>t[4]||(t[4]=[x(" View Live ")])),_:2,__:[4]},1032,["onClick","data-trial-id","aria-label"])):"completed"===l.status?(b(),h(u,{key:2,size:"small",type:"primary",onClick:F(e=>N(l),["stop"]),"data-testid":"trial-results-btn","data-trial-id":l.id,"aria-label":`View results for ${l.name}`},{default:g(()=>t[5]||(t[5]=[x(" Results ")])),_:2,__:[5]},1032,["onClick","data-trial-id","aria-label"])):"failed"===l.status?(b(),h(u,{key:3,size:"small",type:"primary",onClick:F(e=>N(l),["stop"])},{default:g(()=>t[6]||(t[6]=[x(" Details ")])),_:2,__:[6]},1032,["onClick"])):"paused"===l.status?(b(),h(u,{key:4,size:"small",type:"primary",onClick:F(e=>function(e){r("trial-resumed",e)}(l),["stop"])},{default:g(()=>t[7]||(t[7]=[x(" Resume ")])),_:2,__:[7]},1032,["onClick"])):k("",!0),"draft"===l.status?(b(),h(u,{key:5,size:"small",onClick:F(e=>function(e){r("trial-edited",e)}(l),["stop"])},{default:g(()=>t[8]||(t[8]=[x(" Edit ")])),_:2,__:[8]},1032,["onClick"])):"running"===l.status?(b(),h(u,{key:6,size:"small",class:"btn-warning",onClick:F(e=>function(e){r("trial-paused",e)}(l),["stop"])},{default:g(()=>t[9]||(t[9]=[x(" Pause ")])),_:2,__:[9]},1032,["onClick"])):"completed"===l.status?(b(),h(u,{key:7,size:"small",onClick:F(e=>te(l),["stop"])},{default:g(()=>t[10]||(t[10]=[x(" Duplicate ")])),_:2,__:[10]},1032,["onClick"])):"failed"===l.status?(b(),h(u,{key:8,size:"small",class:"btn-warning",onClick:F(e=>function(e){r("trial-retried",e)}(l),["stop"])},{default:g(()=>t[11]||(t[11]=[x(" Retry ")])),_:2,__:[11]},1032,["onClick"])):"paused"===l.status?(b(),h(u,{key:9,size:"small",onClick:F(e=>N(l),["stop"])},{default:g(()=>t[12]||(t[12]=[x(" Progress ")])),_:2,__:[12]},1032,["onClick"])):(b(),h(u,{key:10,size:"small",onClick:F(e=>te(l),["stop"])},{default:g(()=>t[13]||(t[13]=[x(" Duplicate ")])),_:2,__:[13]},1032,["onClick"])),f(ie,{trigger:"click"},{overlay:g(()=>[f(le,null,{default:g(()=>[f(M,{onClick:e=>function(e){r("trial-export-data",e)}(l)},{default:g(()=>t[15]||(t[15]=[x(" Export Data ")])),_:2,__:[15]},1032,["onClick"]),f(M,{onClick:e=>function(e){r("trial-export-python",e)}(l)},{default:g(()=>t[16]||(t[16]=[x(" Export Python ")])),_:2,__:[16]},1032,["onClick"])]),_:2},1024)]),default:g(()=>[f(u,{size:"small",class:"btn-success",onClick:t[1]||(t[1]=F(()=>{},["stop"]))},{default:g(()=>[t[14]||(t[14]=x(" Export ")),f(m(a))]),_:1,__:[14]})]),_:2},1024),"running"===l.status?(b(),h(u,{key:11,size:"small",danger:"",onClick:F(e=>function(e){r("trial-cancelled",e)}(l),["stop"])},{default:g(()=>t[17]||(t[17]=[x(" Cancel ")])),_:2,__:[17]},1032,["onClick"])):(b(),h(u,{key:12,size:"small",danger:"",onClick:F(e=>function(e){r("trial-deleted",e)}(l),["stop"])},{default:g(()=>t[18]||(t[18]=[x(" Delete ")])),_:2,__:[18]},1032,["onClick"]))])):k("",!0)];var i,n}),_:1},8,["columns","data-source"])])}}}),[["__scopeId","data-v-40ce388e"]]),le={class:"trials-page-header"},ie={class:"header-content"},re={class:"description"},ne={class:"header-actions"},se=t(p({__name:"TrialsPageHeader",props:{activeTab:{},currentTrial:{},hasProviders:{type:Boolean}},emits:["create-trial"],setup(e){const a=e,t=u(()=>{switch(a.activeTab){case"all":default:return"Trials";case"current":return a.currentTrial?.name||"Current Trial";case"create":return"Create New Trial"}}),l=u(()=>{switch(a.activeTab){case"all":return"Systematic testing of LLM models with complete reproducibility";case"current":return"Monitor trial execution progress and view results in real-time";case"create":return"Configure and launch a new trial with your selected models and variables";default:return""}}),i=u(()=>"all"===a.activeTab);return(e,a)=>{const r=y("a-button"),n=y("a-alert");return b(),v(_,null,[C("div",le,[C("div",ie,[C("h1",null,w(t.value),1),C("p",re,w(l.value),1)]),C("div",ne,[i.value?(b(),h(r,{key:0,type:"primary",size:"default",disabled:!e.hasProviders,onClick:a[0]||(a[0]=a=>e.$emit("create-trial")),"data-testid":"btn-create-trial","aria-label":"Create new trial"},{default:g(()=>a[1]||(a[1]=[x(" Create Trial ")])),_:1,__:[1]},8,["disabled"])):k("",!0)])]),e.hasProviders?k("",!0):(b(),h(n,{key:0,type:"warning",message:"No LLM providers configured",description:"Add keys for external APIs (local Ollama does not need keys) or enable Ollama provider.","show-icon":"",class:"warning-banner",action:""},{action:g(()=>[f(m(I),{to:"/settings"},{default:g(()=>[f(r,{size:"small",type:"primary"},{default:g(()=>a[2]||(a[2]=[x(" Go to Settings ")])),_:1,__:[2]})]),_:1})]),_:1}))],64)}}}),[["__scopeId","data-v-b127ef79"]]),oe={class:"all-trials-tab"},de={key:0,class:"loading-state"},ce={key:1,class:"empty-state"},ue={key:2,class:"trials-table-wrapper"},pe=t(p({__name:"AllTrialsTab",props:{hasProviders:{type:Boolean}},emits:["select-trial","show-create"],setup(a){const t=l(),r=N(),n=o(),s=c(null),d=c(!1),p=c(null),m=u(()=>t.isLoading),_=u(()=>[...t.trials]);function T(a){e.info("Trial selected in AllTrialsTab",{trialName:a.name,trialId:a.id}),r.selectTrial(a.id)}function w(e){"running"===e.status||"pending"===e.status?r.selectTrial(e.id):"completed"===e.status?n.push({name:"results",query:{trialId:e.id}}):s.value=e}async function P(a){try{await t.executeTrial(a.id),e.info("Trial started",{trialId:a.id}),r.selectTrial(a.id)}catch(l){e.error("Failed to start trial",l),alert("Failed to start trial: "+(l instanceof Error?l.message:"Unknown error"))}}async function F(a){try{await t.pauseTrial(a.id),e.info("Pausing trial",{trialId:a.id})}catch(l){e.error("Failed to pause trial",l),alert("Failed to pause trial")}}async function I(a){try{await t.executeTrial(a.id),e.info("Resuming trial",{trialId:a.id})}catch(l){e.error("Failed to resume trial",l),alert("Failed to resume trial")}}async function E(a){try{await t.cancelTrial(a.id),e.info("Cancelling trial",{trialId:a.id})}catch(l){e.error("Failed to cancel trial",l),alert("Failed to cancel trial")}}async function S(e){await L(e)}async function z(e){alert("Data export functionality coming soon")}async function L(a){try{const{PythonExportService:e}=await i(async()=>{const{PythonExportService:e}=await import("./PythonExportModal.vue_vue_type_style_index_0_lang-BKaFWCp2.js").then(e=>e.p);return{PythonExportService:e}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]),import.meta.url),t=e.validateTrialForExport(a);if(!t.valid)return void alert(`Cannot export trial:\n${t.errors.join("\n")}`);p.value=a,d.value=!0}catch(t){e.error("Python export failed",t),alert(`Export failed: ${t instanceof Error?t.message:String(t)}`)}}function M(a){e.info("Python script exported",{filename:a})}function j(e){r.navigateToTab("create",{duplicate:e.id})}function V(e){r.navigateToTab("create",{duplicate:e.id,edit:"true"})}async function A(a){if(confirm(`Are you sure you want to delete "${a.name}"? This action cannot be undone.`))try{await t.deleteTrial(a.id)}catch(l){e.error("Failed to delete trial",l),alert("Failed to delete trial")}}function R(){}function q(a){e.info("Status filter changed",{status:a})}return(e,a)=>{const t=y("a-spin"),l=y("a-button"),i=y("a-empty");return b(),v("div",oe,[m.value?(b(),v("div",de,[f(t,{size:"large"},{tip:g(()=>a[3]||(a[3]=[x("Loading trials...")])),_:1})])):0===_.value.length?(b(),v("div",ce,[f(i,{description:e.hasProviders?"No trials yet":"Configure LLM providers to start creating trials"},{image:g(()=>a[4]||(a[4]=[C("div",{style:{color:"#bfbfbf","font-size":"48px"}},"🧪",-1)])),default:g(()=>[e.hasProviders?(b(),h(l,{key:0,type:"primary",onClick:a[0]||(a[0]=a=>e.$emit("show-create"))},{default:g(()=>a[5]||(a[5]=[x(" Create Your First Trial ")])),_:1,__:[5]})):k("",!0)]),_:1},8,["description"])])):(b(),v("div",ue,[f(te,{trials:_.value,"is-loading":m.value,onTrialSelected:T,onTrialStarted:P,onTrialPaused:F,onTrialResumed:I,onTrialCancelled:E,onTrialExported:S,onTrialDuplicated:j,onTrialEdited:V,onTrialDeleted:A,onTrialViewed:w,onTrialExportData:z,onTrialExportPython:L,onStatusFilterChanged:q},null,8,["trials","is-loading"])])),s.value?(b(),h($,{key:3,trial:s.value,onClose:a[1]||(a[1]=e=>s.value=null),onUpdated:R},null,8,["trial"])):k("",!0),d.value&&p.value?(b(),h(D,{key:4,trial:p.value,onClose:a[2]||(a[2]=e=>{d.value=!1,p.value=null}),onExported:M},null,8,["trial"])):k("",!0)])}}}),[["__scopeId","data-v-1e9b1936"]]),ve={class:"current-trial-tab"},fe={key:0,class:"no-trial-selected"},ye={key:1,class:"trial-content"},ge={class:"trial-header"},me={key:0,class:"header-actions"},be={class:"monitor-wrapper"},_e=t(p({__name:"CurrentTrialTab",props:{trialId:{}},setup(a){const t=a,l=N(),i=c(null);function n(){l.navigateToTab("all")}async function s(){if(t.trialId)try{i.value=await r.trials.get(t.trialId)||null,i.value||e.warn("Trial not found",{trialId:t.trialId})}catch(a){e.error("Failed to load trial",a),i.value=null}else i.value=null}return E(()=>t.trialId,()=>{s()},{immediate:!0}),S(()=>{s()}),(e,a)=>{const t=y("a-button"),l=y("a-empty");return b(),v("div",ve,[e.trialId?(b(),v("div",ye,[C("div",ge,[C("h2",null,w(i.value?.name||"Loading..."),1),i.value?(b(),v("div",me,[f(t,{size:"small",onClick:n,"data-testid":"btn-back-to-trials"},{default:g(()=>a[2]||(a[2]=[x(" ← Back to Trials ")])),_:1,__:[2]})])):k("",!0)]),C("div",be,[f(L,{"trial-id":e.trialId},null,8,["trial-id"])])])):(b(),v("div",fe,[f(l,{description:"No trial selected"},{image:g(()=>a[0]||(a[0]=[C("div",{style:{color:"#bfbfbf","font-size":"48px"}},"📊",-1)])),default:g(()=>[f(t,{type:"primary",onClick:n},{default:g(()=>a[1]||(a[1]=[x(" View All Trials ")])),_:1,__:[1]})]),_:1})]))])}}}),[["__scopeId","data-v-ee20d160"]]),Te={class:"create-trial-tab"},ke={class:"tab-content"},he=t(p({__name:"CreateTrialTab",props:{initialDesignId:{},duplicateFrom:{}},setup(a){const t=a,l=d(),i=N(),n=c(),s=c(null),o=c(!1);async function u(){const a=l.query;if(a.design&&"string"==typeof a.design?n.value=a.design:t.initialDesignId&&(n.value=t.initialDesignId),a.duplicate&&"string"==typeof a.duplicate)try{const e=await r.trials.get(a.duplicate);e&&(s.value=e,o.value="true"===a.edit)}catch(i){e.error("Failed to load trial for duplication",i)}else t.duplicateFrom&&(s.value=t.duplicateFrom)}function p(){i.navigateToTab("all")}function y(a){e.info("Trial created",{trialId:a}),i.navigateToTab("all")}async function g(a){e.info("Trial created and started",{trialId:a}),await new Promise(e=>setTimeout(e,100)),i.selectTrial(a)}function m(a){e.info("Trial export requested",{trialId:a.id})}return E(()=>l.query,()=>{"create"===i.currentTab&&u()}),S(()=>{u()}),(e,a)=>(b(),v("div",Te,[C("div",ke,[f(z,{initialDesignId:n.value,trialToDuplicate:s.value||void 0,isEditMode:o.value,"is-tab-mode":!0,onClose:p,onCreated:y,onCreatedAndStarted:g,onExportTrial:m},null,8,["initialDesignId","trialToDuplicate","isEditMode"])])]))}}),[["__scopeId","data-v-82e2f770"]]),Ce={class:"trials-view full-width","data-testid":"page-trials"},we={key:0,class:"trials-view-tabs"},xe={key:1},Pe={class:"page-header"},Fe={class:"header-actions"},Ie={class:"main-content"},Ee={key:0,class:"loading-state"},Se={key:1,class:"empty-state"},De={key:2,class:"trials-table-wrapper"},ze={key:0,class:"monitoring-content"},$e={key:1,class:"monitoring-placeholder"},Le=t(p({__name:"TrialsView",setup(a){const t=l(),r=n(),s=N(),p=d(),_=o(),T=u(()=>!0),w=function(){const e=d(),a=N();function t(e,t){a.navigateToTab(e,t)}return{activeTab:u(()=>{const a=e.query.tab;return a&&["all","current","create"].includes(a)?a:"all"}),currentTrialId:u(()=>e.query.id||null),currentSubtab:u(()=>{const a=e.query.subtab;return a&&["list","pivot"].includes(a)?a:"list"}),isNavigating:u(()=>a.isNavigating),navigateToTab:t,selectTrial:function(e){a.selectTrial(e)},clearCurrentTrial:function(){a.clearCurrentTrial()},setSubtab:function(e){a.setSubtab(e)},createTrialWithDesign:function(e){t("create",{design:e})},duplicateTrial:function(e){t("create",{duplicate:e})},editTrial:function(e){t("create",{duplicate:e,edit:"true"})},listViewFilters:u(()=>a.listViewFilters),pivotConfig:u(()=>a.pivotConfig),saveListFilters:a.saveListFilters,savePivotConfig:a.savePivotConfig}}(),P=c(!1),F=c(null),M=c(null),j=c(!1),V=c(!1),A=c(null),R=c(null),q=c(!1),O=c(),U=u(()=>t.isLoading),B=u(()=>[...t.trials]),K=u({get:()=>w.activeTab.value,set:e=>w.navigateToTab(e)}),G=u(()=>w.currentTrialId.value),W=u(()=>G.value&&B.value.find(e=>e.id===G.value)||null),J=u(()=>r.hasAnyApiKeys||r.isProviderEnabled("ollama-chat")||r.isProviderEnabled("ollama-generate"));function Y(a){e.info("Trial selected in TrialsView",{trialName:a.name,trialId:a.id}),M.value=a,j.value=!0}function H(a){e.info("Status filter changed",{status:a})}function X(e){"running"===e.status||"pending"===e.status?Y(e):"completed"===e.status?_.push({name:"results",query:{trialId:e.id}}):F.value=e}function Z(){me()}async function Q(a){try{await t.executeTrial(a.id),e.info("Trial started",{trialId:a.id}),Y(a)}catch(l){e.error("Failed to start trial",l),alert("Failed to start trial: "+(l instanceof Error?l.message:"Unknown error"))}}async function ee(a){try{await t.pauseTrial(a.id),e.info("Pausing trial",{trialId:a.id})}catch(l){e.error("Failed to pause trial",l),alert("Failed to pause trial")}}async function ae(a){try{await t.executeTrial(a.id),e.info("Resuming trial",{trialId:a.id})}catch(l){e.error("Failed to resume trial",l),alert("Failed to resume trial")}}async function le(a){try{await t.cancelTrial(a.id),e.info("Cancelling trial",{trialId:a.id})}catch(l){e.error("Failed to cancel trial",l),alert("Failed to cancel trial")}}async function ie(e){await ne(e)}async function re(e){alert("Data export functionality coming soon")}async function ne(a){try{const{PythonExportService:e}=await i(async()=>{const{PythonExportService:e}=await import("./PythonExportModal.vue_vue_type_style_index_0_lang-BKaFWCp2.js").then(e=>e.p);return{PythonExportService:e}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]),import.meta.url),t=e.validateTrialForExport(a);if(!t.valid)return void alert(`Cannot export trial:\n${t.errors.join("\n")}`);A.value=a,V.value=!0}catch(t){e.error("Python export failed",t),alert(`Export failed: ${t instanceof Error?t.message:String(t)}`)}}function oe(a){e.info("Python script exported",{filename:a})}function de(e){T.value?w.duplicateTrial(e.id):(R.value=e,q.value=!1,P.value=!0)}function ce(e){T.value?w.editTrial(e.id):(R.value=e,q.value=!0,P.value=!0)}async function ue(a){if(confirm(`Are you sure you want to delete "${a.name}"? This action cannot be undone.`))try{await t.deleteTrial(a.id)}catch(l){e.error("Failed to delete trial",l),alert("Failed to delete trial")}}function ve(a){e.info("Trial created",{trialId:a})}async function fe(a){if(e.info("Trial created and started",{trialId:a}),T.value)w.selectTrial(a);else{await new Promise(e=>setTimeout(e,100));let t=B.value.find(e=>e.id===a),l=0;for(;!t&&l<5;)await new Promise(e=>setTimeout(e,200)),t=B.value.find(e=>e.id===a),l++;t?(M.value=t,j.value=!0):e.warn("Could not find trial for monitoring",{trialId:a})}}function ye(a){e.info("Opening export for trial",{trialId:a.id}),A.value=a,V.value=!0}function ge(){}function me(){T.value?w.navigateToTab("create"):P.value=!0}function be(e){w.navigateToTab(e)}function Te(e){w.selectTrial(e.id)}return E(()=>p.query,()=>{T.value&&s.syncWithRoute()},{immediate:!0}),S(async()=>{if(await t.initialize(),T.value)s.syncWithRoute();else{const e=p.query.designId;e&&(O.value=e,P.value=!0)}}),(e,a)=>{const t=y("a-tab-pane"),l=y("a-tabs"),i=y("a-button"),r=y("a-alert"),n=y("a-spin"),s=y("a-empty"),o=y("a-modal");return b(),v("div",Ce,[T.value?(b(),v("div",we,[f(se,{"active-tab":K.value,"current-trial":W.value,"has-providers":J.value,onCreateTrial:me},null,8,["active-tab","current-trial","has-providers"]),f(l,{activeKey:K.value,"onUpdate:activeKey":a[0]||(a[0]=e=>K.value=e),onChange:be,class:"trials-tabs",type:"card",size:"large"},{default:g(()=>[f(t,{key:"all",tab:"All Trials"},{default:g(()=>[f(pe,{"has-providers":J.value,onSelectTrial:Te,onShowCreate:me},null,8,["has-providers"])]),_:1}),f(t,{key:"current",tab:"Current Trial",disabled:!G.value},{default:g(()=>[G.value?(b(),h(_e,{key:0,"trial-id":G.value},null,8,["trial-id"])):k("",!0)]),_:1},8,["disabled"]),f(t,{key:"create",tab:"Create Trial"},{default:g(()=>[f(he)]),_:1})]),_:1},8,["activeKey"])])):(b(),v("div",xe,[C("div",Pe,[a[7]||(a[7]=C("div",{class:"header-content"},[C("h1",null,"Trials"),C("p",{class:"description"}," Systematic testing of LLM models with complete reproducibility ")],-1)),C("div",Fe,[f(i,{type:"primary",size:"default",disabled:!J.value,onClick:Z,"data-testid":"btn-create-trial","aria-label":"Create new trial"},{default:g(()=>a[6]||(a[6]=[x(" Create Trial ")])),_:1,__:[6]},8,["disabled"])])]),J.value?k("",!0):(b(),h(r,{key:0,type:"warning",message:"No LLM providers configured",description:"Add keys for external APIs (local Ollama does not need keys) or enable Ollama provider.","show-icon":"",class:"warning-banner",action:""},{action:g(()=>[f(m(I),{to:"/settings"},{default:g(()=>[f(i,{size:"small",type:"primary"},{default:g(()=>a[8]||(a[8]=[x(" Go to Settings ")])),_:1,__:[8]})]),_:1})]),_:1})),C("div",Ie,[U.value?(b(),v("div",Ee,[f(n,{size:"large"},{tip:g(()=>a[9]||(a[9]=[x("Loading trials...")])),_:1})])):0===B.value.length?(b(),v("div",Se,[f(s,{description:J.value?"No trials yet":"Configure LLM providers to start creating trials"},{image:g(()=>a[10]||(a[10]=[C("div",{style:{color:"#bfbfbf","font-size":"48px"}},"🧪",-1)])),default:g(()=>[J.value?(b(),h(i,{key:0,type:"primary",onClick:a[1]||(a[1]=e=>P.value=!0)},{default:g(()=>a[11]||(a[11]=[x(" Create Your First Trial ")])),_:1,__:[11]})):k("",!0)]),_:1},8,["description"])])):(b(),v("div",De,[f(te,{trials:B.value,"is-loading":U.value,onTrialSelected:Y,onTrialStarted:Q,onTrialPaused:ee,onTrialResumed:ae,onTrialCancelled:le,onTrialExported:ie,onTrialDuplicated:de,onTrialEdited:ce,onTrialDeleted:ue,onTrialViewed:X,onTrialExportData:re,onTrialExportPython:ne,onStatusFilterChanged:H},null,8,["trials","is-loading"])]))])])),T.value?k("",!0):(b(),h(o,{key:2,open:j.value,"onUpdate:open":a[2]||(a[2]=e=>j.value=e),title:`Live Progress: ${M.value?.name||"Trial"}`,width:"95vw",footer:null,"body-style":{padding:0,height:"90vh",overflow:"auto"},"destroy-on-close":!0,centered:!0},{default:g(()=>[M.value?(b(),v("div",ze,[f(L,{"trial-id":M.value.id},null,8,["trial-id"])])):(b(),v("div",$e,[f(s,{description:"No trial selected for monitoring"})]))]),_:1},8,["open","title"])),!T.value&&P.value?(b(),h(z,{key:3,initialDesignId:O.value,trialToDuplicate:R.value||void 0,isEditMode:q.value,onClose:a[3]||(a[3]=e=>{P.value=!1,O.value=void 0,R.value=null,q.value=!1}),onCreated:ve,onCreatedAndStarted:fe,onExportTrial:ye},null,8,["initialDesignId","trialToDuplicate","isEditMode"])):k("",!0),F.value?(b(),h($,{key:4,trial:F.value,onClose:a[4]||(a[4]=e=>F.value=null),onUpdated:ge},null,8,["trial"])):k("",!0),V.value&&A.value?(b(),h(D,{key:5,trial:A.value,onClose:a[5]||(a[5]=e=>{V.value=!1,A.value=null}),onExported:oe},null,8,["trial"])):k("",!0)])}}}),[["__scopeId","data-v-fc1d26ed"]]);export{Le as default};
