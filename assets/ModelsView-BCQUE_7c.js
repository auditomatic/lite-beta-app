import{k as e,d as a,c as l,f as t,w as s,V as n,Y as o,Z as r,_ as i,a6 as c,a1 as u,W as d,G as v,F as m,a8 as p,a0 as f,u as y,l as g,ab as h,B as b,o as k,s as w,h as _,b as C,ac as z}from"./vendor-DImCB_rW.js";import{u as O,m as x}from"./models-db-CQBNRyqi.js";import{I as M,C as j,e as $,U as T,f as P,_ as S,g as B,R as F,h as L,a as E,i as V,l as A,j as U,p as D,P as I,M as N}from"./index-Ccn6zvHO.js";import{_ as H}from"./BaseModal.vue_vue_type_style_index_0_lang-D3rbY83j.js";import{f as R}from"./cost-formatting-Bv_drrqY.js";import"./db-CL8uhZCz.js";var G={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 144H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H212V212h200v200zm452-268H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H612V212h200v200zM464 544H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16zm-52 268H212V612h200v200zm452-268H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16zm-52 268H612V612h200v200z"}}]},name:"appstore",theme:"outlined"};function K(e){for(var a=1;a<arguments.length;a++){var l=null!=arguments[a]?Object(arguments[a]):{},t=Object.keys(l);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(l).filter(function(e){return Object.getOwnPropertyDescriptor(l,e).enumerable}))),t.forEach(function(a){W(e,a,l[a])})}return e}function W(e,a,l){return a in e?Object.defineProperty(e,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[a]=l,e}var q=function(a,l){var t=K({},a,l.attrs);return e(M,K({},t,{icon:G}),null)};q.displayName="AppstoreOutlined",q.inheritAttrs=!1;var J={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880.1 154H143.9c-24.5 0-39.8 26.7-27.5 48L349 597.4V838c0 17.7 14.2 32 31.8 32h262.4c17.6 0 31.8-14.3 31.8-32V597.4L907.7 202c12.2-21.3-3.1-48-27.6-48zM603.4 798H420.6V642h182.9v156zm9.6-236.6l-9.5 16.6h-183l-9.5-16.6L212.7 226h598.6L613 561.4z"}}]},name:"filter",theme:"outlined"};function Q(e){for(var a=1;a<arguments.length;a++){var l=null!=arguments[a]?Object(arguments[a]):{},t=Object.keys(l);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(l).filter(function(e){return Object.getOwnPropertyDescriptor(l,e).enumerable}))),t.forEach(function(a){Y(e,a,l[a])})}return e}function Y(e,a,l){return a in e?Object.defineProperty(e,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[a]=l,e}var Z=function(a,l){var t=Q({},a,l.attrs);return e(M,Q({},t,{icon:J}),null)};Z.displayName="FilterOutlined",Z.inheritAttrs=!1;var X={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M456 231a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"more",theme:"outlined"};function ee(e){for(var a=1;a<arguments.length;a++){var l=null!=arguments[a]?Object(arguments[a]):{},t=Object.keys(l);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(l).filter(function(e){return Object.getOwnPropertyDescriptor(l,e).enumerable}))),t.forEach(function(a){ae(e,a,l[a])})}return e}function ae(e,a,l){return a in e?Object.defineProperty(e,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[a]=l,e}var le=function(a,l){var t=ee({},a,l.attrs);return e(M,ee({},t,{icon:X}),null)};le.displayName="MoreOutlined",le.inheritAttrs=!1;var te={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3zM664.8 561.6l36.1 210.3L512 672.7 323.1 772l36.1-210.3-152.8-149L417.6 382 512 190.7 606.4 382l211.2 30.7-152.8 148.9z"}}]},name:"star",theme:"outlined"};function se(e){for(var a=1;a<arguments.length;a++){var l=null!=arguments[a]?Object(arguments[a]):{},t=Object.keys(l);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(l).filter(function(e){return Object.getOwnPropertyDescriptor(l,e).enumerable}))),t.forEach(function(a){ne(e,a,l[a])})}return e}function ne(e,a,l){return a in e?Object.defineProperty(e,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[a]=l,e}var oe=function(a,l){var t=se({},a,l.attrs);return e(M,se({},t,{icon:te}),null)};oe.displayName="StarOutlined",oe.inheritAttrs=!1;var re={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 192H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM104 228a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"unordered-list",theme:"outlined"};function ie(e){for(var a=1;a<arguments.length;a++){var l=null!=arguments[a]?Object(arguments[a]):{},t=Object.keys(l);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(l).filter(function(e){return Object.getOwnPropertyDescriptor(l,e).enumerable}))),t.forEach(function(a){ce(e,a,l[a])})}return e}function ce(e,a,l){return a in e?Object.defineProperty(e,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[a]=l,e}var ue=function(a,l){var t=ie({},a,l.attrs);return e(M,ie({},t,{icon:re}),null)};ue.displayName="UnorderedListOutlined",ue.inheritAttrs=!1;const de={class:"modal-content"},ve={class:"search-section"},me={class:"search-controls"},pe={class:"size-filter"},fe={class:"size-controls"},ye={class:"size-presets"},ge={key:0,class:"size-filter-indicator"},he={class:"quantized-filter"},be={class:"filter-description"},ke={class:"category-filters"},we={class:"stats-bar"},_e={class:"view-controls"},Ce={key:0,class:"loading-text"},ze={key:0,class:"downloads-section"},Oe={class:"download-items"},xe={class:"download-info"},Me={class:"download-tag"},je={class:"download-status"},$e={class:"models-container"},Te=["onClick"],Pe={class:"model-info"},Se={class:"model-name"},Be={key:0},Fe={class:"model-description"},Le={class:"model-actions"},Ee={key:0,class:"button-size-info"},Ve={key:0,class:"tags-preview"},Ae={class:"preview-tags"},Ue=["onClick","title"],De={key:1,class:"tag-actual"},Ie={class:"tag-size"},Ne={key:0,class:"more-tags"},He={key:1,class:"tags-expanded"},Re={key:0,class:"tag-name"},Ge={key:2},Ke={key:1,class:"text-secondary"},We={key:1,class:"list-view"},qe={class:"expanded-tags-container"},Je={class:"expanded-tags-grid"},Qe={class:"tag-name"},Ye={key:0,class:"tag-actual"},Ze={class:"tag-size"},Xe={class:"tag-context"},ea={key:0,class:"model-name-cell"},aa={key:1,class:"description-cell"},la={key:2,class:"stats-cell"},ta={class:"stat-item"},sa={class:"stat-item"},na={key:0},oa={key:3,class:"size-range"},ra=S(a({__name:"OllamaModelLibraryModal",props:{modelValue:{type:Boolean}},emits:["update:modelValue","models-updated"],setup(a,{emit:k}){const w=a,_=k,C=l({get:()=>w.modelValue,set:e=>_("update:modelValue",e)}),z=t(null),O=t(!1),x=t(""),M=t(""),S=t("popularity"),B=t([]),F=t(8),L=t(!1),E=t("card"),V=t(new Set),A=t(new Set),U=t({}),D=t([]),I=[{label:"1GB",value:1},{label:"2GB",value:2},{label:"4GB",value:4},{label:"8GB",value:8},{label:"16GB",value:16},{label:"None",value:999}],N=[{title:"Tag",key:"name",width:200},{title:"Size",key:"size",width:100,align:"right"},{title:"Context",key:"context",width:100,align:"center"},{title:"Status",key:"status",width:80,align:"center"},{title:"Action",key:"actions",width:80,align:"center"}],R=[{title:"Model",key:"name",width:200,fixed:"left"},{title:"Description",key:"description",ellipsis:!0},{title:"Stats",key:"stats",width:200},{title:"Size Range",key:"sizeRange",width:120,align:"center"},{title:"Actions",key:"actions",width:220,align:"center",fixed:"right"}],G=l(()=>z.value?.totalModels||0),K=l(()=>z.value?.categories||[]),W=l(()=>{if(!z.value)return[];let e=Object.entries(z.value.models).map(([e,a])=>({...a,name:e}));if(M.value){const a=M.value.toLowerCase();e=e.filter(e=>e.name.toLowerCase().includes(a)||e.description.toLowerCase().includes(a))}switch(B.value.length>0&&(e=e.filter(e=>B.value.some(a=>(e.categories||[]).includes(a)))),F.value<999&&(e=e.filter(e=>!e.tags||Object.values(e.tags).some(e=>ae(e.size||"0GB")<=F.value))),S.value){case"popularity":e.sort((e,a)=>{const l=e.pullCount||"0",t=a.pullCount||"0",s=parseFloat(l.replace(/[^\d.]/g,""))||0,n=parseFloat(t.replace(/[^\d.]/g,""))||0,o=l.includes("M")?1e6:l.includes("K")?1e3:1;return n*(t.includes("M")?1e6:t.includes("K")?1e3:1)-s*o});break;case"name":e.sort((e,a)=>e.name.localeCompare(a.name));break;case"tagCount":e.sort((e,a)=>(a.tagCount||0)-(e.tagCount||0))}return e});async function J(){try{const e=await fetch("http://localhost:11434/api/tags");if(e.ok){const a=await e.json();D.value=(a.models||[]).map(e=>e.name)}}catch{D.value=[]}}function Q(e){V.value.has(e)?V.value.delete(e):V.value.add(e)}function Y(e){if(!e.tags)return[];return Object.entries(e.tags).map(([e,a])=>({...a,name:e})).filter(e=>{if(F.value<999){if(ae(e.size||"0GB")>F.value)return!1}return!(!L.value&&le(e.name))}).sort((e,a)=>{const l=["latest","instruct","8b","7b","3b","1b"],t=l.indexOf(e.name),s=l.indexOf(a.name);return-1!==t&&-1!==s?t-s:-1!==t?-1:-1!==s?1:e.name.localeCompare(a.name)}).slice(0,5)}function X(e){return e.tags?Object.entries(e.tags).map(([e,a])=>({...a,name:e})).filter(e=>{if(F.value<999){if(ae(e.size||"0GB")>F.value)return!1}return!(!L.value&&le(e.name))}).sort((e,a)=>e.name.localeCompare(a.name)):[]}function ee(e){const a=ae(e);return a<5?"size-small":a<20?"size-medium":"size-large"}function ae(e){const a=parseFloat(e.replace(/[^\d.]/g,""))||0,l=e.replace(/[\d.]/g,"").trim().toUpperCase();return l.includes("MB")?a/1e3:l.includes("TB")?1e3*a:(l.includes("GB"),a)}function le(e){return/-q\d{1,2}_|-fp\d+/.test(e)}function te(e){return D.value.some(a=>a.startsWith(e))}function se(e){return D.value.includes(e)}function ne(e){return D.value.filter(a=>a.startsWith(e+":"))}function oe(e){return e.tags?Object.entries(e.tags).filter(([e,a])=>{if(F.value<999){if(ae(a.size||"0GB")>F.value)return!1}return!(!L.value&&le(e))}).length:0}function re(e){if(!e.tags||!e.tags.latest)return null;const a=e.tags.latest,l=Object.entries(e.tags).find(([e,l])=>"latest"!==e&&l.modelHash===a.modelHash);return l?{actualTag:l[0],size:l[1].size||a.size}:{actualTag:"",size:a.size}}function ie(e){if(!e.tags)return"N/A";const a=Object.values(e.tags).map(e=>ae(e.size||"0GB")).filter(e=>e>0);if(0===a.length)return"N/A";const l=Math.min(...a),t=Math.max(...a);return l===t?ce(l):`${ce(l)} - ${ce(t)}`}function ce(e){return e<1?`${Math.round(1e3*e)}MB`:`${e.toFixed(1)}GB`}async function ra(e,a){const l="latest"===a?e:`${e}:${a}`;if(!A.value.has(l)){A.value.add(l),U.value[l]={percent:0,status:"active",message:"Starting download..."};try{const e=await fetch("http://localhost:11434/api/pull",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:l,stream:!0})});if(!e.ok)throw new Error(`Failed to pull model: ${e.statusText}`);const a=e.body?.getReader();if(!a)throw new Error("Unable to read response stream");let t=0,s=0;for(;;){const{done:e,value:n}=await a.read();if(e)break;const o=(new TextDecoder).decode(n).split("\n").filter(e=>e.trim());for(const a of o)try{const e=JSON.parse(a);e.total&&(t=e.total),e.completed&&(s=e.completed);const n=t>0?Math.round(s/t*100):0;if(U.value[l]={status:"success"===e.status?"success":"active",percent:n,message:e.status||"Downloading..."},"success"===e.status)return P.success(`Successfully pulled ${l}`),await J(),_("models-updated"),void setTimeout(()=>{delete U.value[l]},3e3)}catch{}}}catch(t){P.error(`Failed to pull ${l}: ${t instanceof Error?t.message:"Unknown error"}`),U.value[l]={status:"exception",percent:0,message:"Download failed"},setTimeout(()=>{delete U.value[l]},5e3)}finally{A.value.delete(l)}}}return s(C,e=>{e&&!z.value&&async function(){O.value=!0,x.value="";try{const e=await fetch("https://ollama.models.auditomatic.org/models.json");if(!e.ok)throw new Error(`Failed to fetch models: ${e.statusText}`);z.value=await e.json(),await J()}catch(e){x.value=`Failed to load model library: ${e instanceof Error?e.message:"Unknown error"}`}finally{O.value=!1}}(),e||(V.value.clear(),M.value="",B.value=[],F.value=8,L.value=!1,x.value="",U.value={},A.value.clear())}),(a,l)=>{const t=d("a-input-search"),s=d("a-select-option"),k=d("a-select"),w=d("a-input-number"),_=d("a-button"),z=d("a-tag"),P=d("a-button-group"),D=d("a-progress"),J=d("a-table"),ae=d("a-space"),le=d("a-spin"),ce=d("a-alert");return o(),n(H,{modelValue:C.value,"onUpdate:modelValue":l[8]||(l[8]=e=>C.value=e),title:"Ollama Model Library",size:"full",class:"ollama-library-modal"},{default:r(()=>[i("div",de,[i("div",ve,[i("div",me,[e(t,{value:M.value,"onUpdate:value":l[0]||(l[0]=e=>M.value=e),placeholder:"Search models by name or description...","allow-clear":"",size:"large",class:"search-input"},null,8,["value"]),e(k,{value:S.value,"onUpdate:value":l[1]||(l[1]=e=>S.value=e),placeholder:"Sort by",style:{width:"150px"},size:"large"},{default:r(()=>[e(s,{value:"popularity"},{default:r(()=>l[9]||(l[9]=[v("Popularity")])),_:1,__:[9]}),e(s,{value:"name"},{default:r(()=>l[10]||(l[10]=[v("Name")])),_:1,__:[10]}),e(s,{value:"tagCount"},{default:r(()=>l[11]||(l[11]=[v("Tag Count")])),_:1,__:[11]})]),_:1},8,["value"])]),i("div",pe,[i("div",fe,[l[12]||(l[12]=i("span",{class:"filter-label"},"Filter to models smaller than:",-1)),e(w,{value:F.value,"onUpdate:value":l[2]||(l[2]=e=>F.value=e),min:1,max:999,step:1,size:"small",class:"size-input","addon-after":"GB"},null,8,["value"]),i("div",ye,[(o(),c(m,null,p(I,a=>e(_,{key:a.value,size:"small",type:F.value===a.value?"primary":"default",onClick:e=>F.value=a.value,class:"preset-button"},{default:r(()=>[v(f(a.label),1)]),_:2},1032,["type","onClick"])),64))])]),F.value<999?(o(),c("span",ge," ≤"+f(F.value)+"GB filter active ",1)):u("",!0)]),i("div",he,[e(_,{type:L.value?"default":"primary",size:"small",onClick:l[3]||(l[3]=e=>L.value=!L.value)},{icon:r(()=>[e(y(Z))]),default:r(()=>[v(" "+f(L.value?"Hide":"Show")+" Quantized Versions ",1)]),_:1},8,["type"]),i("span",be,f(L.value?"Showing all versions":"Hiding q2_K, q3_K, q4_0, q5_1, q6_K, q8_0, fp16..."),1)]),i("div",ke,[(o(!0),c(m,null,p(K.value,e=>(o(),n(z,{key:e,color:B.value.includes(e)?"blue":"default",checkable:!0,checked:B.value.includes(e),onClick:a=>function(e){const a=B.value.indexOf(e);-1===a?B.value.push(e):B.value.splice(a,1)}(e),class:"category-tag"},{default:r(()=>[v(f(e),1)]),_:2},1032,["color","checked","onClick"]))),128))])]),i("div",we,[i("span",null,"Showing "+f(W.value.length)+" of "+f(G.value)+" models",1),i("div",_e,[e(P,{size:"small"},{default:r(()=>[e(_,{type:"card"===E.value?"primary":"default",onClick:l[4]||(l[4]=e=>E.value="card"),icon:g(y(q)),title:"Card View"},null,8,["type","icon"]),e(_,{type:"list"===E.value?"primary":"default",onClick:l[5]||(l[5]=e=>E.value="list"),icon:g(y(ue)),title:"List View"},null,8,["type","icon"])]),_:1}),O.value?(o(),c("span",Ce,"Loading...")):u("",!0)])]),Object.keys(U.value).length>0?(o(),c("div",ze,[l[13]||(l[13]=i("h4",null,"Active Downloads",-1)),i("div",Oe,[(o(!0),c(m,null,p(U.value,(a,l)=>(o(),c("div",{key:l,class:"download-item"},[i("div",xe,[i("code",Me,f(l),1),i("span",je,f(a.message),1)]),e(D,{percent:a.percent,status:"success"===a.status?"success":"active",size:"small",class:"download-progress"},null,8,["percent","status"])]))),128))])])):u("",!0),i("div",$e,[e(le,{spinning:O.value,size:"large"},{default:r(()=>["card"===E.value?(o(!0),c(m,{key:0},p(W.value,a=>(o(),c("div",{key:a.name,class:h(["model-item",{expanded:V.value.has(a.name)}])},[i("div",{class:"model-header",onClick:e=>Q(a.name)},[i("div",Pe,[i("div",Se,[i("h4",null,f(a.name),1),e(z,{size:"small",color:"blue"},{default:r(()=>[v(f(a.pullCount||"0")+" pulls",1)]),_:2},1024),e(z,{size:"small",color:"green"},{default:r(()=>[v(f(oe(a))+" ",1),F.value<999?(o(),c("span",Be,"/"+f(a.tagCount||0),1)):u("",!0),l[14]||(l[14]=v(" versions "))]),_:2,__:[14]},1024),te(a.name)?(o(),n(z,{key:0,size:"small",color:"success",class:"installed-tag"},{icon:r(()=>[e(y(j))]),default:r(()=>[v(" "+f(ne(a.name).length)+" installed ",1)]),_:2},1024)):u("",!0)]),i("p",Fe,f(a.description||"No description available"),1)]),i("div",Le,[e(_,{type:se(`${a.name}:latest`)||se(a.name)?"default":"primary",size:"small",onClick:b(e=>ra(a.name,"latest"),["stop"]),loading:A.value.has(`${a.name}:latest`),disabled:se(`${a.name}:latest`)||se(a.name)},{default:r(()=>[U.value[`${a.name}:latest`]?(o(),c(m,{key:0},[v(f(Math.round(U.value[`${a.name}:latest`].percent))+"% ",1)],64)):se(`${a.name}:latest`)||se(a.name)?(o(),c(m,{key:1},[e(y(j)),l[15]||(l[15]=v(" Installed "))],64)):(o(),c(m,{key:2},[l[16]||(l[16]=v(" Pull Latest ")),re(a)?(o(),c("span",Ee," ("+f(re(a)?.actualTag?re(a)?.actualTag+", ":"")+f(re(a)?.size)+") ",1)):u("",!0)],64))]),_:2},1032,["type","onClick","loading","disabled"]),e(_,{type:"text",size:"small",onClick:b(e=>Q(a.name),["stop"])},{icon:r(()=>[V.value.has(a.name)?(o(),n(y(T),{key:1})):(o(),n(y($),{key:0}))]),default:r(()=>[v(" "+f(V.value.has(a.name)?"Hide versions":"See all versions"),1)]),_:2},1032,["onClick"])])],8,Te),V.value.has(a.name)?u("",!0):(o(),c("div",Ve,[i("div",Ae,[(o(!0),c(m,null,p(Y(a),e=>(o(),c("span",{key:e.name,class:h(["tag-chip",[ee(e.size),{installed:se(e.fullTag)}]]),onClick:l=>se(e.fullTag)?null:ra(a.name,e.name),title:`${e.fullTag} - ${e.size}${se(e.fullTag)?" (Installed)":""}`},[se(e.fullTag)?(o(),n(y(j),{key:0,class:"installed-icon"})):u("",!0),v(" "+f(e.name)+" ",1),"latest"===e.name&&re(a)?(o(),c("span",De," ("+f(re(a)?.actualTag)+") ",1)):u("",!0),i("span",Ie,f(e.size),1)],10,Ue))),128)),oe(a)>5?(o(),c("span",Ne," +"+f(oe(a)-5)+" more versions ",1)):u("",!0)])])),V.value.has(a.name)?(o(),c("div",He,[e(J,{columns:N,"data-source":X(a),pagination:!1,size:"small",scroll:{y:300},class:"tags-table"},{bodyCell:r(({column:t,record:s})=>["name"===t.key?(o(),c("code",Re,f(s.name),1)):u("",!0),"size"===t.key?(o(),c("span",{key:1,class:h(["tag-size",ee(s.size)])},f(s.size),3)):u("",!0),"context"===t.key?(o(),c("span",Ge,f(s.contextWindow),1)):u("",!0),"status"===t.key?(o(),c(m,{key:3},[se(s.fullTag)?(o(),n(z,{key:0,size:"small",color:"success"},{default:r(()=>[e(y(j)),l[17]||(l[17]=v(" Installed "))]),_:1,__:[17]})):(o(),c("span",Ke,"-"))],64)):u("",!0),"actions"===t.key?(o(),n(_,{key:4,type:se(s.fullTag)?"default":"primary",size:"small",onClick:e=>ra(a.name,s.name),loading:A.value.has(s.fullTag),disabled:se(s.fullTag)},{default:r(()=>[U.value[s.fullTag]?(o(),c(m,{key:0},[v(f(Math.round(U.value[s.fullTag].percent))+"% ",1)],64)):se(s.fullTag)?(o(),c(m,{key:1},[e(y(j)),l[18]||(l[18]=v(" Installed "))],64)):(o(),c(m,{key:2},[v(" Pull ")],64))]),_:2},1032,["type","onClick","loading","disabled"])):u("",!0)]),_:2},1032,["data-source"])])):u("",!0)],2))),128)):u("",!0),"list"===E.value?(o(),c("div",We,[e(J,{"data-source":W.value,columns:R,pagination:!1,"row-key":e=>e.name,size:"small",scroll:{y:"calc(100% - 48px)"},"expanded-row-keys":Array.from(V.value),"expand-row-by-click":!1,onExpand:l[6]||(l[6]=(e,a)=>{e?V.value.add(a.name):V.value.delete(a.name)}),class:"models-list-table"},{expandedRowRender:r(({record:a})=>[i("div",qe,[i("div",Je,[(o(!0),c(m,null,p(X(a),t=>(o(),c("div",{key:t.fullTag,class:h(["expanded-tag-item",ee(t.size)])},[i("span",Qe,f(t.name),1),"latest"===t.name&&re(a)?(o(),c("span",Ye," ("+f(re(a)?.actualTag)+") ",1)):u("",!0),i("span",Ze,f(t.size),1),i("span",Xe,f(t.contextWindow||"-"),1),se(t.fullTag)?(o(),n(z,{key:1,size:"small",color:"success"},{default:r(()=>[e(y(j)),l[19]||(l[19]=v(" Installed "))]),_:1,__:[19]})):(o(),n(_,{key:2,type:"primary",size:"small",loading:A.value.has(t.fullTag),onClick:e=>ra(a.name,t.name)},{default:r(()=>[U.value[t.fullTag]?(o(),c(m,{key:0},[v(f(Math.round(U.value[t.fullTag].percent))+"% ",1)],64)):(o(),c(m,{key:1},[v(" Pull ")],64))]),_:2},1032,["loading","onClick"]))],2))),128))])])]),bodyCell:r(({column:a,record:t})=>["name"===a.key?(o(),c("div",ea,[i("code",null,f(t.name),1),te(t.name)?(o(),n(z,{key:0,size:"small",color:"success"},{default:r(()=>[e(y(j)),v(" "+f(ne(t.name).length)+" installed ",1)]),_:2},1024)):u("",!0)])):u("",!0),"description"===a.key?(o(),c("span",aa,f(t.description||"No description"),1)):u("",!0),"stats"===a.key?(o(),c("div",la,[i("span",ta,f(t.pullCount||"0")+" pulls",1),l[21]||(l[21]=i("span",{class:"stat-divider"},"•",-1)),i("span",sa,[v(f(oe(t))+" ",1),F.value<999||!L.value?(o(),c("span",na,"/"+f(t.tagCount||0),1)):u("",!0),l[20]||(l[20]=v(" versions "))])])):u("",!0),"sizeRange"===a.key?(o(),c("span",oa,f(ie(t)),1)):u("",!0),"actions"===a.key?(o(),n(ae,{key:4,size:"small"},{default:r(()=>[e(_,{type:"text",size:"small",onClick:e=>Q(t.name)},{icon:r(()=>[V.value.has(t.name)?(o(),n(y(T),{key:1})):(o(),n(y($),{key:0}))]),default:r(()=>[v(" "+f(V.value.has(t.name)?"Hide":"See")+" Versions ",1)]),_:2},1032,["onClick"]),e(_,{type:se(`${t.name}:latest`)||se(t.name)?"default":"primary",size:"small",onClick:e=>ra(t.name,"latest"),loading:A.value.has(`${t.name}:latest`),disabled:se(`${t.name}:latest`)||se(t.name)},{default:r(()=>[U.value[`${t.name}:latest`]?(o(),c(m,{key:0},[v(f(Math.round(U.value[`${t.name}:latest`].percent))+"% ",1)],64)):se(`${t.name}:latest`)||se(t.name)?(o(),n(y(j),{key:1})):(o(),c(m,{key:2},[v(" Pull Latest ")],64))]),_:2},1032,["type","onClick","loading","disabled"])]),_:2},1024)):u("",!0)]),_:1},8,["data-source","row-key","expanded-row-keys"])])):u("",!0)]),_:1},8,["spinning"])]),x.value?(o(),n(ce,{key:1,type:"error",message:x.value,closable:"",onClose:l[7]||(l[7]=e=>x.value=""),class:"error-alert"},null,8,["message"])):u("",!0)])]),_:1},8,["modelValue"])}}}),[["__scopeId","data-v-c19a8216"]]),ia={class:"ollama-model-manager"},ca={class:"action-bar"},ua={class:"models-section"},da={key:0,class:"model-name"},va={key:1,class:"model-size"},ma={key:2,class:"model-date"},pa=S(a({__name:"OllamaModelManager",setup(a){const l=t([]),s=t(!1),m=t(new Set),p=t(""),g=t(!1),h=[{title:"Model Name",key:"name",width:"40%"},{title:"Size",key:"size",width:"20%",align:"right"},{title:"Modified",key:"modified",width:"25%"},{title:"Actions",key:"actions",width:"15%",align:"center"}];async function b(){s.value=!0,await async function(){try{const e=await fetch("http://localhost:11434/api/tags");if(!e.ok)throw new Error("Failed to fetch models from Ollama");const a=await e.json();l.value=a.models||[]}catch(e){p.value=`Failed to fetch models: ${e instanceof Error?e.message:"Unknown error"}`,l.value=[]}}(),s.value=!1}function w(e){if(!e)return"0 B";const a=Math.floor(Math.log(e)/Math.log(1024));return`${(e/Math.pow(1024,a)).toFixed(1)} ${["B","KB","MB","GB","TB"][a]}`}function _(e){try{return new Date(e).toLocaleDateString()}catch{return"Unknown"}}return k(async()=>{await async function(){try{return(await fetch("http://localhost:11434/api/tags")).ok}catch{return!1}}()?await b():p.value="Cannot connect to Ollama. Make sure Ollama is running on localhost:11434"}),(a,t)=>{const k=d("a-button"),C=d("a-tag"),z=d("a-popconfirm"),O=d("a-table"),x=d("a-empty"),M=d("a-alert");return o(),c("div",ia,[i("div",ca,[e(k,{type:"primary",onClick:t[0]||(t[0]=e=>g.value=!0)},{icon:r(()=>[e(y(B))]),default:r(()=>[t[3]||(t[3]=v(" Download Ollama Models "))]),_:1,__:[3]}),e(k,{onClick:b,loading:s.value},{icon:r(()=>[e(y(F))]),default:r(()=>[t[4]||(t[4]=v(" Refresh "))]),_:1,__:[4]},8,["loading"])]),i("div",ua,[t[7]||(t[7]=i("h4",{class:"section-title"},"Installed Models",-1)),e(O,{columns:h,"data-source":l.value,pagination:!1,size:"small",loading:s.value,"row-key":"name",class:"models-table"},{bodyCell:r(({column:a,record:l})=>["name"===a.key?(o(),c("div",da,[i("code",null,f(l.name),1),l.details?.family?(o(),n(C,{key:0,size:"small",color:"blue"},{default:r(()=>[v(f(l.details.family),1)]),_:2},1024)):u("",!0)])):u("",!0),"size"===a.key?(o(),c("span",va,f(w(l.size)),1)):u("",!0),"modified"===a.key?(o(),c("span",ma,f(_(l.modified_at)),1)):u("",!0),"actions"===a.key?(o(),n(z,{key:3,title:"Are you sure you want to delete this model?",description:`This will permanently remove ${l.name} from your system.`,"ok-text":"Delete","cancel-text":"Cancel",onConfirm:e=>async function(e){m.value.add(e),p.value="";try{const a=await fetch("http://localhost:11434/api/delete",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e})});if(!a.ok)throw new Error(`Failed to remove model: ${a.statusText}`);P.success(`Successfully removed ${e}`),await b()}catch(a){p.value=`Failed to remove model: ${a instanceof Error?a.message:"Unknown error"}`}finally{m.value.delete(e)}}(l.name)},{default:r(()=>[e(k,{type:"text",danger:"",size:"small",loading:m.value.has(l.name)},{icon:r(()=>[e(y(L))]),default:r(()=>[t[5]||(t[5]=v(" Remove "))]),_:2,__:[5]},1032,["loading"])]),_:2},1032,["description","onConfirm"])):u("",!0)]),_:1},8,["data-source","loading"]),s.value||0!==l.value.length?u("",!0):(o(),n(x,{key:0,description:"No Ollama models installed",class:"empty-state"},{image:r(()=>t[6]||(t[6]=[i("div",{class:"empty-icon"},"📦",-1)])),_:1}))]),p.value?(o(),n(M,{key:0,type:"error",message:p.value,closable:"",onClose:t[1]||(t[1]=e=>p.value=""),class:"error-alert"},null,8,["message"])):u("",!0),e(ra,{modelValue:g.value,"onUpdate:modelValue":t[2]||(t[2]=e=>g.value=e),onModelsUpdated:b},null,8,["modelValue"])])}}}),[["__scopeId","data-v-6e882deb"]]),fa={class:"model-list"},ya={class:"model-header"},ga={class:"model-table"},ha=["onClick"],ba={class:"model-name"},ka={class:"model-source"},wa={class:"model-context"},_a={key:0},Ca={key:1,class:"text-secondary"},za={key:0,class:"model-cost-in"},Oa={key:0,class:"cost-value"},xa={key:1,class:"text-secondary"},Ma={key:1,class:"model-cost-out"},ja={key:0,class:"cost-value"},$a={key:1,class:"text-secondary"},Ta={class:"model-enviro-carbon"},Pa={key:0,class:"enviro-value"},Sa={key:1,class:"enviro-unknown"},Ba={class:"model-enviro-water"},Fa={key:0,class:"enviro-value"},La={key:1,class:"enviro-unknown"},Ea={class:"model-enviro-energy"},Va={key:0,class:"enviro-value"},Aa={key:1,class:"enviro-unknown"},Ua=S(a({__name:"ModelList",props:{models:{},providerId:{}},emits:["toggle-model"],setup(a){const s=a,g=E(),k=t("name"),w=t("asc"),_=l(()=>g.financialCostsEnabled),C=l(()=>g.environmentalCostsEnabled),z=t([]),O=t(""),x=l(()=>{const e=`${s.models.length}-${k.value}-${w.value}`;if(e===O.value&&z.value.length===s.models.length){const e=new Set(s.models.map(e=>e.id)),a=new Set(z.value.map(e=>e.id));if(e.size===a.size&&[...e].every(e=>a.has(e)))return z.value}const a=[...s.models].sort((e,a)=>{let l=0;switch(k.value){case"enabled":l=(e.enabled?1:0)-(a.enabled?1:0);break;case"name":l=e.displayName.localeCompare(a.displayName);break;case"source":l=(e.source||"").localeCompare(a.source||"");break;case"context":l=(e.capabilities?.contextWindow||0)-(a.capabilities?.contextWindow||0);break;case"inputCost":l=(e.capabilities?.inputCostPerToken||0)-(a.capabilities?.inputCostPerToken||0);break;case"outputCost":l=(e.capabilities?.outputCostPerToken||0)-(a.capabilities?.outputCostPerToken||0)}return"asc"===w.value?l:-l});return z.value=a,O.value=e,a});function M(e){k.value===e?w.value="asc"===w.value?"desc":"asc":(k.value=e,w.value="asc")}function j(e,a){if(!C.value)return"??";if(!V.hasDataForModel(e.provider,e.modelId))return"-";const l=V.calculateEnvironmentalCostUnsafe(e.provider,e.modelId,1e6)[a];if(0===l)return"-";switch(a){case"carbon":return l<1?`${(1e3*l).toFixed(0)}mg`:`${l.toFixed(1)}g`;case"water":return l<1?`${(1e3*l).toFixed(0)}μL`:`${l.toFixed(1)}mL`;case"energy":return l<1?`${(1e3*l).toFixed(0)}mWh`:`${l.toFixed(1)}Wh`;default:return"-"}}const $=R;return(a,l)=>{const t=d("a-switch"),s=d("a-tag");return o(),c("div",fa,[i("div",ya,[i("div",{class:"header-switch sortable",onClick:l[0]||(l[0]=e=>M("enabled"))},[l[7]||(l[7]=i("span",null,"Enabled",-1)),i("span",{class:h(["sort-indicator",{active:"enabled"===k.value}])},f("enabled"===k.value&&"asc"===w.value?"▲":"▼"),3)]),i("div",{class:"header-name sortable",onClick:l[1]||(l[1]=e=>M("name"))},[l[8]||(l[8]=i("span",null,"Model",-1)),i("span",{class:h(["sort-indicator",{active:"name"===k.value}])},f("name"===k.value&&"asc"===w.value?"▲":"▼"),3)]),i("div",{class:"header-source sortable",onClick:l[2]||(l[2]=e=>M("source"))},[l[9]||(l[9]=i("span",null,"Source",-1)),i("span",{class:h(["sort-indicator",{active:"source"===k.value}])},f("source"===k.value&&"asc"===w.value?"▲":"▼"),3)]),i("div",{class:"header-context sortable",onClick:l[3]||(l[3]=e=>M("context"))},[l[10]||(l[10]=i("span",null,"Context",-1)),i("span",{class:h(["sort-indicator",{active:"context"===k.value}])},f("context"===k.value&&"asc"===w.value?"▲":"▼"),3)]),_.value?(o(),c("div",{key:0,class:"header-cost-in sortable",onClick:l[4]||(l[4]=e=>M("inputCost"))},[l[11]||(l[11]=i("span",null,"Input $/1M",-1)),i("span",{class:h(["sort-indicator",{active:"inputCost"===k.value}])},f("inputCost"===k.value&&"asc"===w.value?"▲":"▼"),3)])):u("",!0),_.value?(o(),c("div",{key:1,class:"header-cost-out sortable",onClick:l[5]||(l[5]=e=>M("outputCost"))},[l[12]||(l[12]=i("span",null,"Output $/1M",-1)),i("span",{class:h(["sort-indicator",{active:"outputCost"===k.value}])},f("outputCost"===k.value&&"asc"===w.value?"▲":"▼"),3)])):u("",!0),l[13]||(l[13]=i("div",{class:"header-enviro-carbon"},[i("span",null,"CO₂")],-1)),l[14]||(l[14]=i("div",{class:"header-enviro-water"},[i("span",null,"💧")],-1)),l[15]||(l[15]=i("div",{class:"header-enviro-energy"},[i("span",null,"⚡")],-1))]),i("div",ga,[(o(!0),c(m,null,p(x.value,d=>{return o(),c("div",{key:d.id,class:"model-row",onClick:e=>a.$emit("toggle-model",d.id,!d.enabled)},[i("div",{class:"model-switch",onClick:l[6]||(l[6]=b(()=>{},["stop"]))},[e(t,{checked:d.enabled,size:"small",onChange:e=>a.$emit("toggle-model",d.id,e),"data-testid":"model-toggle","data-provider":d.provider,"data-model":d.modelId,"aria-label":`${d.enabled?"Disable":"Enable"} model ${d.modelId}`},null,8,["checked","onChange","data-provider","data-model","aria-label"])]),i("div",ba,[i("code",null,f(d.modelId),1)]),i("div",ka,[d.source?(o(),n(s,{key:0,size:"small",color:"cyan"},{default:r(()=>[v(f(d.source),1)]),_:2},1024)):u("",!0)]),i("div",wa,[d.capabilities?.contextWindow?(o(),c("span",_a,f((m=d.capabilities.contextWindow,m>=1e6?(m/1e6).toFixed(1)+"M":m>=1e3?(m/1e3).toFixed(0)+"K":m.toString())),1)):(o(),c("span",Ca,"-"))]),_.value?(o(),c("div",za,[d.capabilities?.inputCostPerToken?(o(),c("span",Oa," $"+f(y($)(d.capabilities.inputCostPerToken)),1)):(o(),c("span",xa,"-"))])):u("",!0),_.value?(o(),c("div",Ma,[d.capabilities?.outputCostPerToken?(o(),c("span",ja," $"+f(y($)(d.capabilities.outputCostPerToken)),1)):(o(),c("span",$a,"-"))])):u("",!0),i("div",Ta,[C.value?(o(),c("span",Pa,f(j(d,"carbon")),1)):(o(),c("span",Sa,"??"))]),i("div",Ba,[C.value?(o(),c("span",Fa,f(j(d,"water")),1)):(o(),c("span",La,"??"))]),i("div",Ea,[C.value?(o(),c("span",Va,f(j(d,"energy")),1)):(o(),c("span",Aa,"??"))])],8,ha);var m}),128))])])}}}),[["__scopeId","data-v-7e5a1674"]]),Da={class:"models-view","data-testid":"page-models"},Ia={class:"page-header"},Na={key:2,class:"discovery-status-bar"},Ha={class:"source-name"},Ra=["onClick","data-testid","aria-label"],Ga={class:"search-filter-bar"},Ka={class:"control-bar"},Wa={class:"left-controls"},qa={class:"stats"},Ja={class:"provider-header"},Qa={class:"provider-info"},Ya={key:0,class:"provider-summary"},Za=S(a({__name:"ModelsView",setup(a){const s=O(),g=t(""),h=t(""),M=t("all"),T=t(!1),P=t(!1),S=t(""),B=t([]),E=t(null),V=t([]);let H=null;const R=l(()=>{const e={};for(const[a,l]of Object.entries(s.modelsByProvider))e[a]=l.filter(e=>e.enabled).length;return e}),G=l(()=>{const e=h.value.toLowerCase(),a={};for(const[l,t]of Object.entries(s.modelsByProvider)){let s=t;e&&(s=s.filter(a=>a.displayName.toLowerCase().includes(e)||a.modelId.toLowerCase().includes(e)||l.toLowerCase().includes(e))),"enabled"===M.value?s=s.filter(e=>e.enabled):"disabled"===M.value&&(s=s.filter(e=>!e.enabled)),s.length>0&&(a[l]=s)}return a}),K=l(()=>s.allModels.length),W=l(()=>s.enabledModels.length),q=l(()=>g.value?`No models found matching "${g.value}"`:"all"!==M.value?`No ${M.value} models found`:'No models available. Click "Refresh Models" to discover models.'),J=l(()=>{if(!S.value)return!1;const e=S.value.toLowerCase();return e.includes("ollama")&&(e.includes("failed to fetch")||e.includes("networkerror when attempting to fetch"))&&!e.includes("litellm")&&!e.includes("openrouter")}),Q=l(()=>{const e=s.modelsByProvider["ollama-chat"]?.length>0||s.modelsByProvider["ollama-generate"]?.length>0,a=s.discoveryStatus.some(e=>"ollama"===e.id);return e||a||J.value}),Y=l(()=>!!s.modelsByProvider.openrouter),Z=l(()=>{const e=Object.keys(s.modelsByProvider).length;return B.value.length===e&&e>0}),X=w(I),ee=w(N);function ae(e){const a=D.getProvider(e);return a?.name||e}function te(e){return{litellm:"LiteLLM (Anthropic & OpenAI models & prices)",openrouter:"OpenRouter",ollama:"Ollama"}[e]||e}function se(e){const a=function(e){return R.value[e]||0}(e),l=(s.modelsByProvider[e]||[]).length;return 0===a?"default":a===l?"success":"warning"}function ne(e){const a=G.value[e]||[];return a.length>0&&a.every(e=>e.enabled)}function re(e){const a=G.value[e]||[];return a.length>0&&a.every(e=>!e.enabled)}function ie(){Z.value?B.value=[]:B.value=Object.keys(s.modelsByProvider)}async function ce(e,a){await s.toggleModel(e,a)}async function ue(e,a){const l=G.value[e]||[];for(const t of l)await s.toggleModel(t.id,a)}async function de(){for(const e of Object.values(G.value))for(const a of e)a.enabled||await s.toggleModel(a.id,!0)}async function ve(){for(const e of Object.values(G.value))for(const a of e)a.enabled&&await s.toggleModel(a.id,!1)}async function me(){try{await x.enableOpenRouterFavorites(),B.value=Object.keys(s.modelsByProvider)}catch(e){A.error("Failed to enable OpenRouter favorites",e),alert("Failed to enable OpenRouter favorites: "+(e instanceof Error?e.message:"Unknown error"))}}async function pe(){T.value=!0,S.value="";try{const e=await s.discoverModels(!0);e.errors.length>0&&(S.value=`Some sources failed: ${e.errors.join("; ")}`)}catch(e){A.error("Failed to refresh models",e),S.value="Failed to refresh models. Please check your connection and try again."}finally{T.value=!1}}async function fe(){try{await s.refreshSource("ollama")}catch(e){A.error("Failed to refresh Ollama models after update",e)}}async function ye(){if(confirm("This will remove all models and re-discover them from scratch. Any custom model configurations will be lost. Continue?")){P.value=!0,S.value="";try{await s.clearModels();const e=await s.discoverModels(!0);e.errors.length>0&&(S.value=`Some sources failed: ${e.errors.join("; ")}`)}catch(e){A.error("Failed to clear and refresh models",e),S.value="Failed to clear and refresh models. Please check your connection and try again."}finally{P.value=!1}}}return _(()=>{var e;e=g.value,H&&clearTimeout(H),H=setTimeout(()=>{h.value=e},300)}),k(async()=>{0===s.allModels.length&&await pe(),B.value=[]}),C(()=>{g.value="",B.value=[],S.value=""}),(a,l)=>{const t=d("a-button"),k=d("a-space"),w=d("a-alert"),_=d("a-tag"),C=d("a-input-search"),O=d("a-radio-button"),x=d("a-radio-group"),D=d("a-divider"),I=d("a-menu-item"),N=d("a-menu"),H=d("a-dropdown"),ge=d("a-collapse-panel"),he=d("a-collapse"),be=d("a-empty");return o(),c("div",Da,[i("div",Ia,[l[10]||(l[10]=i("div",{class:"header-content"},[i("h1",null,"Model Management"),i("p",{class:"description"},"Configure and enable LLM models for testing")],-1)),e(k,null,{default:r(()=>[e(t,{type:"primary",onClick:pe,loading:T.value,"data-testid":"btn-refresh-models","aria-label":"Refresh available models"},{icon:r(()=>[e(y(F))]),default:r(()=>[l[8]||(l[8]=v(" Refresh Models "))]),_:1,__:[8]},8,["loading"]),e(t,{danger:"",onClick:ye,loading:P.value,"data-testid":"btn-clear-refresh-models","aria-label":"Clear all models and refresh"},{icon:r(()=>[e(y(L))]),default:r(()=>[l[9]||(l[9]=v(" Clear and Refresh Models "))]),_:1,__:[9]},8,["loading"])]),_:1})]),S.value&&!J.value?(o(),n(w,{key:0,type:"error",message:S.value,closable:"",onClose:l[0]||(l[0]=e=>S.value=""),class:"error-alert"},null,8,["message"])):u("",!0),J.value?(o(),n(w,{key:1,type:"info",closable:"",onClose:l[1]||(l[1]=e=>S.value=""),class:"ollama-info-alert"},{message:r(()=>l[11]||(l[11]=[i("div",{class:"ollama-message"},[v(" Ollama is not running on this computer. To audit local LLMs, install "),i("a",{href:"https://ollama.com",target:"_blank",rel:"noopener noreferrer"},"Ollama"),v(". ")],-1)])),_:1})):u("",!0),y(s).discoveryStatus.length>0?(o(),c("div",Na,[l[12]||(l[12]=i("span",{class:"status-label"},"Sources:",-1)),(o(!0),c(m,null,p(y(s).discoveryStatus,a=>{return o(),c("div",{key:a.id,class:"source-status-compact"},[i("span",Ha,f(te(a.id)),1),e(_,{color:(l=a.status,{idle:"default",loading:"processing",success:"success",error:"error"}[l]||"default"),size:"small"},{default:r(()=>["success"===a.status&&a.modelCount?(o(),c(m,{key:0},[v(f(a.modelCount),1)],64)):"error"===a.status?(o(),c("span",{key:1,onClick:e=>async function(e){E.value=e,S.value="";try{await s.refreshSource(e)}catch(a){A.error("Failed to retry source",a,{sourceId:e}),S.value=`Failed to refresh ${te(e)}: ${a instanceof Error?a.message:"Unknown error"}`}finally{E.value=null}}(a.id),style:{cursor:"pointer"},"data-testid":`retry-source-${a.id}`,"aria-label":`Retry loading models from ${te(a.id)}`},"⟳ retry",8,Ra)):(o(),c(m,{key:2},[v(f(a.status),1)],64))]),_:2},1032,["color"])]);var l}),128))])):u("",!0),i("div",Ga,[e(C,{value:g.value,"onUpdate:value":l[2]||(l[2]=e=>g.value=e),placeholder:"Search models by name, provider, or ID...","allow-clear":"",size:"large",class:"search-input","data-testid":"input-model-search","aria-label":"Search models",loading:g.value!==h.value},null,8,["value","loading"]),e(x,{value:M.value,"onUpdate:value":l[3]||(l[3]=e=>M.value=e),"button-style":"solid",size:"large"},{default:r(()=>[e(O,{value:"all"},{default:r(()=>l[13]||(l[13]=[v("All")])),_:1,__:[13]}),e(O,{value:"enabled"},{default:r(()=>l[14]||(l[14]=[v("Enabled")])),_:1,__:[14]}),e(O,{value:"disabled"},{default:r(()=>l[15]||(l[15]=[v("Disabled")])),_:1,__:[15]})]),_:1},8,["value"])]),i("div",Ka,[i("div",Wa,[e(t,{type:"text",size:"small",onClick:ie},{icon:r(()=>[(o(),n(z(Z.value?ee.value:X.value)))]),default:r(()=>[v(" "+f(Z.value?"Collapse All":"Expand All"),1)]),_:1}),e(D,{type:"vertical"}),e(H,null,{overlay:r(()=>[e(N,null,{default:r(()=>[e(I,{onClick:de},{default:r(()=>[e(y(j)),l[17]||(l[17]=v(" Enable All Models "))]),_:1,__:[17]}),e(I,{onClick:ve},{default:r(()=>[e(y(U)),l[18]||(l[18]=v(" Disable All Models "))]),_:1,__:[18]}),Y.value?(o(),n(I,{key:0,onClick:me},{default:r(()=>[e(y(oe)),l[19]||(l[19]=v(" Enable OpenRouter Favorites "))]),_:1,__:[19]})):u("",!0)]),_:1})]),default:r(()=>[e(t,{type:"text",size:"small"},{default:r(()=>[l[16]||(l[16]=v(" Bulk Actions ")),e(y($))]),_:1,__:[16]})]),_:1})]),i("div",qa,[i("span",null,f(W.value)+" of "+f(K.value)+" models enabled",1)])]),e(he,{activeKey:B.value,"onUpdate:activeKey":l[6]||(l[6]=e=>B.value=e),bordered:!1,class:"provider-collapse"},{default:r(()=>[(o(!0),c(m,null,p(G.value,(a,u)=>(o(),n(ge,{key:u},{header:r(()=>[i("div",Ja,[i("div",Qa,[i("strong",null,f(ae(u)),1),B.value.includes(u)?(o(),c(m,{key:1},[e(_,{size:"small",color:"blue"},{default:r(()=>[v(f(a.length)+" models",1)]),_:2},1024),e(_,{size:"small",color:se(u)},{default:r(()=>[v(f(R.value[u]||0)+" enabled ",1)]),_:2},1032,["color"])],64)):(o(),c("span",Ya,f(R.value[u]||0)+" / "+f((y(s).modelsByProvider[u]||[]).length)+" enabled ",1))]),e(H,{onClick:l[5]||(l[5]=b(()=>{},["stop"]))},{overlay:r(()=>[e(N,null,{default:r(()=>[e(I,{onClick:e=>ue(u,!0),disabled:ne(u)},{default:r(()=>[v(" Enable All in "+f(ae(u)),1)]),_:2},1032,["onClick","disabled"]),e(I,{onClick:e=>ue(u,!1),disabled:re(u)},{default:r(()=>[v(" Disable All in "+f(ae(u)),1)]),_:2},1032,["onClick","disabled"])]),_:2},1024)]),default:r(()=>[e(t,{type:"text",size:"small",onClick:l[4]||(l[4]=b(()=>{},["stop"]))},{default:r(()=>[e(y(le))]),_:1})]),_:2},1024)])]),default:r(()=>[e(Ua,{models:a,"provider-id":u,onToggleModel:ce},null,8,["models","provider-id"])]),_:2},1024))),128))]),_:1},8,["activeKey"]),0===Object.keys(G.value).length?(o(),n(be,{key:3,description:q.value,class:"empty-state"},null,8,["description"])):u("",!0),Q.value?(o(),n(he,{key:4,activeKey:V.value,"onUpdate:activeKey":l[7]||(l[7]=e=>V.value=e),bordered:!1,class:"ollama-manager-collapse"},{default:r(()=>[e(ge,{key:"ollama"},{header:r(()=>l[20]||(l[20]=[i("div",{class:"ollama-header"},[i("strong",null,"Ollama Model Management"),i("span",{class:"ollama-description"},"Download and manage local Ollama models")],-1)])),default:r(()=>[e(pa,{onModelsUpdated:fe})]),_:1})]),_:1},8,["activeKey"])):u("",!0)])}}}),[["__scopeId","data-v-dc2ef136"]]);export{Za as default};
